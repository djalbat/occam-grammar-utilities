'use strict';

var ImplicitlyLeftRecursiveRule = require('./rule/implicitlyLeftRecursive'),
    ImmediatelyLeftRecursiveRule = require('./rule/immediatelyLeftRecursive');

function detectImplicitLeftRecursion(rules) {
  var leftRecursiveRuleName = null;

  var nonImmediatelyLeftRecursiveRules = [];

  rules.some(function (rule, index) {
    var begin = 0,
        end = index,
        ///
    previousNonLeftRecursiveRules = nonImmediatelyLeftRecursiveRules.slice(begin, end),
        previousRules = previousNonLeftRecursiveRules; ///

    var implicitlyLeftRecursiveRule = ImplicitlyLeftRecursiveRule.fromRuleAndPreviousRules(rule, previousRules);

    if (implicitlyLeftRecursiveRule !== null) {
      var implicitlyLeftRecursiveRuleName = implicitlyLeftRecursiveRule.getName();

      leftRecursiveRuleName = implicitlyLeftRecursiveRuleName; ///

      return true;
    }

    var immediatelyLeftRecursiveRule = ImmediatelyLeftRecursiveRule.fromRule(rule);

    if (immediatelyLeftRecursiveRule !== null) {
      var immediatelyLeftRecursiveRuleName = immediatelyLeftRecursiveRule.getName();

      leftRecursiveRuleName = immediatelyLeftRecursiveRuleName; ///

      return true;
    }
  });

  return leftRecursiveRuleName;
}

module.exports = detectImplicitLeftRecursion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9kZXRlY3RJbXBsaWNpdExlZnRSZWN1cnNpb24uanMiXSwibmFtZXMiOlsiSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVxdWlyZSIsIkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJkZXRlY3RJbXBsaWNpdExlZnRSZWN1cnNpb24iLCJydWxlcyIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsIm5vbkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwic29tZSIsInJ1bGUiLCJpbmRleCIsImJlZ2luIiwiZW5kIiwicHJldmlvdXNOb25MZWZ0UmVjdXJzaXZlUnVsZXMiLCJzbGljZSIsInByZXZpb3VzUnVsZXMiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJmcm9tUnVsZUFuZFByZXZpb3VzUnVsZXMiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiZ2V0TmFtZSIsImltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJmcm9tUnVsZSIsImltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsOEJBQThCQyxRQUFRLGdDQUFSLENBQXBDO0FBQUEsSUFDTUMsK0JBQStCRCxRQUFRLGlDQUFSLENBRHJDOztBQUdBLFNBQVNFLDJCQUFULENBQXFDQyxLQUFyQyxFQUE0QztBQUMxQyxNQUFJQyx3QkFBd0IsSUFBNUI7O0FBRUEsTUFBTUMsbUNBQW1DLEVBQXpDOztBQUVBRixRQUFNRyxJQUFOLENBQVcsVUFBU0MsSUFBVCxFQUFlQyxLQUFmLEVBQXNCO0FBQy9CLFFBQU1DLFFBQVEsQ0FBZDtBQUFBLFFBQ01DLE1BQU1GLEtBRFo7QUFBQSxRQUNvQjtBQUNkRyxvQ0FBZ0NOLGlDQUFpQ08sS0FBakMsQ0FBdUNILEtBQXZDLEVBQThDQyxHQUE5QyxDQUZ0QztBQUFBLFFBR01HLGdCQUFnQkYsNkJBSHRCLENBRCtCLENBSXVCOztBQUV0RCxRQUFNRyw4QkFBOEJmLDRCQUE0QmdCLHdCQUE1QixDQUFxRFIsSUFBckQsRUFBMkRNLGFBQTNELENBQXBDOztBQUVBLFFBQUlDLGdDQUFnQyxJQUFwQyxFQUEwQztBQUN4QyxVQUFNRSxrQ0FBa0NGLDRCQUE0QkcsT0FBNUIsRUFBeEM7O0FBRUFiLDhCQUF3QlksK0JBQXhCLENBSHdDLENBR2tCOztBQUUxRCxhQUFPLElBQVA7QUFDRDs7QUFFRCxRQUFNRSwrQkFBK0JqQiw2QkFBNkJrQixRQUE3QixDQUFzQ1osSUFBdEMsQ0FBckM7O0FBRUEsUUFBSVcsaUNBQWlDLElBQXJDLEVBQTJDO0FBQ3pDLFVBQU1FLG1DQUFtQ0YsNkJBQTZCRCxPQUE3QixFQUF6Qzs7QUFFQWIsOEJBQXdCZ0IsZ0NBQXhCLENBSHlDLENBR2tCOztBQUUzRCxhQUFPLElBQVA7QUFDRDtBQUNGLEdBekJEOztBQTJCQSxTQUFPaEIscUJBQVA7QUFDRDs7QUFFRGlCLE9BQU9DLE9BQVAsR0FBaUJwQiwyQkFBakIiLCJmaWxlIjoiZGV0ZWN0SW1wbGljaXRMZWZ0UmVjdXJzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSByZXF1aXJlKCcuL3J1bGUvaW1wbGljaXRseUxlZnRSZWN1cnNpdmUnKSxcbiAgICAgIEltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSByZXF1aXJlKCcuL3J1bGUvaW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlJyk7XG5cbmZ1bmN0aW9uIGRldGVjdEltcGxpY2l0TGVmdFJlY3Vyc2lvbihydWxlcykge1xuICBsZXQgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbnVsbDtcblxuICBjb25zdCBub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlcyA9IFtdO1xuXG4gIHJ1bGVzLnNvbWUoZnVuY3Rpb24ocnVsZSwgaW5kZXgpIHtcbiAgICBjb25zdCBiZWdpbiA9IDAsXG4gICAgICAgICAgZW5kID0gaW5kZXgsICAvLy9cbiAgICAgICAgICBwcmV2aW91c05vbkxlZnRSZWN1cnNpdmVSdWxlcyA9IG5vbkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLnNsaWNlKGJlZ2luLCBlbmQpLFxuICAgICAgICAgIHByZXZpb3VzUnVsZXMgPSBwcmV2aW91c05vbkxlZnRSZWN1cnNpdmVSdWxlczsgIC8vL1xuXG4gICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlID0gSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlLmZyb21SdWxlQW5kUHJldmlvdXNSdWxlcyhydWxlLCBwcmV2aW91c1J1bGVzKTtcblxuICAgIGlmIChpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAgLy8vXG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBJbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlLmZyb21SdWxlKHJ1bGUpO1xuXG4gICAgaWYgKGltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZS5nZXROYW1lKCk7XG5cbiAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAgLy8vXG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxlZnRSZWN1cnNpdmVSdWxlTmFtZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZXRlY3RJbXBsaWNpdExlZnRSZWN1cnNpb247XG4iXX0=