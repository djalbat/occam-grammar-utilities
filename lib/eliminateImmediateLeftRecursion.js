'use strict';

var RightRecursiveRule = require('./rule/rightRecursive'),
    ImmediatelyLeftRecursiveRule = require('./rule/immediatelyLeftRecursive'),
    NonImmediatelyLeftRecursiveRule = require('./rule/nonImmediatelyLeftRecursive');

function eliminateImmediateLeftRecursion(rules) {
  var rightRecursiveRules = [],
      nonImmediatelyLeftRecursiveRules = [];

  rules.forEach(function (rule) {
    var immediatelyLeftRecursiveRule = ImmediatelyLeftRecursiveRule.fromRule(rule);

    if (immediatelyLeftRecursiveRule === null) {
      var nonImmediatelyLeftRecursiveRule = rule; ///

      nonImmediatelyLeftRecursiveRules.push(nonImmediatelyLeftRecursiveRule);
    } else {
      var rightRecursiveRule = RightRecursiveRule.fromImmediatelyLeftRecursiveRule(immediatelyLeftRecursiveRule),
          _nonImmediatelyLeftRecursiveRule = NonImmediatelyLeftRecursiveRule.fromImmediatelyLeftRecursiveRule(immediatelyLeftRecursiveRule);

      rightRecursiveRules.push(rightRecursiveRule);

      nonImmediatelyLeftRecursiveRules.push(_nonImmediatelyLeftRecursiveRule);
    }
  });

  rules = [].concat(nonImmediatelyLeftRecursiveRules).concat(rightRecursiveRules);

  return rules;
}

module.exports = eliminateImmediateLeftRecursion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9lbGltaW5hdGVJbW1lZGlhdGVMZWZ0UmVjdXJzaW9uLmpzIl0sIm5hbWVzIjpbIlJpZ2h0UmVjdXJzaXZlUnVsZSIsInJlcXVpcmUiLCJJbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlIiwiTm9uSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSIsImVsaW1pbmF0ZUltbWVkaWF0ZUxlZnRSZWN1cnNpb24iLCJydWxlcyIsInJpZ2h0UmVjdXJzaXZlUnVsZXMiLCJub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlcyIsImZvckVhY2giLCJydWxlIiwiaW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSIsImZyb21SdWxlIiwibm9uSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSIsInB1c2giLCJyaWdodFJlY3Vyc2l2ZVJ1bGUiLCJmcm9tSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSIsImNvbmNhdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLHFCQUFxQkMsUUFBUSx1QkFBUixDQUEzQjtBQUFBLElBQ01DLCtCQUErQkQsUUFBUSxpQ0FBUixDQURyQztBQUFBLElBRU1FLGtDQUFrQ0YsUUFBUSxvQ0FBUixDQUZ4Qzs7QUFJQSxTQUFTRywrQkFBVCxDQUF5Q0MsS0FBekMsRUFBZ0Q7QUFDOUMsTUFBTUMsc0JBQXNCLEVBQTVCO0FBQUEsTUFDTUMsbUNBQW1DLEVBRHpDOztBQUdBRixRQUFNRyxPQUFOLENBQWMsVUFBU0MsSUFBVCxFQUFlO0FBQzNCLFFBQU1DLCtCQUErQlIsNkJBQTZCUyxRQUE3QixDQUFzQ0YsSUFBdEMsQ0FBckM7O0FBRUEsUUFBSUMsaUNBQWlDLElBQXJDLEVBQTJDO0FBQ3pDLFVBQU1FLGtDQUFrQ0gsSUFBeEMsQ0FEeUMsQ0FDTTs7QUFFL0NGLHVDQUFpQ00sSUFBakMsQ0FBc0NELCtCQUF0QztBQUNELEtBSkQsTUFJTztBQUNMLFVBQU1FLHFCQUFxQmQsbUJBQW1CZSxnQ0FBbkIsQ0FBb0RMLDRCQUFwRCxDQUEzQjtBQUFBLFVBQ01FLG1DQUFrQ1QsZ0NBQWdDWSxnQ0FBaEMsQ0FBaUVMLDRCQUFqRSxDQUR4Qzs7QUFHQUosMEJBQW9CTyxJQUFwQixDQUF5QkMsa0JBQXpCOztBQUVBUCx1Q0FBaUNNLElBQWpDLENBQXNDRCxnQ0FBdEM7QUFDRDtBQUNGLEdBZkQ7O0FBaUJBUCxVQUFRLEdBQUdXLE1BQUgsQ0FBVVQsZ0NBQVYsRUFBNENTLE1BQTVDLENBQW1EVixtQkFBbkQsQ0FBUjs7QUFFQSxTQUFPRCxLQUFQO0FBQ0Q7O0FBRURZLE9BQU9DLE9BQVAsR0FBaUJkLCtCQUFqQiIsImZpbGUiOiJlbGltaW5hdGVJbW1lZGlhdGVMZWZ0UmVjdXJzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBSaWdodFJlY3Vyc2l2ZVJ1bGUgPSByZXF1aXJlKCcuL3J1bGUvcmlnaHRSZWN1cnNpdmUnKSxcbiAgICAgIEltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSByZXF1aXJlKCcuL3J1bGUvaW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlJyksXG4gICAgICBOb25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlID0gcmVxdWlyZSgnLi9ydWxlL25vbkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZScpO1xuXG5mdW5jdGlvbiBlbGltaW5hdGVJbW1lZGlhdGVMZWZ0UmVjdXJzaW9uKHJ1bGVzKSB7XG4gIGNvbnN0IHJpZ2h0UmVjdXJzaXZlUnVsZXMgPSBbXSxcbiAgICAgICAgbm9uSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSBbXTtcblxuICBydWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICBjb25zdCBpbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlID0gSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZS5mcm9tUnVsZShydWxlKTtcblxuICAgIGlmIChpbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlID09PSBudWxsKSB7XG4gICAgICBjb25zdCBub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZTsgIC8vL1xuXG4gICAgICBub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKG5vbkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByaWdodFJlY3Vyc2l2ZVJ1bGUgPSBSaWdodFJlY3Vyc2l2ZVJ1bGUuZnJvbUltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgICAgICBub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlID0gTm9uSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZS5mcm9tSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZShpbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgICAgcmlnaHRSZWN1cnNpdmVSdWxlcy5wdXNoKHJpZ2h0UmVjdXJzaXZlUnVsZSk7XG5cbiAgICAgIG5vbkltbWVkaWF0ZWx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLnB1c2gobm9uSW1tZWRpYXRlbHlMZWZ0UmVjdXJzaXZlUnVsZSk7XG4gICAgfVxuICB9KTtcblxuICBydWxlcyA9IFtdLmNvbmNhdChub25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVSdWxlcykuY29uY2F0KHJpZ2h0UmVjdXJzaXZlUnVsZXMpO1xuXG4gIHJldHVybiBydWxlcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlbGltaW5hdGVJbW1lZGlhdGVMZWZ0UmVjdXJzaW9uO1xuIl19