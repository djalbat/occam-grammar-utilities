'use strict';

var ruleNameUtilities = require('./utilities/ruleName'),
    RightRecursiveNode = require('./node/rightRecursive'),
    NonLeftRecursiveNode = require('./node/nonLeftRecursive');

var ruleNameFromNonLeftRecursiveRuleName = ruleNameUtilities.ruleNameFromNonLeftRecursiveRuleName,
    checkNonLeftRecursiveRuleNameMatchesRuleName = ruleNameUtilities.checkNonLeftRecursiveRuleNameMatchesRuleName;


function removeIntermediateNodes(node) {
  removeOrRenameNonLeftRecursiveNodes(node);

  removeRightRecursiveNodes(node);
}

module.exports = removeIntermediateNodes;

function removeRightRecursiveNodes(node) {
  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var nonTerminalNode = node; ///

    var childNodes = nonTerminalNode.getChildNodes();

    childNodes = removeRightRecursiveChildNodes(childNodes);

    nonTerminalNode.setChildNodes(childNodes);
  }
}

function removeRightRecursiveChildNodes(childNodes) {
  childNodes = childNodes.reduce(function (childNodes, childNode) {
    var childNodeRightRecursiveNode = childNode instanceof RightRecursiveNode;

    if (childNodeRightRecursiveNode) {
      var childNodeChildNodes = childNode.getChildNodes();

      childNodeChildNodes = removeRightRecursiveChildNodes(childNodeChildNodes);

      childNodes = childNodes.concat(childNodeChildNodes);
    } else {
      removeRightRecursiveNodes(childNode);

      childNodes.push(childNode);
    }

    return childNodes;
  }, []);

  return childNodes;
}

function removeOrRenameNonLeftRecursiveNodes(node) {
  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var nonTerminalNode = node,
        ///
    ruleName = nonTerminalNode.getRuleName();

    var childNodes = nonTerminalNode.getChildNodes();

    childNodes = removeOrRenameNonLeftRecursiveChildNodes(childNodes, ruleName);

    nonTerminalNode.setChildNodes(childNodes);
  }
}

function removeOrRenameNonLeftRecursiveChildNodes(childNodes, ruleName) {
  var childNodesLength = childNodes.length;

  childNodes = childNodes.reduce(function (childNodes, childNode) {
    var childNodeNonLeftRecursiveNode = childNode instanceof NonLeftRecursiveNode;

    if (childNodeNonLeftRecursiveNode) {
      var nonLeftRecursiveNode = childNode,
          ///
      nonLeftRecursiveNodeRuleName = nonLeftRecursiveNode.getRuleName(),
          nonLeftRecursiveRuleName = nonLeftRecursiveNodeRuleName,
          ///
      nonLeftRecursiveRuleNameMatchesRuleName = checkNonLeftRecursiveRuleNameMatchesRuleName(nonLeftRecursiveRuleName, ruleName);

      if (nonLeftRecursiveRuleNameMatchesRuleName) {
        if (childNodesLength > 1) {
          var _ruleName = ruleNameFromNonLeftRecursiveRuleName(nonLeftRecursiveRuleName);

          childNode.setRuleName(_ruleName);

          removeOrRenameNonLeftRecursiveNodes(childNode);

          childNodes.push(childNode);
        } else {
          var childNodeChildNodes = childNode.getChildNodes();

          childNodeChildNodes = removeOrRenameNonLeftRecursiveChildNodes(childNodeChildNodes);

          childNodes = childNodes.concat(childNodeChildNodes);
        }
      } else {
        var _ruleName2 = ruleNameFromNonLeftRecursiveRuleName(nonLeftRecursiveRuleName);

        childNode.setRuleName(_ruleName2);

        removeOrRenameNonLeftRecursiveNodes(childNode);

        childNodes.push(childNode);
      }
    } else {
      removeOrRenameNonLeftRecursiveNodes(childNode);

      childNodes.push(childNode);
    }

    return childNodes;
  }, []);

  return childNodes;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9yZW1vdmVJbnRlcm1lZGlhdGVOb2Rlcy5qcyJdLCJuYW1lcyI6WyJydWxlTmFtZVV0aWxpdGllcyIsInJlcXVpcmUiLCJSaWdodFJlY3Vyc2l2ZU5vZGUiLCJOb25MZWZ0UmVjdXJzaXZlTm9kZSIsInJ1bGVOYW1lRnJvbU5vbkxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImNoZWNrTm9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lTWF0Y2hlc1J1bGVOYW1lIiwicmVtb3ZlSW50ZXJtZWRpYXRlTm9kZXMiLCJub2RlIiwicmVtb3ZlT3JSZW5hbWVOb25MZWZ0UmVjdXJzaXZlTm9kZXMiLCJyZW1vdmVSaWdodFJlY3Vyc2l2ZU5vZGVzIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsIm5vblRlcm1pbmFsTm9kZSIsImNoaWxkTm9kZXMiLCJnZXRDaGlsZE5vZGVzIiwicmVtb3ZlUmlnaHRSZWN1cnNpdmVDaGlsZE5vZGVzIiwic2V0Q2hpbGROb2RlcyIsInJlZHVjZSIsImNoaWxkTm9kZSIsImNoaWxkTm9kZVJpZ2h0UmVjdXJzaXZlTm9kZSIsImNoaWxkTm9kZUNoaWxkTm9kZXMiLCJjb25jYXQiLCJwdXNoIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsInJlbW92ZU9yUmVuYW1lTm9uTGVmdFJlY3Vyc2l2ZUNoaWxkTm9kZXMiLCJjaGlsZE5vZGVzTGVuZ3RoIiwibGVuZ3RoIiwiY2hpbGROb2RlTm9uTGVmdFJlY3Vyc2l2ZU5vZGUiLCJub25MZWZ0UmVjdXJzaXZlTm9kZSIsIm5vbkxlZnRSZWN1cnNpdmVOb2RlUnVsZU5hbWUiLCJub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWVNYXRjaGVzUnVsZU5hbWUiLCJzZXRSdWxlTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsb0JBQW9CQyxRQUFRLHNCQUFSLENBQTFCO0FBQUEsSUFDTUMscUJBQXFCRCxRQUFRLHVCQUFSLENBRDNCO0FBQUEsSUFFTUUsdUJBQXVCRixRQUFRLHlCQUFSLENBRjdCOztJQUlRRyxvQyxHQUF1RkosaUIsQ0FBdkZJLG9DO0lBQXNDQyw0QyxHQUFpREwsaUIsQ0FBakRLLDRDOzs7QUFFOUMsU0FBU0MsdUJBQVQsQ0FBaUNDLElBQWpDLEVBQXVDO0FBQ3JDQyxzQ0FBb0NELElBQXBDOztBQUVBRSw0QkFBMEJGLElBQTFCO0FBQ0Q7O0FBRURHLE9BQU9DLE9BQVAsR0FBaUJMLHVCQUFqQjs7QUFFQSxTQUFTRyx5QkFBVCxDQUFtQ0YsSUFBbkMsRUFBeUM7QUFDdkMsTUFBTUssc0JBQXNCTCxLQUFLTSxpQkFBTCxFQUE1Qjs7QUFFQSxNQUFJRCxtQkFBSixFQUF5QjtBQUN2QixRQUFNRSxrQkFBa0JQLElBQXhCLENBRHVCLENBQ087O0FBRTlCLFFBQUlRLGFBQWFELGdCQUFnQkUsYUFBaEIsRUFBakI7O0FBRUFELGlCQUFhRSwrQkFBK0JGLFVBQS9CLENBQWI7O0FBRUFELG9CQUFnQkksYUFBaEIsQ0FBOEJILFVBQTlCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTRSw4QkFBVCxDQUF3Q0YsVUFBeEMsRUFBb0Q7QUFDbERBLGVBQWFBLFdBQVdJLE1BQVgsQ0FBa0IsVUFBQ0osVUFBRCxFQUFhSyxTQUFiLEVBQTJCO0FBQ3hELFFBQU1DLDhCQUErQkQscUJBQXFCbEIsa0JBQTFEOztBQUVBLFFBQUltQiwyQkFBSixFQUFpQztBQUMvQixVQUFJQyxzQkFBc0JGLFVBQVVKLGFBQVYsRUFBMUI7O0FBRUFNLDRCQUFzQkwsK0JBQStCSyxtQkFBL0IsQ0FBdEI7O0FBRUFQLG1CQUFhQSxXQUFXUSxNQUFYLENBQWtCRCxtQkFBbEIsQ0FBYjtBQUNELEtBTkQsTUFNTztBQUNMYixnQ0FBMEJXLFNBQTFCOztBQUVBTCxpQkFBV1MsSUFBWCxDQUFnQkosU0FBaEI7QUFDRDs7QUFFRCxXQUFPTCxVQUFQO0FBQ0QsR0FoQlksRUFnQlYsRUFoQlUsQ0FBYjs7QUFrQkEsU0FBT0EsVUFBUDtBQUNEOztBQUVELFNBQVNQLG1DQUFULENBQTZDRCxJQUE3QyxFQUFtRDtBQUNqRCxNQUFNSyxzQkFBc0JMLEtBQUtNLGlCQUFMLEVBQTVCOztBQUVBLE1BQUlELG1CQUFKLEVBQXlCO0FBQ3ZCLFFBQU1FLGtCQUFrQlAsSUFBeEI7QUFBQSxRQUE4QjtBQUN4QmtCLGVBQVdYLGdCQUFnQlksV0FBaEIsRUFEakI7O0FBR0EsUUFBSVgsYUFBYUQsZ0JBQWdCRSxhQUFoQixFQUFqQjs7QUFFQUQsaUJBQWFZLHlDQUF5Q1osVUFBekMsRUFBcURVLFFBQXJELENBQWI7O0FBRUFYLG9CQUFnQkksYUFBaEIsQ0FBOEJILFVBQTlCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTWSx3Q0FBVCxDQUFrRFosVUFBbEQsRUFBOERVLFFBQTlELEVBQXdFO0FBQ3RFLE1BQU1HLG1CQUFtQmIsV0FBV2MsTUFBcEM7O0FBRUFkLGVBQWFBLFdBQVdJLE1BQVgsQ0FBa0IsVUFBQ0osVUFBRCxFQUFhSyxTQUFiLEVBQTJCO0FBQ3hELFFBQU1VLGdDQUFpQ1YscUJBQXFCakIsb0JBQTVEOztBQUVBLFFBQUkyQiw2QkFBSixFQUFtQztBQUNqQyxVQUFNQyx1QkFBdUJYLFNBQTdCO0FBQUEsVUFBd0M7QUFDbENZLHFDQUErQkQscUJBQXFCTCxXQUFyQixFQURyQztBQUFBLFVBRU1PLDJCQUEyQkQsNEJBRmpDO0FBQUEsVUFFZ0U7QUFDMURFLGdEQUEwQzdCLDZDQUE2QzRCLHdCQUE3QyxFQUF1RVIsUUFBdkUsQ0FIaEQ7O0FBS0EsVUFBSVMsdUNBQUosRUFBNkM7QUFDM0MsWUFBSU4sbUJBQW1CLENBQXZCLEVBQTBCO0FBQ3hCLGNBQU1ILFlBQVdyQixxQ0FBcUM2Qix3QkFBckMsQ0FBakI7O0FBRUFiLG9CQUFVZSxXQUFWLENBQXNCVixTQUF0Qjs7QUFFQWpCLDhDQUFvQ1ksU0FBcEM7O0FBRUFMLHFCQUFXUyxJQUFYLENBQWdCSixTQUFoQjtBQUNELFNBUkQsTUFRTztBQUNMLGNBQUlFLHNCQUFzQkYsVUFBVUosYUFBVixFQUExQjs7QUFFQU0sZ0NBQXNCSyx5Q0FBeUNMLG1CQUF6QyxDQUF0Qjs7QUFFQVAsdUJBQWFBLFdBQVdRLE1BQVgsQ0FBa0JELG1CQUFsQixDQUFiO0FBQ0Q7QUFDRixPQWhCRCxNQWdCTztBQUNMLFlBQU1HLGFBQVdyQixxQ0FBcUM2Qix3QkFBckMsQ0FBakI7O0FBRUFiLGtCQUFVZSxXQUFWLENBQXNCVixVQUF0Qjs7QUFFQWpCLDRDQUFvQ1ksU0FBcEM7O0FBRUFMLG1CQUFXUyxJQUFYLENBQWdCSixTQUFoQjtBQUNEO0FBQ0YsS0EvQkQsTUErQk87QUFDTFosMENBQW9DWSxTQUFwQzs7QUFFQUwsaUJBQVdTLElBQVgsQ0FBZ0JKLFNBQWhCO0FBQ0Q7O0FBRUQsV0FBT0wsVUFBUDtBQUNELEdBekNZLEVBeUNWLEVBekNVLENBQWI7O0FBMkNBLFNBQU9BLFVBQVA7QUFDRCIsImZpbGUiOiJyZW1vdmVJbnRlcm1lZGlhdGVOb2Rlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcnVsZU5hbWVVdGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdGllcy9ydWxlTmFtZScpLFxuICAgICAgUmlnaHRSZWN1cnNpdmVOb2RlID0gcmVxdWlyZSgnLi9ub2RlL3JpZ2h0UmVjdXJzaXZlJyksXG4gICAgICBOb25MZWZ0UmVjdXJzaXZlTm9kZSA9IHJlcXVpcmUoJy4vbm9kZS9ub25MZWZ0UmVjdXJzaXZlJyk7XG5cbmNvbnN0IHsgcnVsZU5hbWVGcm9tTm9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lLCBjaGVja05vbkxlZnRSZWN1cnNpdmVSdWxlTmFtZU1hdGNoZXNSdWxlTmFtZSB9ID0gcnVsZU5hbWVVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIHJlbW92ZUludGVybWVkaWF0ZU5vZGVzKG5vZGUpIHtcbiAgcmVtb3ZlT3JSZW5hbWVOb25MZWZ0UmVjdXJzaXZlTm9kZXMobm9kZSk7XG5cbiAgcmVtb3ZlUmlnaHRSZWN1cnNpdmVOb2Rlcyhub2RlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZW1vdmVJbnRlcm1lZGlhdGVOb2RlcztcblxuZnVuY3Rpb24gcmVtb3ZlUmlnaHRSZWN1cnNpdmVOb2Rlcyhub2RlKSB7XG4gIGNvbnN0IG5vZGVOb25UZXJtaW5hbE5vZGUgPSBub2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVOb25UZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBub2RlOyAvLy9cblxuICAgIGxldCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgIGNoaWxkTm9kZXMgPSByZW1vdmVSaWdodFJlY3Vyc2l2ZUNoaWxkTm9kZXMoY2hpbGROb2Rlcyk7XG5cbiAgICBub25UZXJtaW5hbE5vZGUuc2V0Q2hpbGROb2RlcyhjaGlsZE5vZGVzKVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVJpZ2h0UmVjdXJzaXZlQ2hpbGROb2RlcyhjaGlsZE5vZGVzKSB7XG4gIGNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLnJlZHVjZSgoY2hpbGROb2RlcywgY2hpbGROb2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGROb2RlUmlnaHRSZWN1cnNpdmVOb2RlID0gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIFJpZ2h0UmVjdXJzaXZlTm9kZSk7XG5cbiAgICBpZiAoY2hpbGROb2RlUmlnaHRSZWN1cnNpdmVOb2RlKSB7XG4gICAgICBsZXQgY2hpbGROb2RlQ2hpbGROb2RlcyA9IGNoaWxkTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICAgIGNoaWxkTm9kZUNoaWxkTm9kZXMgPSByZW1vdmVSaWdodFJlY3Vyc2l2ZUNoaWxkTm9kZXMoY2hpbGROb2RlQ2hpbGROb2Rlcyk7XG5cbiAgICAgIGNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLmNvbmNhdChjaGlsZE5vZGVDaGlsZE5vZGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlUmlnaHRSZWN1cnNpdmVOb2RlcyhjaGlsZE5vZGUpO1xuXG4gICAgICBjaGlsZE5vZGVzLnB1c2goY2hpbGROb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGROb2RlcztcbiAgfSwgW10pO1xuXG4gIHJldHVybiBjaGlsZE5vZGVzO1xufVxuXG5mdW5jdGlvbiByZW1vdmVPclJlbmFtZU5vbkxlZnRSZWN1cnNpdmVOb2Rlcyhub2RlKSB7XG4gIGNvbnN0IG5vZGVOb25UZXJtaW5hbE5vZGUgPSBub2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVOb25UZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBub2RlLCAvLy9cbiAgICAgICAgICBydWxlTmFtZSA9IG5vblRlcm1pbmFsTm9kZS5nZXRSdWxlTmFtZSgpO1xuXG4gICAgbGV0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gICAgY2hpbGROb2RlcyA9IHJlbW92ZU9yUmVuYW1lTm9uTGVmdFJlY3Vyc2l2ZUNoaWxkTm9kZXMoY2hpbGROb2RlcywgcnVsZU5hbWUpO1xuXG4gICAgbm9uVGVybWluYWxOb2RlLnNldENoaWxkTm9kZXMoY2hpbGROb2RlcylcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVPclJlbmFtZU5vbkxlZnRSZWN1cnNpdmVDaGlsZE5vZGVzKGNoaWxkTm9kZXMsIHJ1bGVOYW1lKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXNMZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aDtcblxuICBjaGlsZE5vZGVzID0gY2hpbGROb2Rlcy5yZWR1Y2UoKGNoaWxkTm9kZXMsIGNoaWxkTm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkTm9kZU5vbkxlZnRSZWN1cnNpdmVOb2RlID0gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIE5vbkxlZnRSZWN1cnNpdmVOb2RlKTtcblxuICAgIGlmIChjaGlsZE5vZGVOb25MZWZ0UmVjdXJzaXZlTm9kZSkge1xuICAgICAgY29uc3Qgbm9uTGVmdFJlY3Vyc2l2ZU5vZGUgPSBjaGlsZE5vZGUsIC8vL1xuICAgICAgICAgICAgbm9uTGVmdFJlY3Vyc2l2ZU5vZGVSdWxlTmFtZSA9IG5vbkxlZnRSZWN1cnNpdmVOb2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICBub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBub25MZWZ0UmVjdXJzaXZlTm9kZVJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgICBub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWVNYXRjaGVzUnVsZU5hbWUgPSBjaGVja05vbkxlZnRSZWN1cnNpdmVSdWxlTmFtZU1hdGNoZXNSdWxlTmFtZShub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUsIHJ1bGVOYW1lKTtcblxuICAgICAgaWYgKG5vbkxlZnRSZWN1cnNpdmVSdWxlTmFtZU1hdGNoZXNSdWxlTmFtZSkge1xuICAgICAgICBpZiAoY2hpbGROb2Rlc0xlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IHJ1bGVOYW1lRnJvbU5vbkxlZnRSZWN1cnNpdmVSdWxlTmFtZShub25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICAgICAgY2hpbGROb2RlLnNldFJ1bGVOYW1lKHJ1bGVOYW1lKTtcblxuICAgICAgICAgIHJlbW92ZU9yUmVuYW1lTm9uTGVmdFJlY3Vyc2l2ZU5vZGVzKGNoaWxkTm9kZSk7XG5cbiAgICAgICAgICBjaGlsZE5vZGVzLnB1c2goY2hpbGROb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgY2hpbGROb2RlQ2hpbGROb2RlcyA9IGNoaWxkTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICAgICAgICBjaGlsZE5vZGVDaGlsZE5vZGVzID0gcmVtb3ZlT3JSZW5hbWVOb25MZWZ0UmVjdXJzaXZlQ2hpbGROb2RlcyhjaGlsZE5vZGVDaGlsZE5vZGVzKTtcblxuICAgICAgICAgIGNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLmNvbmNhdChjaGlsZE5vZGVDaGlsZE5vZGVzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBydWxlTmFtZUZyb21Ob25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUobm9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICAgICAgICBjaGlsZE5vZGUuc2V0UnVsZU5hbWUocnVsZU5hbWUpO1xuXG4gICAgICAgIHJlbW92ZU9yUmVuYW1lTm9uTGVmdFJlY3Vyc2l2ZU5vZGVzKGNoaWxkTm9kZSk7XG5cbiAgICAgICAgY2hpbGROb2Rlcy5wdXNoKGNoaWxkTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZU9yUmVuYW1lTm9uTGVmdFJlY3Vyc2l2ZU5vZGVzKGNoaWxkTm9kZSk7XG5cbiAgICAgIGNoaWxkTm9kZXMucHVzaChjaGlsZE5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZE5vZGVzO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIGNoaWxkTm9kZXM7XG59XG4iXX0=