"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateDirectLeftRecursion;
var _necessary = require("necessary");
var _occamParsers = require("occam-parsers");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _class = require("./utilities/class");
var _part = require("./utilities/part");
var _parts = require("./utilities/parts");
function eliminateDirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var directlyLeftRecursiveRules = retrieveDirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    directlyLeftRecursiveRules.forEach(function(directlyLeftRecursiveRule) {
        var reducedRule = _reduced.default.fromDirectlyLeftRecursiveRule(directlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
        var directlyLeftRecursiveDefinitions = retrieveDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule), directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions), rewrittenDefinition = rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition);
        var replacementDefinition = rewrittenDefinition, replacedDefinition = directlyLeftRecursiveDefinitions.shift(), definitions = directlyLeftRecursiveDefinitions; ///
        directlyLeftRecursiveRule.removeDefinitions(definitions);
        directlyLeftRecursiveRule.replaceDefinition(replacedDefinition, replacementDefinition);
    });
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var first = _necessary.arrayUtilities.first, ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart;
function retrieveDirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var directlyLeftRecursiveRules = [];
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], directlyLeftRecursiveRulesIncludesRule = directlyLeftRecursiveRules.includes(rule);
        if (!directlyLeftRecursiveRulesIncludesRule) {
            var directlyLeftRecursiveRule = rule; ///
            directlyLeftRecursiveRules.push(directlyLeftRecursiveRule);
        }
    });
    return directlyLeftRecursiveRules;
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition;
    var firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition = firstDirectlyLeftRecursiveDefinition;
    } else {
        var parts;
        parts = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            var parts = directlyLeftRecursiveDefinition.getParts();
            parts.shift(); ///
            var singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts);
        parts = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
    }
    return directlyLeftRecursiveDefinition;
}
function rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition) {
    var parts = directlyLeftRecursiveDefinition.getParts();
    parts.shift();
    var ruleName = directlyLeftRecursiveDefinition.getRuleName(), reducedPart = (0, _part).reducedPartFromRuleName(ruleName), repeatedPart = (0, _parts).repeatedPartFromParts(parts);
    parts = [
        reducedPart,
        repeatedPart
    ];
    var definition = new _occamParsers.Definition(parts), rewrittenDefinition = definition; ///
    return rewrittenDefinition;
}
function retrieveDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule) {
    var definitions = directlyLeftRecursiveRule.getDefinitions(), directlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return directlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcbmltcG9ydCB7IFBhcnRzLCBEZWZpbml0aW9uIH0gZnJvbSBcIm9jY2FtLXBhcnNlcnNcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBpc0luc3RhbmNlT2YgfSBmcm9tIFwiLi91dGlsaXRpZXMvY2xhc3NcIjtcbmltcG9ydCB7IHJlZHVjZWRQYXJ0RnJvbVJ1bGVOYW1lIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRcIjtcbmltcG9ydCB7IHJlcGVhdGVkUGFydEZyb21QYXJ0cywgc2luZ2xlUGFydEZyb21QYXJ0cyB9IGZyb20gXCIuL3V0aWxpdGllcy9wYXJ0c1wiO1xuXG5jb25zdCB7IGZpcnN0IH0gPSBhcnJheVV0aWxpdGllcyxcbiAgICAgIHsgQ2hvaWNlT2ZQYXJ0c1BhcnQgfSA9IFBhcnRzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyA9IHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgICAgcmV3cml0dGVuRGVmaW5pdGlvbiA9IHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gcmV3cml0dGVuRGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnNoaWZ0KCksIC8vL1xuICAgICAgICAgIGRlZmluaXRpb25zID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7IC8vL1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZS5yZW1vdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzID0gW107XG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcnVsZU5hbWUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLmluY2x1ZGVzKHJ1bGUpO1xuXG4gICAgaWYgKCFkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSkge1xuICAgICAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGU7IC8vL1xuXG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgIH1cbiAgfSlcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXM7XG59XG5cbmZ1bmN0aW9uIG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgbGV0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgY29uc3QgZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmxlbmd0aDtcblxuICBpZiAoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGggPT09IDEpIHtcbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuICB9IGVsc2Uge1xuICAgIGxldCBwYXJ0cztcblxuICAgIHBhcnRzID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7ICAvLy9cblxuICAgIGNvbnN0IGZpcnN0UGFydCA9IGZpcnN0KHBhcnRzKSxcbiAgICAgICAgICBwYXJ0ID0gZmlyc3RQYXJ0OyAvLy9cblxuICAgIGNvbnN0IHNpbmdsZVBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0cyA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICAgICAgcGFydHMuc2hpZnQoKTsgIC8vL1xuXG4gICAgICBjb25zdCBzaW5nbGVQYXJ0ID0gc2luZ2xlUGFydEZyb21QYXJ0cyhwYXJ0cyk7XG5cbiAgICAgIHJldHVybiBzaW5nbGVQYXJ0O1xuICAgIH0pO1xuXG4gICAgcGFydHMgPSBzaW5nbGVQYXJ0czsgIC8vL1xuXG4gICAgY29uc3QgY2hvaWNlT2ZQYXJ0c1BhcnQgPSBuZXcgQ2hvaWNlT2ZQYXJ0c1BhcnQocGFydHMpO1xuXG4gICAgcGFydHMgPSBbIC8vL1xuICAgICAgcGFydCxcbiAgICAgIGNob2ljZU9mUGFydHNQYXJ0XG4gICAgXVxuXG4gICAgY29uc3QgcnVsZU5hbWUgPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKTtcblxuICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZFBhcnRzKHJ1bGVOYW1lLCBwYXJ0cyk7XG4gIH1cblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICBsZXQgcGFydHMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7XG5cbiAgcGFydHMuc2hpZnQoKTtcblxuICBjb25zdCBydWxlTmFtZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgcmVkdWNlZFBhcnQgPSByZWR1Y2VkUGFydEZyb21SdWxlTmFtZShydWxlTmFtZSksXG4gICAgICAgIHJlcGVhdGVkUGFydCA9IHJlcGVhdGVkUGFydEZyb21QYXJ0cyhwYXJ0cyk7XG5cbiAgcGFydHMgPSBbIC8vL1xuICAgIHJlZHVjZWRQYXJ0LFxuICAgIHJlcGVhdGVkUGFydFxuICBdXG5cbiAgY29uc3QgZGVmaW5pdGlvbiA9IG5ldyBEZWZpbml0aW9uKHBhcnRzKSxcbiAgICAgICAgcmV3cml0dGVuRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuXG4gIHJldHVybiByZXdyaXR0ZW5EZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpIHtcbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgIGlmIChkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicnVsZU1hcCIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImZvckVhY2giLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGUiLCJSZWR1Y2VkUnVsZSIsImZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwiZ2V0TmFtZSIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV3cml0dGVuRGVmaW5pdGlvbiIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9uIiwicmVwbGFjZWREZWZpbml0aW9uIiwic2hpZnQiLCJkZWZpbml0aW9ucyIsInJlbW92ZURlZmluaXRpb25zIiwicmVwbGFjZURlZmluaXRpb24iLCJmaXJzdCIsImFycmF5VXRpbGl0aWVzIiwiQ2hvaWNlT2ZQYXJ0c1BhcnQiLCJQYXJ0cyIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsInJ1bGUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSIsImluY2x1ZGVzIiwicHVzaCIsImZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoIiwibGVuZ3RoIiwicGFydHMiLCJnZXRQYXJ0cyIsImZpcnN0UGFydCIsInBhcnQiLCJzaW5nbGVQYXJ0cyIsIm1hcCIsInNpbmdsZVBhcnQiLCJzaW5nbGVQYXJ0RnJvbVBhcnRzIiwiY2hvaWNlT2ZQYXJ0c1BhcnQiLCJEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVJ1bGVOYW1lQW5kUGFydHMiLCJyZWR1Y2VkUGFydCIsInJlZHVjZWRQYXJ0RnJvbVJ1bGVOYW1lIiwicmVwZWF0ZWRQYXJ0IiwicmVwZWF0ZWRQYXJ0RnJvbVBhcnRzIiwiZGVmaW5pdGlvbiIsIkRlZmluaXRpb24iLCJnZXREZWZpbml0aW9ucyIsImZpbHRlciIsImRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0luc3RhbmNlT2YiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztrQkFlV0EsNEJBQTRCO0FBYnJCLElBQUEsVUFBVyxXQUFYLFdBQVcsQ0FBQTtBQUNSLElBQUEsYUFBZSxXQUFmLGVBQWUsQ0FBQTtBQUV6QixJQUFBLFFBQWdCLGtDQUFoQixnQkFBZ0IsRUFBQTtBQUNJLElBQUEsU0FBc0Msa0NBQXRDLHNDQUFzQyxFQUFBO0FBRXJELElBQUEsTUFBbUIsV0FBbkIsbUJBQW1CLENBQUE7QUFDUixJQUFBLEtBQWtCLFdBQWxCLGtCQUFrQixDQUFBO0FBQ0MsSUFBQSxNQUFtQixXQUFuQixtQkFBbUIsQ0FBQTtBQUsvRCxTQUFTQSw0QkFBNEIsQ0FBQ0Msd0JBQXdC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