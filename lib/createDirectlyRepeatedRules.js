"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return createDirectlyRepeatedRules;
    }
});
var _directly = /*#__PURE__*/ _interop_require_default(require("./rule/repeated/directly"));
var _ruleNames = require("./utilities/ruleNames");
var _parts = require("./utilities/parts");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function createDirectlyRepeatedRules(ruleMap, directedGraph) {
    var cycles = directedGraph.findCycles(), ruleNames = (0, _ruleNames.ruleNamesFromCycles)(cycles);
    ruleNames.forEach(function(ruleName) {
        var rule = ruleMap[ruleName], directlyRepeatedRule = _directly.default.fromRuleAndCycles(rule, cycles), directlyRepeatedRuleName = directlyRepeatedRule.getName(), directlyRepeatedRuleEffectivelyEmpty = (0, _parts.isRuleEffectivelyEmpty)(directlyRepeatedRule, ruleMap);
        if (directlyRepeatedRuleEffectivelyEmpty) {
            throw new Error("The '".concat(directlyRepeatedRuleName, "' directly repeated rule is effectively empty."));
        }
        ruleMap[directlyRepeatedRuleName] = directlyRepeatedRule;
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVEaXJlY3RseVJlcGVhdGVkUnVsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBEaXJlY3RseVJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5cbmltcG9ydCB7IHJ1bGVOYW1lc0Zyb21DeWNsZXMgfSBmcm9tIFwiLi91dGlsaXRpZXMvcnVsZU5hbWVzXCI7XG5pbXBvcnQgeyBpc1J1bGVFZmZlY3RpdmVseUVtcHR5IH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRzXCI7ICAvLy9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlRGlyZWN0bHlSZXBlYXRlZFJ1bGVzKHJ1bGVNYXAsIGRpcmVjdGVkR3JhcGgpIHtcbiAgY29uc3QgY3ljbGVzID0gZGlyZWN0ZWRHcmFwaC5maW5kQ3ljbGVzKCksXG4gICAgICAgIHJ1bGVOYW1lcyA9IHJ1bGVOYW1lc0Zyb21DeWNsZXMoY3ljbGVzKTtcblxuICBydWxlTmFtZXMuZm9yRWFjaCgocnVsZU5hbWUpID0+IHtcbiAgICBjb25zdCBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0sXG4gICAgICAgICAgZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBEaXJlY3RseVJlcGVhdGVkUnVsZS5mcm9tUnVsZUFuZEN5Y2xlcyhydWxlLCBjeWNsZXMpLFxuICAgICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSA9IGRpcmVjdGx5UmVwZWF0ZWRSdWxlLmdldE5hbWUoKSxcbiAgICAgICAgICBkaXJlY3RseVJlcGVhdGVkUnVsZUVmZmVjdGl2ZWx5RW1wdHkgPSBpc1J1bGVFZmZlY3RpdmVseUVtcHR5KGRpcmVjdGx5UmVwZWF0ZWRSdWxlLCBydWxlTWFwKTtcblxuICAgIGlmIChkaXJlY3RseVJlcGVhdGVkUnVsZUVmZmVjdGl2ZWx5RW1wdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlICcke2RpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZX0nIGRpcmVjdGx5IHJlcGVhdGVkIHJ1bGUgaXMgZWZmZWN0aXZlbHkgZW1wdHkuYCk7XG4gICAgfVxuXG4gICAgcnVsZU1hcFtkaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVdID0gZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZURpcmVjdGx5UmVwZWF0ZWRSdWxlcyIsInJ1bGVNYXAiLCJkaXJlY3RlZEdyYXBoIiwiY3ljbGVzIiwiZmluZEN5Y2xlcyIsInJ1bGVOYW1lcyIsInJ1bGVOYW1lc0Zyb21DeWNsZXMiLCJmb3JFYWNoIiwicnVsZU5hbWUiLCJydWxlIiwiZGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJEaXJlY3RseVJlcGVhdGVkUnVsZSIsImZyb21SdWxlQW5kQ3ljbGVzIiwiZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwiZ2V0TmFtZSIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlRWZmZWN0aXZlbHlFbXB0eSIsImlzUnVsZUVmZmVjdGl2ZWx5RW1wdHkiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7K0JBT0E7OztlQUF3QkE7OzsrREFMUzt5QkFFRztxQkFDRzs7Ozs7O0FBRXhCLFNBQVNBLDRCQUE0QkMsT0FBTyxFQUFFQyxhQUFhLEVBQUU7SUFDMUUsSUFBTUMsU0FBU0QsY0FBY0UsVUFBVSxJQUNqQ0MsWUFBWUMsSUFBQUEsOEJBQW1CLEVBQUNIO0lBRXRDRSxVQUFVRSxPQUFPLENBQUMsU0FBQ0MsVUFBYTtRQUM5QixJQUFNQyxPQUFPUixPQUFPLENBQUNPLFNBQVMsRUFDeEJFLHVCQUF1QkMsaUJBQW9CLENBQUNDLGlCQUFpQixDQUFDSCxNQUFNTixTQUNwRVUsMkJBQTJCSCxxQkFBcUJJLE9BQU8sSUFDdkRDLHVDQUF1Q0MsSUFBQUEsNkJBQXNCLEVBQUNOLHNCQUFzQlQ7UUFFMUYsSUFBSWMsc0NBQXNDO1lBQ3hDLE1BQU0sSUFBSUUsTUFBTSxBQUFDLFFBQWdDLE9BQXpCSiwwQkFBeUIsbURBQWlEO1FBQ3BHLENBQUM7UUFFRFosT0FBTyxDQUFDWSx5QkFBeUIsR0FBR0g7SUFDdEM7QUFDRiJ9