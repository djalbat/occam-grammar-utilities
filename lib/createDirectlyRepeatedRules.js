"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return createDirectlyRepeatedRules;
    }
});
var _directly = /*#__PURE__*/ _interop_require_default(require("./rule/repeated/directly"));
var _ruleNames = require("./utilities/ruleNames");
var _rule = require("./utilities/rule");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function createDirectlyRepeatedRules(cycles, ruleMap) {
    var ruleNames = (0, _ruleNames.ruleNamesFromCycles)(cycles), directlyRepeatedRules = ruleNames.map(function(ruleName) {
        var rule = ruleMap[ruleName], directlyRepeatedRule = _directly.default.fromRuleAndCycles(rule, cycles), directlyRepeatedRuleName = directlyRepeatedRule.getName();
        ruleMap[directlyRepeatedRuleName] = directlyRepeatedRule;
        return directlyRepeatedRule;
    });
    directlyRepeatedRules.forEach(function(directlyRepeatedRule) {
        var directlyRepeatedRuleEffectivelyEmpty = (0, _rule.isRuleEffectivelyEmpty)(directlyRepeatedRule, ruleMap);
        if (directlyRepeatedRuleEffectivelyEmpty) {
            var directlyRepeatedRuleName = directlyRepeatedRule.getName();
            throw new Error("The '".concat(directlyRepeatedRuleName, "' directly repeated rule is effectively empty."));
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVEaXJlY3RseVJlcGVhdGVkUnVsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBEaXJlY3RseVJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5cbmltcG9ydCB7IHJ1bGVOYW1lc0Zyb21DeWNsZXMgfSBmcm9tIFwiLi91dGlsaXRpZXMvcnVsZU5hbWVzXCI7XG5pbXBvcnQgeyBpc1J1bGVFZmZlY3RpdmVseUVtcHR5IH0gZnJvbSBcIi4vdXRpbGl0aWVzL3J1bGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlRGlyZWN0bHlSZXBlYXRlZFJ1bGVzKGN5Y2xlcywgcnVsZU1hcCkge1xuICBjb25zdCBydWxlTmFtZXMgPSBydWxlTmFtZXNGcm9tQ3ljbGVzKGN5Y2xlcyksXG4gICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRSdWxlcyA9IHJ1bGVOYW1lcy5tYXAoKHJ1bGVOYW1lKSA9PiB7XG4gICAgICAgICAgY29uc3QgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gRGlyZWN0bHlSZXBlYXRlZFJ1bGUuZnJvbVJ1bGVBbmRDeWNsZXMocnVsZSwgY3ljbGVzKSxcbiAgICAgICAgICAgICAgICBkaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBkaXJlY3RseVJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgICAgICAgICBydWxlTWFwW2RpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZV0gPSBkaXJlY3RseVJlcGVhdGVkUnVsZTtcblxuICAgICAgICAgIHJldHVybiBkaXJlY3RseVJlcGVhdGVkUnVsZTtcbiAgICAgICAgfSk7XG5cbiAgZGlyZWN0bHlSZXBlYXRlZFJ1bGVzLmZvckVhY2goKGRpcmVjdGx5UmVwZWF0ZWRSdWxlKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0bHlSZXBlYXRlZFJ1bGVFZmZlY3RpdmVseUVtcHR5ID0gaXNSdWxlRWZmZWN0aXZlbHlFbXB0eShkaXJlY3RseVJlcGVhdGVkUnVsZSwgcnVsZU1hcCk7XG5cbiAgICBpZiAoZGlyZWN0bHlSZXBlYXRlZFJ1bGVFZmZlY3RpdmVseUVtcHR5KSB7XG4gICAgICBjb25zdCBkaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBkaXJlY3RseVJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlICcke2RpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZX0nIGRpcmVjdGx5IHJlcGVhdGVkIHJ1bGUgaXMgZWZmZWN0aXZlbHkgZW1wdHkuYCk7XG4gICAgfVxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVEaXJlY3RseVJlcGVhdGVkUnVsZXMiLCJjeWNsZXMiLCJydWxlTWFwIiwicnVsZU5hbWVzIiwicnVsZU5hbWVzRnJvbUN5Y2xlcyIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlcyIsIm1hcCIsInJ1bGVOYW1lIiwicnVsZSIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwiRGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJmcm9tUnVsZUFuZEN5Y2xlcyIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsImdldE5hbWUiLCJmb3JFYWNoIiwiZGlyZWN0bHlSZXBlYXRlZFJ1bGVFZmZlY3RpdmVseUVtcHR5IiwiaXNSdWxlRWZmZWN0aXZlbHlFbXB0eSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQTs7OzsrQkFPQTs7O2VBQXdCQTs7OytEQUxTO3lCQUVHO29CQUNHOzs7Ozs7QUFFeEIsU0FBU0EsNEJBQTRCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtJQUNuRSxJQUFNQyxZQUFZQyxJQUFBQSw4QkFBbUIsRUFBQ0gsU0FDaENJLHdCQUF3QkYsVUFBVUcsR0FBRyxDQUFDLFNBQUNDLFVBQWE7UUFDbEQsSUFBTUMsT0FBT04sT0FBTyxDQUFDSyxTQUFTLEVBQ3hCRSx1QkFBdUJDLGlCQUFvQixDQUFDQyxpQkFBaUIsQ0FBQ0gsTUFBTVAsU0FDcEVXLDJCQUEyQkgscUJBQXFCSSxPQUFPO1FBRTdEWCxPQUFPLENBQUNVLHlCQUF5QixHQUFHSDtRQUVwQyxPQUFPQTtJQUNUO0lBRU5KLHNCQUFzQlMsT0FBTyxDQUFDLFNBQUNMLHNCQUF5QjtRQUN0RCxJQUFNTSx1Q0FBdUNDLElBQUFBLDRCQUFzQixFQUFDUCxzQkFBc0JQO1FBRTFGLElBQUlhLHNDQUFzQztZQUN4QyxJQUFNSCwyQkFBMkJILHFCQUFxQkksT0FBTztZQUU3RCxNQUFNLElBQUlJLE1BQU0sQUFBQyxRQUFnQyxPQUF6QkwsMEJBQXlCLG1EQUFpRDtRQUNwRyxDQUFDO0lBQ0g7QUFDRiJ9