"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _occamParsers = require("occam-parsers");
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _implicitly = _interopRequireDefault(require("./definition/recursive/left/implicitly"));
var _class = require("./utilities/class");
var _parts = require("./utilities/parts");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, recursiveDefinitions = [], leftRecursiveDefinitions = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    rewriteIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    // eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    // retrieveDirectlyLeftRecursiveRules(directlyLeftRecursiveRules, leftRecursiveDefinitions, ruleMap);
    // eliminateDirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart, find = _necessary.arrayUtilities.find, tail = _necessary.arrayUtilities.tail, first = _necessary.arrayUtilities.first;
function eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap) {
    directlyLeftRecursiveRules.forEach(function(directlyLeftRecursiveRule) {
        var rule = directlyLeftRecursiveRule, definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = find(definitions, function(definition) {
            var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
            if (definitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }), directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions);
        directlyLeftRecursiveDefinition.rewrite();
        rule.removeAllDefinitions();
        rule.addDefinition(directlyLeftRecursiveDefinition);
    });
}
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), implicitlyLeftRecursiveDefinitionRuleName = implicitlyLeftRecursiveDefinition.getRuleName(), indirectlyLeftRecursiveDefinitionRuleName = indirectlyLeftRecursiveDefinition.getRuleName(), implicitlyLeftRecursiveRuleName = implicitlyLeftRecursiveDefinitionRuleName, indirectlyLeftRecursiveRuleName = indirectlyLeftRecursiveDefinitionRuleName, indirectlyLeftRecursiveRule = ruleMap[indirectlyLeftRecursiveRuleName], implicitlyLeftRecursiveRule = ruleMap[implicitlyLeftRecursiveRuleName];
        rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap);
    // const implicitlyLeftRecursiveDefinitions = retrieveImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRuleName);
    //
    // rewriteImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveDefinitions, indirectlyLeftRecursiveRule, ruleMap);
    //
    // reduceImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, ruleMap);
    });
}
function reduceImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
}
function retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var recursiveDefinition;
    var ruleName = rule.getName(), definitionRecursiveDefinition = (0, _class).isInstanceOf(definition, _recursive.default);
    if (definitionRecursiveDefinition) {
        recursiveDefinition = definition; ///
    } else {
        var leftRecursiveDefinition = _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions) || _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _left.default.fromRuleNameAndDefinition(ruleName, definition);
        if (leftRecursiveDefinition !== null) {
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
            recursiveDefinition = leftRecursiveDefinition; ///
        } else {
            recursiveDefinition = _recursive.default.fromRuleNameAndDefinition(ruleName, definition);
        }
        if (recursiveDefinition !== null) {
            var replacedDefinition = definition, replacementDefinition = recursiveDefinition; ///
            rule.replaceDefinition(replacedDefinition, replacementDefinition);
            var recursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(recursiveDefinition, _indirectly.default);
            if (recursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                var indirectlyLeftRecursiveDefinition = recursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), leftRecursiveDefinition1 = implicitlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), replacedDefinition1 = leftRecursiveDefinition1, replacementDefinition1 = implicitlyLeftRecursiveDefinition; ///
                rule = ruleMap[ruleName1];
                rule.replaceDefinition(replacedDefinition1, replacementDefinition1);
            }
        }
    }
    return recursiveDefinition;
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        var recursiveDefinition = retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}
function rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap) {
    var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName(), repeatedRuleName = repeatedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    ruleMap[repeatedRuleName] = repeatedRule;
}
function retrieveDirectlyLeftRecursiveRules(directlyLeftRecursiveRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _directly.default), leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default), leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _implicitly.default);
        if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition || leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition || leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition) {
            var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions(), ruleDirectlyLeftRecursiveRule = definitions.some(function(definition) {
                var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
                if (definitionDirectlyLeftRecursiveDefinition) {
                    return true;
                }
            });
            if (ruleDirectlyLeftRecursiveRule) {
                var directlyLeftRecursiveRule = rule, directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule = directlyLeftRecursiveRules.includes(directlyLeftRecursiveRule);
                if (!directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule) {
                    directlyLeftRecursiveRules.push(directlyLeftRecursiveRule);
                }
            }
        }
    });
}
function rewriteIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var indirectlyLeftRecursiveDefinitionRuleName = indirectlyLeftRecursiveDefinition.getRuleName(), indirectlyLeftRecursiveRuleName = indirectlyLeftRecursiveDefinitionRuleName, indirectlyLeftRecursiveRule = ruleMap[indirectlyLeftRecursiveRuleName];
        rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap);
    });
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition;
    var firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition = firstDirectlyLeftRecursiveDefinition; ///
    } else {
        var parts;
        parts = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            directlyLeftRecursiveDefinition.removeFirstPart();
            var parts = directlyLeftRecursiveDefinition.getParts(), singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts);
        parts = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
    }
    return directlyLeftRecursiveDefinition;
}
function rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, ruleMap) {
    var _rule;
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), implicitlyLeftRecursiveDefinitionParts = implicitlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        implicitlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(implicitlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(implicitlyLeftRecursiveDefinitionParts));
        var ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = implicitlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
}
function rewriteImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveDefinitions, indirectlyLeftRecursiveRule, ruleMap) {
    implicitlyLeftRecursiveDefinitions.forEach(function(implicitlyLeftRecursiveDefinition) {
        rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, ruleMap);
    });
}
function retrieveImplicitlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, indirectlyLeftRecursiveRuleName) {
    var rule = directlyLeftRecursiveRule, ruleName = indirectlyLeftRecursiveRuleName, definitions = rule.getDefinitions(), implicitlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _left.default);
        if (definitionLeftRecursiveDefinition) {
            var leftRecursiveDefinition = definition, leftRecursiveRuleNames = leftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), leftRecursiveRuleName = firstLeftRecursiveRuleName; ///
            if (leftRecursiveRuleName === ruleName) {
                return true;
            }
        }
    });
    return implicitlyLeftRecursiveDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBQYXJ0cyB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkXCI7XG5pbXBvcnQgUmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZVwiO1xuaW1wb3J0IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnRcIjtcbmltcG9ydCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9pbmRpcmVjdGx5XCI7XG5pbXBvcnQgSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW1wbGljaXRseVwiO1xuXG5pbXBvcnQgeyBpc0luc3RhbmNlT2YgfSBmcm9tIFwiLi91dGlsaXRpZXMvY2xhc3NcIjtcbmltcG9ydCB7IGNsb25lUGFydHMsIHNpbmdsZVBhcnRGcm9tUGFydHMgfSBmcm9tIFwiLi91dGlsaXRpZXMvcGFydHNcIjtcblxuY29uc3QgeyBDaG9pY2VPZlBhcnRzUGFydCB9ID0gUGFydHMsXG4gICAgICB7IGZpbmQsIHRhaWwsIGZpcnN0IH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlTGVmdFJlY3Vyc2lvbihzdGFydFJ1bGUsIHJ1bGVNYXApIHtcbiAgY29uc3QgcnVsZSA9IHN0YXJ0UnVsZSwgLy8vXG4gICAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb25zID0gW10sXG4gICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgLy8gZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgLy8gcmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICAvLyBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgY29uc3Qgc3RhcnRSdWxlTmFtZSA9IHN0YXJ0UnVsZS5nZXROYW1lKCk7XG5cbiAgc3RhcnRSdWxlID0gcnVsZU1hcFtzdGFydFJ1bGVOYW1lXTsgLy8vXG5cbiAgcmV0dXJuIHN0YXJ0UnVsZTtcbn1cblxuZnVuY3Rpb24gZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcywgcnVsZU1hcCkge1xuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIC8vL1xuICAgICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZChkZWZpbml0aW9ucywgKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5yZXdyaXRlKCk7XG5cbiAgICBydWxlLnJlbW92ZUFsbERlZmluaXRpb25zKCk7XG5cbiAgICBydWxlLmFkZERlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSwgIC8vL1xuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlTWFwW2luZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdLFxuICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlTWFwW2ltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdO1xuXG4gICAgcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuXG4gICAgLy8gY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuICAgIC8vXG4gICAgLy8gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcbiAgICAvL1xuICAgIC8vIHJlZHVjZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCkge1xuICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgcmVkdWNlZFJ1bGVOYW1lID0gcmVkdWNlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGV0IHJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgY29uc3QgcnVsZU5hbWUgPSBydWxlLmdldE5hbWUoKSxcbiAgICAgICAgZGVmaW5pdGlvblJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgUmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKGRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlTmFtZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZERlZmluaXRpb24ocnVsZU5hbWUsIGRlZmluaXRpb24pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICByZWN1cnNpdmVEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gcmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihyZWN1cnNpdmVEZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFsgLi4ucmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlY3Vyc2l2ZURlZmluaXRpb24gXSxcbiAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWU7ICAvLy9cblxuICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzID0gcmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSZWN1cnNpdmVSdWxlTmFtZXMoKTtcblxuICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzLmZvckVhY2goKHJlY3Vyc2l2ZVJ1bGVOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzLmluY2x1ZGVzKHJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICAgICAgICBpZiAoIXByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gcmVjdXJzaXZlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0gfHwgbnVsbDsgLy8vXG5cbiAgICAgICAgICBpZiAocnVsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zOyAgLy8vXG5cbiAgICAgICAgICAgIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgcmVwZWF0ZWRSdWxlID0gUmVwZWF0ZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgcmVkdWNlZFJ1bGVOYW1lID0gcmVkdWNlZFJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICBydWxlTWFwW3JlcGVhdGVkUnVsZU5hbWVdID0gcmVwZWF0ZWRSdWxlO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IHJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgICAgcnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkZWZpbml0aW9ucy5zb21lKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgaWYgKHJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlLCAvLy9cbiAgICAgICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc0RpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgICAgICBpZiAoIWRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG5cbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZU1hcFtpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lXTtcblxuICAgIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBsZXQgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICBjb25zdCBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubGVuZ3RoO1xuXG4gIGlmIChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCA9PT0gMSkge1xuICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICB9IGVsc2Uge1xuICAgIGxldCBwYXJ0cztcblxuICAgIHBhcnRzID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7ICAvLy9cblxuICAgIGNvbnN0IGZpcnN0UGFydCA9IGZpcnN0KHBhcnRzKSxcbiAgICAgICAgICBwYXJ0ID0gZmlyc3RQYXJ0OyAvLy9cblxuICAgIGNvbnN0IHNpbmdsZVBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLnJlbW92ZUZpcnN0UGFydCgpO1xuXG4gICAgICBjb25zdCBwYXJ0cyA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgIHNpbmdsZVBhcnQgPSBzaW5nbGVQYXJ0RnJvbVBhcnRzKHBhcnRzKTtcblxuICAgICAgcmV0dXJuIHNpbmdsZVBhcnQ7XG4gICAgfSk7XG5cbiAgICBwYXJ0cyA9IHNpbmdsZVBhcnRzOyAgLy8vXG5cbiAgICBjb25zdCBjaG9pY2VPZlBhcnRzUGFydCA9IG5ldyBDaG9pY2VPZlBhcnRzUGFydChwYXJ0cyk7XG5cbiAgICBwYXJ0cyA9IFsgLy8vXG4gICAgICBwYXJ0LFxuICAgICAgY2hvaWNlT2ZQYXJ0c1BhcnRcbiAgICBdXG5cbiAgICBjb25zdCBydWxlTmFtZSA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kUGFydHMocnVsZU5hbWUsIHBhcnRzKTtcbiAgfVxuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIHJld3JpdHRlbkRlZmluaXRpb25zID0gZGVmaW5pdGlvbnMubWFwKChkZWZpbml0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IERlZmluaXRpb24gPSAoaW5kZXggPT09IDApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgICAgICAgbGV0IGRlZmluaXRpb25QYXJ0cyA9IGRlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICAgICAgICAgIGRlZmluaXRpb25QYXJ0cyA9IGNsb25lUGFydHMoZGVmaW5pdGlvblBhcnRzKTsgIC8vL1xuXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSB0YWlsKGNsb25lUGFydHMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMpKTsgIC8vL1xuXG4gICAgICAgICAgY29uc3QgcGFydHMgPSBbXG4gICAgICAgICAgICAuLi5kZWZpbml0aW9uUGFydHMsXG4gICAgICAgICAgICAuLi5pbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0c1xuICAgICAgICAgIF07XG5cbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGwsICAvLy9cbiAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gbnVsbDsgIC8vL1xuXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IG5ldyBEZWZpbml0aW9uKHBhcnRzLCBydWxlTmFtZSwgcmVjdXJzaXZlUnVsZU5hbWVzLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTsgLy8vXG5cbiAgICAgICAgICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgLy8vXG5cbiAgICAgICAgICByZXR1cm4gcmV3cml0dGVuRGVmaW5pdGlvbjtcbiAgICAgICAgfSksXG4gICAgICAgIHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXR0ZW5EZWZpbml0aW9uczsgIC8vL1xuXG4gIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICBjb25zdCBydWxlID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLmZpbHRlcigoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMoKSxcbiAgICAgICAgICAgICAgICAgIGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gZmlyc3QobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyksXG4gICAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZTsgLy8vXG5cbiAgICAgICAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IHJ1bGVOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgcmV0dXJuIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5maWx0ZXIoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlTGVmdFJlY3Vyc2lvbiIsInN0YXJ0UnVsZSIsInJ1bGVNYXAiLCJydWxlIiwicmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwic3RhcnRSdWxlTmFtZSIsImdldE5hbWUiLCJDaG9pY2VPZlBhcnRzUGFydCIsIlBhcnRzIiwiZmluZCIsImFycmF5VXRpbGl0aWVzIiwidGFpbCIsImZpcnN0IiwiZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwiZm9yRWFjaCIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJkZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uIiwiZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0luc3RhbmNlT2YiLCJEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIm1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXdyaXRlIiwicmVtb3ZlQWxsRGVmaW5pdGlvbnMiLCJhZGREZWZpbml0aW9uIiwiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwiZ2V0UnVsZU5hbWUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlIiwicmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uIiwiUmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVJ1bGVOYW1lRGVmaW5pdGlvbkFuZFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbiIsIkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicHVzaCIsInJlcGxhY2VkRGVmaW5pdGlvbiIsInJlcGxhY2VtZW50RGVmaW5pdGlvbiIsInJlcGxhY2VEZWZpbml0aW9uIiwicmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzIiwibWFwIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lIiwicmVjdXJzaXZlUnVsZU5hbWVzIiwiZ2V0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmVjdXJzaXZlUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUmVjdXJzaXZlUnVsZU5hbWUiLCJpbmNsdWRlcyIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZXBlYXRlZFJ1bGUiLCJSZXBlYXRlZFJ1bGUiLCJyZXBlYXRlZFJ1bGVOYW1lIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInNvbWUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoIiwibGVuZ3RoIiwicGFydHMiLCJnZXRQYXJ0cyIsImZpcnN0UGFydCIsInBhcnQiLCJzaW5nbGVQYXJ0cyIsInJlbW92ZUZpcnN0UGFydCIsInNpbmdsZVBhcnQiLCJzaW5nbGVQYXJ0RnJvbVBhcnRzIiwiY2hvaWNlT2ZQYXJ0c1BhcnQiLCJmcm9tUnVsZU5hbWVBbmRQYXJ0cyIsInJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXR0ZW5EZWZpbml0aW9ucyIsImluZGV4IiwiRGVmaW5pdGlvbiIsImRlZmluaXRpb25QYXJ0cyIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzIiwiY2xvbmVQYXJ0cyIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJyZXdyaXR0ZW5EZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsInJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbHRlciIsImRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O2tCQW1CV0Esc0JBQXNCO0FBakJ4QixJQUFBLGFBQWUsV0FBZixlQUFlLENBQUE7QUFDTixJ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