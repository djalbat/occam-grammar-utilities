"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _occamParsers = require("occam-parsers");
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _implicitly = _interopRequireDefault(require("./definition/recursive/left/implicitly"));
var _class = require("./utilities/class");
var _parts = require("./utilities/parts");
var _rule = require("./utilities/rule");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, leftRecursiveDefinitions = retrieveLeftRecursiveDefinitions(rule, ruleMap);
    eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    var directlyLeftRecursiveRules = retrieveDirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart, find = _necessary.arrayUtilities.find, tail = _necessary.arrayUtilities.tail, first = _necessary.arrayUtilities.first;
function eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap) {
    directlyLeftRecursiveRules.forEach(function(directlyLeftRecursiveRule) {
        var rule = directlyLeftRecursiveRule, definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = find(definitions, function(definition) {
            var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
            if (definitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }), directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions);
        directlyLeftRecursiveDefinition.rewrite(ruleMap);
        definitions.splice(0); // rule.removeDefinitions();
        rule.addDefinition(directlyLeftRecursiveDefinition);
    });
}
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), indirectlyLeftRecursiveRule = (0, _rule).ruleFromLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap), implicitlyLeftRecursiveRule = (0, _rule).ruleFromLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, ruleMap), indirectlyLeftRecursiveRuleDirectlyLeftRecursive = (0, _rule).isRuleDirectlyLeftRecursive(indirectlyLeftRecursiveRule), implicitlyLeftRecursiveRuleDirectlyLeftRecursive = (0, _rule).isRuleDirectlyLeftRecursive(implicitlyLeftRecursiveRule);
        if (indirectlyLeftRecursiveRuleDirectlyLeftRecursive && implicitlyLeftRecursiveRuleDirectlyLeftRecursive) {
            var indirectlyLeftRecursiveDefinitionString = indirectlyLeftRecursiveDefinition.asString(), implicitlyLeftRecursiveDefinitionString = implicitlyLeftRecursiveDefinition.asString();
            throw new Error("The rules containing the '".concat(indirectlyLeftRecursiveDefinitionString, "' indirectly left recursive and ").concat(implicitlyLeftRecursiveDefinitionString, " implicitly left recursive definitions are both additionally directly recursive and therefore cannot be rewritten."));
        }
        var directlyLeftRecursiveRule = indirectlyLeftRecursiveRuleDirectlyLeftRecursive ? indirectlyLeftRecursiveRule : implicitlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule = indirectlyLeftRecursiveRuleDirectlyLeftRecursive ? implicitlyLeftRecursiveRule : indirectlyLeftRecursiveRule; ///
        reduceNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule, ruleMap);
        var nonDirectlyLeftRecursiveDefinitions = retrieveNonDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule);
        rewriteNonDirectlyLeftRecursiveDefinitions(nonDirectlyLeftRecursiveDefinitions, nonDirectlyLeftRecursiveRule, ruleMap);
        reduceDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, ruleMap);
    });
}
function reduceDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromDirectlyLeftRecursiveRule(directlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
}
function retrieveLeftRecursiveDefinition(rule, definition, ruleMap, recursiveDefinitions, leftRecursiveDefinitions) {
    var recursiveDefinition;
    var ruleName = rule.getName(), definitionRecursiveDefinition = (0, _class).isInstanceOf(definition, _recursive.default);
    if (definitionRecursiveDefinition) {
        recursiveDefinition = definition; ///
    } else {
        var leftRecursiveDefinition = _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions) || _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _left.default.fromRuleNameAndDefinition(ruleName, definition);
        if (leftRecursiveDefinition !== null) {
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
            recursiveDefinition = leftRecursiveDefinition; ///
        } else {
            recursiveDefinition = _recursive.default.fromRuleNameAndDefinition(ruleName, definition);
        }
        if (recursiveDefinition !== null) {
            var replacedDefinition = definition, replacementDefinition = recursiveDefinition; ///
            rule.replaceDefinition(replacedDefinition, replacementDefinition);
            var recursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(recursiveDefinition, _indirectly.default);
            if (recursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                var indirectlyLeftRecursiveDefinition = recursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), leftRecursiveDefinition1 = implicitlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), replacedDefinition1 = leftRecursiveDefinition1, replacementDefinition1 = implicitlyLeftRecursiveDefinition; ///
                rule = ruleMap[ruleName1];
                rule.replaceDefinition(replacedDefinition1, replacementDefinition1);
            }
        }
    }
    return recursiveDefinition;
}
function retrieveLeftRecursiveDefinitions(rule, ruleMap) {
    var recursiveDefinitions1 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [], leftRecursiveDefinitions = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : [];
    var definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        var recursiveDefinition = retrieveLeftRecursiveDefinition(rule, definition, ruleMap, recursiveDefinitions1, leftRecursiveDefinitions);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions1).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, ruleMap, recursiveDefinitions, leftRecursiveDefinitions);
                    }
                }
            });
        }
    });
    return leftRecursiveDefinitions;
}
function reduceNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
}
function retrieveDirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var directlyLeftRecursiveRules1 = leftRecursiveDefinitions.reduce(function(directlyLeftRecursiveRules, leftRecursiveDefinition) {
        var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _directly.default), leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default), leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _implicitly.default);
        if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition || leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition || leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition) {
            var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions(), ruleDirectlyLeftRecursiveRule = definitions.some(function(definition) {
                var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
                if (definitionDirectlyLeftRecursiveDefinition) {
                    return true;
                }
            });
            if (ruleDirectlyLeftRecursiveRule) {
                var directlyLeftRecursiveRule = rule, directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule = directlyLeftRecursiveRules.includes(directlyLeftRecursiveRule);
                if (!directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule) {
                    directlyLeftRecursiveRules.push(directlyLeftRecursiveRule);
                }
            }
        }
        return directlyLeftRecursiveRules;
    }, []);
    return directlyLeftRecursiveRules1;
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition1;
    var firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition1 = firstDirectlyLeftRecursiveDefinition; ///
    } else {
        var parts1;
        parts1 = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts1), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            directlyLeftRecursiveDefinition.removeFirstPart();
            var parts = directlyLeftRecursiveDefinition.getParts(), singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts1 = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts1);
        parts1 = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition1 = _directly.default.fromRuleNameAndParts(ruleName, parts1);
    }
    return directlyLeftRecursiveDefinition1;
}
function rewriteNonDirectlyLeftRecursiveDefinition(nonDirectlyLeftRecursiveDefinition, nonDirectlyLeftRecursiveRule, ruleMap) {
    var _rule1;
    var definitions = nonDirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), nonDirectlyLeftRecursiveDefinitionParts = nonDirectlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        nonDirectlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(nonDirectlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(nonDirectlyLeftRecursiveDefinitionParts));
        var ruleName = nonDirectlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName2 = nonDirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName2], replacedDefinition = nonDirectlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule1 = rule).replaceDefinition.apply(_rule1, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
}
function rewriteNonDirectlyLeftRecursiveDefinitions(nonDirectlyLeftRecursiveDefinitions, nonDirectlyLeftRecursiveRule, ruleMap) {
    nonDirectlyLeftRecursiveDefinitions.forEach(function(nonDirectlyLeftRecursiveDefinition) {
        rewriteNonDirectlyLeftRecursiveDefinition(nonDirectlyLeftRecursiveDefinition, nonDirectlyLeftRecursiveRule, ruleMap);
    });
}
function retrieveNonDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule) {
    var nonDirectlyLeftRecursiveRuleName = nonDirectlyLeftRecursiveRule.getName(), rule = directlyLeftRecursiveRule, ruleName = nonDirectlyLeftRecursiveRuleName, definitions = rule.getDefinitions(), nonDirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _left.default);
        if (definitionLeftRecursiveDefinition) {
            var leftRecursiveDefinition = definition, leftRecursiveRuleNames = leftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), leftRecursiveRuleName = firstLeftRecursiveRuleName; ///
            if (leftRecursiveRuleName === ruleName) {
                return true;
            }
        }
    });
    return nonDirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBQYXJ0cyB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmVcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuaW1wb3J0IEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2ltcGxpY2l0bHlcIjtcblxuaW1wb3J0IHsgaXNJbnN0YW5jZU9mIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2NsYXNzXCI7XG5pbXBvcnQgeyBjbG9uZVBhcnRzLCBzaW5nbGVQYXJ0RnJvbVBhcnRzIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRzXCI7XG5pbXBvcnQgeyBpc1J1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUsIHJ1bGVGcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfSBmcm9tIFwiLi91dGlsaXRpZXMvcnVsZVwiO1xuXG5jb25zdCB7IENob2ljZU9mUGFydHNQYXJ0IH0gPSBQYXJ0cyxcbiAgICAgIHsgZmluZCwgdGFpbCwgZmlyc3QgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVMZWZ0UmVjdXJzaW9uKHN0YXJ0UnVsZSwgcnVsZU1hcCkge1xuICBjb25zdCBydWxlID0gc3RhcnRSdWxlLCAvLy9cbiAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcnVsZU1hcCk7XG5cbiAgZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcywgcnVsZU1hcCk7XG5cbiAgY29uc3Qgc3RhcnRSdWxlTmFtZSA9IHN0YXJ0UnVsZS5nZXROYW1lKCk7XG5cbiAgc3RhcnRSdWxlID0gcnVsZU1hcFtzdGFydFJ1bGVOYW1lXTsgLy8vXG5cbiAgcmV0dXJuIHN0YXJ0UnVsZTtcbn1cblxuZnVuY3Rpb24gZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcywgcnVsZU1hcCkge1xuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIC8vL1xuICAgICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZChkZWZpbml0aW9ucywgKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5yZXdyaXRlKHJ1bGVNYXApO1xuXG4gICAgZGVmaW5pdGlvbnMuc3BsaWNlKDApOyAvLyBydWxlLnJlbW92ZURlZmluaXRpb25zKCk7XG5cbiAgICBydWxlLmFkZERlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZmlsdGVyKChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGVGcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSxcbiAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlRnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCksXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlID0gaXNSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlID0gaXNSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSk7XG5cbiAgICBpZiAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlICYmIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZSkge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uU3RyaW5nID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmFzU3RyaW5nKCksXG4gICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmcgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uYXNTdHJpbmcoKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcnVsZXMgY29udGFpbmluZyB0aGUgJyR7aW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uU3RyaW5nfScgaW5kaXJlY3RseSBsZWZ0IHJlY3Vyc2l2ZSBhbmQgJHtpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmd9IGltcGxpY2l0bHkgbGVmdCByZWN1cnNpdmUgZGVmaW5pdGlvbnMgYXJlIGJvdGggYWRkaXRpb25hbGx5IGRpcmVjdGx5IHJlY3Vyc2l2ZSBhbmQgdGhlcmVmb3JlIGNhbm5vdCBiZSByZXdyaXR0ZW4uYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIDogLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsICAvLy9cbiAgICAgICAgICBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgOiAgLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGU7IC8vL1xuXG4gICAgcmVkdWNlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcblxuICAgIGNvbnN0IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgIHJld3JpdGVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCk7XG5cbiAgICByZWR1Y2VEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlLCBkZWZpbml0aW9uLCBydWxlTWFwLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGxldCByZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gIGNvbnN0IHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCksXG4gICAgICAgIGRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gIGlmIChkZWZpbml0aW9uUmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgIHJlY3Vyc2l2ZURlZmluaXRpb24gPSBkZWZpbml0aW9uOyAvLy9cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVEZWZpbml0aW9uQW5kUmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZU5hbWUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5wdXNoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb24gPSBSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZERlZmluaXRpb24ocnVsZU5hbWUsIGRlZmluaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBjb25zdCByZXBsYWNlZERlZmluaXRpb24gPSBkZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IHJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cblxuICAgICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgICAgIGNvbnN0IHJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YocmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKHJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICAgICAgcnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cblxuICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV07XG5cbiAgICAgICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJ1bGVNYXAsIHJlY3Vyc2l2ZURlZmluaXRpb25zID0gW10sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpO1xuXG4gIGRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlLCBkZWZpbml0aW9uLCBydWxlTWFwLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zID0gWyAuLi5yZWN1cnNpdmVEZWZpbml0aW9ucywgcmVjdXJzaXZlRGVmaW5pdGlvbiBdLFxuICAgICAgICAgICAgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgocHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWUgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZTsgIC8vL1xuXG4gICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSByZWN1cnNpdmVEZWZpbml0aW9uLmdldFJlY3Vyc2l2ZVJ1bGVOYW1lcygpO1xuXG4gICAgICByZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgocmVjdXJzaXZlUnVsZU5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICAgIGlmICghcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSByZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSB8fCBudWxsOyAvLy9cblxuICAgICAgICAgIGlmIChydWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9ucyA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnM7ICAvLy9cblxuICAgICAgICAgICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcnVsZU1hcCwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJlZHVjZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUobm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCkge1xuICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21Ob25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpLFxuICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgcnVsZU1hcFtyZWR1Y2VkUnVsZU5hbWVdID0gcmVkdWNlZFJ1bGU7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnJlZHVjZSgoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IHJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgICAgcnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkZWZpbml0aW9ucy5zb21lKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgaWYgKHJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlLCAvLy9cbiAgICAgICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc0RpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgICAgICBpZiAoIWRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG5cbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzO1xufVxuXG5mdW5jdGlvbiBtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGxldCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gIGNvbnN0IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0KGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGggPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5sZW5ndGg7XG5cbiAgaWYgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID09PSAxKSB7XG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gIH0gZWxzZSB7XG4gICAgbGV0IHBhcnRzO1xuXG4gICAgcGFydHMgPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTsgIC8vL1xuXG4gICAgY29uc3QgZmlyc3RQYXJ0ID0gZmlyc3QocGFydHMpLFxuICAgICAgICAgIHBhcnQgPSBmaXJzdFBhcnQ7IC8vL1xuXG4gICAgY29uc3Qgc2luZ2xlUGFydHMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ucmVtb3ZlRmlyc3RQYXJ0KCk7XG5cbiAgICAgIGNvbnN0IHBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpLFxuICAgICAgICAgICAgc2luZ2xlUGFydCA9IHNpbmdsZVBhcnRGcm9tUGFydHMocGFydHMpO1xuXG4gICAgICByZXR1cm4gc2luZ2xlUGFydDtcbiAgICB9KTtcblxuICAgIHBhcnRzID0gc2luZ2xlUGFydHM7ICAvLy9cblxuICAgIGNvbnN0IGNob2ljZU9mUGFydHNQYXJ0ID0gbmV3IENob2ljZU9mUGFydHNQYXJ0KHBhcnRzKTtcblxuICAgIHBhcnRzID0gWyAvLy9cbiAgICAgIHBhcnQsXG4gICAgICBjaG9pY2VPZlBhcnRzUGFydFxuICAgIF1cblxuICAgIGNvbnN0IHJ1bGVOYW1lID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmRQYXJ0cyhydWxlTmFtZSwgcGFydHMpO1xuICB9XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApIHtcbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIHJld3JpdHRlbkRlZmluaXRpb25zID0gZGVmaW5pdGlvbnMubWFwKChkZWZpbml0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IERlZmluaXRpb24gPSAoaW5kZXggPT09IDApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgICAgICAgbGV0IGRlZmluaXRpb25QYXJ0cyA9IGRlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgICAgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpO1xuXG4gICAgICAgICAgZGVmaW5pdGlvblBhcnRzID0gY2xvbmVQYXJ0cyhkZWZpbml0aW9uUGFydHMpOyAgLy8vXG5cbiAgICAgICAgICBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSB0YWlsKGNsb25lUGFydHMobm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzKSk7ICAvLy9cblxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gW1xuICAgICAgICAgICAgLi4uZGVmaW5pdGlvblBhcnRzLFxuICAgICAgICAgICAgLi4ubm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGwsICAvLy9cbiAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gbnVsbDsgIC8vL1xuXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IG5ldyBEZWZpbml0aW9uKHBhcnRzLCBydWxlTmFtZSwgcmVjdXJzaXZlUnVsZU5hbWVzLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTsgLy8vXG5cbiAgICAgICAgICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgLy8vXG5cbiAgICAgICAgICByZXR1cm4gcmV3cml0dGVuRGVmaW5pdGlvbjtcbiAgICAgICAgfSksXG4gICAgICAgIHJ1bGVOYW1lID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0sXG4gICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sICAvLy9cbiAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IHJld3JpdHRlbkRlZmluaXRpb25zOyAgLy8vXG5cbiAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApIHtcbiAgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgobm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIHJld3JpdGVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG4gIGNvbnN0IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZS5nZXROYW1lKCksXG4gICAgICAgIHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgcnVsZU5hbWUgPSBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucy5maWx0ZXIoKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgaWYgKGRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBkZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKCksXG4gICAgICAgICAgICAgICAgICBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0KGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpLFxuICAgICAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWU7IC8vL1xuXG4gICAgICAgICAgICBpZiAobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID09PSBydWxlTmFtZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVMZWZ0UmVjdXJzaW9uIiwic3RhcnRSdWxlIiwicnVsZU1hcCIsInJ1bGUiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24iLCJzdGFydFJ1bGVOYW1lIiwiZ2V0TmFtZSIsIkNob2ljZU9mUGFydHNQYXJ0IiwiUGFydHMiLCJmaW5kIiwiYXJyYXlVdGlsaXRpZXMiLCJ0YWlsIiwiZmlyc3QiLCJmb3JFYWNoIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImlzSW5zdGFuY2VPZiIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGUiLCJzcGxpY2UiLCJhZGREZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbHRlciIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJydWxlRnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlIiwiaXNSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uU3RyaW5nIiwiYXNTdHJpbmciLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmciLCJFcnJvciIsIm5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwibm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV3cml0ZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVkdWNlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlTmFtZSIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uIiwiUmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZyb21SdWxlTmFtZUFuZERlZmluaXRpb24iLCJMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInB1c2giLCJyZXBsYWNlZERlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJyZXBsYWNlRGVmaW5pdGlvbiIsInJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldFJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzIiwibWFwIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lIiwicmVjdXJzaXZlUnVsZU5hbWVzIiwiZ2V0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmVjdXJzaXZlUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUmVjdXJzaXZlUnVsZU5hbWUiLCJpbmNsdWRlcyIsImZyb21Ob25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInNvbWUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoIiwibGVuZ3RoIiwicGFydHMiLCJnZXRQYXJ0cyIsImZpcnN0UGFydCIsInBhcnQiLCJzaW5nbGVQYXJ0cyIsInJlbW92ZUZpcnN0UGFydCIsInNpbmdsZVBhcnQiLCJzaW5nbGVQYXJ0RnJvbVBhcnRzIiwiY2hvaWNlT2ZQYXJ0c1BhcnQiLCJmcm9tUnVsZU5hbWVBbmRQYXJ0cyIsInJld3JpdGVOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdHRlbkRlZmluaXRpb25zIiwiaW5kZXgiLCJEZWZpbml0aW9uIiwiZGVmaW5pdGlvblBhcnRzIiwibm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzIiwiY2xvbmVQYXJ0cyIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJyZXdyaXR0ZW5EZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsIm5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiZGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsImZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1l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