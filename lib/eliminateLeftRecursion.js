"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _necessary = require("necessary");
var _occamParsers = require("occam-parsers");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _class = require("./utilities/class");
var _part = require("./utilities/part");
var _parts = require("./utilities/parts");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, recursiveDefinitions = [], leftRecursiveDefinitions = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    eliminateDirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart, find = _necessary.arrayUtilities.find, tail = _necessary.arrayUtilities.tail, push = _necessary.arrayUtilities.push, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function eliminateDirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var directlyLeftRecursiveDefinitions = retrieveDirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions);
    directlyLeftRecursiveDefinitions.forEach(function(directlyLeftRecursiveDefinition) {
        var directlyLeftRecursiveDefinitionRuleName = directlyLeftRecursiveDefinition.getRuleName(), directlyLeftRecursiveRuleName = directlyLeftRecursiveDefinitionRuleName, directlyLeftRecursiveRule = ruleMap[directlyLeftRecursiveRuleName];
        var reducedRule = _reduced.default.fromDirectlyLeftRecursiveRule(directlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
        filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
            var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = leftRecursiveDefinition === directlyLeftRecursiveDefinition;
            if (!leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        });
        rewriteDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, leftRecursiveDefinitions);
    });
}
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var directlyLeftRecursiveRule;
        var indirectlyLeftRecursiveDefinitionRuleName = indirectlyLeftRecursiveDefinition.getRuleName(), indirectlyLeftRecursiveRuleName = indirectlyLeftRecursiveDefinitionRuleName, indirectlyLeftRecursiveRule = ruleMap[indirectlyLeftRecursiveRuleName];
        rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap);
        directlyLeftRecursiveRule = indirectlyLeftRecursiveRule; ///
        rewriteDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, leftRecursiveDefinitions);
        var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), implicitlyLeftRecursiveDefinitionRuleName = implicitlyLeftRecursiveDefinition.getRuleName(), implicitlyLeftRecursiveRuleName = implicitlyLeftRecursiveDefinitionRuleName, implicitlyLeftRecursiveRule = ruleMap[implicitlyLeftRecursiveRuleName];
        rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap);
        rewriteImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRule, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap);
        directlyLeftRecursiveRule = implicitlyLeftRecursiveRule; ///
        rewriteDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, leftRecursiveDefinitions);
    });
}
function rewriteDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, leftRecursiveDefinitions) {
    var rule = directlyLeftRecursiveRule, directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions), definition = definitionFromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition), replacedDefinition = directlyLeftRecursiveDefinition, replacementDefinition = definition; ///
    directlyLeftRecursiveRule.replaceDefinition(replacedDefinition, replacementDefinition);
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = leftRecursiveDefinition === directlyLeftRecursiveDefinition;
        if (!leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
}
function retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var recursiveDefinition;
    var ruleName = rule.getName(), definitionRecursiveDefinition = (0, _class).isInstanceOf(definition, _recursive.default);
    if (definitionRecursiveDefinition) {
        recursiveDefinition = definition; ///
    } else {
        var leftRecursiveDefinition = _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions) || _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _left.default.fromRuleNameAndDefinition(ruleName, definition);
        if (leftRecursiveDefinition !== null) {
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
            recursiveDefinition = leftRecursiveDefinition; ///
        } else {
            recursiveDefinition = _recursive.default.fromRuleNameAndDefinition(ruleName, definition);
        }
        if (recursiveDefinition !== null) {
            var replacedDefinition = definition, replacementDefinition = recursiveDefinition; ///
            rule.replaceDefinition(replacedDefinition, replacementDefinition);
            var recursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(recursiveDefinition, _indirectly.default);
            if (recursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                var indirectlyLeftRecursiveDefinition = recursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), leftRecursiveDefinition1 = implicitlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), replacedDefinition1 = leftRecursiveDefinition1, replacementDefinition1 = implicitlyLeftRecursiveDefinition; ///
                rule = ruleMap[ruleName1];
                rule.replaceDefinition(replacedDefinition1, replacementDefinition1);
            }
        }
    }
    return recursiveDefinition;
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        var recursiveDefinition = retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}
function rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName(), repeatedRuleName = repeatedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    ruleMap[repeatedRuleName] = repeatedRule;
}
function rewriteImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRule, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var reducedRule = _reduced.default.fromImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = leftRecursiveDefinition === indirectlyLeftRecursiveDefinition;
        if (!leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveRule.removeDefinition(indirectlyLeftRecursiveDefinition);
}
function mergeDirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition;
    var definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = find(definitions, function(definition) {
        var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
        if (definitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    }), firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition = firstDirectlyLeftRecursiveDefinition;
    } else {
        var parts;
        parts = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            var parts = directlyLeftRecursiveDefinition.getParts();
            parts.shift(); ///
            var singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts);
        parts = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
        filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
            var directlyLeftRecursiveDDefinitionsIncludesLeftRecursiveDefinition = directlyLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
            if (!directlyLeftRecursiveDDefinitionsIncludesLeftRecursiveDefinition) {
                return true;
            }
        });
        var definitions1 = tail(directlyLeftRecursiveDefinitions), replacedDefinition = firstDirectlyLeftRecursiveDefinition, replacementDefinition = directlyLeftRecursiveDefinition; ///
        rule.removeDefinitions(definitions1);
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
    }
    return directlyLeftRecursiveDefinition;
}
function rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap) {
    var _rule;
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), implicitlyLeftRecursiveDefinitionParts = implicitlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        implicitlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(implicitlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(implicitlyLeftRecursiveDefinitionParts));
        var ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = implicitlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
    push(leftRecursiveDefinitions, rewrittenDefinitions);
}
function retrieveDirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _directly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function definitionFromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition) {
    var parts = directlyLeftRecursiveDefinition.getParts();
    parts.shift();
    var ruleName = directlyLeftRecursiveDefinition.getRuleName(), reducedPart = (0, _part).reducedPartFromRuleName(ruleName), repeatedPart = (0, _parts).repeatedPartFromParts(parts);
    parts = [
        reducedPart,
        repeatedPart
    ];
    var definition = new _occamParsers.Definition(parts);
    return definition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcbmltcG9ydCB7IFBhcnRzLCBEZWZpbml0aW9uIH0gZnJvbSBcIm9jY2FtLXBhcnNlcnNcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkXCI7XG5pbXBvcnQgUmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZVwiO1xuaW1wb3J0IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnRcIjtcbmltcG9ydCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IGlzSW5zdGFuY2VPZiB9IGZyb20gXCIuL3V0aWxpdGllcy9jbGFzc1wiO1xuaW1wb3J0IHsgcmVkdWNlZFBhcnRGcm9tUnVsZU5hbWUgfSBmcm9tIFwiLi91dGlsaXRpZXMvcGFydFwiO1xuaW1wb3J0IHsgY2xvbmVQYXJ0cywgcmVwZWF0ZWRQYXJ0RnJvbVBhcnRzLCBzaW5nbGVQYXJ0RnJvbVBhcnRzIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRzXCI7XG5cbmNvbnN0IHsgQ2hvaWNlT2ZQYXJ0c1BhcnQgfSA9IFBhcnRzLFxuICAgICAgeyBmaW5kLCB0YWlsLCBwdXNoLCBmaXJzdCwgZmlsdGVyIH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlTGVmdFJlY3Vyc2lvbihzdGFydFJ1bGUsIHJ1bGVNYXApIHtcbiAgY29uc3QgcnVsZSA9IHN0YXJ0UnVsZSwgLy8vXG4gICAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb25zID0gW10sXG4gICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIGVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBjb25zdCBzdGFydFJ1bGVOYW1lID0gc3RhcnRSdWxlLmdldE5hbWUoKTtcblxuICBzdGFydFJ1bGUgPSBydWxlTWFwW3N0YXJ0UnVsZU5hbWVdOyAvLy9cblxuICByZXR1cm4gc3RhcnRSdWxlO1xufVxuXG5mdW5jdGlvbiBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGVNYXBbZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdO1xuXG4gICAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICAgIGZpbHRlcihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID09PSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKCFsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGxldCBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlO1xuXG4gICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUsICAvLy9cbiAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlTWFwW2luZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdO1xuXG4gICAgcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZTsgLy8vXG5cbiAgICByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZU1hcFtpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lXTtcblxuICAgIHJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgICByZXdyaXRlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlOyAgLy8vXG5cbiAgICByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IGRlZmluaXRpb25Gcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuXG4gIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gIGZpbHRlcihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9PT0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoIWxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGV0IHJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgY29uc3QgcnVsZU5hbWUgPSBydWxlLmdldE5hbWUoKSxcbiAgICAgICAgZGVmaW5pdGlvblJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgUmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKGRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlTmFtZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZERlZmluaXRpb24ocnVsZU5hbWUsIGRlZmluaXRpb24pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICByZWN1cnNpdmVEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gcmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihyZWN1cnNpdmVEZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFsgLi4ucmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlY3Vyc2l2ZURlZmluaXRpb24gXSxcbiAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWU7ICAvLy9cblxuICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzID0gcmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSZWN1cnNpdmVSdWxlTmFtZXMoKTtcblxuICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzLmZvckVhY2goKHJlY3Vyc2l2ZVJ1bGVOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzLmluY2x1ZGVzKHJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICAgICAgICBpZiAoIXByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gcmVjdXJzaXZlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0gfHwgbnVsbDsgLy8vXG5cbiAgICAgICAgICBpZiAocnVsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zOyAgLy8vXG5cbiAgICAgICAgICAgIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApIHtcbiAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlcGVhdGVkUnVsZSA9IFJlcGVhdGVkUnVsZS5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKSxcbiAgICAgICAgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgcnVsZU1hcFtyZWR1Y2VkUnVsZU5hbWVdID0gcmVkdWNlZFJ1bGU7XG5cbiAgcnVsZU1hcFtyZXBlYXRlZFJ1bGVOYW1lXSA9IHJlcGVhdGVkUnVsZTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICBmaWx0ZXIobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9PT0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSlcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUucmVtb3ZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBsZXQgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICBjb25zdCBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kKGRlZmluaXRpb25zLCAoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgaWYgKGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubGVuZ3RoO1xuXG4gIGlmIChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCA9PT0gMSkge1xuICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0gZWxzZSB7XG4gICAgbGV0IHBhcnRzO1xuXG4gICAgcGFydHMgPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTsgIC8vL1xuXG4gICAgY29uc3QgZmlyc3RQYXJ0ID0gZmlyc3QocGFydHMpLFxuICAgICAgICAgIHBhcnQgPSBmaXJzdFBhcnQ7IC8vL1xuXG4gICAgY29uc3Qgc2luZ2xlUGFydHMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgIGNvbnN0IHBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpO1xuXG4gICAgICBwYXJ0cy5zaGlmdCgpOyAgLy8vXG5cbiAgICAgIGNvbnN0IHNpbmdsZVBhcnQgPSBzaW5nbGVQYXJ0RnJvbVBhcnRzKHBhcnRzKTtcblxuICAgICAgcmV0dXJuIHNpbmdsZVBhcnQ7XG4gICAgfSk7XG5cbiAgICBwYXJ0cyA9IHNpbmdsZVBhcnRzOyAgLy8vXG5cbiAgICBjb25zdCBjaG9pY2VPZlBhcnRzUGFydCA9IG5ldyBDaG9pY2VPZlBhcnRzUGFydChwYXJ0cyk7XG5cbiAgICBwYXJ0cyA9IFsgLy8vXG4gICAgICBwYXJ0LFxuICAgICAgY2hvaWNlT2ZQYXJ0c1BhcnRcbiAgICBdXG5cbiAgICBjb25zdCBydWxlTmFtZSA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kUGFydHMocnVsZU5hbWUsIHBhcnRzKTtcblxuICAgIGZpbHRlcihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRERlZmluaXRpb25zSW5jbHVkZXNMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmluY2x1ZGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKCFkaXJlY3RseUxlZnRSZWN1cnNpdmVERGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSB0YWlsKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cblxuICAgIHJ1bGUucmVtb3ZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuXG4gICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gIH1cblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIHJld3JpdHRlbkRlZmluaXRpb25zID0gZGVmaW5pdGlvbnMubWFwKChkZWZpbml0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IERlZmluaXRpb24gPSAoaW5kZXggPT09IDApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgICAgICAgbGV0IGRlZmluaXRpb25QYXJ0cyA9IGRlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICAgICAgICAgIGRlZmluaXRpb25QYXJ0cyA9IGNsb25lUGFydHMoZGVmaW5pdGlvblBhcnRzKTsgIC8vL1xuXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSB0YWlsKGNsb25lUGFydHMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMpKTsgIC8vL1xuXG4gICAgICAgICAgY29uc3QgcGFydHMgPSBbXG4gICAgICAgICAgICAuLi5kZWZpbml0aW9uUGFydHMsXG4gICAgICAgICAgICAuLi5pbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0c1xuICAgICAgICAgIF07XG5cbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGwsICAvLy9cbiAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gbnVsbDsgIC8vL1xuXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IG5ldyBEZWZpbml0aW9uKHBhcnRzLCBydWxlTmFtZSwgcmVjdXJzaXZlUnVsZU5hbWVzLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTsgLy8vXG5cbiAgICAgICAgICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgLy8vXG5cbiAgICAgICAgICByZXR1cm4gcmV3cml0dGVuRGVmaW5pdGlvbjtcbiAgICAgICAgfSksXG4gICAgICAgIHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXR0ZW5EZWZpbml0aW9uczsgIC8vL1xuXG4gIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zKTtcblxuICBwdXNoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcmV3cml0dGVuRGVmaW5pdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5maWx0ZXIoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZpbHRlcigobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gZGVmaW5pdGlvbkZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgbGV0IHBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpO1xuXG4gIHBhcnRzLnNoaWZ0KCk7XG5cbiAgY29uc3QgcnVsZU5hbWUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJlZHVjZWRQYXJ0ID0gcmVkdWNlZFBhcnRGcm9tUnVsZU5hbWUocnVsZU5hbWUpLFxuICAgICAgICByZXBlYXRlZFBhcnQgPSByZXBlYXRlZFBhcnRGcm9tUGFydHMocGFydHMpO1xuXG4gIHBhcnRzID0gWyAvLy9cbiAgICByZWR1Y2VkUGFydCxcbiAgICByZXBlYXRlZFBhcnRcbiAgXVxuXG4gIGNvbnN0IGRlZmluaXRpb24gPSBuZXcgRGVmaW5pdGlvbihwYXJ0cyk7XG5cbiAgcmV0dXJuIGRlZmluaXRpb247XG59Il0sIm5hbWVzIjpbImVsaW1pbmF0ZUxlZnRSZWN1cnNpb24iLCJzdGFydFJ1bGUiLCJydWxlTWFwIiwicnVsZSIsInJlY3Vyc2l2ZURlZmluaXRpb25zIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uIiwic3RhcnRSdWxlTmFtZSIsImdldE5hbWUiLCJDaG9pY2VPZlBhcnRzUGFydCIsIlBhcnRzIiwiZmluZCIsImFycmF5VXRpbGl0aWVzIiwidGFpbCIsInB1c2giLCJmaXJzdCIsImZpbHRlciIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZvckVhY2giLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwiZ2V0UnVsZU5hbWUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VkUnVsZSIsIlJlZHVjZWRSdWxlIiwiZnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VkUnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZXdyaXRlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsIm1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uIiwiZGVmaW5pdGlvbkZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZWREZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9uIiwicmVwbGFjZURlZmluaXRpb24iLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVjdXJzaXZlRGVmaW5pdGlvbiIsInJ1bGVOYW1lIiwiZGVmaW5pdGlvblJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0luc3RhbmNlT2YiLCJSZWN1cnNpdmVEZWZpbml0aW9uIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVJ1bGVOYW1lRGVmaW5pdGlvbkFuZFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlTmFtZUFuZERlZmluaXRpb24iLCJMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zIiwicHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMiLCJtYXAiLCJwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb24iLCJwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWUiLCJyZWN1cnNpdmVSdWxlTmFtZXMiLCJnZXRSZWN1cnNpdmVSdWxlTmFtZXMiLCJyZWN1cnNpdmVSdWxlTmFtZSIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSIsImluY2x1ZGVzIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlcGVhdGVkUnVsZSIsIlJlcGVhdGVkUnVsZSIsInJlcGVhdGVkUnVsZU5hbWUiLCJmcm9tSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZW1vdmVEZWZpbml0aW9uIiwiZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCIsImxlbmd0aCIsInBhcnRzIiwiZ2V0UGFydHMiLCJmaXJzdFBhcnQiLCJwYXJ0Iiwic2luZ2xlUGFydHMiLCJzaGlmdCIsInNpbmdsZVBhcnQiLCJzaW5nbGVQYXJ0RnJvbVBhcnRzIiwiY2hvaWNlT2ZQYXJ0c1BhcnQiLCJmcm9tUnVsZU5hbWVBbmRQYXJ0cyIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZUREZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZW1vdmVEZWZpbml0aW9ucyIsInJld3JpdHRlbkRlZmluaXRpb25zIiwiaW5kZXgiLCJEZWZpbml0aW9uIiwiZGVmaW5pdGlvblBhcnRzIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMiLCJjbG9uZVBhcnRzIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJld3JpdHRlbkRlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb25zIiwicmVkdWNlZFBhcnQiLCJyZWR1Y2VkUGFydEZyb21SdWxlTmFtZSIsInJlcGVhdGVkUGFydCIsInJlcGVhdGVkUGFydEZyb21QYXJ0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O2tCQW1CV0Esc0JBQXNCO0FBakJmLElBQUEsVUFBVyxXQUFYLFdBQVcsQ0FBQTtBQUNSLElBQUEsYUFBZSxXQUFmLGVBQWUsQ0FBQTtBQUV6QixJQUFBLFFBQWdCLGtDQUFoQixnQkFBZ0IsRUFBQTtBQUNmLElBQUEsU0FBaUIsa0NBQWpC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