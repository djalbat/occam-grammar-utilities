"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _rewritten = _interopRequireDefault(require("./rule/rewritten"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _class = require("./utilities/class");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, reducedRules = [], rewrittenRules = [], leftRecursiveRules = [], recursiveDefinitions = [], leftRecursiveDefinitions = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    retrieveLeftRecursiveRules(leftRecursiveRules, leftRecursiveDefinitions, ruleMap);
    reduceLeftRecursiveRules(leftRecursiveRules, reducedRules, ruleMap);
    rewriteLeftRecursiveRules(leftRecursiveRules, rewrittenRules, leftRecursiveDefinitions, ruleMap);
    eliminateDirectLeftRecursion(rewrittenRules, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var find = _necessary.arrayUtilities.find;
function reduceLeftRecursiveRules(leftRecursiveRules, reducedRules, ruleMap) {
    leftRecursiveRules.forEach(function(leftRecursiveRule) {
        var rule = leftRecursiveRule, reducedRule = _reduced.default.fromRule(rule);
        if (reducedRule !== null) {
            var reducedRuleName = reducedRule.getName();
            ruleMap[reducedRuleName] = reducedRule;
            reducedRules.push(reducedRule);
        }
    });
}
function rewriteLeftRecursiveRules(leftRecursiveRules, rewrittenRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveRules.forEach(function(leftRecursiveRule) {
        var rule = leftRecursiveRule, ruleName = rule.getName(), rewrittenRule = _rewritten.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions);
        delete ruleMap[ruleName];
        var rewrittenRuleName = ruleName; ///
        ruleMap[rewrittenRuleName] = rewrittenRule;
        rewrittenRules.push(rewrittenRule);
    });
}
function retrieveLeftRecursiveRules(leftRecursiveRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], leftRecursiveRulesIncludesRule = leftRecursiveRules.includes(rule);
        if (!leftRecursiveRulesIncludesRule) {
            var leftRecursiveRule = rule; ///
            leftRecursiveRules.push(leftRecursiveRule);
        }
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), rule1 = ruleMap[ruleName1], leftRecursiveRulesIncludesRule1 = leftRecursiveRules.includes(rule1);
            if (!leftRecursiveRulesIncludesRule1) {
                var leftRecursiveRule1 = rule1; ///
                leftRecursiveRules.push(leftRecursiveRule1);
            }
        }
    });
}
function eliminateDirectLeftRecursion(rewrittenRules, ruleMap) {
    rewrittenRules.forEach(function(rewrittenRule) {
        var rewrittenRuleDefinitions = rewrittenRule.getDefinitions(), directlyLeftRecursiveDefinitions = find(rewrittenRuleDefinitions, function(rewrittenRuleDefinition) {
            var rewrittenRuleDefinitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(rewrittenRuleDefinition, _directly.default);
            if (rewrittenRuleDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        });
        directlyLeftRecursiveDefinitions.forEach(function(directlyLeftRecursiveDefinition) {
            directlyLeftRecursiveDefinition.rewrite(ruleMap);
        });
    });
}
function retrieveLeftRecursiveDefinition(ruleName, definition, recursiveDefinitions, leftRecursiveDefinitions) {
    var leftRecursiveDefinitionMatchesDefinition1 = leftRecursiveDefinitions.some(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionMatchesDefinition = leftRecursiveDefinition.match(definition);
        if (leftRecursiveDefinitionMatchesDefinition) {
            return true;
        }
    });
    if (leftRecursiveDefinitionMatchesDefinition1) {
        return;
    }
    var leftRecursiveDefinition1 = _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions);
    if (leftRecursiveDefinition1 !== null) {
        leftRecursiveDefinitions.push(leftRecursiveDefinition1);
    }
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var ruleName2 = rule.getName(), definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        retrieveLeftRecursiveDefinition(ruleName2, definition, recursiveDefinitions, leftRecursiveDefinitions);
        var recursiveDefinition = _left.default.fromRuleNameAndDefinition(ruleName2, definition) || _recursive.default.fromRuleNameAndDefinition(ruleName2, definition);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJld3JpdHRlblJ1bGUgZnJvbSBcIi4vcnVsZS9yZXdyaXR0ZW5cIjtcbmltcG9ydCBSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlXCI7XG5pbXBvcnQgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdFwiO1xuaW1wb3J0IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2luZGlyZWN0bHlcIjtcblxuaW1wb3J0IHsgaXNJbnN0YW5jZU9mIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2NsYXNzXCI7XG5cbmNvbnN0IHsgZmluZCB9ID0gYXJyYXlVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24oc3RhcnRSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGUgPSBzdGFydFJ1bGUsIC8vL1xuICAgICAgICByZWR1Y2VkUnVsZXMgPSBbXSxcbiAgICAgICAgcmV3cml0dGVuUnVsZXMgPSBbXSxcbiAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVzID0gW10sXG4gICAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb25zID0gW10sXG4gICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVSdWxlcywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICByZWR1Y2VMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZWR1Y2VkUnVsZXMsIHJ1bGVNYXApO1xuXG4gIHJld3JpdGVMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZXdyaXR0ZW5SdWxlcywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKHJld3JpdHRlblJ1bGVzLCBydWxlTWFwKTtcblxuICBjb25zdCBzdGFydFJ1bGVOYW1lID0gc3RhcnRSdWxlLmdldE5hbWUoKTtcblxuICBzdGFydFJ1bGUgPSBydWxlTWFwW3N0YXJ0UnVsZU5hbWVdOyAvLy9cblxuICByZXR1cm4gc3RhcnRSdWxlO1xufVxuXG5mdW5jdGlvbiByZWR1Y2VMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZWR1Y2VkUnVsZXMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZVJ1bGVzLmZvckVhY2goKGxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgICByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21SdWxlKHJ1bGUpO1xuXG4gICAgaWYgKHJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgICBjb25zdCByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICAgIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xuXG4gICAgICByZWR1Y2VkUnVsZXMucHVzaChyZWR1Y2VkUnVsZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlUnVsZXMsIHJld3JpdHRlblJ1bGVzLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZVJ1bGVzLmZvckVhY2goKGxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgICBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICAgIHJld3JpdHRlblJ1bGUgPSBSZXdyaXR0ZW5SdWxlLmZyb21SdWxlQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBkZWxldGUgcnVsZU1hcFtydWxlTmFtZV07XG5cbiAgICBjb25zdCByZXdyaXR0ZW5SdWxlTmFtZSA9IHJ1bGVOYW1lOyAvLy9cblxuICAgIHJ1bGVNYXBbcmV3cml0dGVuUnVsZU5hbWVdID0gcmV3cml0dGVuUnVsZTtcblxuICAgIHJld3JpdHRlblJ1bGVzLnB1c2gocmV3cml0dGVuUnVsZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlUnVsZXMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhydWxlKTtcblxuICAgIGlmICghbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlKSB7XG4gICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGU7IC8vL1xuXG4gICAgICBsZWZ0UmVjdXJzaXZlUnVsZXMucHVzaChsZWZ0UmVjdXJzaXZlUnVsZSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlID0gbGVmdFJlY3Vyc2l2ZVJ1bGVzLmluY2x1ZGVzKHJ1bGUpO1xuXG4gICAgICAgIGlmICghbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlKSB7XG4gICAgICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlOyAvLy9cblxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGxlZnRSZWN1cnNpdmVSdWxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24ocmV3cml0dGVuUnVsZXMsIHJ1bGVNYXApIHtcbiAgcmV3cml0dGVuUnVsZXMuZm9yRWFjaCgocmV3cml0dGVuUnVsZSkgPT4ge1xuICAgIGNvbnN0IHJld3JpdHRlblJ1bGVEZWZpbml0aW9ucyA9IHJld3JpdHRlblJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQocmV3cml0dGVuUnVsZURlZmluaXRpb25zLCAocmV3cml0dGVuUnVsZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJld3JpdHRlblJ1bGVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbiwgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLnJld3JpdGUocnVsZU1hcCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTWF0Y2hlc0RlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuc29tZSgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbk1hdGNoZXNEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ubWF0Y2goZGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25NYXRjaGVzRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25NYXRjaGVzRGVmaW5pdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVEZWZpbml0aW9uQW5kUmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZU5hbWUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMucHVzaChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcblxuICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zID0gWyAuLi5yZWN1cnNpdmVEZWZpbml0aW9ucywgcmVjdXJzaXZlRGVmaW5pdGlvbiBdLFxuICAgICAgICAgICAgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgocHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWUgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZTsgIC8vL1xuXG4gICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSByZWN1cnNpdmVEZWZpbml0aW9uLmdldFJlY3Vyc2l2ZVJ1bGVOYW1lcygpO1xuXG4gICAgICByZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgocmVjdXJzaXZlUnVsZU5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICAgIGlmICghcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSByZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSB8fCBudWxsOyAvLy9cblxuICAgICAgICAgIGlmIChydWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9ucyA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnM7ICAvLy9cblxuICAgICAgICAgICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImVsaW1pbmF0ZUxlZnRSZWN1cnNpb24iLCJzdGFydFJ1bGUiLCJydWxlTWFwIiwicnVsZSIsInJlZHVjZWRSdWxlcyIsInJld3JpdHRlblJ1bGVzIiwibGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmVkdWNlTGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmV3cml0ZUxlZnRSZWN1cnNpdmVSdWxlcyIsImVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24iLCJzdGFydFJ1bGVOYW1lIiwiZ2V0TmFtZSIsImZpbmQiLCJhcnJheVV0aWxpdGllcyIsImZvckVhY2giLCJsZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tUnVsZSIsInJlZHVjZWRSdWxlTmFtZSIsInB1c2giLCJydWxlTmFtZSIsInJld3JpdHRlblJ1bGUiLCJSZXdyaXR0ZW5SdWxlIiwiZnJvbVJ1bGVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXdyaXR0ZW5SdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0UnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc1J1bGUiLCJpbmNsdWRlcyIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaXNJbnN0YW5jZU9mIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0dGVuUnVsZURlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdHRlblJ1bGVEZWZpbml0aW9uIiwicmV3cml0dGVuUnVsZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbk1hdGNoZXNEZWZpbml0aW9uIiwic29tZSIsIm1hdGNoIiwiZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbiIsImZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRlZmluaXRpb25zIiwicmVjdXJzaXZlRGVmaW5pdGlvbiIsIkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiUmVjdXJzaXZlRGVmaW5pdGlvbiIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lcyIsIm1hcCIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbiIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZSIsInJlY3Vyc2l2ZVJ1bGVOYW1lcyIsImdldFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJlY3Vyc2l2ZVJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7a0JBZVdBLHNCQUFzQjtBQWJmLElBQUEsVUFBVyxXQUFYLFdBQVcsQ0FBQTtBQUVsQixJQUFBLFFBQWdCLGtDQUFoQixnQkFBZ0IsRUFBQTtBQUNkLElBQUEsVUFBa0Isa0NBQWxCLGtCQUFrQixFQUFBO0FBQ1osSUFBQSxVQUF3QixrQ0FBeEIsd0JBQXdCLEVBQUE7QUFDcEIsSUFBQSxLQUE2QixrQ0FBN0IsNkJBQTZCLEVBQUE7QUFDckIsSUFBQSxTQUFzQyxrQ0FBdEMsc0NBQXNDLEVBQUE7QUFDcEMsSUFBQSxXQUF3QyxrQ0FBeEMsd0NBQXdDLEVBQUE7QUFFekQsSUFBQSxNQUFtQixXQUFuQixtQkFBbUIsQ0FBQTtBQUlqQyxTQUFTQSxzQkFBc0IsQ0FBQ0MsU0FBUyxFQUFFQyxPQUFPLEVBQUU7SUFDakUsSUFBTUMsSUFBSSxHQUFHRixTQUFTLEVBQ2hCRyxZQUFZLEdBQUcsRUFBRSxFQUNqQkMsY0FBYyxHQUFHLEVBQUUsRUFDbkJDLGtCQUFrQixHQUFHLEVBQUUsRUFDdkJDLG9CQUFvQixHQUFHLEVBQUUsRUFDekJDLHdCQUF3QixHQUFHLEVBQUUsQUFBQztJQUVwQ0MsZ0NBQWdDLENBQUNOLElBQUksRUFBRUksb0JBQW9CLEVBQUVDLHdCQUF3QixFQUFFTixPQUFPLENBQUMsQ0FBQztJQUVoR1EsMEJBQTBCLENBQUNKLGtCQUFrQixFQUFFRSx3QkFBd0IsRUFBRU4sT0FBTyxDQUFDLENBQUM7SUFFbEZTLHdCQUF3QixDQUFDTCxrQkFBa0IsRUFBRUYsWUFBWSxFQUFFRixPQUFPLENBQUMsQ0FBQztJQUVwRVUseUJBQXlCLENBQUNOLGtCQUFrQixFQUFFRCxjQUFjLEVBQUVHLHdCQUF3QixFQUFFTixPQUFPLENBQUMsQ0FBQztJQUVqR1csNEJBQTRCLENBQUNSLGNBQWMsRUFBRUgsT0FBTyxDQUFDLENBQUM7SUFFdEQsSUFBTVksYUFBYSxHQUFHYixTQUFTLENBQUNjLE9BQU8sRUFBRSxBQUFDO0lBRTFDZCxTQUFTLEdBQUdDLE9BQU8sQ0FBQ1ksYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHO0lBRXZDLE9BQU9iLFNBQVMsQ0FBQztDQUNsQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXpCRCxJQUFNLEFBQUVlLElBQUksR0FBS0MsVUFBYyxlQUFBLENBQXZCRCxJQUFJLEFBQW1CLEFBQUM7QUEyQmhDLFNBQVNMLHdCQUF3QixDQUFDTCxrQkFBa0IsRUFBRUYsWUFBWSxFQUFFRixPQUFPLEVBQUU7SUFDM0VJLGtCQUFrQixDQUFDWSxPQUFPLENBQUMsU0FBQ0MsaUJBQWlCLEVBQUs7UUFDaEQsSUFBTWhCLElBQUksR0FBR2dCLGlCQUFpQixFQUN4QkMsV0FBVyxHQUFHQyxRQUFXLFFBQUEsQ0FBQ0MsUUFBUSxDQUFDbkIsSUFBSSxDQUFDLEFBQUM7UUFFL0MsSUFBSWlCLFdBQVcsS0FBSyxJQUFJLEVBQUU7WUFDeEIsSUFBTUcsZUFBZSxHQUFHSCxXQUFXLENBQUNMLE9BQU8sRUFBRSxBQUFDO1lBRTlDYixPQUFPLENBQUNxQixlQUFlLENBQUMsR0FBR0gsV0FBVyxDQUFDO1lBRXZDaEIsWUFBWSxDQUFDb0IsSUFBSSxDQUFDSixXQUFXLENBQUMsQ0FBQztTQUNoQztLQUNGLENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBU1IseUJBQXlCLENBQUNOLGtCQUFrQixFQUFFRCxjQUFjLEVBQUVHLHdCQUF3QixFQUFFTixPQUFPLEVBQUU7SUFDeEdJLGtCQUFrQixDQUFDWSxPQUFPLENBQUMsU0FBQ0MsaUJBQWlCLEVBQUs7UUFDaEQsSUFBTWhCLElBQUksR0FBR2dCLGlCQUFpQixFQUN4Qk0sUUFBUSxHQUFHdEIsSUFBSSxDQUFDWSxPQUFPLEVBQUUsRUFDekJXLGFBQWEsR0FBR0MsVUFBYSxRQUFBLENBQUNDLG1DQUFtQyxDQUFDekIsSUFBSSxFQUFFSyx3QkFBd0IsQ0FBQyxBQUFDO1FBRXhHLE9BQU9OLE9BQU8sQ0FBQ3VCLFFBQVEsQ0FBQyxDQUFDO1FBRXpCLElBQU1JLGlCQUFpQixHQUFHSixRQUFRLEFBQUMsRUFBQyxHQUFHO1FBRXZDdkIsT0FBTyxDQUFDMkIsaUJBQWlCLENBQUMsR0FBR0gsYUFBYSxDQUFDO1FBRTNDckIsY0FBYyxDQUFDbUIsSUFBSSxDQUFDRSxhQUFhLENBQUMsQ0FBQztLQUNwQyxDQUFDLENBQUM7Q0FDSjtBQUVELFNBQVNoQiwwQkFBMEIsQ0FBQ0osa0JBQWtCLEVBQUVFLHdCQUF3QixFQUFFTixPQUFPLEVBQUU7SUFDekZNLHdCQUF3QixDQUFDVSxPQUFPLENBQUMsU0FBQ1ksdUJBQXVCLEVBQUs7UUFDNUQsSUFBTUwsUUFBUSxHQUFHSyx1QkFBdUIsQ0FBQ0MsV0FBVyxFQUFFLEVBQ2hENUIsSUFBSSxHQUFHRCxPQUFPLENBQUN1QixRQUFRLENBQUMsRUFDeEJPLDhCQUE4QixHQUFHMUIsa0JBQWtCLENBQUMyQixRQUFRLENBQUM5QixJQUFJLENBQUMsQUFBQztRQUV6RSxJQUFJLENBQUM2Qiw4QkFBOEIsRUFBRTtZQUNuQyxJQUFNYixpQkFBaUIsR0FBR2hCLElBQUksQUFBQyxFQUFDLEdBQUc7WUFFbkNHLGtCQUFrQixDQUFDa0IsSUFBSSxDQUFDTCxpQkFBaUIsQ0FBQyxDQUFDO1NBQzVDO1FBRUQsSUFBTWUsd0RBQXdELEdBQUdDLENBQUFBLEdBQUFBLE1BQVksQUFBNEQsQ0FBQSxhQUE1RCxDQUFDTCx1QkFBdUIsRUFBRU0sV0FBaUMsUUFBQSxDQUFDLEFBQUM7UUFFMUksSUFBSUYsd0RBQXdELEVBQUU7WUFDNUQsSUFBTUcsaUNBQWlDLEdBQUdQLHVCQUF1QixFQUMzRFEsaUNBQWlDLEdBQUdELGlDQUFpQyxDQUFDRSxvQ0FBb0MsRUFBRSxFQUM1R2QsU0FBUSxHQUFHYSxpQ0FBaUMsQ0FBQ1AsV0FBVyxFQUFFLEVBQzFENUIsS0FBSSxHQUFHRCxPQUFPLENBQUN1QixTQUFRLENBQUMsRUFDeEJPLCtCQUE4QixHQUFHMUIsa0JBQWtCLENBQUMyQixRQUFRLENBQUM5QixLQUFJLENBQUMsQUFBQztZQUV2RSxJQUFJLENBQUM2QiwrQkFBOEIsRUFBRTtnQkFDbkMsSUFBTWIsa0JBQWlCLEdBQUdoQixLQUFJLEFBQUMsRUFBQyxHQUFHO2dCQUVuQ0csa0JBQWtCLENBQUNrQixJQUFJLENBQUNMLGtCQUFpQixDQUFDLENBQUM7YUFDNUM7U0FDSjtLQUNGLENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBU04sNEJBQTRCLENBQUNSLGNBQWMsRUFBRUgsT0FBTyxFQUFFO0lBQzdERyxjQUFjLENBQUNhLE9BQU8sQ0FBQyxTQUFDUSxhQUFhLEVBQUs7UUFDeEMsSUFBTWMsd0JBQXdCLEdBQUdkLGFBQWEsQ0FBQ2UsY0FBYyxFQUFFLEVBQ3pEQyxnQ0FBZ0MsR0FBRzFCLElBQUksQ0FBQ3dCLHdCQUF3QixFQUFFLFNBQUNHLHVCQUF1QixFQUFLO1lBQzdGLElBQU1DLHNEQUFzRCxHQUFHVCxDQUFBQSxHQUFBQSxNQUFZLEFBQTBELENBQUEsYUFBMUQsQ0FBQ1EsdUJBQXVCLEVBQUVFLFNBQStCLFFBQUEsQ0FBQyxBQUFDO1lBRXRJLElBQUlELHNEQUFzRCxFQUFFO2dCQUMxRCxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0YsQ0FBQyxBQUFDO1FBRVRGLGdDQUFnQyxDQUFDeEIsT0FBTyxDQUFDLFNBQUM0QiwrQkFBK0IsRUFBSztZQUM1RUEsK0JBQStCLENBQUNDLE9BQU8sQ0FBQzdDLE9BQU8sQ0FBQyxDQUFDO1NBQ2xELENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBUzhDLCtCQUErQixDQUFDdkIsUUFBUSxFQUFFd0IsVUFBVSxFQUFFMUMsb0JBQW9CLEVBQUVDLHdCQUF3QixFQUFFO0lBQzdHLElBQU0wQyx5Q0FBd0MsR0FBRzFDLHdCQUF3QixDQUFDMkMsSUFBSSxDQUFDLFNBQUNyQix1QkFBdUIsRUFBSztRQUMxRyxJQUFNb0Isd0NBQXdDLEdBQUdwQix1QkFBdUIsQ0FBQ3NCLEtBQUssQ0FBQ0gsVUFBVSxDQUFDLEFBQUM7UUFFM0YsSUFBSUMsd0NBQXdDLEVBQUU7WUFDNUMsT0FBTyxJQUFJLENBQUM7U0FDYjtLQUNGLENBQUMsQUFBQztJQUVILElBQUlBLHlDQUF3QyxFQUFFO1FBQzVDLE9BQU87S0FDUjtJQUVELElBQU1wQix3QkFBdUIsR0FBR2UsU0FBK0IsUUFBQSxDQUFDUSx5QkFBeUIsQ0FBQzVCLFFBQVEsRUFBRXdCLFVBQVUsQ0FBQyxJQUMvRWIsV0FBaUMsUUFBQSxDQUFDa0IsNkNBQTZDLENBQUM3QixRQUFRLEVBQUV3QixVQUFVLEVBQUUxQyxvQkFBb0IsQ0FBQyxBQUFDO0lBRTVKLElBQUl1Qix3QkFBdUIsS0FBSyxJQUFJLEVBQUU7UUFDcEN0Qix3QkFBd0IsQ0FBQ2dCLElBQUksQ0FBQ00sd0JBQXVCLENBQUMsQ0FBQztLQUN4RDtDQUNGO0FBRUQsU0FBU3JCLGdDQUFnQyxDQUFDTixJQUFJLEVBQUVJLG9CQUFvQixFQUFFQyx3QkFBd0IsRUFBRU4sT0FBTyxFQUFFO0lBQ3ZHLElBQU11QixTQUFRLEdBQUd0QixJQUFJLENBQUNZLE9BQU8sRUFBRSxFQUN6QndDLFdBQVcsR0FBR3BELElBQUksQ0FBQ3NDLGNBQWMsRUFBRSxBQUFDO0lBRTFDYyxXQUFXLENBQUNyQyxPQUFPLENBQUMsU0FBQytCLFVBQVUsRUFBSztRQUNsQ0QsK0JBQStCLENBQUN2QixTQUFRLEVBQUV3QixVQUFVLEVBQUUxQyxvQkFBb0IsRUFBRUMsd0JBQXdCLENBQUMsQ0FBQztRQUV0RyxJQUFNZ0QsbUJBQW1CLEdBQUdDLEtBQXVCLFFBQUEsQ0FBQ0oseUJBQXlCLENBQUM1QixTQUFRLEVBQUV3QixVQUFVLENBQUMsSUFDdkVTLFVBQW1CLFFBQUEsQ0FBQ0wseUJBQXlCLENBQUM1QixTQUFRLEVBQUV3QixVQUFVLENBQUMsQUFBQztRQUVoRyxJQUFJTyxtQkFBbUIsS0FBSyxJQUFJLEVBQUU7WUFDaEMsSUFBTUcsNEJBQTRCLEdBQUcsQUFBRSxtQkFBR3BELG9CQUFvQixDQUFwQkEsUUFBTDtnQkFBMkJpRCxtQkFBbUI7YUFBRSxDQUFBLEVBQy9FSSwwQkFBMEIsR0FBR0QsNEJBQTRCLENBQUNFLEdBQUcsQ0FBQyxTQUFDQywyQkFBMkIsRUFBSztnQkFDN0YsSUFBTUMsbUNBQW1DLEdBQUdELDJCQUEyQixDQUFDL0IsV0FBVyxFQUFFLEVBQy9FaUMseUJBQXlCLEdBQUdELG1DQUFtQyxBQUFDLEVBQUUsR0FBRztnQkFFM0UsT0FBT0MseUJBQXlCLENBQUM7YUFDbEMsQ0FBQyxFQUNGQyxrQkFBa0IsR0FBR1QsbUJBQW1CLENBQUNVLHFCQUFxQixFQUFFLEFBQUM7WUFFdkVELGtCQUFrQixDQUFDL0MsT0FBTyxDQUFDLFNBQUNpRCxpQkFBaUIsRUFBSztnQkFDaEQsSUFBTUMsbURBQW1ELEdBQUdSLDBCQUEwQixDQUFDM0IsUUFBUSxDQUFDa0MsaUJBQWlCLENBQUMsQUFBQztnQkFFbkgsSUFBSSxDQUFDQyxtREFBbUQsRUFBRTtvQkFDeEQsSUFBTTNDLFFBQVEsR0FBRzBDLGlCQUFpQixFQUM1QmhFLE1BQUksR0FBR0QsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLElBQUksSUFBSSxBQUFDLEVBQUMsR0FBRztvQkFFM0MsSUFBSXRCLE1BQUksS0FBSyxJQUFJLEVBQUU7d0JBQ2pCLElBQU1JLHNCQUFvQixHQUFHb0QsNEJBQTRCLEFBQUMsRUFBRSxHQUFHO3dCQUUvRGxELGdDQUFnQyxDQUFDTixNQUFJLEVBQUVJLHNCQUFvQixFQUFFQyx3QkFBd0IsRUFBRU4sT0FBTyxDQUFDLENBQUM7cUJBQ2pHO2lCQUNGO2FBQ0YsQ0FBQyxDQUFDO1NBQ0o7S0FDRixDQUFDLENBQUM7Q0FDSiJ9