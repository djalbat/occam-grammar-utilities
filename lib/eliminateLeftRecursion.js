"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _necessary = require("necessary");
var _occamParsers = require("occam-parsers");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _class = require("./utilities/class");
var _parts = require("./utilities/parts");
var _part = require("./utilities/part");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, recursiveDefinitions = [], leftRecursiveDefinitions = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    // eliminateDirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart, find = _necessary.arrayUtilities.find, tail = _necessary.arrayUtilities.tail, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
// function eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap) {
//   directlyLeftRecursiveRules.forEach((directlyLeftRecursiveRule) => {
//     const rule = directlyLeftRecursiveRule, ///
//           definitions = rule.getDefinitions(),
//           directlyLeftRecursiveDefinitions = find(definitions, (definition) => {
//             const definitionDirectlyLeftRecursiveDefinition = isInstanceOf(definition, DirectlyLeftRecursiveDefinition);
//
//             if (definitionDirectlyLeftRecursiveDefinition) {
//               return true;
//             }
//           }),
//           directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions);
//
//     directlyLeftRecursiveDefinition.rewrite();
//
//     rule.removeAllDefinitions();
//
//     rule.addDefinition(directlyLeftRecursiveDefinition);
//   });
// }
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var indirectlyLeftRecursiveDefinitionRuleName = indirectlyLeftRecursiveDefinition.getRuleName(), indirectlyLeftRecursiveRuleName = indirectlyLeftRecursiveDefinitionRuleName, indirectlyLeftRecursiveRule = ruleMap[indirectlyLeftRecursiveRuleName];
        rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap);
        var rule = indirectlyLeftRecursiveRule, directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions), definition = definitionFromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition), replacedDefinition = directlyLeftRecursiveDefinition, replacementDefinition = definition; ///
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
        var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), implicitlyLeftRecursiveDefinitionRuleName = implicitlyLeftRecursiveDefinition.getRuleName(), implicitlyLeftRecursiveRuleName = implicitlyLeftRecursiveDefinitionRuleName, implicitlyLeftRecursiveRule = ruleMap[implicitlyLeftRecursiveRuleName];
    // const implicitlyLeftRecursiveDefinitions = retrieveImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRuleName);
    //
    // rewriteImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveDefinitions, indirectlyLeftRecursiveRule, ruleMap);
    //
    // reduceImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, ruleMap);
    });
}
function retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var recursiveDefinition;
    var ruleName = rule.getName(), definitionRecursiveDefinition = (0, _class).isInstanceOf(definition, _recursive.default);
    if (definitionRecursiveDefinition) {
        recursiveDefinition = definition; ///
    } else {
        var leftRecursiveDefinition = _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions) || _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _left.default.fromRuleNameAndDefinition(ruleName, definition);
        if (leftRecursiveDefinition !== null) {
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
            recursiveDefinition = leftRecursiveDefinition; ///
        } else {
            recursiveDefinition = _recursive.default.fromRuleNameAndDefinition(ruleName, definition);
        }
        if (recursiveDefinition !== null) {
            var replacedDefinition = definition, replacementDefinition = recursiveDefinition; ///
            rule.replaceDefinition(replacedDefinition, replacementDefinition);
            var recursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(recursiveDefinition, _indirectly.default);
            if (recursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                var indirectlyLeftRecursiveDefinition = recursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), leftRecursiveDefinition1 = implicitlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), replacedDefinition1 = leftRecursiveDefinition1, replacementDefinition1 = implicitlyLeftRecursiveDefinition; ///
                rule = ruleMap[ruleName1];
                rule.replaceDefinition(replacedDefinition1, replacementDefinition1);
            }
        }
    }
    return recursiveDefinition;
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        var recursiveDefinition = retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}
function reduceImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
}
function rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName(), repeatedRuleName = repeatedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    ruleMap[repeatedRuleName] = repeatedRule;
}
function mergeDirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition;
    var definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = find(definitions, function(definition) {
        var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
        if (definitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    }), firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition = firstDirectlyLeftRecursiveDefinition;
    } else {
        var parts;
        parts = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            var parts = directlyLeftRecursiveDefinition.getParts();
            parts.shift(); ///
            var singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts);
        parts = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
        filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
            var directlyLeftRecursiveDDefinitionsIncludesLeftRecursiveDefinition = directlyLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
            if (!directlyLeftRecursiveDDefinitionsIncludesLeftRecursiveDefinition) {
                return true;
            }
        });
        var definitions1 = tail(directlyLeftRecursiveDefinitions), replacedDefinition = firstDirectlyLeftRecursiveDefinition, replacementDefinition = directlyLeftRecursiveDefinition; ///
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
        rule.removeDefinitions(definitions1);
    }
    return directlyLeftRecursiveDefinition;
}
function rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, ruleMap) {
    var _rule;
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), implicitlyLeftRecursiveDefinitionParts = implicitlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        implicitlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(implicitlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(implicitlyLeftRecursiveDefinitionParts));
        var ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = implicitlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
}
function rewriteImplicitlyLeftRecursiveDefinitions(implicitlyLeftRecursiveDefinitions, indirectlyLeftRecursiveRule, ruleMap) {
    implicitlyLeftRecursiveDefinitions.forEach(function(implicitlyLeftRecursiveDefinition) {
        rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, ruleMap);
    });
}
function retrieveImplicitlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, indirectlyLeftRecursiveRuleName) {
    var rule = directlyLeftRecursiveRule, ruleName = indirectlyLeftRecursiveRuleName, definitions = rule.getDefinitions(), implicitlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _left.default);
        if (definitionLeftRecursiveDefinition) {
            var leftRecursiveDefinition = definition, leftRecursiveRuleNames = leftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), leftRecursiveRuleName = firstLeftRecursiveRuleName; ///
            if (leftRecursiveRuleName === ruleName) {
                return true;
            }
        }
    });
    return implicitlyLeftRecursiveDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(leftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function definitionFromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition) {
    var parts = directlyLeftRecursiveDefinition.getParts();
    parts.shift();
    var ruleName = directlyLeftRecursiveDefinition.getRuleName(), reducedPart = (0, _part).reducedPartFromRuleName(ruleName), repeatedPart = (0, _parts).repeatedPartFromParts(parts);
    parts = [
        reducedPart,
        repeatedPart
    ];
    var definition = new _occamParsers.Definition(parts);
    return definition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcbmltcG9ydCB7IFBhcnRzLCBEZWZpbml0aW9uIH0gZnJvbSBcIm9jY2FtLXBhcnNlcnNcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkXCI7XG5pbXBvcnQgUmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZVwiO1xuaW1wb3J0IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnRcIjtcbmltcG9ydCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IGlzSW5zdGFuY2VPZiB9IGZyb20gXCIuL3V0aWxpdGllcy9jbGFzc1wiO1xuaW1wb3J0IHtjbG9uZVBhcnRzLCByZXBlYXRlZFBhcnRGcm9tUGFydHMsIHNpbmdsZVBhcnRGcm9tUGFydHN9IGZyb20gXCIuL3V0aWxpdGllcy9wYXJ0c1wiO1xuaW1wb3J0IHtyZWR1Y2VkUGFydEZyb21SdWxlTmFtZX0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRcIjtcblxuY29uc3QgeyBDaG9pY2VPZlBhcnRzUGFydCB9ID0gUGFydHMsXG4gICAgICB7IGZpbmQsIHRhaWwsIGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVMZWZ0UmVjdXJzaW9uKHN0YXJ0UnVsZSwgcnVsZU1hcCkge1xuICBjb25zdCBydWxlID0gc3RhcnRSdWxlLCAvLy9cbiAgICAgICAgcmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbXSxcbiAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gW107XG5cbiAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgLy8gZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIGNvbnN0IHN0YXJ0UnVsZU5hbWUgPSBzdGFydFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHN0YXJ0UnVsZSA9IHJ1bGVNYXBbc3RhcnRSdWxlTmFtZV07IC8vL1xuXG4gIHJldHVybiBzdGFydFJ1bGU7XG59XG5cbi8vIGZ1bmN0aW9uIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMsIHJ1bGVNYXApIHtcbi8vICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMuZm9yRWFjaCgoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSkgPT4ge1xuLy8gICAgIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbi8vICAgICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbi8vICAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQoZGVmaW5pdGlvbnMsIChkZWZpbml0aW9uKSA9PiB7XG4vLyAgICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcbi8vXG4vLyAgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbi8vICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgfSksXG4vLyAgICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuLy9cbi8vICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLnJld3JpdGUoKTtcbi8vXG4vLyAgICAgcnVsZS5yZW1vdmVBbGxEZWZpbml0aW9ucygpO1xuLy9cbi8vICAgICBydWxlLmFkZERlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4vLyAgIH0pO1xuLy8gfVxuXG5mdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZU1hcFtpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lXTtcblxuICAgIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcblxuICAgIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIC8vL1xuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IGRlZmluaXRpb25Gcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBkZWZpbml0aW9uOyAvLy9cblxuICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZU1hcFtpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lXTtcblxuICAgIC8vIGNvbnN0IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcbiAgICAvL1xuICAgIC8vIHJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCk7XG4gICAgLy9cbiAgICAvLyByZWR1Y2VJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBsZXQgcmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICBkZWZpbml0aW9uUmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICBpZiAoZGVmaW5pdGlvblJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICByZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgLy8vXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lRGVmaW5pdGlvbkFuZFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGVOYW1lLCBkZWZpbml0aW9uLCByZWN1cnNpdmVEZWZpbml0aW9ucykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZERlZmluaXRpb24ocnVsZU5hbWUsIGRlZmluaXRpb24pO1xuXG4gICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMucHVzaChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICByZWN1cnNpdmVEZWZpbml0aW9uID0gUmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgcmVwbGFjZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSByZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gICAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKHJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICAgIHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdO1xuXG4gICAgICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpO1xuXG4gIGRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlLCBkZWZpbml0aW9uLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zID0gWyAuLi5yZWN1cnNpdmVEZWZpbml0aW9ucywgcmVjdXJzaXZlRGVmaW5pdGlvbiBdLFxuICAgICAgICAgICAgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgocHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWUgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZTsgIC8vL1xuXG4gICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSByZWN1cnNpdmVEZWZpbml0aW9uLmdldFJlY3Vyc2l2ZVJ1bGVOYW1lcygpO1xuXG4gICAgICByZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgocmVjdXJzaXZlUnVsZU5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICAgIGlmICghcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSByZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSB8fCBudWxsOyAvLy9cblxuICAgICAgICAgIGlmIChydWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9ucyA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnM7ICAvLy9cblxuICAgICAgICAgICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWR1Y2VJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpLFxuICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgcnVsZU1hcFtyZWR1Y2VkUnVsZU5hbWVdID0gcmVkdWNlZFJ1bGU7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpLFxuICAgICAgICByZXBlYXRlZFJ1bGUgPSBSZXBlYXRlZFJ1bGUuZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpLFxuICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCksXG4gICAgICAgIHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xuXG4gIHJ1bGVNYXBbcmVwZWF0ZWRSdWxlTmFtZV0gPSByZXBlYXRlZFJ1bGU7XG59XG5cbmZ1bmN0aW9uIG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGxldCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gIGNvbnN0IGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQoZGVmaW5pdGlvbnMsIChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0KGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGggPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5sZW5ndGg7XG5cbiAgaWYgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID09PSAxKSB7XG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSBlbHNlIHtcbiAgICBsZXQgcGFydHM7XG5cbiAgICBwYXJ0cyA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpOyAgLy8vXG5cbiAgICBjb25zdCBmaXJzdFBhcnQgPSBmaXJzdChwYXJ0cyksXG4gICAgICAgICAgcGFydCA9IGZpcnN0UGFydDsgLy8vXG5cbiAgICBjb25zdCBzaW5nbGVQYXJ0cyA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgY29uc3QgcGFydHMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7XG5cbiAgICAgIHBhcnRzLnNoaWZ0KCk7ICAvLy9cblxuICAgICAgY29uc3Qgc2luZ2xlUGFydCA9IHNpbmdsZVBhcnRGcm9tUGFydHMocGFydHMpO1xuXG4gICAgICByZXR1cm4gc2luZ2xlUGFydDtcbiAgICB9KTtcblxuICAgIHBhcnRzID0gc2luZ2xlUGFydHM7ICAvLy9cblxuICAgIGNvbnN0IGNob2ljZU9mUGFydHNQYXJ0ID0gbmV3IENob2ljZU9mUGFydHNQYXJ0KHBhcnRzKTtcblxuICAgIHBhcnRzID0gWyAvLy9cbiAgICAgIHBhcnQsXG4gICAgICBjaG9pY2VPZlBhcnRzUGFydFxuICAgIF1cblxuICAgIGNvbnN0IHJ1bGVOYW1lID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmRQYXJ0cyhydWxlTmFtZSwgcGFydHMpO1xuXG4gICAgZmlsdGVyKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVERGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuaW5jbHVkZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAoIWRpcmVjdGx5TGVmdFJlY3Vyc2l2ZUREZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IHRhaWwoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpLFxuICAgICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcbiAgfVxuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIHJld3JpdHRlbkRlZmluaXRpb25zID0gZGVmaW5pdGlvbnMubWFwKChkZWZpbml0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IERlZmluaXRpb24gPSAoaW5kZXggPT09IDApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgICAgICAgbGV0IGRlZmluaXRpb25QYXJ0cyA9IGRlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICAgICAgICAgIGRlZmluaXRpb25QYXJ0cyA9IGNsb25lUGFydHMoZGVmaW5pdGlvblBhcnRzKTsgIC8vL1xuXG4gICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMgPSB0YWlsKGNsb25lUGFydHMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMpKTsgIC8vL1xuXG4gICAgICAgICAgY29uc3QgcGFydHMgPSBbXG4gICAgICAgICAgICAuLi5kZWZpbml0aW9uUGFydHMsXG4gICAgICAgICAgICAuLi5pbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0c1xuICAgICAgICAgIF07XG5cbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGwsICAvLy9cbiAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gbnVsbDsgIC8vL1xuXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IG5ldyBEZWZpbml0aW9uKHBhcnRzLCBydWxlTmFtZSwgcmVjdXJzaXZlUnVsZU5hbWVzLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTsgLy8vXG5cbiAgICAgICAgICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgLy8vXG5cbiAgICAgICAgICByZXR1cm4gcmV3cml0dGVuRGVmaW5pdGlvbjtcbiAgICAgICAgfSksXG4gICAgICAgIHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXR0ZW5EZWZpbml0aW9uczsgIC8vL1xuXG4gIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICBjb25zdCBydWxlID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLmZpbHRlcigoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMoKSxcbiAgICAgICAgICAgICAgICAgIGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gZmlyc3QobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyksXG4gICAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZTsgLy8vXG5cbiAgICAgICAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IHJ1bGVOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgcmV0dXJuIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5maWx0ZXIoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGRlZmluaXRpb25Gcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gIGxldCBwYXJ0cyA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICBwYXJ0cy5zaGlmdCgpO1xuXG4gIGNvbnN0IHJ1bGVOYW1lID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICByZWR1Y2VkUGFydCA9IHJlZHVjZWRQYXJ0RnJvbVJ1bGVOYW1lKHJ1bGVOYW1lKSxcbiAgICAgICAgcmVwZWF0ZWRQYXJ0ID0gcmVwZWF0ZWRQYXJ0RnJvbVBhcnRzKHBhcnRzKTtcblxuICBwYXJ0cyA9IFsgLy8vXG4gICAgcmVkdWNlZFBhcnQsXG4gICAgcmVwZWF0ZWRQYXJ0XG4gIF1cblxuICBjb25zdCBkZWZpbml0aW9uID0gbmV3IERlZmluaXRpb24ocGFydHMpO1xuXG4gIHJldHVybiBkZWZpbml0aW9uO1xufSJdLCJuYW1lcyI6WyJlbGltaW5hdGVMZWZ0UmVjdXJzaW9uIiwic3RhcnRSdWxlIiwicnVsZU1hcCIsInJ1bGUiLCJyZWN1cnNpdmVEZWZpbml0aW9ucyIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwic3RhcnRSdWxlTmFtZSIsImdldE5hbWUiLCJDaG9pY2VPZlBhcnRzUGFydCIsIlBhcnRzIiwiZmluZCIsImFycmF5VXRpbGl0aWVzIiwidGFpbCIsImZpcnN0IiwiZmlsdGVyIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZvckVhY2giLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSIsImdldFJ1bGVOYW1lIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJkZWZpbml0aW9uRnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXBsYWNlZERlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJyZXBsYWNlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZU5hbWUiLCJkZWZpbml0aW9uUmVjdXJzaXZlRGVmaW5pdGlvbiIsImlzSW5zdGFuY2VPZiIsIlJlY3Vyc2l2ZURlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJwdXNoIiwicmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lcyIsIm1hcCIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbiIsInByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZSIsInJlY3Vyc2l2ZVJ1bGVOYW1lcyIsImdldFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJlY3Vyc2l2ZVJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lIiwiaW5jbHVkZXMiLCJyZWR1Y2VJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VkUnVsZSIsIlJlZHVjZWRSdWxlIiwiZnJvbUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlTmFtZSIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZXBlYXRlZFJ1bGUiLCJSZXBlYXRlZFJ1bGUiLCJyZXBlYXRlZFJ1bGVOYW1lIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoIiwibGVuZ3RoIiwicGFydHMiLCJnZXRQYXJ0cyIsImZpcnN0UGFydCIsInBhcnQiLCJzaW5nbGVQYXJ0cyIsInNoaWZ0Iiwic2luZ2xlUGFydCIsInNpbmdsZVBhcnRGcm9tUGFydHMiLCJjaG9pY2VPZlBhcnRzUGFydCIsImZyb21SdWxlTmFtZUFuZFBhcnRzIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRERlZmluaXRpb25zSW5jbHVkZXNMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZURlZmluaXRpb25zIiwicmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdHRlbkRlZmluaXRpb25zIiwiaW5kZXgiLCJEZWZpbml0aW9uIiwiZGVmaW5pdGlvblBhcnRzIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMiLCJjbG9uZVBhcnRzIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJld3JpdHRlbkRlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb25zIiwicmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVkdWNlZFBhcnQiLCJyZWR1Y2VkUGFydEZyb21SdWxlTmFtZSIsInJlcGVhdGVkUGFydCIsInJlcGVhdGVkUGFydEZyb21QYXJ0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