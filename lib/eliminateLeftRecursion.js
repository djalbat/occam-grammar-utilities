"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _rewritten = _interopRequireDefault(require("./rule/rewritten"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _class = require("./utilities/class");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, reducedRules = [], rewrittenRules = [], leftRecursiveRules = [], recursiveDefinitions = [], leftRecursiveDefinitions = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    retrieveLeftRecursiveRules(leftRecursiveRules, leftRecursiveDefinitions, ruleMap);
    reduceLeftRecursiveRules(leftRecursiveRules, reducedRules, ruleMap);
    rewriteLeftRecursiveRules(leftRecursiveRules, rewrittenRules, leftRecursiveDefinitions, ruleMap);
    eliminateDirectLeftRecursion(rewrittenRules, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var find = _necessary.arrayUtilities.find;
function reduceLeftRecursiveRules(leftRecursiveRules, reducedRules, ruleMap) {
    leftRecursiveRules.forEach(function(leftRecursiveRule) {
        var rule = leftRecursiveRule, reducedRule = _reduced.default.fromRule(rule);
        if (reducedRule !== null) {
            var reducedRuleName = reducedRule.getName();
            ruleMap[reducedRuleName] = reducedRule;
            reducedRules.push(reducedRule);
        }
    });
}
function rewriteLeftRecursiveRules(leftRecursiveRules, rewrittenRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveRules.forEach(function(leftRecursiveRule) {
        var rule = leftRecursiveRule, ruleName = rule.getName(), rewrittenRule = _rewritten.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions);
        delete ruleMap[ruleName];
        var rewrittenRuleName = ruleName; ///
        ruleMap[rewrittenRuleName] = rewrittenRule;
        rewrittenRules.push(rewrittenRule);
    });
}
function retrieveLeftRecursiveRules(leftRecursiveRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], leftRecursiveRulesIncludesRule = leftRecursiveRules.includes(rule);
        if (!leftRecursiveRulesIncludesRule) {
            var leftRecursiveRule = rule; ///
            leftRecursiveRules.push(leftRecursiveRule);
        }
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), rule1 = ruleMap[ruleName1], leftRecursiveRulesIncludesRule1 = leftRecursiveRules.includes(rule1);
            if (!leftRecursiveRulesIncludesRule1) {
                var leftRecursiveRule1 = rule1; ///
                leftRecursiveRules.push(leftRecursiveRule1);
            }
        }
    });
}
function eliminateDirectLeftRecursion(rewrittenRules, ruleMap) {
    rewrittenRules.forEach(function(rewrittenRule) {
        var rewrittenRuleDefinitions = rewrittenRule.getDefinitions(), directlyLeftRecursiveDefinitions = find(rewrittenRuleDefinitions, function(rewrittenRuleDefinition) {
            var rewrittenRuleDefinitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(rewrittenRuleDefinition, _directly.default);
            if (rewrittenRuleDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        });
        directlyLeftRecursiveDefinitions.forEach(function(directlyLeftRecursiveDefinition) {
            directlyLeftRecursiveDefinition.rewrite(ruleMap);
        });
    });
}
function retrieveLeftRecursiveDefinition(ruleName, definition, recursiveDefinitions, leftRecursiveDefinitions) {
    var leftRecursiveDefinitionMatchesDefinition1 = leftRecursiveDefinitions.some(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionMatchesDefinition = leftRecursiveDefinition.match(definition);
        if (leftRecursiveDefinitionMatchesDefinition) {
            return true;
        }
    });
    if (leftRecursiveDefinitionMatchesDefinition1) {
        return;
    }
    var leftRecursiveDefinition1 = _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions);
    if (leftRecursiveDefinition1 !== null) {
        leftRecursiveDefinitions.push(leftRecursiveDefinition1);
    }
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var ruleName2 = rule.getName(), definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        retrieveLeftRecursiveDefinition(ruleName2, definition, recursiveDefinitions, leftRecursiveDefinitions);
        var recursiveDefinition = _left.default.fromRuleNameAndDefinition(ruleName2, definition) || _recursive.default.fromRuleNameAndDefinition(ruleName2, definition);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJld3JpdHRlblJ1bGUgZnJvbSBcIi4vcnVsZS9yZXdyaXR0ZW5cIjtcbmltcG9ydCBSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlXCI7XG5pbXBvcnQgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdFwiO1xuaW1wb3J0IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2luZGlyZWN0bHlcIjtcblxuaW1wb3J0IHsgaXNJbnN0YW5jZU9mIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2NsYXNzXCI7XG5cbmNvbnN0IHsgZmluZCB9ID0gYXJyYXlVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24oc3RhcnRSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGUgPSBzdGFydFJ1bGUsIC8vL1xuICAgICAgICByZWR1Y2VkUnVsZXMgPSBbXSxcbiAgICAgICAgcmV3cml0dGVuUnVsZXMgPSBbXSxcbiAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVzID0gW10sXG4gICAgICAgIHJlY3Vyc2l2ZURlZmluaXRpb25zID0gW10sXG4gICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVSdWxlcywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICByZWR1Y2VMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZWR1Y2VkUnVsZXMsIHJ1bGVNYXApO1xuXG4gIHJld3JpdGVMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZXdyaXR0ZW5SdWxlcywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKHJld3JpdHRlblJ1bGVzLCBydWxlTWFwKTtcblxuICBjb25zdCBzdGFydFJ1bGVOYW1lID0gc3RhcnRSdWxlLmdldE5hbWUoKTtcblxuICBzdGFydFJ1bGUgPSBydWxlTWFwW3N0YXJ0UnVsZU5hbWVdOyAvLy9cblxuICByZXR1cm4gc3RhcnRSdWxlO1xufVxuXG5mdW5jdGlvbiByZWR1Y2VMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZVJ1bGVzLCByZWR1Y2VkUnVsZXMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZVJ1bGVzLmZvckVhY2goKGxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgICByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21SdWxlKHJ1bGUpO1xuXG4gICAgaWYgKHJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgICBjb25zdCByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICAgIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xuXG4gICAgICByZWR1Y2VkUnVsZXMucHVzaChyZWR1Y2VkUnVsZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlUnVsZXMsIHJld3JpdHRlblJ1bGVzLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZVJ1bGVzLmZvckVhY2goKGxlZnRSZWN1cnNpdmVSdWxlKSA9PiB7XG4gICAgY29uc3QgcnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgICBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICAgIHJld3JpdHRlblJ1bGUgPSBSZXdyaXR0ZW5SdWxlLmZyb21SdWxlQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBkZWxldGUgcnVsZU1hcFtydWxlTmFtZV07XG5cbiAgICBjb25zdCByZXdyaXR0ZW5SdWxlTmFtZSA9IHJ1bGVOYW1lOyAvLy9cblxuICAgIHJ1bGVNYXBbcmV3cml0dGVuUnVsZU5hbWVdID0gcmV3cml0dGVuUnVsZTtcblxuICAgIHJld3JpdHRlblJ1bGVzLnB1c2gocmV3cml0dGVuUnVsZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlUnVsZXMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSA9IGxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhydWxlKTtcblxuICAgIGlmICghbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlKSB7XG4gICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGU7IC8vL1xuXG4gICAgICBsZWZ0UmVjdXJzaXZlUnVsZXMucHVzaChsZWZ0UmVjdXJzaXZlUnVsZSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlID0gbGVmdFJlY3Vyc2l2ZVJ1bGVzLmluY2x1ZGVzKHJ1bGUpO1xuXG4gICAgICAgIGlmICghbGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlKSB7XG4gICAgICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlOyAvLy9cblxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGxlZnRSZWN1cnNpdmVSdWxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24ocmV3cml0dGVuUnVsZXMsIHJ1bGVNYXApIHtcbiAgcmV3cml0dGVuUnVsZXMuZm9yRWFjaCgocmV3cml0dGVuUnVsZSkgPT4ge1xuICAgIGNvbnN0IHJld3JpdHRlblJ1bGVEZWZpbml0aW9ucyA9IHJld3JpdHRlblJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQocmV3cml0dGVuUnVsZURlZmluaXRpb25zLCAocmV3cml0dGVuUnVsZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJld3JpdHRlblJ1bGVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbiwgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLnJld3JpdGUocnVsZU1hcCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTWF0Y2hlc0RlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuc29tZSgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbk1hdGNoZXNEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ubWF0Y2goZGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25NYXRjaGVzRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25NYXRjaGVzRGVmaW5pdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVEZWZpbml0aW9uQW5kUmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZU5hbWUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMucHVzaChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcblxuICAgIGlmIChyZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zID0gWyAuLi5yZWN1cnNpdmVEZWZpbml0aW9ucywgcmVjdXJzaXZlRGVmaW5pdGlvbiBdLFxuICAgICAgICAgICAgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgocHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvblJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWUgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZTsgIC8vL1xuXG4gICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSByZWN1cnNpdmVEZWZpbml0aW9uLmdldFJlY3Vyc2l2ZVJ1bGVOYW1lcygpO1xuXG4gICAgICByZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgocmVjdXJzaXZlUnVsZU5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICAgIGlmICghcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1JlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSByZWN1cnNpdmVSdWxlTmFtZSwgIC8vL1xuICAgICAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSB8fCBudWxsOyAvLy9cblxuICAgICAgICAgIGlmIChydWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCByZWN1cnNpdmVEZWZpbml0aW9ucyA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbnM7ICAvLy9cblxuICAgICAgICAgICAgcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4iXSwibmFtZXMiOlsiZWxpbWluYXRlTGVmdFJlY3Vyc2lvbiIsInN0YXJ0UnVsZSIsInJ1bGVNYXAiLCJydWxlIiwicmVkdWNlZFJ1bGVzIiwicmV3cml0dGVuUnVsZXMiLCJsZWZ0UmVjdXJzaXZlUnVsZXMiLCJyZWN1cnNpdmVEZWZpbml0aW9ucyIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlUnVsZXMiLCJyZWR1Y2VMZWZ0UmVjdXJzaXZlUnVsZXMiLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZVJ1bGVzIiwiZWxpbWluYXRlRGlyZWN0TGVmdFJlY3Vyc2lvbiIsInN0YXJ0UnVsZU5hbWUiLCJnZXROYW1lIiwiZmluZCIsImFycmF5VXRpbGl0aWVzIiwiZm9yRWFjaCIsImxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGUiLCJSZWR1Y2VkUnVsZSIsImZyb21SdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwicHVzaCIsInJ1bGVOYW1lIiwicmV3cml0dGVuUnVsZSIsIlJld3JpdHRlblJ1bGUiLCJmcm9tUnVsZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdHRlblJ1bGVOYW1lIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSIsImluY2x1ZGVzIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0luc3RhbmNlT2YiLCJJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV3cml0dGVuUnVsZURlZmluaXRpb24iLCJyZXdyaXR0ZW5SdWxlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGUiLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTWF0Y2hlc0RlZmluaXRpb24iLCJzb21lIiwibWF0Y2giLCJmcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uIiwiZnJvbVJ1bGVOYW1lRGVmaW5pdGlvbkFuZFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGVmaW5pdGlvbnMiLCJyZWN1cnNpdmVEZWZpbml0aW9uIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzIiwibWFwIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lIiwicmVjdXJzaXZlUnVsZU5hbWVzIiwiZ2V0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmVjdXJzaXZlUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUmVjdXJzaXZlUnVsZU5hbWUiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztrQkFlV0Esc0JBQXNCO0FBYmYsSUFBQSxVQUFXLFdBQVgsV0FBVyxDQUFBO0FBRWxCLElBQUEsUUFBZ0Isa0NBQWhCLGdCQUFnQixFQUFBO0FBQ2QsSUFBQSxVQUFrQixrQ0FBbEIsa0JBQWtCLEVBQUE7QUFDWixJQUFBLFVBQXdCLGtDQUF4Qix3QkFBd0IsRUFBQTtBQUNwQixJQUFBLEtBQTZCLGtDQUE3Qiw2QkFBNkIsRUFBQTtBQUNyQixJQUFBLFNBQXNDLGtDQUF0QyxzQ0FBc0MsRUFBQTtBQUNwQyxJQUFBLFdBQXdDLGtDQUF4Qyx3Q0FBd0MsRUFBQTtBQUV6RCxJQUFBLE1BQW1CLFdBQW5CLG1CQUFtQixDQUFBO0FBSWpDLFNBQVNBLHNCQUFzQixDQUFDQyxTQUFTLEVBQUVDLE9BQU8sRUFBRTtJQUNqRSxJQUFNQyxJQUFJLEdBQUdGLFNBQVMsRUFDaEJHLFlBQVksR0FBRyxFQUFFLEVBQ2pCQyxjQUFjLEdBQUcsRUFBRSxFQUNuQkMsa0JBQWtCLEdBQUcsRUFBRSxFQUN2QkMsb0JBQW9CLEdBQUcsRUFBRSxFQUN6QkMsd0JBQXdCLEdBQUcsRUFBRSxBQUFDO0lBRXBDQyxnQ0FBZ0MsQ0FBQ04sSUFBSSxFQUFFSSxvQkFBb0IsRUFBRUMsd0JBQXdCLEVBQUVOLE9BQU8sQ0FBQyxDQUFDO0lBRWhHUSwwQkFBMEIsQ0FBQ0osa0JBQWtCLEVBQUVFLHdCQUF3QixFQUFFTixPQUFPLENBQUMsQ0FBQztJQUVsRlMsd0JBQXdCLENBQUNMLGtCQUFrQixFQUFFRixZQUFZLEVBQUVGLE9BQU8sQ0FBQyxDQUFDO0lBRXBFVSx5QkFBeUIsQ0FBQ04sa0JBQWtCLEVBQUVELGNBQWMsRUFBRUcsd0JBQXdCLEVBQUVOLE9BQU8sQ0FBQyxDQUFDO0lBRWpHVyw0QkFBNEIsQ0FBQ1IsY0FBYyxFQUFFSCxPQUFPLENBQUMsQ0FBQztJQUV0RCxJQUFNWSxhQUFhLEdBQUdiLFNBQVMsQ0FBQ2MsT0FBTyxFQUFFLEFBQUM7SUFFMUNkLFNBQVMsR0FBR0MsT0FBTyxDQUFDWSxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUc7SUFFdkMsT0FBT2IsU0FBUyxDQUFDO0NBQ2xCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBekJELElBQU0sQUFBRWUsSUFBSSxHQUFLQyxVQUFjLGVBQUEsQ0FBdkJELElBQUksQUFBbUIsQUFBQztBQTJCaEMsU0FBU0wsd0JBQXdCLENBQUNMLGtCQUFrQixFQUFFRixZQUFZLEVBQUVGLE9BQU8sRUFBRTtJQUMzRUksa0JBQWtCLENBQUNZLE9BQU8sQ0FBQyxTQUFDQyxpQkFBaUIsRUFBSztRQUNoRCxJQUFNaEIsSUFBSSxHQUFHZ0IsaUJBQWlCLEVBQ3hCQyxXQUFXLEdBQUdDLFFBQVcsUUFBQSxDQUFDQyxRQUFRLENBQUNuQixJQUFJLENBQUMsQUFBQztRQUUvQyxJQUFJaUIsV0FBVyxLQUFLLElBQUksRUFBRTtZQUN4QixJQUFNRyxlQUFlLEdBQUdILFdBQVcsQ0FBQ0wsT0FBTyxFQUFFLEFBQUM7WUFFOUNiLE9BQU8sQ0FBQ3FCLGVBQWUsQ0FBQyxHQUFHSCxXQUFXLENBQUM7WUFFdkNoQixZQUFZLENBQUNvQixJQUFJLENBQUNKLFdBQVcsQ0FBQyxDQUFDO1NBQ2hDO0tBQ0YsQ0FBQyxDQUFDO0NBQ0o7QUFFRCxTQUFTUix5QkFBeUIsQ0FBQ04sa0JBQWtCLEVBQUVELGNBQWMsRUFBRUcsd0JBQXdCLEVBQUVOLE9BQU8sRUFBRTtJQUN4R0ksa0JBQWtCLENBQUNZLE9BQU8sQ0FBQyxTQUFDQyxpQkFBaUIsRUFBSztRQUNoRCxJQUFNaEIsSUFBSSxHQUFHZ0IsaUJBQWlCLEVBQ3hCTSxRQUFRLEdBQUd0QixJQUFJLENBQUNZLE9BQU8sRUFBRSxFQUN6QlcsYUFBYSxHQUFHQyxVQUFhLFFBQUEsQ0FBQ0MsbUNBQW1DLENBQUN6QixJQUFJLEVBQUVLLHdCQUF3QixDQUFDLEFBQUM7UUFFeEcsT0FBT04sT0FBTyxDQUFDdUIsUUFBUSxDQUFDLENBQUM7UUFFekIsSUFBTUksaUJBQWlCLEdBQUdKLFFBQVEsQUFBQyxFQUFDLEdBQUc7UUFFdkN2QixPQUFPLENBQUMyQixpQkFBaUIsQ0FBQyxHQUFHSCxhQUFhLENBQUM7UUFFM0NyQixjQUFjLENBQUNtQixJQUFJLENBQUNFLGFBQWEsQ0FBQyxDQUFDO0tBQ3BDLENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBU2hCLDBCQUEwQixDQUFDSixrQkFBa0IsRUFBRUUsd0JBQXdCLEVBQUVOLE9BQU8sRUFBRTtJQUN6Rk0sd0JBQXdCLENBQUNVLE9BQU8sQ0FBQyxTQUFDWSx1QkFBdUIsRUFBSztRQUM1RCxJQUFNTCxRQUFRLEdBQUdLLHVCQUF1QixDQUFDQyxXQUFXLEVBQUUsRUFDaEQ1QixJQUFJLEdBQUdELE9BQU8sQ0FBQ3VCLFFBQVEsQ0FBQyxFQUN4Qk8sOEJBQThCLEdBQUcxQixrQkFBa0IsQ0FBQzJCLFFBQVEsQ0FBQzlCLElBQUksQ0FBQyxBQUFDO1FBRXpFLElBQUksQ0FBQzZCLDhCQUE4QixFQUFFO1lBQ25DLElBQU1iLGlCQUFpQixHQUFHaEIsSUFBSSxBQUFDLEVBQUMsR0FBRztZQUVuQ0csa0JBQWtCLENBQUNrQixJQUFJLENBQUNMLGlCQUFpQixDQUFDLENBQUM7U0FDNUM7UUFFRCxJQUFNZSx3REFBd0QsR0FBR0MsQ0FBQUEsR0FBQUEsTUFBWSxBQUE0RCxDQUFBLGFBQTVELENBQUNMLHVCQUF1QixFQUFFTSxXQUFpQyxRQUFBLENBQUMsQUFBQztRQUUxSSxJQUFJRix3REFBd0QsRUFBRTtZQUM1RCxJQUFNRyxpQ0FBaUMsR0FBR1AsdUJBQXVCLEVBQzNEUSxpQ0FBaUMsR0FBR0QsaUNBQWlDLENBQUNFLG9DQUFvQyxFQUFFLEVBQzVHZCxTQUFRLEdBQUdhLGlDQUFpQyxDQUFDUCxXQUFXLEVBQUUsRUFDMUQ1QixLQUFJLEdBQUdELE9BQU8sQ0FBQ3VCLFNBQVEsQ0FBQyxFQUN4Qk8sK0JBQThCLEdBQUcxQixrQkFBa0IsQ0FBQzJCLFFBQVEsQ0FBQzlCLEtBQUksQ0FBQyxBQUFDO1lBRXZFLElBQUksQ0FBQzZCLCtCQUE4QixFQUFFO2dCQUNuQyxJQUFNYixrQkFBaUIsR0FBR2hCLEtBQUksQUFBQyxFQUFDLEdBQUc7Z0JBRW5DRyxrQkFBa0IsQ0FBQ2tCLElBQUksQ0FBQ0wsa0JBQWlCLENBQUMsQ0FBQzthQUM1QztTQUNKO0tBQ0YsQ0FBQyxDQUFDO0NBQ0o7QUFFRCxTQUFTTiw0QkFBNEIsQ0FBQ1IsY0FBYyxFQUFFSCxPQUFPLEVBQUU7SUFDN0RHLGNBQWMsQ0FBQ2EsT0FBTyxDQUFDLFNBQUNRLGFBQWEsRUFBSztRQUN4QyxJQUFNYyx3QkFBd0IsR0FBR2QsYUFBYSxDQUFDZSxjQUFjLEVBQUUsRUFDekRDLGdDQUFnQyxHQUFHMUIsSUFBSSxDQUFDd0Isd0JBQXdCLEVBQUUsU0FBQ0csdUJBQXVCLEVBQUs7WUFDN0YsSUFBTUMsc0RBQXNELEdBQUdULENBQUFBLEdBQUFBLE1BQVksQUFBMEQsQ0FBQSxhQUExRCxDQUFDUSx1QkFBdUIsRUFBRUUsU0FBK0IsUUFBQSxDQUFDLEFBQUM7WUFFdEksSUFBSUQsc0RBQXNELEVBQUU7Z0JBQzFELE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRixDQUFDLEFBQUM7UUFFVEYsZ0NBQWdDLENBQUN4QixPQUFPLENBQUMsU0FBQzRCLCtCQUErQixFQUFLO1lBQzVFQSwrQkFBK0IsQ0FBQ0MsT0FBTyxDQUFDN0MsT0FBTyxDQUFDLENBQUM7U0FDbEQsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0NBQ0o7QUFFRCxTQUFTOEMsK0JBQStCLENBQUN2QixRQUFRLEVBQUV3QixVQUFVLEVBQUUxQyxvQkFBb0IsRUFBRUMsd0JBQXdCLEVBQUU7SUFDN0csSUFBTTBDLHlDQUF3QyxHQUFHMUMsd0JBQXdCLENBQUMyQyxJQUFJLENBQUMsU0FBQ3JCLHVCQUF1QixFQUFLO1FBQzFHLElBQU1vQix3Q0FBd0MsR0FBR3BCLHVCQUF1QixDQUFDc0IsS0FBSyxDQUFDSCxVQUFVLENBQUMsQUFBQztRQUUzRixJQUFJQyx3Q0FBd0MsRUFBRTtZQUM1QyxPQUFPLElBQUksQ0FBQztTQUNiO0tBQ0YsQ0FBQyxBQUFDO0lBRUgsSUFBSUEseUNBQXdDLEVBQUU7UUFDNUMsT0FBTztLQUNSO0lBRUQsSUFBTXBCLHdCQUF1QixHQUFHZSxTQUErQixRQUFBLENBQUNRLHlCQUF5QixDQUFDNUIsUUFBUSxFQUFFd0IsVUFBVSxDQUFDLElBQy9FYixXQUFpQyxRQUFBLENBQUNrQiw2Q0FBNkMsQ0FBQzdCLFFBQVEsRUFBRXdCLFVBQVUsRUFBRTFDLG9CQUFvQixDQUFDLEFBQUM7SUFFNUosSUFBSXVCLHdCQUF1QixLQUFLLElBQUksRUFBRTtRQUNwQ3RCLHdCQUF3QixDQUFDZ0IsSUFBSSxDQUFDTSx3QkFBdUIsQ0FBQyxDQUFDO0tBQ3hEO0NBQ0Y7QUFFRCxTQUFTckIsZ0NBQWdDLENBQUNOLElBQUksRUFBRUksb0JBQW9CLEVBQUVDLHdCQUF3QixFQUFFTixPQUFPLEVBQUU7SUFDdkcsSUFBTXVCLFNBQVEsR0FBR3RCLElBQUksQ0FBQ1ksT0FBTyxFQUFFLEVBQ3pCd0MsV0FBVyxHQUFHcEQsSUFBSSxDQUFDc0MsY0FBYyxFQUFFLEFBQUM7SUFFMUNjLFdBQVcsQ0FBQ3JDLE9BQU8sQ0FBQyxTQUFDK0IsVUFBVSxFQUFLO1FBQ2xDRCwrQkFBK0IsQ0FBQ3ZCLFNBQVEsRUFBRXdCLFVBQVUsRUFBRTFDLG9CQUFvQixFQUFFQyx3QkFBd0IsQ0FBQyxDQUFDO1FBRXRHLElBQU1nRCxtQkFBbUIsR0FBR0MsS0FBdUIsUUFBQSxDQUFDSix5QkFBeUIsQ0FBQzVCLFNBQVEsRUFBRXdCLFVBQVUsQ0FBQyxJQUN2RVMsVUFBbUIsUUFBQSxDQUFDTCx5QkFBeUIsQ0FBQzVCLFNBQVEsRUFBRXdCLFVBQVUsQ0FBQyxBQUFDO1FBRWhHLElBQUlPLG1CQUFtQixLQUFLLElBQUksRUFBRTtZQUNoQyxJQUFNRyw0QkFBNEIsR0FBRyxBQUFFLG1CQUFHcEQsb0JBQW9CLENBQXBCQSxRQUFMO2dCQUEyQmlELG1CQUFtQjthQUFFLENBQUEsRUFDL0VJLDBCQUEwQixHQUFHRCw0QkFBNEIsQ0FBQ0UsR0FBRyxDQUFDLFNBQUNDLDJCQUEyQixFQUFLO2dCQUM3RixJQUFNQyxtQ0FBbUMsR0FBR0QsMkJBQTJCLENBQUMvQixXQUFXLEVBQUUsRUFDL0VpQyx5QkFBeUIsR0FBR0QsbUNBQW1DLEFBQUMsRUFBRSxHQUFHO2dCQUUzRSxPQUFPQyx5QkFBeUIsQ0FBQzthQUNsQyxDQUFDLEVBQ0ZDLGtCQUFrQixHQUFHVCxtQkFBbUIsQ0FBQ1UscUJBQXFCLEVBQUUsQUFBQztZQUV2RUQsa0JBQWtCLENBQUMvQyxPQUFPLENBQUMsU0FBQ2lELGlCQUFpQixFQUFLO2dCQUNoRCxJQUFNQyxtREFBbUQsR0FBR1IsMEJBQTBCLENBQUMzQixRQUFRLENBQUNrQyxpQkFBaUIsQ0FBQyxBQUFDO2dCQUVuSCxJQUFJLENBQUNDLG1EQUFtRCxFQUFFO29CQUN4RCxJQUFNM0MsUUFBUSxHQUFHMEMsaUJBQWlCLEVBQzVCaEUsTUFBSSxHQUFHRCxPQUFPLENBQUN1QixRQUFRLENBQUMsSUFBSSxJQUFJLEFBQUMsRUFBQyxHQUFHO29CQUUzQyxJQUFJdEIsTUFBSSxLQUFLLElBQUksRUFBRTt3QkFDakIsSUFBTUksc0JBQW9CLEdBQUdvRCw0QkFBNEIsQUFBQyxFQUFFLEdBQUc7d0JBRS9EbEQsZ0NBQWdDLENBQUNOLE1BQUksRUFBRUksc0JBQW9CLEVBQUVDLHdCQUF3QixFQUFFTixPQUFPLENBQUMsQ0FBQztxQkFDakc7aUJBQ0Y7YUFDRixDQUFDLENBQUM7U0FDSjtLQUNGLENBQUMsQ0FBQztDQUNKIn0=