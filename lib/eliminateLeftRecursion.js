"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateLeftRecursion;
var _occamParsers = require("occam-parsers");
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _recursive = _interopRequireDefault(require("./definition/recursive"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _implicitly = _interopRequireDefault(require("./definition/recursive/left/implicitly"));
var _class = require("./utilities/class");
var _parts = require("./utilities/parts");
var _rule = require("./utilities/rule");
function eliminateLeftRecursion(startRule, ruleMap) {
    var rule = startRule, recursiveDefinitions = [], leftRecursiveDefinitions = [], directlyLeftRecursiveRules = [];
    retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
    eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap);
    retrieveDirectlyLeftRecursiveRules(directlyLeftRecursiveRules, leftRecursiveDefinitions, ruleMap);
    eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap);
    var startRuleName = startRule.getName();
    startRule = ruleMap[startRuleName]; ///
    return startRule;
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var ChoiceOfPartsPart = _occamParsers.Parts.ChoiceOfPartsPart, find = _necessary.arrayUtilities.find, tail = _necessary.arrayUtilities.tail, first = _necessary.arrayUtilities.first;
function eliminateDirectLeftRecursion(directlyLeftRecursiveRules, ruleMap) {
    directlyLeftRecursiveRules.forEach(function(directlyLeftRecursiveRule) {
        var rule = directlyLeftRecursiveRule, definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = find(definitions, function(definition) {
            var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
            if (definitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }), directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions);
        directlyLeftRecursiveDefinition.rewrite(ruleMap);
        rule.removeAllDefinitions();
        rule.addDefinition(directlyLeftRecursiveDefinition);
    });
}
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveDefinitions = leftRecursiveDefinitions.filter(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), indirectlyLeftRecursiveRule = (0, _rule).ruleFromLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap), implicitlyLeftRecursiveRule = (0, _rule).ruleFromLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, ruleMap), indirectlyLeftRecursiveRuleDirectlyLeftRecursive = (0, _rule).isRuleDirectlyLeftRecursive(indirectlyLeftRecursiveRule), implicitlyLeftRecursiveRuleDirectlyLeftRecursive = (0, _rule).isRuleDirectlyLeftRecursive(implicitlyLeftRecursiveRule);
        if (indirectlyLeftRecursiveRuleDirectlyLeftRecursive && implicitlyLeftRecursiveRuleDirectlyLeftRecursive) {
            var indirectlyLeftRecursiveDefinitionString = indirectlyLeftRecursiveDefinition.asString(), implicitlyLeftRecursiveDefinitionString = implicitlyLeftRecursiveDefinition.asString();
            throw new Error("The rules containing the '".concat(indirectlyLeftRecursiveDefinitionString, "' indirectly left recursive and ").concat(implicitlyLeftRecursiveDefinitionString, " implicitly left recursive definitions are both additionally directly recursive and therefore cannot be rewritten."));
        }
        var directlyLeftRecursiveRule = indirectlyLeftRecursiveRuleDirectlyLeftRecursive ? indirectlyLeftRecursiveRule : implicitlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule = indirectlyLeftRecursiveRuleDirectlyLeftRecursive ? implicitlyLeftRecursiveRule : indirectlyLeftRecursiveRule; ///
        reduceNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule, ruleMap);
        var nonDirectlyLeftRecursiveDefinitions = retrieveNonDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule);
        rewriteNonDirectlyLeftRecursiveDefinitions(nonDirectlyLeftRecursiveDefinitions, nonDirectlyLeftRecursiveRule, ruleMap);
        reduceDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, ruleMap);
    });
}
function reduceDirectlyLeftRecursiveRule(directlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromDirectlyLeftRecursiveRule(directlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
}
function retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var recursiveDefinition;
    var ruleName = rule.getName(), definitionRecursiveDefinition = (0, _class).isInstanceOf(definition, _recursive.default);
    if (definitionRecursiveDefinition) {
        recursiveDefinition = definition; ///
    } else {
        var leftRecursiveDefinition = _indirectly.default.fromRuleNameDefinitionAndRecursiveDefinitions(ruleName, definition, recursiveDefinitions) || _directly.default.fromRuleNameAndDefinition(ruleName, definition) || _left.default.fromRuleNameAndDefinition(ruleName, definition);
        if (leftRecursiveDefinition !== null) {
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
            recursiveDefinition = leftRecursiveDefinition; ///
        } else {
            recursiveDefinition = _recursive.default.fromRuleNameAndDefinition(ruleName, definition);
        }
        if (recursiveDefinition !== null) {
            var replacedDefinition = definition, replacementDefinition = recursiveDefinition; ///
            rule.replaceDefinition(replacedDefinition, replacementDefinition);
            var recursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(recursiveDefinition, _indirectly.default);
            if (recursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                var indirectlyLeftRecursiveDefinition = recursiveDefinition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), leftRecursiveDefinition1 = implicitlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), ruleName1 = implicitlyLeftRecursiveDefinition.getRuleName(), replacedDefinition1 = leftRecursiveDefinition1, replacementDefinition1 = implicitlyLeftRecursiveDefinition; ///
                rule = ruleMap[ruleName1];
                rule.replaceDefinition(replacedDefinition1, replacementDefinition1);
            }
        }
    }
    return recursiveDefinition;
}
function retrieveLeftRecursiveDefinitions(rule, recursiveDefinitions, leftRecursiveDefinitions, ruleMap) {
    var definitions = rule.getDefinitions();
    definitions.forEach(function(definition) {
        var recursiveDefinition = retrieveLeftRecursiveDefinition(rule, definition, recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
        if (recursiveDefinition !== null) {
            var previousRecursiveDefinitions = _toConsumableArray(recursiveDefinitions).concat([
                recursiveDefinition
            ]), previousRecursiveRuleNames = previousRecursiveDefinitions.map(function(previousRecursiveDefinition) {
                var previousRecursiveDefinitionRuleName = previousRecursiveDefinition.getRuleName(), previousRecursiveRuleName = previousRecursiveDefinitionRuleName; ///
                return previousRecursiveRuleName;
            }), recursiveRuleNames = recursiveDefinition.getRecursiveRuleNames();
            recursiveRuleNames.forEach(function(recursiveRuleName) {
                var previousRecursiveRuleNamesIncludesRecursiveRuleName = previousRecursiveRuleNames.includes(recursiveRuleName);
                if (!previousRecursiveRuleNamesIncludesRecursiveRuleName) {
                    var ruleName = recursiveRuleName, _$rule = ruleMap[ruleName] || null; ///
                    if (_$rule !== null) {
                        var _$recursiveDefinitions = previousRecursiveDefinitions; ///
                        retrieveLeftRecursiveDefinitions(_$rule, _$recursiveDefinitions, leftRecursiveDefinitions, ruleMap);
                    }
                }
            });
        }
    });
}
function reduceNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule, ruleMap) {
    var reducedRule = _reduced.default.fromNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule), repeatedRule = _repeated.default.fromNonDirectlyLeftRecursiveRule(nonDirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName(), repeatedRuleName = repeatedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    ruleMap[repeatedRuleName] = repeatedRule;
}
function retrieveDirectlyLeftRecursiveRules(directlyLeftRecursiveRules, leftRecursiveDefinitions, ruleMap) {
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _directly.default), leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default), leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _implicitly.default);
        if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition || leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition || leftRecursiveDefinitionImplicitlyLeftRecursiveDefinition) {
            var ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions(), ruleDirectlyLeftRecursiveRule = definitions.some(function(definition) {
                var definitionDirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _directly.default);
                if (definitionDirectlyLeftRecursiveDefinition) {
                    return true;
                }
            });
            if (ruleDirectlyLeftRecursiveRule) {
                var directlyLeftRecursiveRule = rule, directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule = directlyLeftRecursiveRules.includes(directlyLeftRecursiveRule);
                if (!directlyLeftRecursiveRulesIncludesDirectlyLeftRecursiveRule) {
                    directlyLeftRecursiveRules.push(directlyLeftRecursiveRule);
                }
            }
        }
    });
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition;
    var firstDirectlyLeftRecursiveDefinition = first(directlyLeftRecursiveDefinitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
    if (directlyLeftRecursiveDefinitionsLength === 1) {
        directlyLeftRecursiveDefinition = firstDirectlyLeftRecursiveDefinition; ///
    } else {
        var parts;
        parts = firstDirectlyLeftRecursiveDefinition.getParts(); ///
        var firstPart = first(parts), part = firstPart; ///
        var singleParts = directlyLeftRecursiveDefinitions.map(function(directlyLeftRecursiveDefinition) {
            directlyLeftRecursiveDefinition.removeFirstPart();
            var parts = directlyLeftRecursiveDefinition.getParts(), singlePart = (0, _parts).singlePartFromParts(parts);
            return singlePart;
        });
        parts = singleParts; ///
        var choiceOfPartsPart = new ChoiceOfPartsPart(parts);
        parts = [
            part,
            choiceOfPartsPart
        ];
        var ruleName = firstDirectlyLeftRecursiveDefinition.getRuleName();
        directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
    }
    return directlyLeftRecursiveDefinition;
}
function rewriteNonDirectlyLeftRecursiveDefinition(nonDirectlyLeftRecursiveDefinition, nonDirectlyLeftRecursiveRule, ruleMap) {
    var _rule;
    var definitions = nonDirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), nonDirectlyLeftRecursiveDefinitionParts = nonDirectlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        nonDirectlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(nonDirectlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(nonDirectlyLeftRecursiveDefinitionParts));
        var ruleName = nonDirectlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = nonDirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = nonDirectlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
}
function rewriteNonDirectlyLeftRecursiveDefinitions(nonDirectlyLeftRecursiveDefinitions, nonDirectlyLeftRecursiveRule, ruleMap) {
    nonDirectlyLeftRecursiveDefinitions.forEach(function(nonDirectlyLeftRecursiveDefinition) {
        rewriteNonDirectlyLeftRecursiveDefinition(nonDirectlyLeftRecursiveDefinition, nonDirectlyLeftRecursiveRule, ruleMap);
    });
}
function retrieveNonDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveRule, nonDirectlyLeftRecursiveRule) {
    var nonDirectlyLeftRecursiveRuleName = nonDirectlyLeftRecursiveRule.getName(), rule = directlyLeftRecursiveRule, ruleName = nonDirectlyLeftRecursiveRuleName, definitions = rule.getDefinitions(), nonDirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _left.default);
        if (definitionLeftRecursiveDefinition) {
            var leftRecursiveDefinition = definition, leftRecursiveRuleNames = leftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), leftRecursiveRuleName = firstLeftRecursiveRuleName; ///
            if (leftRecursiveRuleName === ruleName) {
                return true;
            }
        }
    });
    return nonDirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBQYXJ0cyB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IFJlZHVjZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVkdWNlZFwiO1xuaW1wb3J0IFJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkXCI7XG5pbXBvcnQgUmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZVwiO1xuaW1wb3J0IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnRcIjtcbmltcG9ydCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vZGVmaW5pdGlvbi9yZWN1cnNpdmUvbGVmdC9pbmRpcmVjdGx5XCI7XG5pbXBvcnQgSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW1wbGljaXRseVwiO1xuXG5pbXBvcnQgeyBpc0luc3RhbmNlT2YgfSBmcm9tIFwiLi91dGlsaXRpZXMvY2xhc3NcIjtcbmltcG9ydCB7IGNsb25lUGFydHMsIHNpbmdsZVBhcnRGcm9tUGFydHMgfSBmcm9tIFwiLi91dGlsaXRpZXMvcGFydHNcIjtcbmltcG9ydCB7IGlzUnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZSwgcnVsZUZyb21MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiB9IGZyb20gXCIuL3V0aWxpdGllcy9ydWxlXCI7XG5cbmNvbnN0IHsgQ2hvaWNlT2ZQYXJ0c1BhcnQgfSA9IFBhcnRzLFxuICAgICAgeyBmaW5kLCB0YWlsLCBmaXJzdCB9ID0gYXJyYXlVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24oc3RhcnRSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGUgPSBzdGFydFJ1bGUsIC8vL1xuICAgICAgICByZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtdLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbXSxcbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSBbXTtcblxuICByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCByZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMsIHJ1bGVNYXApO1xuXG4gIGNvbnN0IHN0YXJ0UnVsZU5hbWUgPSBzdGFydFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHN0YXJ0UnVsZSA9IHJ1bGVNYXBbc3RhcnRSdWxlTmFtZV07IC8vL1xuXG4gIHJldHVybiBzdGFydFJ1bGU7XG59XG5cbmZ1bmN0aW9uIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMsIHJ1bGVNYXApIHtcbiAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMuZm9yRWFjaCgoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSkgPT4ge1xuICAgIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCAvLy9cbiAgICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQoZGVmaW5pdGlvbnMsIChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgICAgaWYgKGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ucmV3cml0ZShydWxlTWFwKTtcblxuICAgIHJ1bGUucmVtb3ZlQWxsRGVmaW5pdGlvbnMoKTtcblxuICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5maWx0ZXIoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZUZyb21MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJ1bGVNYXApLFxuICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGVGcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSxcbiAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUgPSBpc1J1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUgPSBpc1J1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgIGlmIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUgJiYgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlKSB7XG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmcgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uYXNTdHJpbmcoKSxcbiAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblN0cmluZyA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5hc1N0cmluZygpO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBydWxlcyBjb250YWluaW5nIHRoZSAnJHtpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmd9JyBpbmRpcmVjdGx5IGxlZnQgcmVjdXJzaXZlIGFuZCAke2ltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblN0cmluZ30gaW1wbGljaXRseSBsZWZ0IHJlY3Vyc2l2ZSBkZWZpbml0aW9ucyBhcmUgYm90aCBhZGRpdGlvbmFsbHkgZGlyZWN0bHkgcmVjdXJzaXZlIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIHJld3JpdHRlbi5gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgOiAvLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgIC8vL1xuICAgICAgICAgIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSA6ICAvLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZTsgLy8vXG5cbiAgICByZWR1Y2VOb25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApO1xuXG4gICAgY29uc3Qgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuXG4gICAgcmV3cml0ZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcblxuICAgIHJlZHVjZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWR1Y2VEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApIHtcbiAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgcmVkdWNlZFJ1bGVOYW1lID0gcmVkdWNlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGUsIGRlZmluaXRpb24sIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGV0IHJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgY29uc3QgcnVsZU5hbWUgPSBydWxlLmdldE5hbWUoKSxcbiAgICAgICAgZGVmaW5pdGlvblJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgUmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKGRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlTmFtZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZERlZmluaXRpb24ocnVsZU5hbWUsIGRlZmluaXRpb24pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmREZWZpbml0aW9uKHJ1bGVOYW1lLCBkZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICByZWN1cnNpdmVEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kRGVmaW5pdGlvbihydWxlTmFtZSwgZGVmaW5pdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gcmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihyZWN1cnNpdmVEZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgICAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgZGVmaW5pdGlvbiwgcmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgICBpZiAocmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFsgLi4ucmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlY3Vyc2l2ZURlZmluaXRpb24gXSxcbiAgICAgICAgICAgIHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25SdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lID0gcHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWU7ICAvLy9cblxuICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNSZWN1cnNpdmVSdWxlTmFtZTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzID0gcmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSZWN1cnNpdmVSdWxlTmFtZXMoKTtcblxuICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzLmZvckVhY2goKHJlY3Vyc2l2ZVJ1bGVOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSA9IHByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzLmluY2x1ZGVzKHJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICAgICAgICBpZiAoIXByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gcmVjdXJzaXZlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0gfHwgbnVsbDsgLy8vXG5cbiAgICAgICAgICBpZiAocnVsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBwcmV2aW91c1JlY3Vyc2l2ZURlZmluaXRpb25zOyAgLy8vXG5cbiAgICAgICAgICAgIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIHJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUobm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlcGVhdGVkUnVsZSA9IFJlcGVhdGVkUnVsZS5mcm9tTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgcmVkdWNlZFJ1bGVOYW1lID0gcmVkdWNlZFJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICBydWxlTWFwW3JlcGVhdGVkUnVsZU5hbWVdID0gcmVwZWF0ZWRSdWxlO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gfHwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IHJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgICAgcnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkZWZpbml0aW9ucy5zb21lKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgaWYgKHJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlLCAvLy9cbiAgICAgICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc0RpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICAgICAgICBpZiAoIWRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSB7XG5cbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBsZXQgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICBjb25zdCBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubGVuZ3RoO1xuXG4gIGlmIChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCA9PT0gMSkge1xuICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICB9IGVsc2Uge1xuICAgIGxldCBwYXJ0cztcblxuICAgIHBhcnRzID0gZmlyc3REaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7ICAvLy9cblxuICAgIGNvbnN0IGZpcnN0UGFydCA9IGZpcnN0KHBhcnRzKSxcbiAgICAgICAgICBwYXJ0ID0gZmlyc3RQYXJ0OyAvLy9cblxuICAgIGNvbnN0IHNpbmdsZVBhcnRzID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLnJlbW92ZUZpcnN0UGFydCgpO1xuXG4gICAgICBjb25zdCBwYXJ0cyA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKSxcbiAgICAgICAgICAgIHNpbmdsZVBhcnQgPSBzaW5nbGVQYXJ0RnJvbVBhcnRzKHBhcnRzKTtcblxuICAgICAgcmV0dXJuIHNpbmdsZVBhcnQ7XG4gICAgfSk7XG5cbiAgICBwYXJ0cyA9IHNpbmdsZVBhcnRzOyAgLy8vXG5cbiAgICBjb25zdCBjaG9pY2VPZlBhcnRzUGFydCA9IG5ldyBDaG9pY2VPZlBhcnRzUGFydChwYXJ0cyk7XG5cbiAgICBwYXJ0cyA9IFsgLy8vXG4gICAgICBwYXJ0LFxuICAgICAgY2hvaWNlT2ZQYXJ0c1BhcnRcbiAgICBdXG5cbiAgICBjb25zdCBydWxlTmFtZSA9IGZpcnN0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuXG4gICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lQW5kUGFydHMocnVsZU5hbWUsIHBhcnRzKTtcbiAgfVxuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICByZXdyaXR0ZW5EZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLm1hcCgoZGVmaW5pdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBEZWZpbml0aW9uID0gKGluZGV4ID09PSAwKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICAgICAgICAgIGxldCBkZWZpbml0aW9uUGFydHMgPSBkZWZpbml0aW9uLmdldFBhcnRzKCksXG4gICAgICAgICAgICAgIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cyA9IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICAgICAgICAgIGRlZmluaXRpb25QYXJ0cyA9IGNsb25lUGFydHMoZGVmaW5pdGlvblBhcnRzKTsgIC8vL1xuXG4gICAgICAgICAgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzID0gdGFpbChjbG9uZVBhcnRzKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cykpOyAgLy8vXG5cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IFtcbiAgICAgICAgICAgIC4uLmRlZmluaXRpb25QYXJ0cyxcbiAgICAgICAgICAgIC4uLm5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0c1xuICAgICAgICAgIF07XG5cbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSBudWxsLCAgLy8vXG4gICAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGw7ICAvLy9cblxuICAgICAgICAgIGRlZmluaXRpb24gPSBuZXcgRGVmaW5pdGlvbihwYXJ0cywgcnVsZU5hbWUsIHJlY3Vyc2l2ZVJ1bGVOYW1lcywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyk7IC8vL1xuXG4gICAgICAgICAgY29uc3QgcmV3cml0dGVuRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuXG4gICAgICAgICAgcmV0dXJuIHJld3JpdHRlbkRlZmluaXRpb247XG4gICAgICAgIH0pLFxuICAgICAgICBydWxlTmFtZSA9IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXR0ZW5EZWZpbml0aW9uczsgIC8vL1xuXG4gIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSB7XG4gIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICByZXdyaXRlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSkge1xuICBjb25zdCBub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICBydWxlID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIG5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgIGlmIChkZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcygpLFxuICAgICAgICAgICAgICAgICAgZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBmaXJzdChsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKSxcbiAgICAgICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAvLy9cblxuICAgICAgICAgICAgaWYgKGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9PT0gcnVsZU5hbWUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICByZXR1cm4gbm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlTGVmdFJlY3Vyc2lvbiIsInN0YXJ0UnVsZSIsInJ1bGVNYXAiLCJydWxlIiwicmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwicmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24iLCJzdGFydFJ1bGVOYW1lIiwiZ2V0TmFtZSIsIkNob2ljZU9mUGFydHNQYXJ0IiwiUGFydHMiLCJmaW5kIiwiYXJyYXlVdGlsaXRpZXMiLCJ0YWlsIiwiZmlyc3QiLCJmb3JFYWNoIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImlzSW5zdGFuY2VPZiIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGUiLCJyZW1vdmVBbGxEZWZpbml0aW9ucyIsImFkZERlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZmlsdGVyIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJ1bGVGcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUiLCJpc1J1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEaXJlY3RseUxlZnRSZWN1cnNpdmUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25TdHJpbmciLCJhc1N0cmluZyIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblN0cmluZyIsIkVycm9yIiwibm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZU5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJub25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXdyaXRlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZWR1Y2VEaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGUiLCJSZWR1Y2VkUnVsZSIsImZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImRlZmluaXRpb25SZWN1cnNpdmVEZWZpbml0aW9uIiwiUmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlTmFtZURlZmluaXRpb25BbmRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZyb21SdWxlTmFtZUFuZERlZmluaXRpb24iLCJMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInB1c2giLCJyZXBsYWNlZERlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJyZXBsYWNlRGVmaW5pdGlvbiIsInJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldFJ1bGVOYW1lIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9ucyIsInByZXZpb3VzUmVjdXJzaXZlUnVsZU5hbWVzIiwibWFwIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uIiwicHJldmlvdXNSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lIiwicmVjdXJzaXZlUnVsZU5hbWVzIiwiZ2V0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmVjdXJzaXZlUnVsZU5hbWUiLCJwcmV2aW91c1JlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUmVjdXJzaXZlUnVsZU5hbWUiLCJpbmNsdWRlcyIsImZyb21Ob25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwicmVwZWF0ZWRSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJzb21lIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc0RpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJmaXJzdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCIsImxlbmd0aCIsInBhcnRzIiwiZ2V0UGFydHMiLCJmaXJzdFBhcnQiLCJwYXJ0Iiwic2luZ2xlUGFydHMiLCJyZW1vdmVGaXJzdFBhcnQiLCJzaW5nbGVQYXJ0Iiwic2luZ2xlUGFydEZyb21QYXJ0cyIsImNob2ljZU9mUGFydHNQYXJ0IiwiZnJvbVJ1bGVOYW1lQW5kUGFydHMiLCJyZXdyaXRlTm9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIm5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXR0ZW5EZWZpbml0aW9ucyIsImluZGV4IiwiRGVmaW5pdGlvbiIsImRlZmluaXRpb25QYXJ0cyIsIm5vbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cyIsImNsb25lUGFydHMiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmV3cml0dGVuRGVmaW5pdGlvbiIsInJlcGxhY2VtZW50RGVmaW5pdGlvbnMiLCJub25EaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImRlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O2tCQW9CV0Esc0JBQXNCO0FBbEJ4QixJQUFBLGFBQWUsV0FBZixlQUFlLENBQUE7QUFDTixJQUFBLFVBQVcsV0FBWCxXQUFXLENBQUE7QUFFbEIsSUFBQSxRQUFnQixrQ0FBaEIsZ0JBQWdCLEVBQUE7QUFDZixJQUFBLFNBQWlCLGtDQUFqQixpQkFBaUIsRUFBQTtBQUNWLElBQUEsVUFBd0Isa0NBQXhCLHdCQUF3QixFQUFBO0FBQ3BCLElBQUEsS0FBNkIsa0NBQTdCLDZCQUE2QixFQUFBO0FBQ3JCLElBQUEsU0FBc0Msa0NBQXRDLHNDQUFzQyxFQUFBO0FBQ3BDLElBQUEsV0FBd0Msa0NBQXhDLHdDQUF3QyxFQUFBO0FBQ3hDLElBQUEsV0FBd0Msa0NBQXhDLHdDQUF3QyxFQUFBO0FBRXpELElBQUEsTUFBbUIsV0FBbkIsbUJBQW1CLENBQUE7QUFDQSxJQUFBLE1BQW1CLFdBQW5CLG1CQUFtQixDQUFBO0FBQ1UsSUFBQSxLQUFrQixXQUFsQixrQkFBa0IsQ0FBQTtBQUtoRixTQUFTQSxzQkFBc0IsQ0FBQ0MsU0FBUyxFQUFFQyxPQUFPLEVBQUU7SUFDakUsSUFBTUMsSUFBSSxHQUFHRixTQUFTLEVBQ2hCRyxvQkFBb0IsR0FBRyxFQUFFLEVBQ3pCQyx3QkFBd0IsR0FBRyxFQUFFLEVBQzdCQywwQkFBMEIsR0FBRyxFQUFFLEFBQUM7SUFFdENDLGdDQUFnQyxDQUFDSixJQUFJLEVBQUVDLG9CQUFvQixFQUFFQyx3QkFBd0IsRUFBRUgsT0FBTyxDQUFDLENBQUM7SUFFaEdNLDhCQUE4QixDQUFDSCx3QkFBd0IsRUFBRUgsT0FBTyxDQUFDLENBQUM7SUFFbEVPLGtDQUFrQyxDQUFDSCwwQkFBMEIsRUFBRUQsd0JBQXdCLEVBQUVILE9BQU8sQ0FBQyxDQUFDO0lBRWxHUSw0QkFBNEIsQ0FBQ0osMEJBQTBCLEVBQUVKLE9BQU8sQ0FBQyxDQUFDO0lBRWxFLElBQU1TLGFBQWEsR0FBR1YsU0FBUyxDQUFDVyxPQUFPLEVBQUUsQUFBQztJQUUxQ1gsU0FBUyxHQUFHQyxPQUFPLENBQUNTLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRztJQUV2QyxPQUFPVixTQUFTLENBQUM7Q0FDbEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF0QkQsSUFBTSxBQUFFWSxpQkFBaUIsR0FBS0MsYUFBSyxNQUFBLENBQTNCRCxpQkFBaUIsQUFBVSxFQUMzQkUsSUFBSSxHQUFrQkMsVUFBYyxlQUFBLENBQXBDRCxJQUFJLEVBQUVFLElBQUksR0FBWUQsVUFBYyxlQUFBLENBQTlCQyxJQUFJLEVBQUVDLEtBQUssR0FBS0YsVUFBYyxlQUFBLENBQXhCRSxLQUFLLEFBQW9CO0FBdUI3QyxTQUFTUiw0QkFBNEIsQ0FBQ0osMEJBQTBCLEVBQUVKLE9BQU8sRUFBRTtJQUN6RUksMEJBQTBCLENBQUNhLE9BQU8sQ0FBQyxTQUFDQyx5QkFBeUIsRUFBSztRQUNoRSxJQUFNakIsSUFBSSxHQUFHaUIseUJBQXlCLEVBQ2hDQyxXQUFXLEdBQUdsQixJQUFJLENBQUNtQixjQUFjLEVBQUUsRUFDbkNDLGdDQUFnQyxHQUFHUixJQUFJLENBQUNNLFdBQVcsRUFBRSxTQUFDRyxVQUFVLEVBQUs7WUFDbkUsSUFBTUMseUNBQXlDLEdBQUdDLENBQUFBLEdBQUFBLE1BQVksQUFBNkMsQ0FBQSxhQUE3QyxDQUFDRixVQUFVLEVBQUVHLFNBQStCLFFBQUEsQ0FBQyxBQUFDO1lBRTVHLElBQUlGLHlDQUF5QyxFQUFFO2dCQUM3QyxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0YsQ0FBQyxFQUNGRywrQkFBK0IsR0FBR0MscUNBQXFDLENBQUNOLGdDQUFnQyxDQUFDLEFBQUM7UUFFaEhLLCtCQUErQixDQUFDRSxPQUFPLENBQUM1QixPQUFPLENBQUMsQ0FBQztRQUVqREMsSUFBSSxDQUFDNEIsb0JBQW9CLEVBQUUsQ0FBQztRQUU1QjVCLElBQUksQ0FBQzZCLGFBQWEsQ0FBQ0osK0JBQStCLENBQUMsQ0FBQztLQUNyRCxDQUFDLENBQUM7Q0FDSjtBQUVELFNBQVNwQiw4QkFBOEIsQ0FBQ0gsd0JBQXdCLEVBQUVILE9BQU8sRUFBRTtJQUN6RSxJQUFNK0Isa0NBQWtDLEdBQUc1Qix3QkFBd0IsQ0FBQzZCLE1BQU0sQ0FBQyxTQUFDQyx1QkFBdUIsRUFBSztRQUN0RyxJQUFNQyx3REFBd0QsR0FBR1YsQ0FBQUEsR0FBQUEsTUFBWSxBQUE0RCxDQUFBLGFBQTVELENBQUNTLHVCQUF1QixFQUFFRSxXQUFpQyxRQUFBLENBQUMsQUFBQztRQUUxSSxJQUFJRCx3REFBd0QsRUFBRTtZQUM1RCxPQUFPLElBQUksQ0FBQztTQUNiO0tBQ0YsQ0FBQyxBQUFDO0lBRUhILGtDQUFrQyxDQUFDZCxPQUFPLENBQUMsU0FBQ21CLGlDQUFpQyxFQUFLO1FBQ2hGLElBQU1DLGlDQUFpQyxHQUFHRCxpQ0FBaUMsQ0FBQ0Usb0NBQW9DLEVBQUUsRUFDNUdDLDJCQUEyQixHQUFHQyxDQUFBQSxHQUFBQSxLQUErQixBQUE0QyxDQUFBLGdDQUE1QyxDQUFDSixpQ0FBaUMsRUFBRXBDLE9BQU8sQ0FBQyxFQUN6R3lDLDJCQUEyQixHQUFHRCxDQUFBQSxHQUFBQSxLQUErQixBQUE0QyxDQUFBLGdDQUE1QyxDQUFDSCxpQ0FBaUMsRUFBRXJDLE9BQU8sQ0FBQyxFQUN6RzBDLGdEQUFnRCxHQUFHQyxDQUFBQSxHQUFBQSxLQUEyQixBQUE2QixDQUFBLDRCQUE3QixDQUFDSiwyQkFBMkIsQ0FBQyxFQUMzR0ssZ0RBQWdELEdBQUdELENBQUFBLEdBQUFBLEtBQTJCLEFBQTZCLENBQUEsNEJBQTdCLENBQUNGLDJCQUEyQixDQUFDLEFBQUM7UUFFbEgsSUFBSUMsZ0RBQWdELElBQUlFLGdEQUFnRCxFQUFFO1lBQ3hHLElBQU1DLHVDQUF1QyxHQUFHVCxpQ0FBaUMsQ0FBQ1UsUUFBUSxFQUFFLEVBQ3RGQyx1Q0FBdUMsR0FBR1YsaUNBQWlDLENBQUNTLFFBQVEsRUFBRSxBQUFDO1lBRTdGLE1BQU0sSUFBSUUsS0FBSyxDQUFDLEFBQUMsNEJBQTBCLENBQTRFRCxNQUF1QyxDQUFqSEYsdUNBQXVDLEVBQUMsa0NBQWdDLENBQTBDLENBQUEsTUFBa0gsQ0FBMUpFLHVDQUF1QyxFQUFDLG9IQUFrSCxDQUFDLENBQUMsQ0FBQztTQUNyUjtRQUVELElBQU03Qix5QkFBeUIsR0FBR3dCLGdEQUFnRCxHQUM5Q0gsMkJBQTJCLEdBQ3pCRSwyQkFBMkIsRUFDM0RRLDRCQUE0QixHQUFHUCxnREFBZ0QsR0FDOUNELDJCQUEyQixHQUN6QkYsMkJBQTJCLEFBQUMsRUFBQyxHQUFHO1FBRXpFVyxrQ0FBa0MsQ0FBQ0QsNEJBQTRCLEVBQUVqRCxPQUFPLENBQUMsQ0FBQztRQUUxRSxJQUFNbUQsbUNBQW1DLEdBQUdDLDJDQUEyQyxDQUFDbEMseUJBQXlCLEVBQUUrQiw0QkFBNEIsQ0FBQyxBQUFDO1FBRWpKSSwwQ0FBMEMsQ0FBQ0YsbUNBQW1DLEVBQUVGLDRCQUE0QixFQUFFakQsT0FBTyxDQUFDLENBQUM7UUFFdkhzRCwrQkFBK0IsQ0FBQ3BDLHlCQUF5QixFQUFFbEIsT0FBTyxDQUFDLENBQUM7S0FDckUsQ0FBQyxDQUFDO0NBQ0o7QUFFRCxTQUFTc0QsK0JBQStCLENBQUNwQyx5QkFBeUIsRUFBRWxCLE9BQU8sRUFBRTtJQUMzRSxJQUFNdUQsV0FBVyxHQUFHQyxRQUFXLFFBQUEsQ0FBQ0MsNkJBQTZCLENBQUN2Qyx5QkFBeUIsQ0FBQyxFQUNsRndDLGVBQWUsR0FBR0gsV0FBVyxDQUFDN0MsT0FBTyxFQUFFLEFBQUM7SUFFOUNWLE9BQU8sQ0FBQzBELGVBQWUsQ0FBQyxHQUFHSCxXQUFXLENBQUM7Q0FDeEM7QUFFRCxTQUFTSSwrQkFBK0IsQ0FBQzFELElBQUksRUFBRXFCLFVBQVUsRUFBRXBCLG9CQUFvQixFQUFFQyx3QkFBd0IsRUFBRUgsT0FBTyxFQUFFO0lBQ2xILElBQUk0RCxtQkFBbUIsQUFBQztJQUV4QixJQUFNQyxRQUFRLEdBQUc1RCxJQUFJLENBQUNTLE9BQU8sRUFBRSxFQUN6Qm9ELDZCQUE2QixHQUFHdEMsQ0FBQUEsR0FBQUEsTUFBWSxBQUFpQyxDQUFBLGFBQWpDLENBQUNGLFVBQVUsRUFBRXlDLFVBQW1CLFFBQUEsQ0FBQyxBQUFDO0lBRXBGLElBQUlELDZCQUE2QixFQUFFO1FBQ2pDRixtQkFBbUIsR0FBR3RDLFVBQVUsQ0FBQyxDQUFDLEdBQUc7S0FDdEMsTUFBTTtRQUNMLElBQU1XLHVCQUF1QixHQUFHRSxXQUFpQyxRQUFBLENBQUM2Qiw2Q0FBNkMsQ0FBQ0gsUUFBUSxFQUFFdkMsVUFBVSxFQUFFcEIsb0JBQW9CLENBQUMsSUFDM0h1QixTQUErQixRQUFBLENBQUN3Qyx5QkFBeUIsQ0FBQ0osUUFBUSxFQUFFdkMsVUFBVSxDQUFDLElBQy9FNEMsS0FBdUIsUUFBQSxDQUFDRCx5QkFBeUIsQ0FBQ0osUUFBUSxFQUFFdkMsVUFBVSxDQUFDLEFBQUM7UUFFeEcsSUFBSVcsdUJBQXVCLEtBQUssSUFBSSxFQUFFO1lBQ3BDOUIsd0JBQXdCLENBQUNnRSxJQUFJLENBQUNsQyx1QkFBdUIsQ0FBQyxDQUFDO1lBRXZEMkIsbUJBQW1CLEdBQUczQix1QkFBdUIsQ0FBQyxDQUFFLEdBQUc7U0FDcEQsTUFBTTtZQUNMMkIsbUJBQW1CLEdBQUdHLFVBQW1CLFFBQUEsQ0FBQ0UseUJBQXlCLENBQUNKLFFBQVEsRUFBRXZDLFVBQVUsQ0FBQyxDQUFDO1NBQzNGO1FBRUQsSUFBSXNDLG1CQUFtQixLQUFLLElBQUksRUFBRTtZQUNoQyxJQUFNUSxrQkFBa0IsR0FBRzlDLFVBQVUsRUFDL0IrQyxxQkFBcUIsR0FBR1QsbUJBQW1CLEFBQUMsRUFBRSxHQUFHO1lBRXZEM0QsSUFBSSxDQUFDcUUsaUJBQWlCLENBQUNGLGtCQUFrQixFQUFFQyxxQkFBcUIsQ0FBQyxDQUFDO1lBRWxFLElBQU1FLG9EQUFvRCxHQUFHL0MsQ0FBQUEsR0FBQUEsTUFBWSxBQUF3RCxDQUFBLGFBQXhELENBQUNvQyxtQkFBbUIsRUFBRXpCLFdBQWlDLFFBQUEsQ0FBQyxBQUFDO1lBRWxJLElBQUlvQyxvREFBb0QsRUFBRTtnQkFDeEQsSUFBTW5DLGlDQUFpQyxHQUFHd0IsbUJBQW1CLEVBQ3ZEdkIsaUNBQWlDLEdBQUdELGlDQUFpQyxDQUFDRSxvQ0FBb0MsRUFBRSxFQUM1R0wsd0JBQXVCLEdBQUdJLGlDQUFpQyxDQUFDbUMsMEJBQTBCLEVBQUUsRUFDeEZYLFNBQVEsR0FBR3hCLGlDQUFpQyxDQUFDb0MsV0FBVyxFQUFFLEVBQzFETCxtQkFBa0IsR0FBR25DLHdCQUF1QixFQUM1Q29DLHNCQUFxQixHQUFHaEMsaUNBQWlDLEFBQUMsRUFBRSxHQUFHO2dCQUVyRXBDLElBQUksR0FBR0QsT0FBTyxDQUFDNkQsU0FBUSxDQUFDLENBQUM7Z0JBRXpCNUQsSUFBSSxDQUFDcUUsaUJBQWlCLENBQUNGLG1CQUFrQixFQUFFQyxzQkFBcUIsQ0FBQyxDQUFDO2FBQ25FO1NBQ0Y7S0FDRjtJQUVELE9BQU9ULG1CQUFtQixDQUFDO0NBQzVCO0FBRUQsU0FBU3ZELGdDQUFnQyxDQUFDSixJQUFJLEVBQUVDLG9CQUFvQixFQUFFQyx3QkFBd0IsRUFBRUgsT0FBTyxFQUFFO0lBQ3ZHLElBQU1tQixXQUFXLEdBQUdsQixJQUFJLENBQUNtQixjQUFjLEVBQUUsQUFBQztJQUUxQ0QsV0FBVyxDQUFDRixPQUFPLENBQUMsU0FBQ0ssVUFBVSxFQUFLO1FBQ2xDLElBQU1zQyxtQkFBbUIsR0FBR0QsK0JBQStCLENBQUMxRCxJQUFJLEVBQUVxQixVQUFVLEVBQUVwQixvQkFBb0IsRUFBRUMsd0JBQXdCLEVBQUVILE9BQU8sQ0FBQyxBQUFDO1FBRXZJLElBQUk0RCxtQkFBbUIsS0FBSyxJQUFJLEVBQUU7WUFDaEMsSUFBTWMsNEJBQTRCLEdBQUcsQUFBRSxtQkFBR3hFLG9CQUFvQixDQUFwQkEsUUFBTDtnQkFBMkIwRCxtQkFBbUI7YUFBRSxDQUFBLEVBQy9FZSwwQkFBMEIsR0FBR0QsNEJBQTRCLENBQUNFLEdBQUcsQ0FBQyxTQUFDQywyQkFBMkIsRUFBSztnQkFDN0YsSUFBTUMsbUNBQW1DLEdBQUdELDJCQUEyQixDQUFDSixXQUFXLEVBQUUsRUFDL0VNLHlCQUF5QixHQUFHRCxtQ0FBbUMsQUFBQyxFQUFFLEdBQUc7Z0JBRTNFLE9BQU9DLHlCQUF5QixDQUFDO2FBQ2xDLENBQUMsRUFDRkMsa0JBQWtCLEdBQUdwQixtQkFBbUIsQ0FBQ3FCLHFCQUFxQixFQUFFLEFBQUM7WUFFdkVELGtCQUFrQixDQUFDL0QsT0FBTyxDQUFDLFNBQUNpRSxpQkFBaUIsRUFBSztnQkFDaEQsSUFBTUMsbURBQW1ELEdBQUdSLDBCQUEwQixDQUFDUyxRQUFRLENBQUNGLGlCQUFpQixDQUFDLEFBQUM7Z0JBRW5ILElBQUksQ0FBQ0MsbURBQW1ELEVBQUU7b0JBQ3hELElBQU10QixRQUFRLEdBQUdxQixpQkFBaUIsRUFDNUJqRixNQUFJLEdBQUdELE9BQU8sQ0FBQzZELFFBQVEsQ0FBQyxJQUFJLElBQUksQUFBQyxFQUFDLEdBQUc7b0JBRTNDLElBQUk1RCxNQUFJLEtBQUssSUFBSSxFQUFFO3dCQUNqQixJQUFNQyxzQkFBb0IsR0FBR3dFLDRCQUE0QixBQUFDLEVBQUUsR0FBRzt3QkFFL0RyRSxnQ0FBZ0MsQ0FBQ0osTUFBSSxFQUFFQyxzQkFBb0IsRUFBRUMsd0JBQXdCLEVBQUVILE9BQU8sQ0FBQyxDQUFDO3FCQUNqRztpQkFDRjthQUNGLENBQUMsQ0FBQztTQUNKO0tBQ0YsQ0FBQyxDQUFDO0NBQ0o7QUFFRCxTQUFTa0Qsa0NBQWtDLENBQUNELDRCQUE0QixFQUFFakQsT0FBTyxFQUFFO0lBQ2pGLElBQU11RCxXQUFXLEdBQUdDLFFBQVcsUUFBQSxDQUFDNkIsZ0NBQWdDLENBQUNwQyw0QkFBNEIsQ0FBQyxFQUN4RnFDLFlBQVksR0FBR0MsU0FBWSxRQUFBLENBQUNGLGdDQUFnQyxDQUFDcEMsNEJBQTRCLENBQUMsRUFDMUZTLGVBQWUsR0FBR0gsV0FBVyxDQUFDN0MsT0FBTyxFQUFFLEVBQ3ZDOEUsZ0JBQWdCLEdBQUdGLFlBQVksQ0FBQzVFLE9BQU8sRUFBRSxBQUFDO0lBRWhEVixPQUFPLENBQUMwRCxlQUFlLENBQUMsR0FBR0gsV0FBVyxDQUFDO0lBRXZDdkQsT0FBTyxDQUFDd0YsZ0JBQWdCLENBQUMsR0FBR0YsWUFBWSxDQUFDO0NBQzFDO0FBRUQsU0FBUy9FLGtDQUFrQyxDQUFDSCwwQkFBMEIsRUFBRUQsd0JBQXdCLEVBQUVILE9BQU8sRUFBRTtJQUN6R0csd0JBQXdCLENBQUNjLE9BQU8sQ0FBQyxTQUFDZ0IsdUJBQXVCLEVBQUs7UUFDNUQsSUFBTXdELHNEQUFzRCxHQUFHakUsQ0FBQUEsR0FBQUEsTUFBWSxBQUEwRCxDQUFBLGFBQTFELENBQUNTLHVCQUF1QixFQUFFUixTQUErQixRQUFBLENBQUMsRUFDL0hTLHdEQUF3RCxHQUFHVixDQUFBQSxHQUFBQSxNQUFZLEFBQTRELENBQUEsYUFBNUQsQ0FBQ1MsdUJBQXVCLEVBQUVFLFdBQWlDLFFBQUEsQ0FBQyxFQUNuSXVELHdEQUF3RCxHQUFHbEUsQ0FBQUEsR0FBQUEsTUFBWSxBQUE0RCxDQUFBLGFBQTVELENBQUNTLHVCQUF1QixFQUFFMEQsV0FBaUMsUUFBQSxDQUFDLEFBQUM7UUFFMUksSUFBSUYsc0RBQXNELElBQUl2RCx3REFBd0QsSUFBSXdELHdEQUF3RCxFQUFFO1lBQ2xMLElBQU03QixRQUFRLEdBQUc1Qix1QkFBdUIsQ0FBQ3dDLFdBQVcsRUFBRSxFQUNoRHhFLElBQUksR0FBR0QsT0FBTyxDQUFDNkQsUUFBUSxDQUFDLEVBQ3hCMUMsV0FBVyxHQUFHbEIsSUFBSSxDQUFDbUIsY0FBYyxFQUFFLEVBQ25Dd0UsNkJBQTZCLEdBQUd6RSxXQUFXLENBQUMwRSxJQUFJLENBQUMsU0FBQ3ZFLFVBQVUsRUFBSztnQkFDL0QsSUFBTUMseUNBQXlDLEdBQUdDLENBQUFBLEdBQUFBLE1BQVksQUFBNkMsQ0FBQSxhQUE3QyxDQUFDRixVQUFVLEVBQUVHLFNBQStCLFFBQUEsQ0FBQyxBQUFDO2dCQUU1RyxJQUFJRix5Q0FBeUMsRUFBRTtvQkFDN0MsT0FBTyxJQUFJLENBQUM7aUJBQ2I7YUFDRixDQUFDLEFBQUM7WUFFVCxJQUFJcUUsNkJBQTZCLEVBQUU7Z0JBQ2pDLElBQU0xRSx5QkFBeUIsR0FBR2pCLElBQUksRUFDaEM2RiwyREFBMkQsR0FBRzFGLDBCQUEwQixDQUFDZ0YsUUFBUSxDQUFDbEUseUJBQXlCLENBQUMsQUFBQztnQkFFbkksSUFBSSxDQUFDNEUsMkRBQTJELEVBQUU7b0JBRWhFMUYsMEJBQTBCLENBQUMrRCxJQUFJLENBQUNqRCx5QkFBeUIsQ0FBQyxDQUFDO2lCQUM1RDthQUNGO1NBQ0Y7S0FDRixDQUFDLENBQUM7Q0FDSjtBQUVELFNBQVNTLHFDQUFxQyxDQUFDTixnQ0FBZ0MsRUFBRTtJQUMvRSxJQUFJSywrQkFBK0IsQUFBQztJQUVwQyxJQUFNcUUsb0NBQW9DLEdBQUcvRSxLQUFLLENBQUNLLGdDQUFnQyxDQUFDLEVBQzlFMkUsc0NBQXNDLEdBQUczRSxnQ0FBZ0MsQ0FBQzRFLE1BQU0sQUFBQztJQUV2RixJQUFJRCxzQ0FBc0MsS0FBSyxDQUFDLEVBQUU7UUFDaER0RSwrQkFBK0IsR0FBR3FFLG9DQUFvQyxDQUFDLENBQUMsR0FBRztLQUM1RSxNQUFNO1FBQ0wsSUFBSUcsS0FBSyxBQUFDO1FBRVZBLEtBQUssR0FBR0gsb0NBQW9DLENBQUNJLFFBQVEsRUFBRSxDQUFDLENBQUUsR0FBRztRQUU3RCxJQUFNQyxTQUFTLEdBQUdwRixLQUFLLENBQUNrRixLQUFLLENBQUMsRUFDeEJHLElBQUksR0FBR0QsU0FBUyxBQUFDLEVBQUMsR0FBRztRQUUzQixJQUFNRSxXQUFXLEdBQUdqRixnQ0FBZ0MsQ0FBQ3VELEdBQUcsQ0FBQyxTQUFDbEQsK0JBQStCLEVBQUs7WUFDNUZBLCtCQUErQixDQUFDNkUsZUFBZSxFQUFFLENBQUM7WUFFbEQsSUFBTUwsS0FBSyxHQUFHeEUsK0JBQStCLENBQUN5RSxRQUFRLEVBQUUsRUFDbERLLFVBQVUsR0FBR0MsQ0FBQUEsR0FBQUEsTUFBbUIsQUFBTyxDQUFBLG9CQUFQLENBQUNQLEtBQUssQ0FBQyxBQUFDO1lBRTlDLE9BQU9NLFVBQVUsQ0FBQztTQUNuQixDQUFDLEFBQUM7UUFFSE4sS0FBSyxHQUFHSSxXQUFXLENBQUMsQ0FBRSxHQUFHO1FBRXpCLElBQU1JLGlCQUFpQixHQUFHLElBQUkvRixpQkFBaUIsQ0FBQ3VGLEtBQUssQ0FBQyxBQUFDO1FBRXZEQSxLQUFLLEdBQUc7WUFDTkcsSUFBSTtZQUNKSyxpQkFBaUI7U0FDbEI7UUFFRCxJQUFNN0MsUUFBUSxHQUFHa0Msb0NBQW9DLENBQUN0QixXQUFXLEVBQUUsQUFBQztRQUVwRS9DLCtCQUErQixHQUFHRCxTQUErQixRQUFBLENBQUNrRixvQkFBb0IsQ0FBQzlDLFFBQVEsRUFBRXFDLEtBQUssQ0FBQyxDQUFDO0tBQ3pHO0lBRUQsT0FBT3hFLCtCQUErQixDQUFDO0NBQ3hDO0FBRUQsU0FBU2tGLHlDQUF5QyxDQUFDQyxrQ0FBa0MsRUFBRTVELDRCQUE0QixFQUFFakQsT0FBTyxFQUFFO1FBa0M1SEMsS0FBSTtJQWpDSixJQUFNa0IsV0FBVyxHQUFHOEIsNEJBQTRCLENBQUM3QixjQUFjLEVBQUUsRUFDM0QwRixvQkFBb0IsR0FBRzNGLFdBQVcsQ0FBQ3lELEdBQUcsQ0FBQyxTQUFDdEQsVUFBVSxFQUFFeUYsS0FBSyxFQUFLO1FBQzVELElBQU1DLFVBQVUsR0FBRyxBQUFDRCxLQUFLLEtBQUssQ0FBQyxHQUNWdEYsU0FBK0IsUUFBQSxHQUM3QnlDLEtBQXVCLFFBQUEsQUFBQztRQUUvQyxJQUFJK0MsZUFBZSxHQUFHM0YsVUFBVSxDQUFDNkUsUUFBUSxFQUFFLEVBQ3ZDZSx1Q0FBdUMsR0FBR0wsa0NBQWtDLENBQUNWLFFBQVEsRUFBRSxBQUFDO1FBRTVGYyxlQUFlLEdBQUdFLENBQUFBLEdBQUFBLE1BQVUsQUFBaUIsQ0FBQSxXQUFqQixDQUFDRixlQUFlLENBQUMsQ0FBQyxDQUFFLEdBQUc7UUFFbkRDLHVDQUF1QyxHQUFHbkcsSUFBSSxDQUFDb0csQ0FBQUEsR0FBQUEsTUFBVSxBQUF5QyxDQUFBLFdBQXpDLENBQUNELHVDQUF1QyxDQUFDLENBQUMsQ0FBQyxDQUFFLEdBQUc7UUFFekcsSUFBTWhCLEtBQUssR0FBRyxBQUNaLG1CQUFHZSxlQUFlLENBQWZBLFFBQ0gsbUJBQUdDLHVDQUF1QyxDQUF2Q0EsQ0FDSixBQUFDO1FBRUYsSUFBTXJELFFBQVEsR0FBR2dELGtDQUFrQyxDQUFDcEMsV0FBVyxFQUFFLEVBQzNETyxrQkFBa0IsR0FBRyxJQUFJLEVBQ3pCb0Msc0JBQXNCLEdBQUcsSUFBSSxBQUFDLEVBQUUsR0FBRztRQUV6QzlGLFVBQVUsR0FBRyxJQUFJMEYsVUFBVSxDQUFDZCxLQUFLLEVBQUVyQyxRQUFRLEVBQUVtQixrQkFBa0IsRUFBRW9DLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxHQUFHO1FBRTdGLElBQU1DLG1CQUFtQixHQUFHL0YsVUFBVSxBQUFDLEVBQUMsR0FBRztRQUUzQyxPQUFPK0YsbUJBQW1CLENBQUM7S0FDNUIsQ0FBQyxFQUNGeEQsUUFBUSxHQUFHZ0Qsa0NBQWtDLENBQUNwQyxXQUFXLEVBQUUsRUFDM0R4RSxJQUFJLEdBQUdELE9BQU8sQ0FBQzZELFFBQVEsQ0FBQyxFQUN4Qk8sa0JBQWtCLEdBQUd5QyxrQ0FBa0MsRUFDdkRTLHNCQUFzQixHQUFHUixvQkFBb0IsQUFBQyxFQUFFLEdBQUc7SUFFekQ3RyxDQUFBQSxLQUFJLEdBQUpBLElBQUksRUFBQ3FFLGlCQUFpQixDQUF0QnJFLEtBQXFFLENBQXJFQSxLQUFJLEVBQUpBO1FBQXVCbUUsa0JBQWtCO0tBQTRCLENBQXJFbkUsTUFBcUUsQ0FBMUIsbUJBQUdxSCxzQkFBc0IsQ0FBdEJBLENBQXVCLENBQUEsQ0FBQztDQUN2RTtBQUVELFNBQVNqRSwwQ0FBMEMsQ0FBQ0YsbUNBQW1DLEVBQUVGLDRCQUE0QixFQUFFakQsT0FBTyxFQUFFO0lBQzlIbUQsbUNBQW1DLENBQUNsQyxPQUFPLENBQUMsU0FBQzRGLGtDQUFrQyxFQUFLO1FBQ2xGRCx5Q0FBeUMsQ0FBQ0Msa0NBQWtDLEVBQUU1RCw0QkFBNEIsRUFBRWpELE9BQU8sQ0FBQyxDQUFDO0tBQ3RILENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBU29ELDJDQUEyQyxDQUFDbEMseUJBQXlCLEVBQUUrQiw0QkFBNEIsRUFBRTtJQUM1RyxJQUFNc0UsZ0NBQWdDLEdBQUd0RSw0QkFBNEIsQ0FBQ3ZDLE9BQU8sRUFBRSxFQUN6RVQsSUFBSSxHQUFHaUIseUJBQXlCLEVBQ2hDMkMsUUFBUSxHQUFHMEQsZ0NBQWdDLEVBQzNDcEcsV0FBVyxHQUFHbEIsSUFBSSxDQUFDbUIsY0FBYyxFQUFFLEVBQ25DK0IsbUNBQW1DLEdBQUdoQyxXQUFXLENBQUNhLE1BQU0sQ0FBQyxTQUFDVixVQUFVLEVBQUs7UUFDdkUsSUFBTWtHLGlDQUFpQyxHQUFHaEcsQ0FBQUEsR0FBQUEsTUFBWSxBQUFxQyxDQUFBLGFBQXJDLENBQUNGLFVBQVUsRUFBRTRDLEtBQXVCLFFBQUEsQ0FBQyxBQUFDO1FBRTVGLElBQUlzRCxpQ0FBaUMsRUFBRTtZQUNyQyxJQUFNdkYsdUJBQXVCLEdBQUdYLFVBQVUsRUFDcEM4RixzQkFBc0IsR0FBR25GLHVCQUF1QixDQUFDd0YseUJBQXlCLEVBQUUsRUFDNUVDLDBCQUEwQixHQUFHMUcsS0FBSyxDQUFDb0csc0JBQXNCLENBQUMsRUFDMURPLHFCQUFxQixHQUFHRCwwQkFBMEIsQUFBQyxFQUFDLEdBQUc7WUFFN0QsSUFBSUMscUJBQXFCLEtBQUs5RCxRQUFRLEVBQUU7Z0JBQ3RDLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjtLQUNGLENBQUMsQUFBQztJQUVULE9BQU9WLG1DQUFtQyxDQUFDO0NBQzVDIn0=