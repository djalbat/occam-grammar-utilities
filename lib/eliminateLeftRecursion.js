"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateLeftRecursion;
    }
});
var _occamParsers = require("occam-parsers");
var _directedGraph = /*#__PURE__*/ _interopRequireDefault(require("./directedGraph"));
var _eliminateDirectLeftRecursion = /*#__PURE__*/ _interopRequireDefault(require("./eliminateDirectLeftRecursion"));
var _eliminateIndirectLeftRecursion = /*#__PURE__*/ _interopRequireDefault(require("./eliminateIndirectLeftRecursion"));
var _directedGraph1 = require("./utilities/directedGraph");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var ruleMapFromRules = _occamParsers.rulesUtilities.ruleMapFromRules, startRuleFromRules = _occamParsers.rulesUtilities.startRuleFromRules, rulesFromStartRuleAndRuleMap = _occamParsers.rulesUtilities.rulesFromStartRuleAndRuleMap;
function eliminateLeftRecursion(rules) {
    var ruleMap = ruleMapFromRules(rules), startRule = startRuleFromRules(rules), startRuleName = startRule.getName(), edges = (0, _directedGraph1.edgesFromStartRuleAndRuleMap)(startRule, ruleMap), startVertex = startRuleName, directedGraph = _directedGraph.default.fromEdgesAndStartVertex(edges, startVertex), cycles = directedGraph.getCycles(), context = {
        cycles: cycles,
        ruleMap: ruleMap
    };
    (0, _eliminateIndirectLeftRecursion.default)(context);
    (0, _eliminateDirectLeftRecursion.default)(context);
    rules = rulesFromStartRuleAndRuleMap(startRule, ruleMap); ///
    return rules;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBydWxlc1V0aWxpdGllcyB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5cbmltcG9ydCBEaXJlY3RlZEdyYXBoIGZyb20gXCIuL2RpcmVjdGVkR3JhcGhcIjtcbmltcG9ydCBlbGltaW5hdGVEaXJlY3RMZWZ0UmVjdXJzaW9uIGZyb20gXCIuL2VsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb25cIjtcbmltcG9ydCBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24gZnJvbSBcIi4vZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uXCI7XG5cbmltcG9ydCB7IGVkZ2VzRnJvbVN0YXJ0UnVsZUFuZFJ1bGVNYXAgfSBmcm9tIFwiLi91dGlsaXRpZXMvZGlyZWN0ZWRHcmFwaFwiO1xuXG5jb25zdCB7IHJ1bGVNYXBGcm9tUnVsZXMsIHN0YXJ0UnVsZUZyb21SdWxlcywgcnVsZXNGcm9tU3RhcnRSdWxlQW5kUnVsZU1hcCB9ID0gcnVsZXNVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24ocnVsZXMpIHtcbiAgY29uc3QgcnVsZU1hcCA9IHJ1bGVNYXBGcm9tUnVsZXMocnVsZXMpLFxuICAgICAgICBzdGFydFJ1bGUgPSBzdGFydFJ1bGVGcm9tUnVsZXMocnVsZXMpLFxuICAgICAgICBzdGFydFJ1bGVOYW1lID0gc3RhcnRSdWxlLmdldE5hbWUoKSxcbiAgICAgICAgZWRnZXMgPSBlZGdlc0Zyb21TdGFydFJ1bGVBbmRSdWxlTWFwKHN0YXJ0UnVsZSwgcnVsZU1hcCksXG4gICAgICAgIHN0YXJ0VmVydGV4ID0gc3RhcnRSdWxlTmFtZSwgIC8vL1xuICAgICAgICBkaXJlY3RlZEdyYXBoID0gRGlyZWN0ZWRHcmFwaC5mcm9tRWRnZXNBbmRTdGFydFZlcnRleChlZGdlcywgc3RhcnRWZXJ0ZXgpLFxuICAgICAgICBjeWNsZXMgPSBkaXJlY3RlZEdyYXBoLmdldEN5Y2xlcygpLFxuICAgICAgICBjb250ZXh0ID0ge1xuICAgICAgICAgIGN5Y2xlcyxcbiAgICAgICAgICBydWxlTWFwXG4gICAgICAgIH07XG5cbiAgZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGNvbnRleHQpO1xuXG4gIGVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24oY29udGV4dCk7XG5cbiAgcnVsZXMgPSBydWxlc0Zyb21TdGFydFJ1bGVBbmRSdWxlTWFwKHN0YXJ0UnVsZSwgcnVsZU1hcCk7IC8vL1xuXG4gIHJldHVybiBydWxlcztcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVMZWZ0UmVjdXJzaW9uIiwicnVsZU1hcEZyb21SdWxlcyIsInJ1bGVzVXRpbGl0aWVzIiwic3RhcnRSdWxlRnJvbVJ1bGVzIiwicnVsZXNGcm9tU3RhcnRSdWxlQW5kUnVsZU1hcCIsInJ1bGVzIiwicnVsZU1hcCIsInN0YXJ0UnVsZSIsInN0YXJ0UnVsZU5hbWUiLCJnZXROYW1lIiwiZWRnZXMiLCJlZGdlc0Zyb21TdGFydFJ1bGVBbmRSdWxlTWFwIiwic3RhcnRWZXJ0ZXgiLCJkaXJlY3RlZEdyYXBoIiwiRGlyZWN0ZWRHcmFwaCIsImZyb21FZGdlc0FuZFN0YXJ0VmVydGV4IiwiY3ljbGVzIiwiZ2V0Q3ljbGVzIiwiY29udGV4dCIsImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImVsaW1pbmF0ZURpcmVjdExlZnRSZWN1cnNpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQVlBOzs7ZUFBd0JBOzs7NEJBVk87a0VBRUw7aUZBQ2U7bUZBQ0U7OEJBRUU7Ozs7OztBQUU3QyxJQUFRQyxtQkFBdUVDLDRCQUFjLENBQXJGRCxrQkFBa0JFLHFCQUFxREQsNEJBQWMsQ0FBbkVDLG9CQUFvQkMsK0JBQWlDRiw0QkFBYyxDQUEvQ0U7QUFFL0IsU0FBU0osdUJBQXVCSyxLQUFLLEVBQUU7SUFDcEQsSUFBTUMsVUFBVUwsaUJBQWlCSSxRQUMzQkUsWUFBWUosbUJBQW1CRSxRQUMvQkcsZ0JBQWdCRCxVQUFVRSxPQUFPLElBQ2pDQyxRQUFRQyxJQUFBQSw0Q0FBNEIsRUFBQ0osV0FBV0QsVUFDaERNLGNBQWNKLGVBQ2RLLGdCQUFnQkMsc0JBQWEsQ0FBQ0MsdUJBQXVCLENBQUNMLE9BQU9FLGNBQzdESSxTQUFTSCxjQUFjSSxTQUFTLElBQ2hDQyxVQUFVO1FBQ1JGLFFBQUFBO1FBQ0FWLFNBQUFBO0lBQ0Y7SUFFTmEsSUFBQUEsdUNBQThCLEVBQUNEO0lBRS9CRSxJQUFBQSxxQ0FBNEIsRUFBQ0Y7SUFFN0JiLFFBQVFELDZCQUE2QkcsV0FBV0QsVUFBVSxHQUFHO0lBRTdELE9BQU9EO0FBQ1QifQ==