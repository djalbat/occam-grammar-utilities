"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.reducedRuleFromRule = reducedRuleFromRule;
exports.rewrittenRuleFromRule = rewrittenRuleFromRule;
var _class = require("../utilities/class");
var _ruleName = require("../utilities/ruleName");
function reducedRuleFromRule(rule, ruleMap, ReducedRule) {
    var ruleName = rule.getName(), reducedRuleName = (0, _ruleName).reducedRuleNameFromRuleName(ruleName);
    var reducedRule = ruleMap[reducedRuleName] || null;
    if (reducedRule === null) {
        reducedRule = ReducedRule.fromRule(rule);
        ruleMap[reducedRuleName] = reducedRule;
    }
    return reducedRule;
}
function rewrittenRuleFromRule(rule, ruleMap, RewrittenRule) {
    var rewrittenRule;
    var ruleRewrittenRule = (0, _class).isInstanceOf(rule, RewrittenRule);
    if (ruleRewrittenRule) {
        rewrittenRule = rule; ///
    } else {
        rewrittenRule = RewrittenRule.fromRule(rule);
        var ruleName = rule.getName();
        delete ruleMap[ruleName];
        var rewrittenRuleName = ruleName; ///
        ruleMap[rewrittenRuleName] = rewrittenRule;
    }
    return rewrittenRule;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcnVsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgaXNJbnN0YW5jZU9mIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9jbGFzc1wiO1xuaW1wb3J0IHsgcmVkdWNlZFJ1bGVOYW1lRnJvbVJ1bGVOYW1lIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9ydWxlTmFtZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlZFJ1bGVGcm9tUnVsZShydWxlLCBydWxlTWFwLCBSZWR1Y2VkUnVsZSkge1xuXHRjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuXHRcdFx0XHRyZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZU5hbWVGcm9tUnVsZU5hbWUocnVsZU5hbWUpO1xuXG5cdGxldCByZWR1Y2VkUnVsZSA9IHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSB8fCBudWxsO1xuXG5cdGlmIChyZWR1Y2VkUnVsZSA9PT0gbnVsbCkge1xuICAgIHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbVJ1bGUocnVsZSk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblx0fVxuXG5cdHJldHVybiByZWR1Y2VkUnVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJld3JpdHRlblJ1bGVGcm9tUnVsZShydWxlLCBydWxlTWFwLCBSZXdyaXR0ZW5SdWxlKSB7XG4gIGxldCByZXdyaXR0ZW5SdWxlO1xuXG4gIGNvbnN0IHJ1bGVSZXdyaXR0ZW5SdWxlID0gaXNJbnN0YW5jZU9mKHJ1bGUsIFJld3JpdHRlblJ1bGUpO1xuXG4gIGlmIChydWxlUmV3cml0dGVuUnVsZSkge1xuICAgIHJld3JpdHRlblJ1bGUgPSBydWxlOyAvLy9cbiAgfSBlbHNlIHtcbiAgICByZXdyaXR0ZW5SdWxlID0gUmV3cml0dGVuUnVsZS5mcm9tUnVsZShydWxlKTtcblxuICAgIGNvbnN0IHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCk7XG5cbiAgICBkZWxldGUgcnVsZU1hcFtydWxlTmFtZV07XG5cbiAgICBjb25zdCByZXdyaXR0ZW5SdWxlTmFtZSA9IHJ1bGVOYW1lOyAvLy9cblxuICAgIHJ1bGVNYXBbcmV3cml0dGVuUnVsZU5hbWVdID0gcmV3cml0dGVuUnVsZTtcbiAgfVxuXG4gIHJldHVybiByZXdyaXR0ZW5SdWxlO1xufVxuIl0sIm5hbWVzIjpbInJlZHVjZWRSdWxlRnJvbVJ1bGUiLCJyZXdyaXR0ZW5SdWxlRnJvbVJ1bGUiLCJydWxlIiwicnVsZU1hcCIsIlJlZHVjZWRSdWxlIiwicnVsZU5hbWUiLCJnZXROYW1lIiwicmVkdWNlZFJ1bGVOYW1lIiwicmVkdWNlZFJ1bGVOYW1lRnJvbVJ1bGVOYW1lIiwicmVkdWNlZFJ1bGUiLCJmcm9tUnVsZSIsIlJld3JpdHRlblJ1bGUiLCJyZXdyaXR0ZW5SdWxlIiwicnVsZVJld3JpdHRlblJ1bGUiLCJpc0luc3RhbmNlT2YiLCJyZXdyaXR0ZW5SdWxlTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O1FBS0dBLG1CQUFtQixHQUFuQkEsbUJBQW1CO1FBZW5CQyxxQkFBcUIsR0FBckJBLHFCQUFxQjtBQWxCUixJQUFBLE1BQW9CLFdBQXBCLG9CQUFvQixDQUFBO0FBQ0wsSUFBQSxTQUF1QixXQUF2Qix1QkFBdUIsQ0FBQTtBQUU1RCxTQUFTRCxtQkFBbUIsQ0FBQ0UsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLFdBQVcsRUFBRTtJQUMvRCxJQUFNQyxRQUFRLEdBQUdILElBQUksQ0FBQ0ksT0FBTyxFQUFFLEVBQzVCQyxlQUFlLEdBQUdDLENBQUFBLEdBQUFBLFNBQTJCLEFBQVUsQ0FBQSw0QkFBVixDQUFDSCxRQUFRLENBQUMsQUFBQztJQUUzRCxJQUFJSSxXQUFXLEdBQUdOLE9BQU8sQ0FBQ0ksZUFBZSxDQUFDLElBQUksSUFBSSxBQUFDO0lBRW5ELElBQUlFLFdBQVcsS0FBSyxJQUFJLEVBQUU7UUFDdkJBLFdBQVcsR0FBR0wsV0FBVyxDQUFDTSxRQUFRLENBQUNSLElBQUksQ0FBQyxDQUFDO1FBRXpDQyxPQUFPLENBQUNJLGVBQWUsQ0FBQyxHQUFHRSxXQUFXLENBQUM7S0FDekM7SUFFRCxPQUFPQSxXQUFXLENBQUM7Q0FDbkI7QUFFTSxTQUFTUixxQkFBcUIsQ0FBQ0MsSUFBSSxFQUFFQyxPQUFPLEVBQUVRLGFBQWEsRUFBRTtJQUNsRSxJQUFJQyxhQUFhLEFBQUM7SUFFbEIsSUFBTUMsaUJBQWlCLEdBQUdDLENBQUFBLEdBQUFBLE1BQVksQUFBcUIsQ0FBQSxhQUFyQixDQUFDWixJQUFJLEVBQUVTLGFBQWEsQ0FBQyxBQUFDO0lBRTVELElBQUlFLGlCQUFpQixFQUFFO1FBQ3JCRCxhQUFhLEdBQUdWLElBQUksQ0FBQyxDQUFDLEdBQUc7S0FDMUIsTUFBTTtRQUNMVSxhQUFhLEdBQUdELGFBQWEsQ0FBQ0QsUUFBUSxDQUFDUixJQUFJLENBQUMsQ0FBQztRQUU3QyxJQUFNRyxRQUFRLEdBQUdILElBQUksQ0FBQ0ksT0FBTyxFQUFFLEFBQUM7UUFFaEMsT0FBT0gsT0FBTyxDQUFDRSxRQUFRLENBQUMsQ0FBQztRQUV6QixJQUFNVSxpQkFBaUIsR0FBR1YsUUFBUSxBQUFDLEVBQUMsR0FBRztRQUV2Q0YsT0FBTyxDQUFDWSxpQkFBaUIsQ0FBQyxHQUFHSCxhQUFhLENBQUM7S0FDNUM7SUFFRCxPQUFPQSxhQUFhLENBQUM7Q0FDdEIifQ==