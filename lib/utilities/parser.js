"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.rulesFromBNF = rulesFromBNF;
exports.parserFromRules = parserFromRules;
var _occamLexers = require("occam-lexers");
var _occamParsers = require("occam-parsers");
var _rules = require("../utilities/rules");
var _eliminateLeftRecursion = _interopRequireDefault(require("../eliminateLeftRecursion"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var bnfLexer = _occamLexers.BNFLexer.fromNothing(), bnfParser = _occamParsers.BNFParser.fromNothing();
function rulesFromBNF(bnf) {
    var tokens = bnfLexer.tokensFromBNF(bnf), rules = bnfParser.rulesFromTokens(tokens);
    return rules;
}
function parserFromRules(Class, rules) {
    var ruleMap = (0, _rules).ruleMapFromRules(rules);
    var startRule = (0, _rules).startRuleFromRules(rules);
    startRule = (0, _eliminateLeftRecursion).default(startRule, ruleMap);
    var parser = new Class(startRule, ruleMap);
    return parser;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcGFyc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBCTkZMZXhlciB9IGZyb20gXCJvY2NhbS1sZXhlcnNcIjtcbmltcG9ydCB7IEJORlBhcnNlciB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5cbmltcG9ydCB7IHJ1bGVNYXBGcm9tUnVsZXMsIHN0YXJ0UnVsZUZyb21SdWxlcyB9IGZyb20gXCIuLi91dGlsaXRpZXMvcnVsZXNcIjtcblxuaW1wb3J0IGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24gIGZyb20gXCIuLi9lbGltaW5hdGVMZWZ0UmVjdXJzaW9uXCI7XG5cbmNvbnN0IGJuZkxleGVyID0gQk5GTGV4ZXIuZnJvbU5vdGhpbmcoKSxcbiAgICAgIGJuZlBhcnNlciA9IEJORlBhcnNlci5mcm9tTm90aGluZygpO1xuXG5leHBvcnQgZnVuY3Rpb24gcnVsZXNGcm9tQk5GKGJuZikge1xuICBjb25zdCB0b2tlbnMgPSBibmZMZXhlci50b2tlbnNGcm9tQk5GKGJuZiksXG4gICAgICAgIHJ1bGVzID0gYm5mUGFyc2VyLnJ1bGVzRnJvbVRva2Vucyh0b2tlbnMpO1xuXG4gIHJldHVybiBydWxlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlckZyb21SdWxlcyhDbGFzcywgcnVsZXMpIHtcbiAgY29uc3QgcnVsZU1hcCA9IHJ1bGVNYXBGcm9tUnVsZXMocnVsZXMpO1xuXG4gIGxldCBzdGFydFJ1bGUgPSBzdGFydFJ1bGVGcm9tUnVsZXMocnVsZXMpO1xuXG4gIHN0YXJ0UnVsZSA9IGVsaW1pbmF0ZUxlZnRSZWN1cnNpb24oc3RhcnRSdWxlLCBydWxlTWFwKTtcblxuICBjb25zdCBwYXJzZXIgPSBuZXcgQ2xhc3Moc3RhcnRSdWxlLCBydWxlTWFwKTtcblxuICByZXR1cm4gcGFyc2VyO1xufVxuIl0sIm5hbWVzIjpbInJ1bGVzRnJvbUJORiIsInBhcnNlckZyb21SdWxlcyIsImJuZkxleGVyIiwiZnJvbU5vdGhpbmciLCJibmZQYXJzZXIiLCJibmYiLCJ0b2tlbnMiLCJ0b2tlbnNGcm9tQk5GIiwicnVsZXMiLCJydWxlc0Zyb21Ub2tlbnMiLCJDbGFzcyIsInJ1bGVNYXAiLCJzdGFydFJ1bGUiLCJwYXJzZXIiXSwibWFwcGluZ3MiOiJBQUFBLENBQVk7Ozs7UUFZSUEsWUFBWSxHQUFaQSxZQUFZO1FBT1pDLGVBQWUsR0FBZkEsZUFBZTtBQWpCTixHQUFjLENBQWQsWUFBYztBQUNiLEdBQWUsQ0FBZixhQUFlO0FBRVksR0FBb0IsQ0FBcEIsTUFBb0I7QUFFckMsR0FBMkIsQ0FBM0IsdUJBQTJCOzs7Ozs7QUFFL0QsR0FBSyxDQUFDQyxRQUFRLEdBUFcsWUFBYyxVQU9iQyxXQUFXLElBQy9CQyxTQUFTLEdBUFcsYUFBZSxXQU9iRCxXQUFXO1NBRXZCSCxZQUFZLENBQUNLLEdBQUcsRUFBRSxDQUFDO0lBQ2pDLEdBQUssQ0FBQ0MsTUFBTSxHQUFHSixRQUFRLENBQUNLLGFBQWEsQ0FBQ0YsR0FBRyxHQUNuQ0csS0FBSyxHQUFHSixTQUFTLENBQUNLLGVBQWUsQ0FBQ0gsTUFBTTtJQUU5QyxNQUFNLENBQUNFLEtBQUs7QUFDZCxDQUFDO1NBRWVQLGVBQWUsQ0FBQ1MsS0FBSyxFQUFFRixLQUFLLEVBQUUsQ0FBQztJQUM3QyxHQUFLLENBQUNHLE9BQU8sT0Fmc0MsTUFBb0IsbUJBZXRDSCxLQUFLO0lBRXRDLEdBQUcsQ0FBQ0ksU0FBUyxPQWpCc0MsTUFBb0IscUJBaUJwQ0osS0FBSztJQUV4Q0ksU0FBUyxPQWpCeUIsdUJBQTJCLFVBaUIxQkEsU0FBUyxFQUFFRCxPQUFPO0lBRXJELEdBQUssQ0FBQ0UsTUFBTSxHQUFHLEdBQUcsQ0FBQ0gsS0FBSyxDQUFDRSxTQUFTLEVBQUVELE9BQU87SUFFM0MsTUFBTSxDQUFDRSxNQUFNO0FBQ2YsQ0FBQyJ9