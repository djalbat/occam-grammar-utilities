'use strict';

var partUtilities = require('../utilities/part'),
    ruleUtilities = require('../utilities/rule'),
    arrayUtilities = require('../utilities/array');

var first = arrayUtilities.first,
    findRuleByName = ruleUtilities.findRuleByName,
    ruleNameFromPart = partUtilities.ruleNameFromPart;


function ruleFromDefinition(definition, rules) {
      var rule = null;

      var parts = definition.getParts(),
          firstPart = first(parts),
          firstPartRuleName = ruleNameFromPart(firstPart);

      if (firstPartRuleName !== null) {
            var name = firstPartRuleName;

            rule = findRuleByName(name, rules);
      }

      return rule;
}

function isDDefinitionImmediateLeftRecursiveDefinition(definition, ruleName) {
      var parts = definition.getParts(),
          firstPart = first(parts),
          firstPartRuleName = ruleNameFromPart(firstPart),
          definitionImmediatelyLeftRecursiveDefinition = firstPartRuleName === ruleName;

      return definitionImmediatelyLeftRecursiveDefinition;
}

module.exports = {
      ruleFromDefinition: ruleFromDefinition,
      isDDefinitionImmediateLeftRecursiveDefinition: isDDefinitionImmediateLeftRecursiveDefinition
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvZGVmaW5pdGlvbi5qcyJdLCJuYW1lcyI6WyJwYXJ0VXRpbGl0aWVzIiwicmVxdWlyZSIsInJ1bGVVdGlsaXRpZXMiLCJhcnJheVV0aWxpdGllcyIsImZpcnN0IiwiZmluZFJ1bGVCeU5hbWUiLCJydWxlTmFtZUZyb21QYXJ0IiwicnVsZUZyb21EZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsInJ1bGVzIiwicnVsZSIsInBhcnRzIiwiZ2V0UGFydHMiLCJmaXJzdFBhcnQiLCJmaXJzdFBhcnRSdWxlTmFtZSIsIm5hbWUiLCJpc0REZWZpbml0aW9uSW1tZWRpYXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImRlZmluaXRpb25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsZ0JBQWdCQyxRQUFRLG1CQUFSLENBQXRCO0FBQUEsSUFDTUMsZ0JBQWdCRCxRQUFRLG1CQUFSLENBRHRCO0FBQUEsSUFFTUUsaUJBQWlCRixRQUFRLG9CQUFSLENBRnZCOztBQUlNLElBQUVHLEtBQUYsR0FBWUQsY0FBWixDQUFFQyxLQUFGO0FBQUEsSUFDRUMsY0FERixHQUNxQkgsYUFEckIsQ0FDRUcsY0FERjtBQUFBLElBRUVDLGdCQUZGLEdBRXVCTixhQUZ2QixDQUVFTSxnQkFGRjs7O0FBSU4sU0FBU0Msa0JBQVQsQ0FBNEJDLFVBQTVCLEVBQXdDQyxLQUF4QyxFQUErQztBQUM3QyxVQUFJQyxPQUFPLElBQVg7O0FBRUEsVUFBTUMsUUFBUUgsV0FBV0ksUUFBWCxFQUFkO0FBQUEsVUFDTUMsWUFBWVQsTUFBTU8sS0FBTixDQURsQjtBQUFBLFVBRU1HLG9CQUFvQlIsaUJBQWlCTyxTQUFqQixDQUYxQjs7QUFJQSxVQUFJQyxzQkFBc0IsSUFBMUIsRUFBZ0M7QUFDOUIsZ0JBQU1DLE9BQU9ELGlCQUFiOztBQUVBSixtQkFBT0wsZUFBZVUsSUFBZixFQUFxQk4sS0FBckIsQ0FBUDtBQUNEOztBQUVELGFBQU9DLElBQVA7QUFDRDs7QUFFRCxTQUFTTSw2Q0FBVCxDQUF1RFIsVUFBdkQsRUFBbUVTLFFBQW5FLEVBQTZFO0FBQzNFLFVBQU1OLFFBQVFILFdBQVdJLFFBQVgsRUFBZDtBQUFBLFVBQ01DLFlBQVlULE1BQU1PLEtBQU4sQ0FEbEI7QUFBQSxVQUVNRyxvQkFBb0JSLGlCQUFpQk8sU0FBakIsQ0FGMUI7QUFBQSxVQUdNSywrQ0FBZ0RKLHNCQUFzQkcsUUFINUU7O0FBS0EsYUFBT0MsNENBQVA7QUFFRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQjtBQUNmYiw0Q0FEZTtBQUVmUztBQUZlLENBQWpCIiwiZmlsZSI6ImRlZmluaXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHBhcnRVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi91dGlsaXRpZXMvcGFydCcpLFxuICAgICAgcnVsZVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9ydWxlJyksXG4gICAgICBhcnJheVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9hcnJheScpO1xuXG5jb25zdCB7IGZpcnN0IH0gPSBhcnJheVV0aWxpdGllcyxcbiAgICAgIHsgZmluZFJ1bGVCeU5hbWUgfSA9IHJ1bGVVdGlsaXRpZXMsXG4gICAgICB7IHJ1bGVOYW1lRnJvbVBhcnQgfSA9IHBhcnRVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIHJ1bGVGcm9tRGVmaW5pdGlvbihkZWZpbml0aW9uLCBydWxlcykge1xuICBsZXQgcnVsZSA9IG51bGw7XG5cbiAgY29uc3QgcGFydHMgPSBkZWZpbml0aW9uLmdldFBhcnRzKCksXG4gICAgICAgIGZpcnN0UGFydCA9IGZpcnN0KHBhcnRzKSxcbiAgICAgICAgZmlyc3RQYXJ0UnVsZU5hbWUgPSBydWxlTmFtZUZyb21QYXJ0KGZpcnN0UGFydCk7XG5cbiAgaWYgKGZpcnN0UGFydFJ1bGVOYW1lICE9PSBudWxsKSB7XG4gICAgY29uc3QgbmFtZSA9IGZpcnN0UGFydFJ1bGVOYW1lO1xuXG4gICAgcnVsZSA9IGZpbmRSdWxlQnlOYW1lKG5hbWUsIHJ1bGVzKTtcbiAgfVxuXG4gIHJldHVybiBydWxlO1xufVxuXG5mdW5jdGlvbiBpc0REZWZpbml0aW9uSW1tZWRpYXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGVmaW5pdGlvbiwgcnVsZU5hbWUpIHtcbiAgY29uc3QgcGFydHMgPSBkZWZpbml0aW9uLmdldFBhcnRzKCksXG4gICAgICAgIGZpcnN0UGFydCA9IGZpcnN0KHBhcnRzKSxcbiAgICAgICAgZmlyc3RQYXJ0UnVsZU5hbWUgPSBydWxlTmFtZUZyb21QYXJ0KGZpcnN0UGFydCksXG4gICAgICAgIGRlZmluaXRpb25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGZpcnN0UGFydFJ1bGVOYW1lID09PSBydWxlTmFtZSk7XG5cbiAgcmV0dXJuIGRlZmluaXRpb25JbW1lZGlhdGVseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBydWxlRnJvbURlZmluaXRpb24sXG4gIGlzRERlZmluaXRpb25JbW1lZGlhdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblxufTtcbiJdfQ==