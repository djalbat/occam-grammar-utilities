'use strict';

var partUtilities = require('../utilities/part');

var partRuleNamesFromParts = partUtilities.partRuleNamesFromParts;


function rulesAsString(rules, multiLine) {
  var maximumRuleNameLength = rules.reduce(function (maximumRuleNameLength, rule) {
    var ruleName = rule.getName(),
        ruleNameLength = ruleName.length;

    maximumRuleNameLength = Math.max(maximumRuleNameLength, ruleNameLength);

    return maximumRuleNameLength;
  }, 0),
      rulesString = rules.reduce(function (rulesString, rule) {
    var ruleString = rule.asString(maximumRuleNameLength, multiLine);

    rulesString += ruleString;

    return rulesString;
  }, '');

  return rulesString;
}

function ruleNamesFromRules(rules) {
  var ruleNames = rules.map(function (rule) {
    var ruleName = rule.getName();

    return ruleName;
  });

  return ruleNames;
}

function partRuleNamesFromRules(rules) {
  var partRuleNames = [];

  rules.forEach(function (rule) {
    var definitions = rule.getDefinitions();

    definitions.forEach(function (definition) {
      var parts = definition.getParts();

      partRuleNamesFromParts(parts, partRuleNames);
    });
  });

  return partRuleNames;
}

module.exports = {
  rulesAsString: rulesAsString,
  ruleNamesFromRules: ruleNamesFromRules,
  partRuleNamesFromRules: partRuleNamesFromRules
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvcnVsZXMuanMiXSwibmFtZXMiOlsicGFydFV0aWxpdGllcyIsInJlcXVpcmUiLCJwYXJ0UnVsZU5hbWVzRnJvbVBhcnRzIiwicnVsZXNBc1N0cmluZyIsInJ1bGVzIiwibXVsdGlMaW5lIiwibWF4aW11bVJ1bGVOYW1lTGVuZ3RoIiwicmVkdWNlIiwicnVsZSIsInJ1bGVOYW1lIiwiZ2V0TmFtZSIsInJ1bGVOYW1lTGVuZ3RoIiwibGVuZ3RoIiwiTWF0aCIsIm1heCIsInJ1bGVzU3RyaW5nIiwicnVsZVN0cmluZyIsImFzU3RyaW5nIiwicnVsZU5hbWVzRnJvbVJ1bGVzIiwicnVsZU5hbWVzIiwibWFwIiwicGFydFJ1bGVOYW1lc0Zyb21SdWxlcyIsInBhcnRSdWxlTmFtZXMiLCJmb3JFYWNoIiwiZGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJwYXJ0cyIsImdldFBhcnRzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsZ0JBQWdCQyxRQUFRLG1CQUFSLENBQXRCOztJQUVRQyxzQixHQUEyQkYsYSxDQUEzQkUsc0I7OztBQUVSLFNBQVNDLGFBQVQsQ0FBdUJDLEtBQXZCLEVBQThCQyxTQUE5QixFQUF5QztBQUN2QyxNQUFNQyx3QkFBd0JGLE1BQU1HLE1BQU4sQ0FBYSxVQUFTRCxxQkFBVCxFQUFnQ0UsSUFBaEMsRUFBc0M7QUFDekUsUUFBTUMsV0FBV0QsS0FBS0UsT0FBTCxFQUFqQjtBQUFBLFFBQ01DLGlCQUFpQkYsU0FBU0csTUFEaEM7O0FBR0FOLDRCQUF3Qk8sS0FBS0MsR0FBTCxDQUFTUixxQkFBVCxFQUFnQ0ssY0FBaEMsQ0FBeEI7O0FBRUEsV0FBT0wscUJBQVA7QUFDRCxHQVB1QixFQU9yQixDQVBxQixDQUE5QjtBQUFBLE1BUU1TLGNBQWNYLE1BQU1HLE1BQU4sQ0FBYSxVQUFTUSxXQUFULEVBQXNCUCxJQUF0QixFQUE0QjtBQUNyRCxRQUFNUSxhQUFhUixLQUFLUyxRQUFMLENBQWNYLHFCQUFkLEVBQXFDRCxTQUFyQyxDQUFuQjs7QUFFQVUsbUJBQWVDLFVBQWY7O0FBRUEsV0FBT0QsV0FBUDtBQUNELEdBTmEsRUFNWCxFQU5XLENBUnBCOztBQWdCQSxTQUFPQSxXQUFQO0FBQ0Q7O0FBRUQsU0FBU0csa0JBQVQsQ0FBNEJkLEtBQTVCLEVBQW1DO0FBQ2pDLE1BQU1lLFlBQVlmLE1BQU1nQixHQUFOLENBQVUsVUFBU1osSUFBVCxFQUFlO0FBQ3pDLFFBQU1DLFdBQVdELEtBQUtFLE9BQUwsRUFBakI7O0FBRUEsV0FBT0QsUUFBUDtBQUNELEdBSmlCLENBQWxCOztBQU1BLFNBQU9VLFNBQVA7QUFDRDs7QUFFRCxTQUFTRSxzQkFBVCxDQUFnQ2pCLEtBQWhDLEVBQXVDO0FBQ3JDLE1BQU1rQixnQkFBZ0IsRUFBdEI7O0FBRUFsQixRQUFNbUIsT0FBTixDQUFjLFVBQVNmLElBQVQsRUFBZTtBQUMzQixRQUFNZ0IsY0FBY2hCLEtBQUtpQixjQUFMLEVBQXBCOztBQUVBRCxnQkFBWUQsT0FBWixDQUFvQixVQUFTRyxVQUFULEVBQXFCO0FBQ3ZDLFVBQU1DLFFBQVFELFdBQVdFLFFBQVgsRUFBZDs7QUFFQTFCLDZCQUF1QnlCLEtBQXZCLEVBQThCTCxhQUE5QjtBQUNELEtBSkQ7QUFLRCxHQVJEOztBQVVBLFNBQU9BLGFBQVA7QUFDRDs7QUFFRE8sT0FBT0MsT0FBUCxHQUFpQjtBQUNmM0IsOEJBRGU7QUFFZmUsd0NBRmU7QUFHZkc7QUFIZSxDQUFqQiIsImZpbGUiOiJydWxlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcGFydFV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9wYXJ0Jyk7XG5cbmNvbnN0IHsgcGFydFJ1bGVOYW1lc0Zyb21QYXJ0cyB9ID0gcGFydFV0aWxpdGllcztcblxuZnVuY3Rpb24gcnVsZXNBc1N0cmluZyhydWxlcywgbXVsdGlMaW5lKSB7XG4gIGNvbnN0IG1heGltdW1SdWxlTmFtZUxlbmd0aCA9IHJ1bGVzLnJlZHVjZShmdW5jdGlvbihtYXhpbXVtUnVsZU5hbWVMZW5ndGgsIHJ1bGUpIHtcbiAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgICAgIHJ1bGVOYW1lTGVuZ3RoID0gcnVsZU5hbWUubGVuZ3RoO1xuXG4gICAgICAgICAgbWF4aW11bVJ1bGVOYW1lTGVuZ3RoID0gTWF0aC5tYXgobWF4aW11bVJ1bGVOYW1lTGVuZ3RoLCBydWxlTmFtZUxlbmd0aCk7XG5cbiAgICAgICAgICByZXR1cm4gbWF4aW11bVJ1bGVOYW1lTGVuZ3RoO1xuICAgICAgICB9LCAwKSxcbiAgICAgICAgcnVsZXNTdHJpbmcgPSBydWxlcy5yZWR1Y2UoZnVuY3Rpb24ocnVsZXNTdHJpbmcsIHJ1bGUpIHtcbiAgICAgICAgICBjb25zdCBydWxlU3RyaW5nID0gcnVsZS5hc1N0cmluZyhtYXhpbXVtUnVsZU5hbWVMZW5ndGgsIG11bHRpTGluZSk7XG5cbiAgICAgICAgICBydWxlc1N0cmluZyArPSBydWxlU3RyaW5nO1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bGVzU3RyaW5nO1xuICAgICAgICB9LCAnJyk7XG5cbiAgcmV0dXJuIHJ1bGVzU3RyaW5nO1xufVxuXG5mdW5jdGlvbiBydWxlTmFtZXNGcm9tUnVsZXMocnVsZXMpIHtcbiAgY29uc3QgcnVsZU5hbWVzID0gcnVsZXMubWFwKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgcmV0dXJuIHJ1bGVOYW1lO1xuICB9KTtcblxuICByZXR1cm4gcnVsZU5hbWVzO1xufVxuXG5mdW5jdGlvbiBwYXJ0UnVsZU5hbWVzRnJvbVJ1bGVzKHJ1bGVzKSB7XG4gIGNvbnN0IHBhcnRSdWxlTmFtZXMgPSBbXTtcblxuICBydWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICAgIGRlZmluaXRpb25zLmZvckVhY2goZnVuY3Rpb24oZGVmaW5pdGlvbikge1xuICAgICAgY29uc3QgcGFydHMgPSBkZWZpbml0aW9uLmdldFBhcnRzKCk7XG5cbiAgICAgIHBhcnRSdWxlTmFtZXNGcm9tUGFydHMocGFydHMsIHBhcnRSdWxlTmFtZXMpO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gcGFydFJ1bGVOYW1lcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJ1bGVzQXNTdHJpbmcsXG4gIHJ1bGVOYW1lc0Zyb21SdWxlcyxcbiAgcGFydFJ1bGVOYW1lc0Zyb21SdWxlc1xufTtcbiJdfQ==