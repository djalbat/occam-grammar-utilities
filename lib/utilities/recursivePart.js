"use strict";

var _occamParsers = require("occam-parsers");

var _necessary = require("necessary");

var first = _necessary.arrayUtilities.first,
    RuleNamePartType = _occamParsers.partTypes.RuleNamePartType,
    OptionalPartPartType = _occamParsers.partTypes.OptionalPartPartType,
    GroupOfPartsPartType = _occamParsers.partTypes.GroupOfPartsPartType,
    ChoiceOfPartsPartType = _occamParsers.partTypes.ChoiceOfPartsPartType,
    OneOrMorePartsPartType = _occamParsers.partTypes.OneOrMorePartsPartType,
    ZeroOrMorePartsPartType = _occamParsers.partTypes.ZeroOrMorePartsPartType;

function recursiveRuleNamesFromPart(part, recursiveRuleNames) {
  var partNonTerminalPart = part.isNonTerminalPart();

  if (partNonTerminalPart) {
    var type = part.getType();

    switch (type) {
      case RuleNamePartType:
        {
          var ruleNamePart = part,
              ///
          ruleName = ruleNamePart.getRuleName(),
              recursiveRuleNamesIncludesRuleName = recursiveRuleNames.includes(ruleName);

          if (!recursiveRuleNamesIncludesRuleName) {
            var recursiveRuleName = ruleName; ///

            recursiveRuleNames.push(recursiveRuleName);
          }
        }
        break;

      case OptionalPartPartType:
        {
          var optionalPartPart = part; ///

          part = optionalPartPart.getPart();
          recursiveRuleNamesFromPart(part, recursiveRuleNames);
        }
        break;

      case OneOrMorePartsPartType:
        {
          var oneOrMorePartsPart = part; ///

          part = oneOrMorePartsPart.getPart();
          recursiveRuleNamesFromPart(part, recursiveRuleNames);
        }
        break;

      case ZeroOrMorePartsPartType:
        {
          var zeroOrMorePartsPart = part; ///

          part = zeroOrMorePartsPart.getPart(); ///

          recursiveRuleNamesFromPart(part, recursiveRuleNames);
        }
        break;

      case GroupOfPartsPartType:
        {
          var groupOfPartsPart = part,
              ///
          parts = groupOfPartsPart.getParts();
          parts.forEach(function (part) {
            return recursiveRuleNamesFromPart(part, recursiveRuleNames);
          });
        }
        break;

      case ChoiceOfPartsPartType:
        {
          var choiceOfPartsPart = part,
              ///
          _parts = choiceOfPartsPart.getParts();

          _parts.forEach(function (part) {
            return recursiveRuleNamesFromPart(part, recursiveRuleNames);
          });
        }
        break;
    }
  }
}

function leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames) {
  var partNonTerminalPart = part.isNonTerminalPart();

  if (partNonTerminalPart) {
    var type = part.getType();

    switch (type) {
      case RuleNamePartType:
        {
          var ruleNamePart = part,
              ///
          ruleName = ruleNamePart.getRuleName(),
              leftRecursiveRuleNamesIncludesRuleName = leftRecursiveRuleNames.includes(ruleName);

          if (!leftRecursiveRuleNamesIncludesRuleName) {
            var leftRecursiveRuleName = ruleName; ///

            leftRecursiveRuleNames.push(leftRecursiveRuleName);
          }
        }
        break;

      case OptionalPartPartType:
        {
          var optionalPartPart = part; ///

          part = optionalPartPart.getPart();
          leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames);
        }
        break;

      case OneOrMorePartsPartType:
        {
          var oneOrMorePartsPart = part; ///

          part = oneOrMorePartsPart.getPart();
          leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames);
        }
        break;

      case ZeroOrMorePartsPartType:
        {
          var zeroOrMorePartsPart = part; ///

          part = zeroOrMorePartsPart.getPart();
          leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames);
        }
        break;

      case GroupOfPartsPartType:
        {
          var groupOfPartsPart = part,
              ///
          parts = groupOfPartsPart.getParts(),
              firstPart = first(parts);
          part = firstPart; ///

          leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames);
        }
        break;

      case ChoiceOfPartsPartType:
        {
          var choiceOfPartsPart = part,
              ///
          _parts2 = choiceOfPartsPart.getParts();

          _parts2.forEach(function (part) {
            return leftRecursiveRuleNamesFromPart(part, leftRecursiveRuleNames);
          });
        }
        break;
    }
  }
}

module.exports = {
  recursiveRuleNamesFromPart: recursiveRuleNamesFromPart,
  leftRecursiveRuleNamesFromPart: leftRecursiveRuleNamesFromPart
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY3Vyc2l2ZVBhcnQuanMiXSwibmFtZXMiOlsiZmlyc3QiLCJhcnJheVV0aWxpdGllcyIsIlJ1bGVOYW1lUGFydFR5cGUiLCJwYXJ0VHlwZXMiLCJPcHRpb25hbFBhcnRQYXJ0VHlwZSIsIkdyb3VwT2ZQYXJ0c1BhcnRUeXBlIiwiQ2hvaWNlT2ZQYXJ0c1BhcnRUeXBlIiwiT25lT3JNb3JlUGFydHNQYXJ0VHlwZSIsIlplcm9Pck1vcmVQYXJ0c1BhcnRUeXBlIiwicmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQiLCJwYXJ0IiwicmVjdXJzaXZlUnVsZU5hbWVzIiwicGFydE5vblRlcm1pbmFsUGFydCIsImlzTm9uVGVybWluYWxQYXJ0IiwidHlwZSIsImdldFR5cGUiLCJydWxlTmFtZVBhcnQiLCJydWxlTmFtZSIsImdldFJ1bGVOYW1lIiwicmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSdWxlTmFtZSIsImluY2x1ZGVzIiwicmVjdXJzaXZlUnVsZU5hbWUiLCJwdXNoIiwib3B0aW9uYWxQYXJ0UGFydCIsImdldFBhcnQiLCJvbmVPck1vcmVQYXJ0c1BhcnQiLCJ6ZXJvT3JNb3JlUGFydHNQYXJ0IiwiZ3JvdXBPZlBhcnRzUGFydCIsInBhcnRzIiwiZ2V0UGFydHMiLCJmb3JFYWNoIiwiY2hvaWNlT2ZQYXJ0c1BhcnQiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJmaXJzdFBhcnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7QUFDQTs7QUFFTSxJQUFFQSxLQUFGLEdBQVlDLHlCQUFaLENBQUVELEtBQUY7QUFBQSxJQUNFRSxnQkFERixHQU04QkMsdUJBTjlCLENBQ0VELGdCQURGO0FBQUEsSUFFRUUsb0JBRkYsR0FNOEJELHVCQU45QixD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UCxDQUE5QjtBQUNEO0FBQ0Q7O0FBRUYsV0FBSzVCLG9CQUFMO0FBQTRCO0FBQ3hCLGNBQU1zQixnQkFBZ0IsR0FBR2pCLElBQXpCO0FBQUEsY0FBZ0M7QUFDMUJrQixVQUFBQSxLQUFLLEdBQUdELGdCQUFnQixDQUFDRSxRQUFqQixFQURkO0FBQUEsY0FFTU8sU0FBUyxHQUFHcEMsS0FBSyxDQUFDNEIsS0FBRCxDQUZ2QjtBQUlBbEIsVUFBQUEsSUFBSSxHQUFHMEIsU0FBUCxDQUx3QixDQUtOOztBQUVsQkosVUFBQUEsOEJBQThCLENBQUN0QixJQUFELEVBQU91QixzQkFBUCxDQUE5QjtBQUNEO0FBQ0Q7O0FBRUYsV0FBSzNCLHFCQUFMO0FBQTZCO0FBQ3pCLGNBQU15QixpQkFBaUIsR0FBR3JCLElBQTFCO0FBQUEsY0FBZ0M7QUFDMUJrQixVQUFBQSxPQUFLLEdBQUdHLGlCQUFpQixDQUFDRixRQUFsQixFQURkOztBQUdBRCxVQUFBQSxPQUFLLENBQUNFLE9BQU4sQ0FBYyxVQUFDcEIsSUFBRDtBQUFBLG1CQUFVc0IsOEJBQThCLENBQUN0QixJQUFELEVBQU91QixzQkFBUCxDQUF4QztBQUFBLFdBQWQ7QUFDRDtBQUNEO0FBMURKO0FBNEREO0FBQ0Y7O0FBRURJLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmN0IsRUFBQUEsMEJBQTBCLEVBQTFCQSwwQkFEZTtBQUVmdUIsRUFBQUEsOEJBQThCLEVBQTlCQTtBQUZlLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHBhcnRUeXBlcyB9IGZyb20gXCJvY2NhbS1wYXJzZXJzXCI7XG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuY29uc3QgeyBmaXJzdCB9ID0gYXJyYXlVdGlsaXRpZXMsXG4gICAgICB7IFJ1bGVOYW1lUGFydFR5cGUsXG4gICAgICAgIE9wdGlvbmFsUGFydFBhcnRUeXBlLFxuICAgICAgICBHcm91cE9mUGFydHNQYXJ0VHlwZSxcbiAgICAgICAgQ2hvaWNlT2ZQYXJ0c1BhcnRUeXBlLFxuICAgICAgICBPbmVPck1vcmVQYXJ0c1BhcnRUeXBlLFxuICAgICAgICBaZXJvT3JNb3JlUGFydHNQYXJ0VHlwZSB9ID0gcGFydFR5cGVzO1xuXG5mdW5jdGlvbiByZWN1cnNpdmVSdWxlTmFtZXNGcm9tUGFydChwYXJ0LCByZWN1cnNpdmVSdWxlTmFtZXMpIHtcbiAgY29uc3QgcGFydE5vblRlcm1pbmFsUGFydCA9IHBhcnQuaXNOb25UZXJtaW5hbFBhcnQoKTtcblxuICBpZiAocGFydE5vblRlcm1pbmFsUGFydCkge1xuICAgIGNvbnN0IHR5cGUgPSBwYXJ0LmdldFR5cGUoKTtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBSdWxlTmFtZVBhcnRUeXBlIDoge1xuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lUGFydCA9IHBhcnQsICAvLy9cbiAgICAgICAgICAgICAgICBydWxlTmFtZSA9IHJ1bGVOYW1lUGFydC5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUnVsZU5hbWUgPSByZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocnVsZU5hbWUpO1xuXG4gICAgICAgICAgaWYgKCFyZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1J1bGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCByZWN1cnNpdmVSdWxlTmFtZSA9IHJ1bGVOYW1lOyAvLy9cblxuICAgICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzLnB1c2gocmVjdXJzaXZlUnVsZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBPcHRpb25hbFBhcnRQYXJ0VHlwZSA6IHtcbiAgICAgICAgICBjb25zdCBvcHRpb25hbFBhcnRQYXJ0ID0gcGFydDsgIC8vL1xuXG4gICAgICAgICAgcGFydCA9IG9wdGlvbmFsUGFydFBhcnQuZ2V0UGFydCgpO1xuXG4gICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgcmVjdXJzaXZlUnVsZU5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBPbmVPck1vcmVQYXJ0c1BhcnRUeXBlIDoge1xuICAgICAgICAgIGNvbnN0IG9uZU9yTW9yZVBhcnRzUGFydCA9IHBhcnQ7ICAvLy9cblxuICAgICAgICAgIHBhcnQgPSBvbmVPck1vcmVQYXJ0c1BhcnQuZ2V0UGFydCgpO1xuXG4gICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgcmVjdXJzaXZlUnVsZU5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBaZXJvT3JNb3JlUGFydHNQYXJ0VHlwZSA6IHtcbiAgICAgICAgICBjb25zdCB6ZXJvT3JNb3JlUGFydHNQYXJ0ID0gcGFydDsgLy8vXG5cbiAgICAgICAgICBwYXJ0ID0gemVyb09yTW9yZVBhcnRzUGFydC5nZXRQYXJ0KCk7ICAvLy9cblxuICAgICAgICAgIHJlY3Vyc2l2ZVJ1bGVOYW1lc0Zyb21QYXJ0KHBhcnQsIHJlY3Vyc2l2ZVJ1bGVOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgR3JvdXBPZlBhcnRzUGFydFR5cGUgOiB7XG4gICAgICAgIGNvbnN0IGdyb3VwT2ZQYXJ0c1BhcnQgPSBwYXJ0LCAgLy8vXG4gICAgICAgICAgICAgIHBhcnRzID0gZ3JvdXBPZlBhcnRzUGFydC5nZXRQYXJ0cygpO1xuXG4gICAgICAgICAgcGFydHMuZm9yRWFjaCgocGFydCkgPT4gcmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgcmVjdXJzaXZlUnVsZU5hbWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ2hvaWNlT2ZQYXJ0c1BhcnRUeXBlIDoge1xuICAgICAgICBjb25zdCBjaG9pY2VPZlBhcnRzUGFydCA9IHBhcnQsIC8vL1xuICAgICAgICAgICAgICBwYXJ0cyA9IGNob2ljZU9mUGFydHNQYXJ0LmdldFBhcnRzKCk7XG5cbiAgICAgICAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiByZWN1cnNpdmVSdWxlTmFtZXNGcm9tUGFydChwYXJ0LCByZWN1cnNpdmVSdWxlTmFtZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lc0Zyb21QYXJ0KHBhcnQsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpIHtcbiAgY29uc3QgcGFydE5vblRlcm1pbmFsUGFydCA9IHBhcnQuaXNOb25UZXJtaW5hbFBhcnQoKTtcblxuICBpZiAocGFydE5vblRlcm1pbmFsUGFydCkge1xuICAgIGNvbnN0IHR5cGUgPSBwYXJ0LmdldFR5cGUoKTtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBSdWxlTmFtZVBhcnRUeXBlIDoge1xuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lUGFydCA9IHBhcnQsICAvLy9cbiAgICAgICAgICAgICAgICBydWxlTmFtZSA9IHJ1bGVOYW1lUGFydC5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1J1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcy5pbmNsdWRlcyhydWxlTmFtZSk7XG5cbiAgICAgICAgICBpZiAoIWxlZnRSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1J1bGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBydWxlTmFtZTsgLy8vXG5cbiAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMucHVzaChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBPcHRpb25hbFBhcnRQYXJ0VHlwZSA6IHtcbiAgICAgICAgICBjb25zdCBvcHRpb25hbFBhcnRQYXJ0ID0gcGFydDsgLy8vXG5cbiAgICAgICAgICBwYXJ0ID0gb3B0aW9uYWxQYXJ0UGFydC5nZXRQYXJ0KCk7XG5cbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgT25lT3JNb3JlUGFydHNQYXJ0VHlwZSA6IHtcbiAgICAgICAgICBjb25zdCBvbmVPck1vcmVQYXJ0c1BhcnQgPSBwYXJ0OyAgLy8vXG5cbiAgICAgICAgICBwYXJ0ID0gb25lT3JNb3JlUGFydHNQYXJ0LmdldFBhcnQoKTtcblxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXNGcm9tUGFydChwYXJ0LCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBaZXJvT3JNb3JlUGFydHNQYXJ0VHlwZSA6IHtcbiAgICAgICAgICBjb25zdCB6ZXJvT3JNb3JlUGFydHNQYXJ0ID0gcGFydDsgLy8vXG5cbiAgICAgICAgICBwYXJ0ID0gemVyb09yTW9yZVBhcnRzUGFydC5nZXRQYXJ0KCk7XG5cbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgR3JvdXBPZlBhcnRzUGFydFR5cGUgOiB7XG4gICAgICAgICAgY29uc3QgZ3JvdXBPZlBhcnRzUGFydCA9IHBhcnQsICAvLy9cbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGdyb3VwT2ZQYXJ0c1BhcnQuZ2V0UGFydHMoKSxcbiAgICAgICAgICAgICAgICBmaXJzdFBhcnQgPSBmaXJzdChwYXJ0cyk7XG5cbiAgICAgICAgICBwYXJ0ID0gZmlyc3RQYXJ0OyAvLy9cblxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXNGcm9tUGFydChwYXJ0LCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDaG9pY2VPZlBhcnRzUGFydFR5cGUgOiB7XG4gICAgICAgICAgY29uc3QgY2hvaWNlT2ZQYXJ0c1BhcnQgPSBwYXJ0LCAvLy9cbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGNob2ljZU9mUGFydHNQYXJ0LmdldFBhcnRzKCk7XG5cbiAgICAgICAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQocGFydCwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcykpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVjdXJzaXZlUnVsZU5hbWVzRnJvbVBhcnQsXG4gIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXNGcm9tUGFydFxufTtcbiJdfQ==