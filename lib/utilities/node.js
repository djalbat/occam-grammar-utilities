'use strict';

var IntermediateNode = require('../node/intermediate');

function removeIntermediateNodes(node) {
  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var nonTerminalNode = node; ///

    var childNodes = nonTerminalNode.getChildNodes();

    childNodes = removeIntermediateChildNodes(childNodes);

    nonTerminalNode.setChildNodes(childNodes);
  }
}

module.exports = {
  removeIntermediateNodes: removeIntermediateNodes
};

function removeIntermediateChildNodes(childNodes) {
  childNodes = childNodes.reduce(function (childNodes, childNode) {
    var childNodeIntermediateNode = childNode instanceof IntermediateNode;

    if (childNodeIntermediateNode) {
      var childNodeChildNodes = childNode.getChildNodes();

      childNodeChildNodes = removeIntermediateChildNodes(childNodeChildNodes);

      childNodes = childNodes.concat(childNodeChildNodes);
    } else {
      removeIntermediateNodes(childNode);

      childNodes.push(childNode);
    }

    return childNodes;
  }, []);

  return childNodes;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvbm9kZS5qcyJdLCJuYW1lcyI6WyJJbnRlcm1lZGlhdGVOb2RlIiwicmVxdWlyZSIsInJlbW92ZUludGVybWVkaWF0ZU5vZGVzIiwibm9kZSIsIm5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsIm5vblRlcm1pbmFsTm9kZSIsImNoaWxkTm9kZXMiLCJnZXRDaGlsZE5vZGVzIiwicmVtb3ZlSW50ZXJtZWRpYXRlQ2hpbGROb2RlcyIsInNldENoaWxkTm9kZXMiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVkdWNlIiwiY2hpbGROb2RlIiwiY2hpbGROb2RlSW50ZXJtZWRpYXRlTm9kZSIsImNoaWxkTm9kZUNoaWxkTm9kZXMiLCJjb25jYXQiLCJwdXNoIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxtQkFBbUJDLFFBQVEsc0JBQVIsQ0FBekI7O0FBRUEsU0FBU0MsdUJBQVQsQ0FBaUNDLElBQWpDLEVBQXVDO0FBQ3JDLE1BQU1DLHNCQUFzQkQsS0FBS0UsaUJBQUwsRUFBNUI7O0FBRUEsTUFBSUQsbUJBQUosRUFBeUI7QUFDdkIsUUFBTUUsa0JBQWtCSCxJQUF4QixDQUR1QixDQUNPOztBQUU5QixRQUFJSSxhQUFhRCxnQkFBZ0JFLGFBQWhCLEVBQWpCOztBQUVBRCxpQkFBYUUsNkJBQTZCRixVQUE3QixDQUFiOztBQUVBRCxvQkFBZ0JJLGFBQWhCLENBQThCSCxVQUE5QjtBQUNEO0FBQ0Y7O0FBRURJLE9BQU9DLE9BQVAsR0FBaUI7QUFDZlY7QUFEZSxDQUFqQjs7QUFJQSxTQUFTTyw0QkFBVCxDQUFzQ0YsVUFBdEMsRUFBa0Q7QUFDaERBLGVBQWFBLFdBQVdNLE1BQVgsQ0FBa0IsVUFBQ04sVUFBRCxFQUFhTyxTQUFiLEVBQTJCO0FBQ3hELFFBQU1DLDRCQUE2QkQscUJBQXFCZCxnQkFBeEQ7O0FBRUEsUUFBSWUseUJBQUosRUFBK0I7QUFDN0IsVUFBSUMsc0JBQXNCRixVQUFVTixhQUFWLEVBQTFCOztBQUVBUSw0QkFBc0JQLDZCQUE2Qk8sbUJBQTdCLENBQXRCOztBQUVBVCxtQkFBYUEsV0FBV1UsTUFBWCxDQUFrQkQsbUJBQWxCLENBQWI7QUFDRCxLQU5ELE1BTU87QUFDTGQsOEJBQXdCWSxTQUF4Qjs7QUFFQVAsaUJBQVdXLElBQVgsQ0FBZ0JKLFNBQWhCO0FBQ0Q7O0FBRUQsV0FBT1AsVUFBUDtBQUNELEdBaEJZLEVBZ0JWLEVBaEJVLENBQWI7O0FBa0JBLFNBQU9BLFVBQVA7QUFDRCIsImZpbGUiOiJub2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBJbnRlcm1lZGlhdGVOb2RlID0gcmVxdWlyZSgnLi4vbm9kZS9pbnRlcm1lZGlhdGUnKTtcblxuZnVuY3Rpb24gcmVtb3ZlSW50ZXJtZWRpYXRlTm9kZXMobm9kZSkge1xuICBjb25zdCBub2RlTm9uVGVybWluYWxOb2RlID0gbm9kZS5pc05vblRlcm1pbmFsTm9kZSgpO1xuXG4gIGlmIChub2RlTm9uVGVybWluYWxOb2RlKSB7XG4gICAgY29uc3Qgbm9uVGVybWluYWxOb2RlID0gbm9kZTsgLy8vXG5cbiAgICBsZXQgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBjaGlsZE5vZGVzID0gcmVtb3ZlSW50ZXJtZWRpYXRlQ2hpbGROb2RlcyhjaGlsZE5vZGVzKTtcblxuICAgIG5vblRlcm1pbmFsTm9kZS5zZXRDaGlsZE5vZGVzKGNoaWxkTm9kZXMpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlbW92ZUludGVybWVkaWF0ZU5vZGVzXG59O1xuXG5mdW5jdGlvbiByZW1vdmVJbnRlcm1lZGlhdGVDaGlsZE5vZGVzKGNoaWxkTm9kZXMpIHtcbiAgY2hpbGROb2RlcyA9IGNoaWxkTm9kZXMucmVkdWNlKChjaGlsZE5vZGVzLCBjaGlsZE5vZGUpID0+IHtcbiAgICBjb25zdCBjaGlsZE5vZGVJbnRlcm1lZGlhdGVOb2RlID0gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIEludGVybWVkaWF0ZU5vZGUpO1xuXG4gICAgaWYgKGNoaWxkTm9kZUludGVybWVkaWF0ZU5vZGUpIHtcbiAgICAgIGxldCBjaGlsZE5vZGVDaGlsZE5vZGVzID0gY2hpbGROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgICAgY2hpbGROb2RlQ2hpbGROb2RlcyA9IHJlbW92ZUludGVybWVkaWF0ZUNoaWxkTm9kZXMoY2hpbGROb2RlQ2hpbGROb2Rlcyk7XG5cbiAgICAgIGNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLmNvbmNhdChjaGlsZE5vZGVDaGlsZE5vZGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlSW50ZXJtZWRpYXRlTm9kZXMoY2hpbGROb2RlKTtcblxuICAgICAgY2hpbGROb2Rlcy5wdXNoKGNoaWxkTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkTm9kZXM7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gY2hpbGROb2Rlcztcbn1cbiJdfQ==