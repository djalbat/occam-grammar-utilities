"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    rewriteIndirectlyRepeatedNodes: function() {
        return rewriteIndirectlyRepeatedNodes;
    },
    rewriteDirectlyRepeatedNodes: function() {
        return rewriteDirectlyRepeatedNodes;
    },
    rewriteReducedNodes: function() {
        return rewriteReducedNodes;
    }
});
var _necessary = require("necessary");
var _occamparsers = require("occam-parsers");
var _reduced = /*#__PURE__*/ _interop_require_default(require("../node/reduced"));
var _directly = /*#__PURE__*/ _interop_require_default(require("../node/repeated/directly"));
var _indirectly = /*#__PURE__*/ _interop_require_default(require("../node/repeated/indirectly"));
var _ruleName = require("../utilities/ruleName");
function _array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _array_without_holes(arr) {
    if (Array.isArray(arr)) return _array_like_to_array(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterable_to_array(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _non_iterable_spread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _to_consumable_array(arr) {
    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();
}
function _unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
}
var front = _necessary.arrayUtilities.front, first = _necessary.arrayUtilities.first, push = _necessary.arrayUtilities.push, clear = _necessary.arrayUtilities.clear, backwardsForEach = _necessary.arrayUtilities.backwardsForEach;
function rewriteIndirectlyRepeatedNodes(nonTerminalNode) {
    var parentNode = nonTerminalNode; ///
    var childNodes = parentNode.getChildNodes(), indirectlyRepeatedNodes = findIndirectlyRepeatedNodes(childNodes);
    backwardsForEach(indirectlyRepeatedNodes, function(indirectlyRepeatedNode) {
        nonTerminalNode = nonTerminalNodeFromParentNodeAndIndirectlyRepeatedNode(parentNode, indirectlyRepeatedNode); ///
        var indirectlyRepeatedNodeRuleName = indirectlyRepeatedNode.getRuleName(), indirectlyRepeatedRuleName = indirectlyRepeatedNodeRuleName, parentNodeNodeRuleName = parentNode.getRuleName(), ruleName = (0, _ruleName.ruleNameFromIndirectlyRepeatedRuleName)(indirectlyRepeatedRuleName);
        if (parentNodeNodeRuleName === ruleName) {
            var precedence = indirectlyRepeatedNode.getPrecedence();
            parentNode.setPrecedence(precedence);
        }
        var replacementChildNodes = replacementChildNodesFromNonTerminalNodeNodeAndIndirectlyRepeatedNode(nonTerminalNode, indirectlyRepeatedNode);
        replaceAllChildNodes(parentNode, replacementChildNodes);
        parentNode = nonTerminalNode; ///
    });
    return parentNode;
}
function rewriteDirectlyRepeatedNodes(nonTerminalNode) {
    var _loop = function() {
        var replacementChildNodes = [], replacedChildNodes = directlyRepeatedNodes, parentNode = nonTerminalNode; ///
        directlyRepeatedNodes.forEach(function(directlyRepeatedNode) {
            var directlyRepeatedNodesChildNodes = directlyRepeatedNode.getChildNodes();
            push(replacementChildNodes, directlyRepeatedNodesChildNodes);
        });
        replaceChildNodes(parentNode, replacedChildNodes, replacementChildNodes);
        directlyRepeatedNodes = findDirectlyRepeatedNodes(childNodes);
        directlyRepeatedNodesLength = directlyRepeatedNodes.length;
    };
    var childNodes = nonTerminalNode.getChildNodes();
    var directlyRepeatedNodes, directlyRepeatedNodesLength;
    directlyRepeatedNodes = findDirectlyRepeatedNodes(childNodes);
    directlyRepeatedNodesLength = directlyRepeatedNodes.length;
    while(directlyRepeatedNodesLength > 0)_loop();
}
function rewriteReducedNodes(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    var firstChildNode = first(childNodes), firstChildNodeReducedNode = _instanceof(firstChildNode, _reduced.default);
    if (!firstChildNodeReducedNode) {
        return;
    }
    var replacementChildNodes;
    var parentNode = nonTerminalNode, reducedNode = firstChildNode, replacedChildNode = reducedNode, parentNodeRuleName = parentNode.getRuleName(), reducedNodeRuleName = reducedNode.getRuleName(), reducedNodePrecedence = reducedNode.getPrecedence(), reducedRuleName = reducedNodeRuleName, parentRuleName = parentNodeRuleName, precedence = reducedNodePrecedence, ruleName = (0, _ruleName.ruleNameFromReducedRuleName)(reducedRuleName);
    if (ruleName === parentRuleName) {
        var reducedNodeChildNodes = reducedNode.getChildNodes();
        replacementChildNodes = reducedNodeChildNodes; ///
        parentNode.setPrecedence(precedence);
    } else {
        var childNodes1 = reducedNode.getChildNodes(), _$nonTerminalNode = _occamparsers.NonTerminalNode.fromRuleNameChildNodesAndPrecedence(ruleName, childNodes1, precedence);
        replacementChildNodes = [
            _$nonTerminalNode
        ];
    }
    replaceChildNode(parentNode, replacedChildNode, replacementChildNodes);
}
function replaceChildNode(parentNode, replacedChildNode, replacementChildNodes) {
    var _childNodes;
    var childNodes = parentNode.getChildNodes(), index = childNodes.indexOf(replacedChildNode), start = index, deleteCount = 1;
    (_childNodes = childNodes).splice.apply(_childNodes, [
        start,
        deleteCount
    ].concat(_to_consumable_array(replacementChildNodes)));
}
function replaceChildNodes(parentNode, replacedChildNodes, replacementChildNodes) {
    var _childNodes;
    var replacedChildNodesLength = replacedChildNodes.length;
    if (replacedChildNodesLength === 0) {
        return;
    }
    var firstReplacedChildNode = first(replacedChildNodes), childNodes = parentNode.getChildNodes(), firstIndex = childNodes.indexOf(firstReplacedChildNode), start = firstIndex, deleteCount = replacedChildNodesLength; ///
    (_childNodes = childNodes).splice.apply(_childNodes, [
        start,
        deleteCount
    ].concat(_to_consumable_array(replacementChildNodes)));
}
function replaceAllChildNodes(parentNode, replacementChildNodes) {
    var childNodes = parentNode.getChildNodes();
    clear(childNodes);
    push(childNodes, replacementChildNodes);
}
function findDirectlyRepeatedNodes(childNodes) {
    var directlyRepeatedNodes = findRepeatedNonTerminalNodes(childNodes, function(childNode) {
        var childNodeDirectlyRepeatedNode = _instanceof(childNode, _directly.default);
        if (childNodeDirectlyRepeatedNode) {
            return true;
        }
    });
    return directlyRepeatedNodes;
}
function findIndirectlyRepeatedNodes(childNodes) {
    var indirectlyRepeatedNodes = findRepeatedNonTerminalNodes(childNodes, function(childNode) {
        var childNodeIndirectlyRepeatedNode = _instanceof(childNode, _indirectly.default);
        if (childNodeIndirectlyRepeatedNode) {
            return true;
        }
    });
    return indirectlyRepeatedNodes;
}
function findRepeatedNonTerminalNodes(childNodes, callback) {
    var repeatedNonTerminalNodes = [], lastIndex = childNodes.findLastIndex(callback);
    if (lastIndex !== null) {
        for(var index = lastIndex; index >= 0; index--){
            var childNode = childNodes[index], childNodeRepeatedNonTerminalNode = callback(childNode);
            if (!childNodeRepeatedNonTerminalNode) {
                break;
            }
            var repeatedNonTerminalNode = childNode; ///
            repeatedNonTerminalNodes.unshift(repeatedNonTerminalNode);
        }
    }
    return repeatedNonTerminalNodes;
}
function nonTerminalNodeFromParentNodeAndIndirectlyRepeatedNode(parentNode, indirectlyRepeatedNode) {
    var ruleName, childNodes;
    childNodes = parentNode.getChildNodes();
    var indirectlyRepeatedNodeRuleName = indirectlyRepeatedNode.getRuleName(), indirectlyRepeatedRuleName = indirectlyRepeatedNodeRuleName, leftRecursiveRuleName = (0, _ruleName.leftRecursiveRuleNameFromIndirectlyRepeatedRuleName)(indirectlyRepeatedRuleName), frontChildNodes = front(childNodes);
    ruleName = leftRecursiveRuleName; ///
    childNodes = frontChildNodes; ///
    var nonTerminalNode = _occamparsers.NonTerminalNode.fromRuleNameAndChildNodes(ruleName, childNodes); ///
    return nonTerminalNode;
}
function replacementChildNodesFromNonTerminalNodeNodeAndIndirectlyRepeatedNode(nonTerminalNode, indirectlyRepeatedNode) {
    var replacementChildNodes = [
        nonTerminalNode
    ], indirectlyRepeatedNodeNullary = indirectlyRepeatedNode.isNullary();
    if (!indirectlyRepeatedNodeNullary) {
        var indirectlyRepeatedNodeChildNodes = indirectlyRepeatedNode.getChildNodes();
        push(replacementChildNodes, indirectlyRepeatedNodeChildNodes);
    }
    return replacementChildNodes;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcmV3cml0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgYXJyYXlVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBOb25UZXJtaW5hbE5vZGUgfSBmcm9tIFwib2NjYW0tcGFyc2Vyc1wiO1xuXG5pbXBvcnQgUmVkdWNlZE5vZGUgZnJvbSBcIi4uL25vZGUvcmVkdWNlZFwiO1xuaW1wb3J0IERpcmVjdGx5UmVwZWF0ZWROb2RlIGZyb20gXCIuLi9ub2RlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseVJlcGVhdGVkTm9kZSBmcm9tIFwiLi4vbm9kZS9yZXBlYXRlZC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IHJ1bGVOYW1lRnJvbVJlZHVjZWRSdWxlTmFtZSwgcnVsZU5hbWVGcm9tSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZUZyb21JbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSB9IGZyb20gXCIuLi91dGlsaXRpZXMvcnVsZU5hbWVcIjtcblxuY29uc3QgeyBmcm9udCwgZmlyc3QsIHB1c2gsIGNsZWFyLCBiYWNrd2FyZHNGb3JFYWNoIH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5UmVwZWF0ZWROb2Rlcyhub25UZXJtaW5hbE5vZGUpIHtcbiAgbGV0IHBhcmVudE5vZGUgPSBub25UZXJtaW5hbE5vZGU7IC8vL1xuXG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBwYXJlbnROb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgaW5kaXJlY3RseVJlcGVhdGVkTm9kZXMgPSBmaW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZXMoY2hpbGROb2Rlcyk7XG5cbiAgYmFja3dhcmRzRm9yRWFjaChpbmRpcmVjdGx5UmVwZWF0ZWROb2RlcywgKGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpID0+IHtcbiAgICBub25UZXJtaW5hbE5vZGUgPSBub25UZXJtaW5hbE5vZGVGcm9tUGFyZW50Tm9kZUFuZEluZGlyZWN0bHlSZXBlYXRlZE5vZGUocGFyZW50Tm9kZSwgaW5kaXJlY3RseVJlcGVhdGVkTm9kZSk7IC8vL1xuXG4gICAgY29uc3QgaW5kaXJlY3RseVJlcGVhdGVkTm9kZVJ1bGVOYW1lID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZVJ1bGVOYW1lLCAgLy8vXG4gICAgICAgICAgcGFyZW50Tm9kZU5vZGVSdWxlTmFtZSA9IHBhcmVudE5vZGUuZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICBydWxlTmFtZSA9IHJ1bGVOYW1lRnJvbUluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lKTtcblxuICAgIGlmIChwYXJlbnROb2RlTm9kZVJ1bGVOYW1lID09PSBydWxlTmFtZSkge1xuICAgICAgY29uc3QgcHJlY2VkZW5jZSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuZ2V0UHJlY2VkZW5jZSgpO1xuXG4gICAgICBwYXJlbnROb2RlLnNldFByZWNlZGVuY2UocHJlY2VkZW5jZSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVwbGFjZW1lbnRDaGlsZE5vZGVzID0gcmVwbGFjZW1lbnRDaGlsZE5vZGVzRnJvbU5vblRlcm1pbmFsTm9kZU5vZGVBbmRJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKG5vblRlcm1pbmFsTm9kZSwgaW5kaXJlY3RseVJlcGVhdGVkTm9kZSk7XG5cbiAgICByZXBsYWNlQWxsQ2hpbGROb2RlcyhwYXJlbnROb2RlLCByZXBsYWNlbWVudENoaWxkTm9kZXMpO1xuXG4gICAgcGFyZW50Tm9kZSA9IG5vblRlcm1pbmFsTm9kZTsgLy8vXG4gIH0pO1xuXG4gIHJldHVybiBwYXJlbnROb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZURpcmVjdGx5UmVwZWF0ZWROb2Rlcyhub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgbGV0IGRpcmVjdGx5UmVwZWF0ZWROb2RlcyxcbiAgICAgIGRpcmVjdGx5UmVwZWF0ZWROb2Rlc0xlbmd0aDtcblxuICBkaXJlY3RseVJlcGVhdGVkTm9kZXMgPSBmaW5kRGlyZWN0bHlSZXBlYXRlZE5vZGVzKGNoaWxkTm9kZXMpO1xuXG4gIGRpcmVjdGx5UmVwZWF0ZWROb2Rlc0xlbmd0aCA9IGRpcmVjdGx5UmVwZWF0ZWROb2Rlcy5sZW5ndGg7XG5cbiAgd2hpbGUgKGRpcmVjdGx5UmVwZWF0ZWROb2Rlc0xlbmd0aCA+IDApIHtcbiAgICBjb25zdCByZXBsYWNlbWVudENoaWxkTm9kZXMgPSBbXSxcbiAgICAgICAgICByZXBsYWNlZENoaWxkTm9kZXMgPSBkaXJlY3RseVJlcGVhdGVkTm9kZXMsIC8vL1xuICAgICAgICAgIHBhcmVudE5vZGUgPSBub25UZXJtaW5hbE5vZGU7IC8vL1xuXG4gICAgZGlyZWN0bHlSZXBlYXRlZE5vZGVzLmZvckVhY2goKGRpcmVjdGx5UmVwZWF0ZWROb2RlKSA9PiB7XG4gICAgICBjb25zdCBkaXJlY3RseVJlcGVhdGVkTm9kZXNDaGlsZE5vZGVzID0gZGlyZWN0bHlSZXBlYXRlZE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gICAgICBwdXNoKHJlcGxhY2VtZW50Q2hpbGROb2RlcywgZGlyZWN0bHlSZXBlYXRlZE5vZGVzQ2hpbGROb2Rlcyk7XG4gICAgfSk7XG5cbiAgICByZXBsYWNlQ2hpbGROb2RlcyhwYXJlbnROb2RlLCByZXBsYWNlZENoaWxkTm9kZXMsIHJlcGxhY2VtZW50Q2hpbGROb2Rlcyk7XG5cbiAgICBkaXJlY3RseVJlcGVhdGVkTm9kZXMgPSBmaW5kRGlyZWN0bHlSZXBlYXRlZE5vZGVzKGNoaWxkTm9kZXMpO1xuXG4gICAgZGlyZWN0bHlSZXBlYXRlZE5vZGVzTGVuZ3RoID0gZGlyZWN0bHlSZXBlYXRlZE5vZGVzLmxlbmd0aDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZVJlZHVjZWROb2Rlcyhub25UZXJtaW5hbE5vZGUpIHtcbiAgbGV0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGNvbnN0IGZpcnN0Q2hpbGROb2RlID0gZmlyc3QoY2hpbGROb2RlcyksXG4gICAgICAgIGZpcnN0Q2hpbGROb2RlUmVkdWNlZE5vZGUgPSAoZmlyc3RDaGlsZE5vZGUgaW5zdGFuY2VvZiBSZWR1Y2VkTm9kZSk7XG5cbiAgaWYgKCFmaXJzdENoaWxkTm9kZVJlZHVjZWROb2RlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHJlcGxhY2VtZW50Q2hpbGROb2RlcztcblxuICBjb25zdCBwYXJlbnROb2RlID0gbm9uVGVybWluYWxOb2RlLCAvLy9cbiAgICAgICAgcmVkdWNlZE5vZGUgPSBmaXJzdENoaWxkTm9kZSwgLy8vXG4gICAgICAgIHJlcGxhY2VkQ2hpbGROb2RlID0gcmVkdWNlZE5vZGUsIC8vL1xuICAgICAgICBwYXJlbnROb2RlUnVsZU5hbWUgPSBwYXJlbnROb2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJlZHVjZWROb2RlUnVsZU5hbWUgPSByZWR1Y2VkTm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICByZWR1Y2VkTm9kZVByZWNlZGVuY2UgPSByZWR1Y2VkTm9kZS5nZXRQcmVjZWRlbmNlKCksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWROb2RlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgcGFyZW50UnVsZU5hbWUgPSBwYXJlbnROb2RlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgcHJlY2VkZW5jZSA9IHJlZHVjZWROb2RlUHJlY2VkZW5jZSwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gcnVsZU5hbWVGcm9tUmVkdWNlZFJ1bGVOYW1lKHJlZHVjZWRSdWxlTmFtZSk7XG5cbiAgaWYgKHJ1bGVOYW1lID09PSBwYXJlbnRSdWxlTmFtZSkge1xuICAgIGNvbnN0IHJlZHVjZWROb2RlQ2hpbGROb2RlcyA9IHJlZHVjZWROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgIHJlcGxhY2VtZW50Q2hpbGROb2RlcyA9IHJlZHVjZWROb2RlQ2hpbGROb2RlczsgIC8vL1xuXG4gICAgcGFyZW50Tm9kZS5zZXRQcmVjZWRlbmNlKHByZWNlZGVuY2UpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSByZWR1Y2VkTm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgICAgbm9uVGVybWluYWxOb2RlID0gTm9uVGVybWluYWxOb2RlLmZyb21SdWxlTmFtZUNoaWxkTm9kZXNBbmRQcmVjZWRlbmNlKHJ1bGVOYW1lLCBjaGlsZE5vZGVzLCBwcmVjZWRlbmNlKTtcblxuICAgIHJlcGxhY2VtZW50Q2hpbGROb2RlcyA9IFtcbiAgICAgIG5vblRlcm1pbmFsTm9kZVxuICAgIF07XG4gIH1cblxuICByZXBsYWNlQ2hpbGROb2RlKHBhcmVudE5vZGUsIHJlcGxhY2VkQ2hpbGROb2RlLCByZXBsYWNlbWVudENoaWxkTm9kZXMpO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlQ2hpbGROb2RlKHBhcmVudE5vZGUsIHJlcGxhY2VkQ2hpbGROb2RlLCByZXBsYWNlbWVudENoaWxkTm9kZXMpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IHBhcmVudE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICBpbmRleCA9IGNoaWxkTm9kZXMuaW5kZXhPZihyZXBsYWNlZENoaWxkTm9kZSksXG4gICAgICAgIHN0YXJ0ID0gaW5kZXgsICAvLy9cbiAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4ucmVwbGFjZW1lbnRDaGlsZE5vZGVzKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUNoaWxkTm9kZXMocGFyZW50Tm9kZSwgcmVwbGFjZWRDaGlsZE5vZGVzLCByZXBsYWNlbWVudENoaWxkTm9kZXMpIHtcbiAgY29uc3QgcmVwbGFjZWRDaGlsZE5vZGVzTGVuZ3RoID0gcmVwbGFjZWRDaGlsZE5vZGVzLmxlbmd0aDtcblxuICBpZiAocmVwbGFjZWRDaGlsZE5vZGVzTGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZmlyc3RSZXBsYWNlZENoaWxkTm9kZSA9IGZpcnN0KHJlcGxhY2VkQ2hpbGROb2RlcyksXG4gICAgICAgIGNoaWxkTm9kZXMgPSBwYXJlbnROb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgZmlyc3RJbmRleCA9IGNoaWxkTm9kZXMuaW5kZXhPZihmaXJzdFJlcGxhY2VkQ2hpbGROb2RlKSxcbiAgICAgICAgc3RhcnQgPSBmaXJzdEluZGV4LCAvLy9cbiAgICAgICAgZGVsZXRlQ291bnQgPSByZXBsYWNlZENoaWxkTm9kZXNMZW5ndGg7IC8vL1xuXG4gIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4ucmVwbGFjZW1lbnRDaGlsZE5vZGVzKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUFsbENoaWxkTm9kZXMocGFyZW50Tm9kZSwgcmVwbGFjZW1lbnRDaGlsZE5vZGVzKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBwYXJlbnROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBjbGVhcihjaGlsZE5vZGVzKTtcblxuICBwdXNoKGNoaWxkTm9kZXMsIHJlcGxhY2VtZW50Q2hpbGROb2Rlcyk7XG59XG5cbmZ1bmN0aW9uIGZpbmREaXJlY3RseVJlcGVhdGVkTm9kZXMoY2hpbGROb2Rlcykge1xuICBjb25zdCBkaXJlY3RseVJlcGVhdGVkTm9kZXMgPSBmaW5kUmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzKGNoaWxkTm9kZXMsIChjaGlsZE5vZGUpID0+IHsgLy8vXG4gICAgY29uc3QgY2hpbGROb2RlRGlyZWN0bHlSZXBlYXRlZE5vZGUgPSAoY2hpbGROb2RlIGluc3RhbmNlb2YgRGlyZWN0bHlSZXBlYXRlZE5vZGUpO1xuXG4gICAgaWYgKGNoaWxkTm9kZURpcmVjdGx5UmVwZWF0ZWROb2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseVJlcGVhdGVkTm9kZXM7XG59XG5cbmZ1bmN0aW9uIGZpbmRJbmRpcmVjdGx5UmVwZWF0ZWROb2RlcyhjaGlsZE5vZGVzKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVzID0gZmluZFJlcGVhdGVkTm9uVGVybWluYWxOb2RlcyhjaGlsZE5vZGVzLCAoY2hpbGROb2RlKSA9PiB7IC8vL1xuICAgIGNvbnN0IGNoaWxkTm9kZUluZGlyZWN0bHlSZXBlYXRlZE5vZGUgPSAoY2hpbGROb2RlIGluc3RhbmNlb2YgSW5kaXJlY3RseVJlcGVhdGVkTm9kZSk7XG5cbiAgICBpZiAoY2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseVJlcGVhdGVkTm9kZXM7XG59XG5cbmZ1bmN0aW9uIGZpbmRSZXBlYXRlZE5vblRlcm1pbmFsTm9kZXMoY2hpbGROb2RlcywgY2FsbGJhY2spIHtcbiAgY29uc3QgcmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzID0gW10sXG4gICAgICAgIGxhc3RJbmRleCA9IGNoaWxkTm9kZXMuZmluZExhc3RJbmRleChjYWxsYmFjayk7XG5cbiAgaWYgKGxhc3RJbmRleCAhPT0gbnVsbCkge1xuICAgIGZvciAobGV0IGluZGV4ID0gbGFzdEluZGV4OyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICBjb25zdCBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzW2luZGV4XSxcbiAgICAgICAgICAgIGNoaWxkTm9kZVJlcGVhdGVkTm9uVGVybWluYWxOb2RlID0gY2FsbGJhY2soY2hpbGROb2RlKTtcblxuICAgICAgaWYgKCFjaGlsZE5vZGVSZXBlYXRlZE5vblRlcm1pbmFsTm9kZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVwZWF0ZWROb25UZXJtaW5hbE5vZGUgPSBjaGlsZE5vZGU7ICAvLy9cblxuICAgICAgcmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzLnVuc2hpZnQocmVwZWF0ZWROb25UZXJtaW5hbE5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXBlYXRlZE5vblRlcm1pbmFsTm9kZXM7XG59XG5cbmZ1bmN0aW9uIG5vblRlcm1pbmFsTm9kZUZyb21QYXJlbnROb2RlQW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZShwYXJlbnROb2RlLCBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSB7XG4gIGxldCBydWxlTmFtZSxcbiAgICAgIGNoaWxkTm9kZXM7XG5cbiAgY2hpbGROb2RlcyA9IHBhcmVudE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVSdWxlTmFtZSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lRnJvbUluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lKSxcbiAgICAgICAgZnJvbnRDaGlsZE5vZGVzID0gZnJvbnQoY2hpbGROb2Rlcyk7XG5cbiAgcnVsZU5hbWUgPSBsZWZ0UmVjdXJzaXZlUnVsZU5hbWU7IC8vL1xuXG4gIGNoaWxkTm9kZXMgPSBmcm9udENoaWxkTm9kZXM7IC8vL1xuXG4gIGNvbnN0IG5vblRlcm1pbmFsTm9kZSA9IE5vblRlcm1pbmFsTm9kZS5mcm9tUnVsZU5hbWVBbmRDaGlsZE5vZGVzKHJ1bGVOYW1lLCBjaGlsZE5vZGVzKTsgIC8vL1xuXG4gIHJldHVybiBub25UZXJtaW5hbE5vZGU7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VtZW50Q2hpbGROb2Rlc0Zyb21Ob25UZXJtaW5hbE5vZGVOb2RlQW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZShub25UZXJtaW5hbE5vZGUsIGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpIHtcbiAgY29uc3QgcmVwbGFjZW1lbnRDaGlsZE5vZGVzID0gW1xuICAgICAgICAgIG5vblRlcm1pbmFsTm9kZVxuICAgICAgICBdLFxuICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlTnVsbGFyeSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuaXNOdWxsYXJ5KCk7XG5cbiAgaWYgKCFpbmRpcmVjdGx5UmVwZWF0ZWROb2RlTnVsbGFyeSkge1xuICAgIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVDaGlsZE5vZGVzID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBwdXNoKHJlcGxhY2VtZW50Q2hpbGROb2RlcywgaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMpO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50Q2hpbGROb2Rlcztcbn1cbiJdLCJuYW1lcyI6WyJyZXdyaXRlSW5kaXJlY3RseVJlcGVhdGVkTm9kZXMiLCJyZXdyaXRlRGlyZWN0bHlSZXBlYXRlZE5vZGVzIiwicmV3cml0ZVJlZHVjZWROb2RlcyIsImZyb250IiwiYXJyYXlVdGlsaXRpZXMiLCJmaXJzdCIsInB1c2giLCJjbGVhciIsImJhY2t3YXJkc0ZvckVhY2giLCJub25UZXJtaW5hbE5vZGUiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlcyIsImdldENoaWxkTm9kZXMiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImZpbmRJbmRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJub25UZXJtaW5hbE5vZGVGcm9tUGFyZW50Tm9kZUFuZEluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlUnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsImluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwicGFyZW50Tm9kZU5vZGVSdWxlTmFtZSIsInJ1bGVOYW1lIiwicnVsZU5hbWVGcm9tSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUiLCJwcmVjZWRlbmNlIiwiZ2V0UHJlY2VkZW5jZSIsInNldFByZWNlZGVuY2UiLCJyZXBsYWNlbWVudENoaWxkTm9kZXMiLCJyZXBsYWNlbWVudENoaWxkTm9kZXNGcm9tTm9uVGVybWluYWxOb2RlTm9kZUFuZEluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJyZXBsYWNlQWxsQ2hpbGROb2RlcyIsInJlcGxhY2VkQ2hpbGROb2RlcyIsImRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImZvckVhY2giLCJkaXJlY3RseVJlcGVhdGVkTm9kZSIsImRpcmVjdGx5UmVwZWF0ZWROb2Rlc0NoaWxkTm9kZXMiLCJyZXBsYWNlQ2hpbGROb2RlcyIsImZpbmREaXJlY3RseVJlcGVhdGVkTm9kZXMiLCJkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJmaXJzdENoaWxkTm9kZSIsImZpcnN0Q2hpbGROb2RlUmVkdWNlZE5vZGUiLCJSZWR1Y2VkTm9kZSIsInJlZHVjZWROb2RlIiwicmVwbGFjZWRDaGlsZE5vZGUiLCJwYXJlbnROb2RlUnVsZU5hbWUiLCJyZWR1Y2VkTm9kZVJ1bGVOYW1lIiwicmVkdWNlZE5vZGVQcmVjZWRlbmNlIiwicmVkdWNlZFJ1bGVOYW1lIiwicGFyZW50UnVsZU5hbWUiLCJydWxlTmFtZUZyb21SZWR1Y2VkUnVsZU5hbWUiLCJyZWR1Y2VkTm9kZUNoaWxkTm9kZXMiLCJOb25UZXJtaW5hbE5vZGUiLCJmcm9tUnVsZU5hbWVDaGlsZE5vZGVzQW5kUHJlY2VkZW5jZSIsInJlcGxhY2VDaGlsZE5vZGUiLCJpbmRleCIsImluZGV4T2YiLCJzdGFydCIsImRlbGV0ZUNvdW50Iiwic3BsaWNlIiwicmVwbGFjZWRDaGlsZE5vZGVzTGVuZ3RoIiwiZmlyc3RSZXBsYWNlZENoaWxkTm9kZSIsImZpcnN0SW5kZXgiLCJmaW5kUmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzIiwiY2hpbGROb2RlIiwiY2hpbGROb2RlRGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJEaXJlY3RseVJlcGVhdGVkTm9kZSIsImNoaWxkTm9kZUluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJJbmRpcmVjdGx5UmVwZWF0ZWROb2RlIiwiY2FsbGJhY2siLCJyZXBlYXRlZE5vblRlcm1pbmFsTm9kZXMiLCJsYXN0SW5kZXgiLCJmaW5kTGFzdEluZGV4IiwiY2hpbGROb2RlUmVwZWF0ZWROb25UZXJtaW5hbE5vZGUiLCJyZXBlYXRlZE5vblRlcm1pbmFsTm9kZSIsInVuc2hpZnQiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVGcm9tSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUiLCJmcm9udENoaWxkTm9kZXMiLCJmcm9tUnVsZU5hbWVBbmRDaGlsZE5vZGVzIiwiaW5kaXJlY3RseVJlcGVhdGVkTm9kZU51bGxhcnkiLCJpc051bGxhcnkiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2RlcyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lBYWdCQSw4QkFBOEI7ZUFBOUJBOztJQThCQUMsNEJBQTRCO2VBQTVCQTs7SUE2QkFDLG1CQUFtQjtlQUFuQkE7Ozt5QkF0RWU7NEJBQ0M7OERBRVI7K0RBQ1M7aUVBQ0U7d0JBRXNHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUV6SSxJQUFRQyxRQUFnREMseUJBQWMsQ0FBOURELE9BQU9FLFFBQXlDRCx5QkFBYyxDQUF2REMsT0FBT0MsT0FBa0NGLHlCQUFjLENBQWhERSxNQUFNQyxRQUE0QkgseUJBQWMsQ0FB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