"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    rewriteDirectlyRepeatedNodes: function() {
        return rewriteDirectlyRepeatedNodes;
    },
    rewriteIndirectlyRepeatedNodes: function() {
        return rewriteIndirectlyRepeatedNodes;
    },
    rewriteReducedNodes: function() {
        return rewriteReducedNodes;
    }
});
var _necessary = require("necessary");
var _occamparsers = require("occam-parsers");
var _reduced = /*#__PURE__*/ _interop_require_default(require("../node/reduced"));
var _directly = /*#__PURE__*/ _interop_require_default(require("../node/repeated/directly"));
var _indirectly = /*#__PURE__*/ _interop_require_default(require("../node/repeated/indirectly"));
var _nodes = require("../utilities/nodes");
var _ruleName = require("../utilities/ruleName");
function _array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _array_without_holes(arr) {
    if (Array.isArray(arr)) return _array_like_to_array(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterable_to_array(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _non_iterable_spread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _to_consumable_array(arr) {
    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();
}
function _unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
}
var front = _necessary.arrayUtilities.front, first = _necessary.arrayUtilities.first, push = _necessary.arrayUtilities.push, clear = _necessary.arrayUtilities.clear, backwardsForEach = _necessary.arrayUtilities.backwardsForEach;
function rewriteIndirectlyRepeatedNodes(nonTerminalNode) {
    var parentNode = nonTerminalNode; ///
    var childNodes = parentNode.getChildNodes(), indirectlyRepeatedNodes = findIndirectlyRepeatedNodes(childNodes);
    backwardsForEach(indirectlyRepeatedNodes, function(indirectlyRepeatedNode) {
        nonTerminalNode = nonTerminalNodeFromParentNodeAndIndirectlyRepeatedNode(parentNode, indirectlyRepeatedNode); ///
        var indirectlyRepeatedNodeRuleName = indirectlyRepeatedNode.getRuleName(), indirectlyRepeatedRuleName = indirectlyRepeatedNodeRuleName, parentNodeNodeRuleName = parentNode.getRuleName(), ruleName = (0, _ruleName.ruleNameFromIndirectlyRepeatedRuleName)(indirectlyRepeatedRuleName);
        if (parentNodeNodeRuleName === ruleName) {
            var precedence = indirectlyRepeatedNode.getPrecedence();
            parentNode.setPrecedence(precedence);
        }
        var replacementChildNodes = replacementChildNodesFromNonTerminalNodeNodeAndIndirectlyRepeatedNode(nonTerminalNode, indirectlyRepeatedNode);
        replaceAllChildNodes(parentNode, replacementChildNodes);
        parentNode = nonTerminalNode; ///
    });
    return parentNode;
}
function rewriteDirectlyRepeatedNodes(nonTerminalNode) {
    var _loop = function() {
        var replacementChildNodes = [], replacedChildNodes = directlyRepeatedNodes, parentNode = nonTerminalNode; ///
        directlyRepeatedNodes.forEach(function(directlyRepeatedNode) {
            var directlyRepeatedNodesChildNodes = directlyRepeatedNode.getChildNodes();
            push(replacementChildNodes, directlyRepeatedNodesChildNodes);
        });
        replaceChildNodes(parentNode, replacedChildNodes, replacementChildNodes);
        directlyRepeatedNodes = findDirectlyRepeatedNodes(childNodes);
        directlyRepeatedNodesLength = directlyRepeatedNodes.length;
    };
    var childNodes = nonTerminalNode.getChildNodes();
    var directlyRepeatedNodes, directlyRepeatedNodesLength;
    directlyRepeatedNodes = findDirectlyRepeatedNodes(childNodes);
    directlyRepeatedNodesLength = directlyRepeatedNodes.length;
    while(directlyRepeatedNodesLength > 0)_loop();
}
function rewriteReducedNodes(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    var firstChildNode = first(childNodes), firstChildNodeReducedNode = _instanceof(firstChildNode, _reduced.default);
    if (!firstChildNodeReducedNode) {
        return;
    }
    var replacementChildNodes;
    var parentNode = nonTerminalNode, reducedNode = firstChildNode, replacedChildNode = reducedNode, parentNodeRuleName = parentNode.getRuleName(), reducedNodeOpacity = reducedNode.getOpacity(), reducedNodeRuleName = reducedNode.getRuleName(), reducedNodePrecedence = reducedNode.getPrecedence(), reducedRuleName = reducedNodeRuleName, parentRuleName = parentNodeRuleName, precedence = reducedNodePrecedence, opacity = reducedNodeOpacity, ruleName = (0, _ruleName.ruleNameFromReducedRuleName)(reducedRuleName);
    if (ruleName === parentRuleName) {
        var reducedNodeChildNodes = reducedNode.getChildNodes();
        replacementChildNodes = reducedNodeChildNodes; ///
        parentNode.setPrecedence(precedence);
    } else {
        var childNodes1 = reducedNode.getChildNodes(), _$nonTerminalNode = _occamparsers.NonTerminalNode.fromRuleNameChildNodesAndOpacity(ruleName, childNodes1, opacity);
        _$nonTerminalNode.setPrecedence(_$nonTerminalNode);
        replacementChildNodes = [
            _$nonTerminalNode
        ];
    }
    replaceChildNode(parentNode, replacedChildNode, replacementChildNodes);
}
function replaceChildNode(parentNode, replacedChildNode, replacementChildNodes) {
    var _childNodes;
    var childNodes = parentNode.getChildNodes(), index = childNodes.indexOf(replacedChildNode), start = index, deleteCount = 1;
    (_childNodes = childNodes).splice.apply(_childNodes, [
        start,
        deleteCount
    ].concat(_to_consumable_array(replacementChildNodes)));
}
function replaceChildNodes(parentNode, replacedChildNodes, replacementChildNodes) {
    var _childNodes;
    var replacedChildNodesLength = replacedChildNodes.length;
    if (replacedChildNodesLength === 0) {
        return;
    }
    var firstReplacedChildNode = first(replacedChildNodes), childNodes = parentNode.getChildNodes(), firstIndex = childNodes.indexOf(firstReplacedChildNode), start = firstIndex, deleteCount = replacedChildNodesLength; ///
    (_childNodes = childNodes).splice.apply(_childNodes, [
        start,
        deleteCount
    ].concat(_to_consumable_array(replacementChildNodes)));
}
function replaceAllChildNodes(parentNode, replacementChildNodes) {
    var childNodes = parentNode.getChildNodes();
    clear(childNodes);
    push(childNodes, replacementChildNodes);
}
function findDirectlyRepeatedNodes(childNodes) {
    var directlyRepeatedNodes = findRepeatedNonTerminalNodes(childNodes, function(childNode) {
        var childNodeDirectlyRepeatedNode = _instanceof(childNode, _directly.default);
        if (childNodeDirectlyRepeatedNode) {
            return true;
        }
    });
    return directlyRepeatedNodes;
}
function findIndirectlyRepeatedNodes(childNodes) {
    var indirectlyRepeatedNodes = findRepeatedNonTerminalNodes(childNodes, function(childNode) {
        var childNodeIndirectlyRepeatedNode = _instanceof(childNode, _indirectly.default);
        if (childNodeIndirectlyRepeatedNode) {
            return true;
        }
    });
    return indirectlyRepeatedNodes;
}
function findRepeatedNonTerminalNodes(childNodes, callback) {
    var repeatedNonTerminalNodes = [], lastIndex = (0, _nodes.findLastIndex)(childNodes, callback);
    if (lastIndex !== null) {
        for(var index = lastIndex; index >= 0; index--){
            var childNode = childNodes[index], childNodeRepeatedNonTerminalNode = callback(childNode);
            if (!childNodeRepeatedNonTerminalNode) {
                break;
            }
            var repeatedNonTerminalNode = childNode; ///
            repeatedNonTerminalNodes.unshift(repeatedNonTerminalNode);
        }
    }
    return repeatedNonTerminalNodes;
}
function nonTerminalNodeFromParentNodeAndIndirectlyRepeatedNode(parentNode, indirectlyRepeatedNode) {
    var ruleName, childNodes, opacity;
    childNodes = parentNode.getChildNodes();
    var indirectlyRepeatedNodeOpacity = indirectlyRepeatedNode.getOpacity(), indirectlyRepeatedNodeRuleName = indirectlyRepeatedNode.getRuleName(), indirectlyRepeatedRuleName = indirectlyRepeatedNodeRuleName, leftRecursiveRuleName = (0, _ruleName.leftRecursiveRuleNameFromIndirectlyRepeatedRuleName)(indirectlyRepeatedRuleName), frontChildNodes = front(childNodes);
    ruleName = leftRecursiveRuleName; ///
    childNodes = frontChildNodes; ///
    opacity = indirectlyRepeatedNodeOpacity; ///
    var nonTerminalNode = _occamparsers.NonTerminalNode.fromRuleNameChildNodesAndOpacity(ruleName, childNodes, opacity);
    return nonTerminalNode;
}
function replacementChildNodesFromNonTerminalNodeNodeAndIndirectlyRepeatedNode(nonTerminalNode, indirectlyRepeatedNode) {
    var replacementChildNodes = [
        nonTerminalNode
    ], indirectlyRepeatedNodeNullary = indirectlyRepeatedNode.isNullary();
    if (!indirectlyRepeatedNodeNullary) {
        var indirectlyRepeatedNodeChildNodes = indirectlyRepeatedNode.getChildNodes();
        push(replacementChildNodes, indirectlyRepeatedNodeChildNodes);
    }
    return replacementChildNodes;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcmV3cml0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgYXJyYXlVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBOb25UZXJtaW5hbE5vZGUgfSBmcm9tIFwib2NjYW0tcGFyc2Vyc1wiO1xuXG5pbXBvcnQgUmVkdWNlZE5vZGUgZnJvbSBcIi4uL25vZGUvcmVkdWNlZFwiO1xuaW1wb3J0IERpcmVjdGx5UmVwZWF0ZWROb2RlIGZyb20gXCIuLi9ub2RlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseVJlcGVhdGVkTm9kZSBmcm9tIFwiLi4vbm9kZS9yZXBlYXRlZC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IGZpbmRMYXN0SW5kZXggfSBmcm9tIFwiLi4vdXRpbGl0aWVzL25vZGVzXCI7XG5pbXBvcnQgeyBydWxlTmFtZUZyb21SZWR1Y2VkUnVsZU5hbWUsIHJ1bGVOYW1lRnJvbUluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVGcm9tSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3J1bGVOYW1lXCI7XG5cbmNvbnN0IHsgZnJvbnQsIGZpcnN0LCBwdXNoLCBjbGVhciwgYmFja3dhcmRzRm9yRWFjaCB9ID0gYXJyYXlVdGlsaXRpZXM7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RseVJlcGVhdGVkTm9kZXMobm9uVGVybWluYWxOb2RlKSB7XG4gIGxldCBwYXJlbnROb2RlID0gbm9uVGVybWluYWxOb2RlOyAvLy9cblxuICBjb25zdCBjaGlsZE5vZGVzID0gcGFyZW50Tm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGluZGlyZWN0bHlSZXBlYXRlZE5vZGVzID0gZmluZEluZGlyZWN0bHlSZXBlYXRlZE5vZGVzKGNoaWxkTm9kZXMpO1xuXG4gIGJhY2t3YXJkc0ZvckVhY2goaW5kaXJlY3RseVJlcGVhdGVkTm9kZXMsIChpbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSA9PiB7XG4gICAgbm9uVGVybWluYWxOb2RlID0gbm9uVGVybWluYWxOb2RlRnJvbVBhcmVudE5vZGVBbmRJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKHBhcmVudE5vZGUsIGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpOyAvLy9cblxuICAgIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVSdWxlTmFtZSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVSdWxlTmFtZSwgIC8vL1xuICAgICAgICAgIHBhcmVudE5vZGVOb2RlUnVsZU5hbWUgPSBwYXJlbnROb2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgcnVsZU5hbWUgPSBydWxlTmFtZUZyb21JbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZShpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSk7XG5cbiAgICBpZiAocGFyZW50Tm9kZU5vZGVSdWxlTmFtZSA9PT0gcnVsZU5hbWUpIHtcbiAgICAgIGNvbnN0IHByZWNlZGVuY2UgPSBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlLmdldFByZWNlZGVuY2UoKTtcblxuICAgICAgcGFyZW50Tm9kZS5zZXRQcmVjZWRlbmNlKHByZWNlZGVuY2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcGxhY2VtZW50Q2hpbGROb2RlcyA9IHJlcGxhY2VtZW50Q2hpbGROb2Rlc0Zyb21Ob25UZXJtaW5hbE5vZGVOb2RlQW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZShub25UZXJtaW5hbE5vZGUsIGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpO1xuXG4gICAgcmVwbGFjZUFsbENoaWxkTm9kZXMocGFyZW50Tm9kZSwgcmVwbGFjZW1lbnRDaGlsZE5vZGVzKTtcblxuICAgIHBhcmVudE5vZGUgPSBub25UZXJtaW5hbE5vZGU7IC8vL1xuICB9KTtcblxuICByZXR1cm4gcGFyZW50Tm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJld3JpdGVEaXJlY3RseVJlcGVhdGVkTm9kZXMobm9uVGVybWluYWxOb2RlKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGxldCBkaXJlY3RseVJlcGVhdGVkTm9kZXMsXG4gICAgICBkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGg7XG5cbiAgZGlyZWN0bHlSZXBlYXRlZE5vZGVzID0gZmluZERpcmVjdGx5UmVwZWF0ZWROb2RlcyhjaGlsZE5vZGVzKTtcblxuICBkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGggPSBkaXJlY3RseVJlcGVhdGVkTm9kZXMubGVuZ3RoO1xuXG4gIHdoaWxlIChkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcmVwbGFjZW1lbnRDaGlsZE5vZGVzID0gW10sXG4gICAgICAgICAgcmVwbGFjZWRDaGlsZE5vZGVzID0gZGlyZWN0bHlSZXBlYXRlZE5vZGVzLCAvLy9cbiAgICAgICAgICBwYXJlbnROb2RlID0gbm9uVGVybWluYWxOb2RlOyAvLy9cblxuICAgIGRpcmVjdGx5UmVwZWF0ZWROb2Rlcy5mb3JFYWNoKChkaXJlY3RseVJlcGVhdGVkTm9kZSkgPT4ge1xuICAgICAgY29uc3QgZGlyZWN0bHlSZXBlYXRlZE5vZGVzQ2hpbGROb2RlcyA9IGRpcmVjdGx5UmVwZWF0ZWROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgICAgcHVzaChyZXBsYWNlbWVudENoaWxkTm9kZXMsIGRpcmVjdGx5UmVwZWF0ZWROb2Rlc0NoaWxkTm9kZXMpO1xuICAgIH0pO1xuXG4gICAgcmVwbGFjZUNoaWxkTm9kZXMocGFyZW50Tm9kZSwgcmVwbGFjZWRDaGlsZE5vZGVzLCByZXBsYWNlbWVudENoaWxkTm9kZXMpO1xuXG4gICAgZGlyZWN0bHlSZXBlYXRlZE5vZGVzID0gZmluZERpcmVjdGx5UmVwZWF0ZWROb2RlcyhjaGlsZE5vZGVzKTtcblxuICAgIGRpcmVjdGx5UmVwZWF0ZWROb2Rlc0xlbmd0aCA9IGRpcmVjdGx5UmVwZWF0ZWROb2Rlcy5sZW5ndGg7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJld3JpdGVSZWR1Y2VkTm9kZXMobm9uVGVybWluYWxOb2RlKSB7XG4gIGxldCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBjb25zdCBmaXJzdENoaWxkTm9kZSA9IGZpcnN0KGNoaWxkTm9kZXMpLFxuICAgICAgICBmaXJzdENoaWxkTm9kZVJlZHVjZWROb2RlID0gKGZpcnN0Q2hpbGROb2RlIGluc3RhbmNlb2YgUmVkdWNlZE5vZGUpO1xuXG4gIGlmICghZmlyc3RDaGlsZE5vZGVSZWR1Y2VkTm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCByZXBsYWNlbWVudENoaWxkTm9kZXM7XG5cbiAgY29uc3QgcGFyZW50Tm9kZSA9IG5vblRlcm1pbmFsTm9kZSwgLy8vXG4gICAgICAgIHJlZHVjZWROb2RlID0gZmlyc3RDaGlsZE5vZGUsIC8vL1xuICAgICAgICByZXBsYWNlZENoaWxkTm9kZSA9IHJlZHVjZWROb2RlLCAvLy9cbiAgICAgICAgcGFyZW50Tm9kZVJ1bGVOYW1lID0gcGFyZW50Tm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICByZWR1Y2VkTm9kZU9wYWNpdHkgPSByZWR1Y2VkTm9kZS5nZXRPcGFjaXR5KCksXG4gICAgICAgIHJlZHVjZWROb2RlUnVsZU5hbWUgPSByZWR1Y2VkTm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICByZWR1Y2VkTm9kZVByZWNlZGVuY2UgPSByZWR1Y2VkTm9kZS5nZXRQcmVjZWRlbmNlKCksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWROb2RlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgcGFyZW50UnVsZU5hbWUgPSBwYXJlbnROb2RlUnVsZU5hbWUsICAvLy9cbiAgICAgICAgcHJlY2VkZW5jZSA9IHJlZHVjZWROb2RlUHJlY2VkZW5jZSwgLy8vXG4gICAgICAgIG9wYWNpdHkgPSByZWR1Y2VkTm9kZU9wYWNpdHksIC8vL1xuICAgICAgICBydWxlTmFtZSA9IHJ1bGVOYW1lRnJvbVJlZHVjZWRSdWxlTmFtZShyZWR1Y2VkUnVsZU5hbWUpO1xuXG4gIGlmIChydWxlTmFtZSA9PT0gcGFyZW50UnVsZU5hbWUpIHtcbiAgICBjb25zdCByZWR1Y2VkTm9kZUNoaWxkTm9kZXMgPSByZWR1Y2VkTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICByZXBsYWNlbWVudENoaWxkTm9kZXMgPSByZWR1Y2VkTm9kZUNoaWxkTm9kZXM7ICAvLy9cblxuICAgIHBhcmVudE5vZGUuc2V0UHJlY2VkZW5jZShwcmVjZWRlbmNlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gcmVkdWNlZE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICAgIG5vblRlcm1pbmFsTm9kZSA9IE5vblRlcm1pbmFsTm9kZS5mcm9tUnVsZU5hbWVDaGlsZE5vZGVzQW5kT3BhY2l0eShydWxlTmFtZSwgY2hpbGROb2Rlcywgb3BhY2l0eSk7XG5cbiAgICBub25UZXJtaW5hbE5vZGUuc2V0UHJlY2VkZW5jZShub25UZXJtaW5hbE5vZGUpO1xuXG4gICAgcmVwbGFjZW1lbnRDaGlsZE5vZGVzID0gW1xuICAgICAgbm9uVGVybWluYWxOb2RlXG4gICAgXTtcbiAgfVxuXG4gIHJlcGxhY2VDaGlsZE5vZGUocGFyZW50Tm9kZSwgcmVwbGFjZWRDaGlsZE5vZGUsIHJlcGxhY2VtZW50Q2hpbGROb2Rlcyk7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VDaGlsZE5vZGUocGFyZW50Tm9kZSwgcmVwbGFjZWRDaGlsZE5vZGUsIHJlcGxhY2VtZW50Q2hpbGROb2Rlcykge1xuICBjb25zdCBjaGlsZE5vZGVzID0gcGFyZW50Tm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGluZGV4ID0gY2hpbGROb2Rlcy5pbmRleE9mKHJlcGxhY2VkQ2hpbGROb2RlKSxcbiAgICAgICAgc3RhcnQgPSBpbmRleCwgIC8vL1xuICAgICAgICBkZWxldGVDb3VudCA9IDE7XG5cbiAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCAuLi5yZXBsYWNlbWVudENoaWxkTm9kZXMpO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlQ2hpbGROb2RlcyhwYXJlbnROb2RlLCByZXBsYWNlZENoaWxkTm9kZXMsIHJlcGxhY2VtZW50Q2hpbGROb2Rlcykge1xuICBjb25zdCByZXBsYWNlZENoaWxkTm9kZXNMZW5ndGggPSByZXBsYWNlZENoaWxkTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChyZXBsYWNlZENoaWxkTm9kZXNMZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBmaXJzdFJlcGxhY2VkQ2hpbGROb2RlID0gZmlyc3QocmVwbGFjZWRDaGlsZE5vZGVzKSxcbiAgICAgICAgY2hpbGROb2RlcyA9IHBhcmVudE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICBmaXJzdEluZGV4ID0gY2hpbGROb2Rlcy5pbmRleE9mKGZpcnN0UmVwbGFjZWRDaGlsZE5vZGUpLFxuICAgICAgICBzdGFydCA9IGZpcnN0SW5kZXgsIC8vL1xuICAgICAgICBkZWxldGVDb3VudCA9IHJlcGxhY2VkQ2hpbGROb2Rlc0xlbmd0aDsgLy8vXG5cbiAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCAuLi5yZXBsYWNlbWVudENoaWxkTm9kZXMpO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlQWxsQ2hpbGROb2RlcyhwYXJlbnROb2RlLCByZXBsYWNlbWVudENoaWxkTm9kZXMpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IHBhcmVudE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGNsZWFyKGNoaWxkTm9kZXMpO1xuXG4gIHB1c2goY2hpbGROb2RlcywgcmVwbGFjZW1lbnRDaGlsZE5vZGVzKTtcbn1cblxuZnVuY3Rpb24gZmluZERpcmVjdGx5UmVwZWF0ZWROb2RlcyhjaGlsZE5vZGVzKSB7XG4gIGNvbnN0IGRpcmVjdGx5UmVwZWF0ZWROb2RlcyA9IGZpbmRSZXBlYXRlZE5vblRlcm1pbmFsTm9kZXMoY2hpbGROb2RlcywgKGNoaWxkTm9kZSkgPT4geyAvLy9cbiAgICBjb25zdCBjaGlsZE5vZGVEaXJlY3RseVJlcGVhdGVkTm9kZSA9IChjaGlsZE5vZGUgaW5zdGFuY2VvZiBEaXJlY3RseVJlcGVhdGVkTm9kZSk7XG5cbiAgICBpZiAoY2hpbGROb2RlRGlyZWN0bHlSZXBlYXRlZE5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5UmVwZWF0ZWROb2Rlcztcbn1cblxuZnVuY3Rpb24gZmluZEluZGlyZWN0bHlSZXBlYXRlZE5vZGVzKGNoaWxkTm9kZXMpIHtcbiAgY29uc3QgaW5kaXJlY3RseVJlcGVhdGVkTm9kZXMgPSBmaW5kUmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzKGNoaWxkTm9kZXMsIChjaGlsZE5vZGUpID0+IHsgLy8vXG4gICAgY29uc3QgY2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSA9IChjaGlsZE5vZGUgaW5zdGFuY2VvZiBJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKTtcblxuICAgIGlmIChjaGlsZE5vZGVJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5UmVwZWF0ZWROb2Rlcztcbn1cblxuZnVuY3Rpb24gZmluZFJlcGVhdGVkTm9uVGVybWluYWxOb2RlcyhjaGlsZE5vZGVzLCBjYWxsYmFjaykge1xuICBjb25zdCByZXBlYXRlZE5vblRlcm1pbmFsTm9kZXMgPSBbXSxcbiAgICAgICAgbGFzdEluZGV4ID0gZmluZExhc3RJbmRleChjaGlsZE5vZGVzLCBjYWxsYmFjayk7XG5cbiAgaWYgKGxhc3RJbmRleCAhPT0gbnVsbCkge1xuICAgIGZvciAobGV0IGluZGV4ID0gbGFzdEluZGV4OyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICBjb25zdCBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzW2luZGV4XSxcbiAgICAgICAgICAgIGNoaWxkTm9kZVJlcGVhdGVkTm9uVGVybWluYWxOb2RlID0gY2FsbGJhY2soY2hpbGROb2RlKTtcblxuICAgICAgaWYgKCFjaGlsZE5vZGVSZXBlYXRlZE5vblRlcm1pbmFsTm9kZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVwZWF0ZWROb25UZXJtaW5hbE5vZGUgPSBjaGlsZE5vZGU7ICAvLy9cblxuICAgICAgcmVwZWF0ZWROb25UZXJtaW5hbE5vZGVzLnVuc2hpZnQocmVwZWF0ZWROb25UZXJtaW5hbE5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXBlYXRlZE5vblRlcm1pbmFsTm9kZXM7XG59XG5cbmZ1bmN0aW9uIG5vblRlcm1pbmFsTm9kZUZyb21QYXJlbnROb2RlQW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZShwYXJlbnROb2RlLCBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSB7XG4gIGxldCBydWxlTmFtZSxcbiAgICAgIGNoaWxkTm9kZXMsXG4gICAgICBvcGFjaXR5O1xuXG4gIGNoaWxkTm9kZXMgPSBwYXJlbnROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBjb25zdCBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlT3BhY2l0eSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuZ2V0T3BhY2l0eSgpLFxuICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZVJ1bGVOYW1lLCAgLy8vXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVSdWxlTmFtZUZyb21JbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZShpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSksXG4gICAgICAgIGZyb250Q2hpbGROb2RlcyA9IGZyb250KGNoaWxkTm9kZXMpO1xuXG4gIHJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAvLy9cblxuICBjaGlsZE5vZGVzID0gZnJvbnRDaGlsZE5vZGVzOyAvLy9cblxuICBvcGFjaXR5ID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZU9wYWNpdHk7ICAvLy9cblxuICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBOb25UZXJtaW5hbE5vZGUuZnJvbVJ1bGVOYW1lQ2hpbGROb2Rlc0FuZE9wYWNpdHkocnVsZU5hbWUsIGNoaWxkTm9kZXMsIG9wYWNpdHkpO1xuXG4gIHJldHVybiBub25UZXJtaW5hbE5vZGU7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VtZW50Q2hpbGROb2Rlc0Zyb21Ob25UZXJtaW5hbE5vZGVOb2RlQW5kSW5kaXJlY3RseVJlcGVhdGVkTm9kZShub25UZXJtaW5hbE5vZGUsIGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpIHtcbiAgY29uc3QgcmVwbGFjZW1lbnRDaGlsZE5vZGVzID0gW1xuICAgICAgICAgIG5vblRlcm1pbmFsTm9kZVxuICAgICAgICBdLFxuICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlTnVsbGFyeSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGUuaXNOdWxsYXJ5KCk7XG5cbiAgaWYgKCFpbmRpcmVjdGx5UmVwZWF0ZWROb2RlTnVsbGFyeSkge1xuICAgIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVDaGlsZE5vZGVzID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBwdXNoKHJlcGxhY2VtZW50Q2hpbGROb2RlcywgaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMpO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50Q2hpbGROb2Rlcztcbn1cbiJdLCJuYW1lcyI6WyJyZXdyaXRlRGlyZWN0bHlSZXBlYXRlZE5vZGVzIiwicmV3cml0ZUluZGlyZWN0bHlSZXBlYXRlZE5vZGVzIiwicmV3cml0ZVJlZHVjZWROb2RlcyIsImZyb250IiwiYXJyYXlVdGlsaXRpZXMiLCJmaXJzdCIsInB1c2giLCJjbGVhciIsImJhY2t3YXJkc0ZvckVhY2giLCJub25UZXJtaW5hbE5vZGUiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlcyIsImdldENoaWxkTm9kZXMiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImZpbmRJbmRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJub25UZXJtaW5hbE5vZGVGcm9tUGFyZW50Tm9kZUFuZEluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlUnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsImluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwicGFyZW50Tm9kZU5vZGVSdWxlTmFtZSIsInJ1bGVOYW1lIiwicnVsZU5hbWVGcm9tSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUiLCJwcmVjZWRlbmNlIiwiZ2V0UHJlY2VkZW5jZSIsInNldFByZWNlZGVuY2UiLCJyZXBsYWNlbWVudENoaWxkTm9kZXMiLCJyZXBsYWNlbWVudENoaWxkTm9kZXNGcm9tTm9uVGVybWluYWxOb2RlTm9kZUFuZEluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJyZXBsYWNlQWxsQ2hpbGROb2RlcyIsInJlcGxhY2VkQ2hpbGROb2RlcyIsImRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsImZvckVhY2giLCJkaXJlY3RseVJlcGVhdGVkTm9kZSIsImRpcmVjdGx5UmVwZWF0ZWROb2Rlc0NoaWxkTm9kZXMiLCJyZXBsYWNlQ2hpbGROb2RlcyIsImZpbmREaXJlY3RseVJlcGVhdGVkTm9kZXMiLCJkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJmaXJzdENoaWxkTm9kZSIsImZpcnN0Q2hpbGROb2RlUmVkdWNlZE5vZGUiLCJSZWR1Y2VkTm9kZSIsInJlZHVjZWROb2RlIiwicmVwbGFjZWRDaGlsZE5vZGUiLCJwYXJlbnROb2RlUnVsZU5hbWUiLCJyZWR1Y2VkTm9kZU9wYWNpdHkiLCJnZXRPcGFjaXR5IiwicmVkdWNlZE5vZGVSdWxlTmFtZSIsInJlZHVjZWROb2RlUHJlY2VkZW5jZSIsInJlZHVjZWRSdWxlTmFtZSIsInBhcmVudFJ1bGVOYW1lIiwib3BhY2l0eSIsInJ1bGVOYW1lRnJvbVJlZHVjZWRSdWxlTmFtZSIsInJlZHVjZWROb2RlQ2hpbGROb2RlcyIsIk5vblRlcm1pbmFsTm9kZSIsImZyb21SdWxlTmFtZUNoaWxkTm9kZXNBbmRPcGFjaXR5IiwicmVwbGFjZUNoaWxkTm9kZSIsImluZGV4IiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJyZXBsYWNlZENoaWxkTm9kZXNMZW5ndGgiLCJmaXJzdFJlcGxhY2VkQ2hpbGROb2RlIiwiZmlyc3RJbmRleCIsImZpbmRSZXBlYXRlZE5vblRlcm1pbmFsTm9kZXMiLCJjaGlsZE5vZGUiLCJjaGlsZE5vZGVEaXJlY3RseVJlcGVhdGVkTm9kZSIsIkRpcmVjdGx5UmVwZWF0ZWROb2RlIiwiY2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSIsIkluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJjYWxsYmFjayIsInJlcGVhdGVkTm9uVGVybWluYWxOb2RlcyIsImxhc3RJbmRleCIsImZpbmRMYXN0SW5kZXgiLCJjaGlsZE5vZGVSZXBlYXRlZE5vblRlcm1pbmFsTm9kZSIsInJlcGVhdGVkTm9uVGVybWluYWxOb2RlIiwidW5zaGlmdCIsImluZGlyZWN0bHlSZXBlYXRlZE5vZGVPcGFjaXR5IiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lRnJvbUluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwiZnJvbnRDaGlsZE5vZGVzIiwiaW5kaXJlY3RseVJlcGVhdGVkTm9kZU51bGxhcnkiLCJpc051bGxhcnkiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2RlcyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7SUE0Q2dCQSw0QkFBNEI7ZUFBNUJBOztJQTlCQUMsOEJBQThCO2VBQTlCQTs7SUEyREFDLG1CQUFtQjtlQUFuQkE7Ozt5QkF2RWU7NEJBQ0M7OERBRVI7K0RBQ1M7aUVBQ0U7cUJBRUw7d0JBQzJHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUV6SSxJQUFRQyxRQUFnREMseUJBQWMsQ0FBOURELE9BQU9FLFFBQXlDRCx5QkFBYyxDQUF2REMsT0FBT0MsT0FBa0NGLHlCQUFjLENBQWhERSxNQUFNQyxRQUE0QkgseUJBQWMsQ0FBMUNHLE9BQU9DLG1CQUFxQkoseUJBQWMsQ0FBbkNJO0FBRTVCLFNBQVNQLCtCQUErQlEsZUFBZTtJQUM1RCxJQUFJQyxhQUFhRCxpQkFBaUIsR0FBRztJQUVyQyxJQUFNRSxhQUFhRCxXQUFXRSxhQUFhLElBQ3JDQywwQkFBMEJDLDRCQUE0Qkg7SUFFNURILGlCQUFpQksseUJBQXlCLFNBQUNFO1FBQ3pDTixrQkFBa0JPLHVEQUF1RE4sWUFBWUsseUJBQXlCLEdBQUc7UUFFakgsSUFBTUUsaUNBQWlDRix1QkFBdUJHLFdBQVcsSUFDbkVDLDZCQUE2QkYsZ0NBQzdCRyx5QkFBeUJWLFdBQVdRLFdBQVcsSUFDL0NHLFdBQVdDLElBQUFBLGdEQUFzQyxFQUFDSDtRQUV4RCxJQUFJQywyQkFBMkJDLFVBQVU7WUFDdkMsSUFBTUUsYUFBYVIsdUJBQXVCUyxhQUFhO1lBRXZEZCxXQUFXZSxhQUFhLENBQUNGO1FBQzNCO1FBRUEsSUFBTUcsd0JBQXdCQyxzRUFBc0VsQixpQkFBaUJNO1FBRXJIYSxxQkFBcUJsQixZQUFZZ0I7UUFFakNoQixhQUFhRCxpQkFBaUIsR0FBRztJQUNuQztJQUVBLE9BQU9DO0FBQ1Q7QUFFTyxTQUFTViw2QkFBNkJTLGVBQWU7O1FBV3hELElBQU1pQix3QkFBd0IsRUFBRSxFQUMxQkcscUJBQXFCQyx1QkFDckJwQixhQUFhRCxpQkFBaUIsR0FBRztRQUV2Q3FCLHNCQUFzQkMsT0FBTyxDQUFDLFNBQUNDO1lBQzdCLElBQU1DLGtDQUFrQ0QscUJBQXFCcEIsYUFBYTtZQUUxRU4sS0FBS29CLHVCQUF1Qk87UUFDOUI7UUFFQUMsa0JBQWtCeEIsWUFBWW1CLG9CQUFvQkg7UUFFbERJLHdCQUF3QkssMEJBQTBCeEI7UUFFbER5Qiw4QkFBOEJOLHNCQUFzQk8sTUFBTTtJQUM1RDtJQXpCQSxJQUFNMUIsYUFBYUYsZ0JBQWdCRyxhQUFhO0lBRWhELElBQUlrQix1QkFDQU07SUFFSk4sd0JBQXdCSywwQkFBMEJ4QjtJQUVsRHlCLDhCQUE4Qk4sc0JBQXNCTyxNQUFNO0lBRTFELE1BQU9ELDhCQUE4QjtBQWlCdkM7QUFFTyxTQUFTbEMsb0JBQW9CTyxlQUFlO0lBQ2pELElBQUlFLGFBQWFGLGdCQUFnQkcsYUFBYTtJQUU5QyxJQUFNMEIsaUJBQWlCakMsTUFBTU0sYUFDdkI0Qiw0QkFBNkJELEFBQWMsWUFBZEEsZ0JBQTBCRSxnQkFBVztJQUV4RSxJQUFJLENBQUNELDJCQUEyQjtRQUM5QjtJQUNGO0lBRUEsSUFBSWI7SUFFSixJQUFNaEIsYUFBYUQsaUJBQ2JnQyxjQUFjSCxnQkFDZEksb0JBQW9CRCxhQUNwQkUscUJBQXFCakMsV0FBV1EsV0FBVyxJQUMzQzBCLHFCQUFxQkgsWUFBWUksVUFBVSxJQUMzQ0Msc0JBQXNCTCxZQUFZdkIsV0FBVyxJQUM3QzZCLHdCQUF3Qk4sWUFBWWpCLGFBQWEsSUFDakR3QixrQkFBa0JGLHFCQUNsQkcsaUJBQWlCTixvQkFDakJwQixhQUFhd0IsdUJBQ2JHLFVBQVVOLG9CQUNWdkIsV0FBVzhCLElBQUFBLHFDQUEyQixFQUFDSDtJQUU3QyxJQUFJM0IsYUFBYTRCLGdCQUFnQjtRQUMvQixJQUFNRyx3QkFBd0JYLFlBQVk3QixhQUFhO1FBRXZEYyx3QkFBd0IwQix1QkFBd0IsR0FBRztRQUVuRDFDLFdBQVdlLGFBQWEsQ0FBQ0Y7SUFDM0IsT0FBTztRQUNMLElBQU1aLGNBQWE4QixZQUFZN0IsYUFBYSxJQUN0Q0gsb0JBQWtCNEMsNkJBQWUsQ0FBQ0MsZ0NBQWdDLENBQUNqQyxVQUFVVixhQUFZdUM7UUFFL0Z6QyxrQkFBZ0JnQixhQUFhLENBQUNoQjtRQUU5QmlCLHdCQUF3QjtZQUN0QmpCO1NBQ0Q7SUFDSDtJQUVBOEMsaUJBQWlCN0MsWUFBWWdDLG1CQUFtQmhCO0FBQ2xEO0FBRUEsU0FBUzZCLGlCQUFpQjdDLFVBQVUsRUFBRWdDLGlCQUFpQixFQUFFaEIscUJBQXFCO1FBTTVFZjtJQUxBLElBQU1BLGFBQWFELFdBQVdFLGFBQWEsSUFDckM0QyxRQUFRN0MsV0FBVzhDLE9BQU8sQ0FBQ2Ysb0JBQzNCZ0IsUUFBUUYsT0FDUkcsY0FBYztJQUVwQmhELENBQUFBLGNBQUFBLFlBQVdpRCxNQUFNLENBQWpCakQsTUFBQUEsYUFBQUE7UUFBa0IrQztRQUFPQztLQUFzQyxDQUEvRGhELE9BQXNDLHFCQUFHZTtBQUMzQztBQUVBLFNBQVNRLGtCQUFrQnhCLFVBQVUsRUFBRW1CLGtCQUFrQixFQUFFSCxxQkFBcUI7UUFhOUVmO0lBWkEsSUFBTWtELDJCQUEyQmhDLG1CQUFtQlEsTUFBTTtJQUUxRCxJQUFJd0IsNkJBQTZCLEdBQUc7UUFDbEM7SUFDRjtJQUVBLElBQU1DLHlCQUF5QnpELE1BQU13QixxQkFDL0JsQixhQUFhRCxXQUFXRSxhQUFhLElBQ3JDbUQsYUFBYXBELFdBQVc4QyxPQUFPLENBQUNLLHlCQUNoQ0osUUFBUUssWUFDUkosY0FBY0UsMEJBQTBCLEdBQUc7SUFFakRsRCxDQUFBQSxjQUFBQSxZQUFXaUQsTUFBTSxDQUFqQmpELE1BQUFBLGFBQUFBO1FBQWtCK0M7UUFBT0M7S0FBc0MsQ0FBL0RoRCxPQUFzQyxxQkFBR2U7QUFDM0M7QUFFQSxTQUFTRSxxQkFBcUJsQixVQUFVLEVBQUVnQixxQkFBcUI7SUFDN0QsSUFBTWYsYUFBYUQsV0FBV0UsYUFBYTtJQUUzQ0wsTUFBTUk7SUFFTkwsS0FBS0ssWUFBWWU7QUFDbkI7QUFFQSxTQUFTUywwQkFBMEJ4QixVQUFVO0lBQzNDLElBQU1tQix3QkFBd0JrQyw2QkFBNkJyRCxZQUFZLFNBQUNzRDtRQUN0RSxJQUFNQyxnQ0FBaUNELEFBQVMsWUFBVEEsV0FBcUJFLGlCQUFvQjtRQUVoRixJQUFJRCwrQkFBK0I7WUFDakMsT0FBTztRQUNUO0lBQ0Y7SUFFQSxPQUFPcEM7QUFDVDtBQUVBLFNBQVNoQiw0QkFBNEJILFVBQVU7SUFDN0MsSUFBTUUsMEJBQTBCbUQsNkJBQTZCckQsWUFBWSxTQUFDc0Q7UUFDeEUsSUFBTUcsa0NBQW1DSCxBQUFTLFlBQVRBLFdBQXFCSSxtQkFBc0I7UUFFcEYsSUFBSUQsaUNBQWlDO1lBQ25DLE9BQU87UUFDVDtJQUNGO0lBRUEsT0FBT3ZEO0FBQ1Q7QUFFQSxTQUFTbUQsNkJBQTZCckQsVUFBVSxFQUFFMkQsUUFBUTtJQUN4RCxJQUFNQywyQkFBMkIsRUFBRSxFQUM3QkMsWUFBWUMsSUFBQUEsb0JBQWEsRUFBQzlELFlBQVkyRDtJQUU1QyxJQUFJRSxjQUFjLE1BQU07UUFDdEIsSUFBSyxJQUFJaEIsUUFBUWdCLFdBQVdoQixTQUFTLEdBQUdBLFFBQVM7WUFDL0MsSUFBTVMsWUFBWXRELFVBQVUsQ0FBQzZDLE1BQU0sRUFDN0JrQixtQ0FBbUNKLFNBQVNMO1lBRWxELElBQUksQ0FBQ1Msa0NBQWtDO2dCQUNyQztZQUNGO1lBRUEsSUFBTUMsMEJBQTBCVixXQUFZLEdBQUc7WUFFL0NNLHlCQUF5QkssT0FBTyxDQUFDRDtRQUNuQztJQUNGO0lBRUEsT0FBT0o7QUFDVDtBQUVBLFNBQVN2RCx1REFBdUROLFVBQVUsRUFBRUssc0JBQXNCO0lBQ2hHLElBQUlNLFVBQ0FWLFlBQ0F1QztJQUVKdkMsYUFBYUQsV0FBV0UsYUFBYTtJQUVyQyxJQUFNaUUsZ0NBQWdDOUQsdUJBQXVCOEIsVUFBVSxJQUNqRTVCLGlDQUFpQ0YsdUJBQXVCRyxXQUFXLElBQ25FQyw2QkFBNkJGLGdDQUM3QjZELHdCQUF3QkMsSUFBQUEsNkRBQW1ELEVBQUM1RCw2QkFDNUU2RCxrQkFBa0I3RSxNQUFNUTtJQUU5QlUsV0FBV3lELHVCQUF1QixHQUFHO0lBRXJDbkUsYUFBYXFFLGlCQUFpQixHQUFHO0lBRWpDOUIsVUFBVTJCLCtCQUFnQyxHQUFHO0lBRTdDLElBQU1wRSxrQkFBa0I0Qyw2QkFBZSxDQUFDQyxnQ0FBZ0MsQ0FBQ2pDLFVBQVVWLFlBQVl1QztJQUUvRixPQUFPekM7QUFDVDtBQUVBLFNBQVNrQixzRUFBc0VsQixlQUFlLEVBQUVNLHNCQUFzQjtJQUNwSCxJQUFNVyx3QkFBd0I7UUFDdEJqQjtLQUNELEVBQ0R3RSxnQ0FBZ0NsRSx1QkFBdUJtRSxTQUFTO0lBRXRFLElBQUksQ0FBQ0QsK0JBQStCO1FBQ2xDLElBQU1FLG1DQUFtQ3BFLHVCQUF1QkgsYUFBYTtRQUU3RU4sS0FBS29CLHVCQUF1QnlEO0lBQzlCO0lBRUEsT0FBT3pEO0FBQ1QifQ==