'use strict';

var necessary = require('necessary');

var arrayUtilities = necessary.arrayUtilities;


function iterateWithDelete(array, callback) {
  var arrayLength = array.length;

  var index = 0,
      count = 0;

  while (index < arrayLength) {
    var element = array[index],
        result = callback(element, count);

    if (result) {
      var start = index,
          deleteCount = 1;

      array.splice(start, deleteCount);

      arrayLength--;
    } else {
      index++;
    }

    count++;
  }
}

function iterateWithReplace(array, callback) {
  var arrayLength = array.length;

  var index = 0,
      count = 0;

  while (index < arrayLength) {
    var element = array[index];

    element = callback(element, count);

    if (element) {
      var start = index,
          deleteCount = 1;

      array.splice(start, deleteCount, element);
    }

    index++;

    count++;
  }
}

module.exports = Object.assign(arrayUtilities, {
  iterateWithDelete: iterateWithDelete,
  iterateWithReplace: iterateWithReplace
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvYXJyYXkuanMiXSwibmFtZXMiOlsibmVjZXNzYXJ5IiwicmVxdWlyZSIsImFycmF5VXRpbGl0aWVzIiwiaXRlcmF0ZVdpdGhEZWxldGUiLCJhcnJheSIsImNhbGxiYWNrIiwiYXJyYXlMZW5ndGgiLCJsZW5ndGgiLCJpbmRleCIsImNvdW50IiwiZWxlbWVudCIsInJlc3VsdCIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJpdGVyYXRlV2l0aFJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxZQUFZQyxRQUFRLFdBQVIsQ0FBbEI7O0lBRVFDLGMsR0FBbUJGLFMsQ0FBbkJFLGM7OztBQUVSLFNBQVNDLGlCQUFULENBQTJCQyxLQUEzQixFQUFrQ0MsUUFBbEMsRUFBNEM7QUFDMUMsTUFBSUMsY0FBY0YsTUFBTUcsTUFBeEI7O0FBRUEsTUFBSUMsUUFBUSxDQUFaO0FBQUEsTUFDSUMsUUFBUSxDQURaOztBQUdBLFNBQU9ELFFBQVFGLFdBQWYsRUFBNEI7QUFDMUIsUUFBTUksVUFBVU4sTUFBTUksS0FBTixDQUFoQjtBQUFBLFFBQ01HLFNBQVNOLFNBQVNLLE9BQVQsRUFBa0JELEtBQWxCLENBRGY7O0FBR0EsUUFBSUUsTUFBSixFQUFZO0FBQ1YsVUFBTUMsUUFBUUosS0FBZDtBQUFBLFVBQ01LLGNBQWMsQ0FEcEI7O0FBR0FULFlBQU1VLE1BQU4sQ0FBYUYsS0FBYixFQUFvQkMsV0FBcEI7O0FBRUFQO0FBQ0QsS0FQRCxNQU9PO0FBQ0xFO0FBQ0Q7O0FBRURDO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTTSxrQkFBVCxDQUE0QlgsS0FBNUIsRUFBbUNDLFFBQW5DLEVBQTZDO0FBQzNDLE1BQUlDLGNBQWNGLE1BQU1HLE1BQXhCOztBQUVBLE1BQUlDLFFBQVEsQ0FBWjtBQUFBLE1BQ0lDLFFBQVEsQ0FEWjs7QUFHQSxTQUFPRCxRQUFRRixXQUFmLEVBQTRCO0FBQzFCLFFBQUlJLFVBQVVOLE1BQU1JLEtBQU4sQ0FBZDs7QUFFQUUsY0FBVUwsU0FBU0ssT0FBVCxFQUFrQkQsS0FBbEIsQ0FBVjs7QUFFQSxRQUFJQyxPQUFKLEVBQWE7QUFDWCxVQUFNRSxRQUFRSixLQUFkO0FBQUEsVUFDTUssY0FBYyxDQURwQjs7QUFHQVQsWUFBTVUsTUFBTixDQUFhRixLQUFiLEVBQW9CQyxXQUFwQixFQUFpQ0gsT0FBakM7QUFDRDs7QUFFREY7O0FBRUFDO0FBQ0Q7QUFDRjs7QUFFRE8sT0FBT0MsT0FBUCxHQUFpQkMsT0FBT0MsTUFBUCxDQUFjakIsY0FBZCxFQUE4QjtBQUM3Q0Msc0NBRDZDO0FBRTdDWTtBQUY2QyxDQUE5QixDQUFqQiIsImZpbGUiOiJhcnJheS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgbmVjZXNzYXJ5ID0gcmVxdWlyZSgnbmVjZXNzYXJ5Jyk7XG5cbmNvbnN0IHsgYXJyYXlVdGlsaXRpZXMgfSA9IG5lY2Vzc2FyeTtcblxuZnVuY3Rpb24gaXRlcmF0ZVdpdGhEZWxldGUoYXJyYXksIGNhbGxiYWNrKSB7XG4gIGxldCBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICBsZXQgaW5kZXggPSAwLFxuICAgICAgY291bnQgPSAwO1xuXG4gIHdoaWxlIChpbmRleCA8IGFycmF5TGVuZ3RoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayhlbGVtZW50LCBjb3VudCk7XG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBjb25zdCBzdGFydCA9IGluZGV4LFxuICAgICAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgICBhcnJheS5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50KTtcblxuICAgICAgYXJyYXlMZW5ndGgtLTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBjb3VudCsrO1xuICB9XG59XG5cbmZ1bmN0aW9uIGl0ZXJhdGVXaXRoUmVwbGFjZShhcnJheSwgY2FsbGJhY2spIHtcbiAgbGV0IGFycmF5TGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIGxldCBpbmRleCA9IDAsXG4gICAgICBjb3VudCA9IDA7XG5cbiAgd2hpbGUgKGluZGV4IDwgYXJyYXlMZW5ndGgpIHtcbiAgICBsZXQgZWxlbWVudCA9IGFycmF5W2luZGV4XTtcblxuICAgIGVsZW1lbnQgPSBjYWxsYmFjayhlbGVtZW50LCBjb3VudCk7XG5cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgY29uc3Qgc3RhcnQgPSBpbmRleCxcbiAgICAgICAgICAgIGRlbGV0ZUNvdW50ID0gMTtcblxuICAgICAgYXJyYXkuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgZWxlbWVudCk7XG4gICAgfVxuXG4gICAgaW5kZXgrKztcblxuICAgIGNvdW50Kys7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduKGFycmF5VXRpbGl0aWVzLCB7XG4gIGl0ZXJhdGVXaXRoRGVsZXRlLFxuICBpdGVyYXRlV2l0aFJlcGxhY2Vcbn0pO1xuIl19