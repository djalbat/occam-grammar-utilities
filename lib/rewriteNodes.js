"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return rewriteNodes;
    }
});
var _occamParsers = require("occam-parsers");
var _necessary = require("necessary");
var _rewritten = /*#__PURE__*/ _interopRequireDefault(require("./node/rewritten"));
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./node/reduced/directly"));
var _directly1 = /*#__PURE__*/ _interopRequireDefault(require("./node/repeated/directly"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./node/reduced/indirectly"));
var _indirectly1 = /*#__PURE__*/ _interopRequireDefault(require("./node/repeated/indirectly"));
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var last = _necessary.arrayUtilities.last, first = _necessary.arrayUtilities.first, front = _necessary.arrayUtilities.front, filter = _necessary.arrayUtilities.filter, unshift = _necessary.arrayUtilities.unshift;
function rewriteNodes(node) {
    var nonTerminalNode = node; ///
    rewrite(nonTerminalNode);
    removeEpsilons(nonTerminalNode);
}
function rewrite(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    childNodes.forEach(function(childNode) {
        var childNodeNonTerminalNode = childNode.isNonTerminalNode();
        if (childNodeNonTerminalNode) {
            var _$nonTerminalNode = childNode; ///
            rewrite(_$nonTerminalNode);
        }
    });
    rewriteIndirectReduction(nonTerminalNode);
    rewriteDirectRecursionAndTrailingIndirectRepetition(nonTerminalNode);
}
function removeEpsilons(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    filter(childNodes, function(childNode) {
        var childNodeEpsilonNode = _instanceof(childNode, _occamParsers.EpsilonNode);
        if (!childNodeEpsilonNode) {
            return true;
        }
    });
    childNodes.forEach(function(childNode) {
        var childNodeNonTerminalNode = childNode.isNonTerminalNode();
        if (childNodeNonTerminalNode) {
            var _$nonTerminalNode = childNode;
            removeEpsilons(_$nonTerminalNode);
        }
    });
}
function rewriteDirectRecursion(nonTerminalNode) {
    var childNodes;
    childNodes = nonTerminalNode.getChildNodes();
    var firstChildNode = first(childNodes), directlyRepeatedChildNodes = childNodes.filter(function(childNode) {
        return _instanceof(childNode, _directly1.default);
    }), firstDirectlyReducedChildNode = firstChildNode, directlyRepeatedChildNodesLength = directlyRepeatedChildNodes.length;
    nonTerminalNode = rewriteTrailingDirectRepetition(nonTerminalNode); ///
    nonTerminalNode = rewriteLeadingIndirectRepetition(nonTerminalNode); ///
    childNodes = nonTerminalNode.getChildNodes();
    if (directlyRepeatedChildNodesLength > 1) {
        var directlyRepeatedChildNodesFront = front(directlyRepeatedChildNodes);
        unshift(childNodes, directlyRepeatedChildNodesFront);
    }
    childNodes.unshift(firstDirectlyReducedChildNode);
    rewrite(nonTerminalNode);
}
function rewriteDirectReduction(nonTerminalNode) {
    var ruleName = nonTerminalNode.getRuleName(), childNodes = nonTerminalNode.getChildNodes(), firstChildNode = first(childNodes), firstDirectlyReducedChildNode = firstChildNode, reducedNode = firstDirectlyReducedChildNode, rewrittenNode = _rewritten.default.fromReducedNode(reducedNode), childNodesLength = childNodes.length, rewrittenNodeRuleName = rewrittenNode.getRuleName(), start = 0, deleteCount = 1;
    if (childNodesLength === 1 && ruleName === rewrittenNodeRuleName) {
        var _childNodes;
        var rewrittenNodeChildNodes = rewrittenNode.getChildNodes();
        (_childNodes = childNodes).splice.apply(_childNodes, [
            start,
            deleteCount
        ].concat(_toConsumableArray(rewrittenNodeChildNodes)));
    } else {
        childNodes.splice(start, deleteCount, rewrittenNode);
    }
}
function rewriteIndirectReduction(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), firstChildNode = first(childNodes), firstChildNodeIndirectlyReducedNode = _instanceof(firstChildNode, _indirectly.default);
    if (firstChildNodeIndirectlyReducedNode) {
        var firstIndirectlyReducedChildNode = firstChildNode, reducedNode = firstIndirectlyReducedChildNode, rewrittenNode = _rewritten.default.fromReducedNode(reducedNode), start = 0, deleteCount = 1;
        childNodes.splice(start, deleteCount, rewrittenNode);
    }
}
function rewriteTrailingDirectRepetition(nonTerminalNode) {
    var ruleName = nonTerminalNode.getRuleName(), childNodes = nonTerminalNode.getChildNodes(), directlyRepeatedChildNodes = childNodes.filter(function(childNode) {
        return _instanceof(childNode, _directly1.default);
    }), directlyRepeatedChildNodesLength = directlyRepeatedChildNodes.length, lastDirectlyRepeatedChildNode = last(directlyRepeatedChildNodes), trailingDirectlyRepeatedNode = lastDirectlyRepeatedChildNode, repeatedNode = trailingDirectlyRepeatedNode, rewrittenNode = _rewritten.default.fromRepeatedNode(repeatedNode), childNodesLength = childNodes.length, rewrittenNodeRuleName = rewrittenNode.getRuleName(), start = 0, deleteCount = 1 + directlyRepeatedChildNodesLength;
    if (childNodesLength === 1 && ruleName === rewrittenNodeRuleName) {
        var _childNodes;
        var rewrittenNodeChildNodes = rewrittenNode.getChildNodes();
        (_childNodes = childNodes).splice.apply(_childNodes, [
            start,
            deleteCount
        ].concat(_toConsumableArray(rewrittenNodeChildNodes)));
    } else {
        childNodes.splice(start, deleteCount, rewrittenNode);
        nonTerminalNode = rewrittenNode;
    }
    childNodes.splice(start, deleteCount, rewrittenNode);
    return nonTerminalNode;
}
function rewriteLeadingIndirectRepetition(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), firstChildNode = first(childNodes), firstChildNodeIndirectlyRepeatedNode = _instanceof(firstChildNode, _indirectly1.default);
    if (firstChildNodeIndirectlyRepeatedNode) {
        var leadingIndirectlyRepeatedNode = firstChildNode, repeatedNode = leadingIndirectlyRepeatedNode, rewrittenNode = _rewritten.default.fromRepeatedNode(repeatedNode), start = 0, deleteCount = 1;
        childNodes.splice(start, deleteCount, rewrittenNode);
        nonTerminalNode = rewrittenNode; ///
        nonTerminalNode = rewriteLeadingIndirectRepetition(nonTerminalNode);
    }
    return nonTerminalNode;
}
function rewriteTrailingIndirectRepetition(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), lastChildNode = last(childNodes), lastChildNodeIndirectlyRepeatedNode = _instanceof(lastChildNode, _indirectly1.default);
    if (lastChildNodeIndirectlyRepeatedNode) {
        var _childNodes;
        var trailingIndirectlyRepeatedChildNode = lastChildNode, childNodesLength = childNodes.length, start = childNodesLength - 1, deleteCount = 1, indirectlyRepeatedNodeChildNodes = trailingIndirectlyRepeatedChildNode.getChildNodes();
        (_childNodes = childNodes).splice.apply(_childNodes, [
            start,
            deleteCount
        ].concat(_toConsumableArray(indirectlyRepeatedNodeChildNodes)));
    }
}
function rewriteDirectRecursionAndTrailingIndirectRepetition(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), firstChildNode = first(childNodes), firstChildNodeDirectlyReducedChildNode = _instanceof(firstChildNode, _directly.default);
    if (firstChildNodeDirectlyReducedChildNode) {
        rewriteTrailingIndirectRepetition(nonTerminalNode);
        var childNodes1 = nonTerminalNode.getChildNodes(), directlyRepeatedChildNodes = childNodes1.filter(function(childNode) {
            return _instanceof(childNode, _directly1.default);
        }), directlyRepeatedChildNodesLength = directlyRepeatedChildNodes.length;
        directlyRepeatedChildNodesLength === 0 ? rewriteDirectReduction(nonTerminalNode) : rewriteDirectRecursion(nonTerminalNode);
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXdyaXRlTm9kZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IEVwc2lsb25Ob2RlIH0gZnJvbSBcIm9jY2FtLXBhcnNlcnNcIjtcbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmV3cml0dGVuTm9kZSBmcm9tIFwiLi9ub2RlL3Jld3JpdHRlblwiO1xuaW1wb3J0IERpcmVjdGx5UmVkdWNlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZWR1Y2VkL2RpcmVjdGx5XCI7XG5pbXBvcnQgRGlyZWN0bHlSZXBlYXRlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZXBlYXRlZC9kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZWR1Y2VkTm9kZSBmcm9tIFwiLi9ub2RlL3JlZHVjZWQvaW5kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZXBlYXRlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZXBlYXRlZC9pbmRpcmVjdGx5XCI7XG5cbmNvbnN0IHsgbGFzdCwgZmlyc3QsIGZyb250LCBmaWx0ZXIsIHVuc2hpZnQgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXdyaXRlTm9kZXMobm9kZSkgeyAgLy8vXG4gIGNvbnN0IG5vblRlcm1pbmFsTm9kZSA9IG5vZGU7IC8vL1xuXG4gIHJld3JpdGUobm9uVGVybWluYWxOb2RlKTtcblxuICByZW1vdmVFcHNpbG9ucyhub25UZXJtaW5hbE5vZGUpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBjaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkTm9kZU5vblRlcm1pbmFsTm9kZSA9IGNoaWxkTm9kZS5pc05vblRlcm1pbmFsTm9kZSgpO1xuXG4gICAgaWYgKGNoaWxkTm9kZU5vblRlcm1pbmFsTm9kZSkge1xuICAgICAgY29uc3Qgbm9uVGVybWluYWxOb2RlID0gY2hpbGROb2RlOyAgLy8vXG5cbiAgICAgIHJld3JpdGUobm9uVGVybWluYWxOb2RlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJld3JpdGVJbmRpcmVjdFJlZHVjdGlvbihub25UZXJtaW5hbE5vZGUpO1xuXG4gIHJld3JpdGVEaXJlY3RSZWN1cnNpb25BbmRUcmFpbGluZ0luZGlyZWN0UmVwZXRpdGlvbihub25UZXJtaW5hbE5vZGUpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFcHNpbG9ucyhub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgZmlsdGVyKGNoaWxkTm9kZXMsIChjaGlsZE5vZGUpID0+IHtcbiAgICBjb25zdCBjaGlsZE5vZGVFcHNpbG9uTm9kZSA9IChjaGlsZE5vZGUgaW5zdGFuY2VvZiBFcHNpbG9uTm9kZSk7XG5cbiAgICBpZiAoIWNoaWxkTm9kZUVwc2lsb25Ob2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGROb2RlTm9uVGVybWluYWxOb2RlID0gY2hpbGROb2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgICBpZiAoY2hpbGROb2RlTm9uVGVybWluYWxOb2RlKSB7XG4gICAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBjaGlsZE5vZGU7XG5cbiAgICAgIHJlbW92ZUVwc2lsb25zKG5vblRlcm1pbmFsTm9kZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdFJlY3Vyc2lvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgbGV0IGNoaWxkTm9kZXM7XG5cbiAgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgY29uc3QgZmlyc3RDaGlsZE5vZGUgPSBmaXJzdChjaGlsZE5vZGVzKSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLmZpbHRlcigoY2hpbGROb2RlKSA9PiAoY2hpbGROb2RlIGluc3RhbmNlb2YgRGlyZWN0bHlSZXBlYXRlZE5vZGUpKSxcbiAgICAgICAgZmlyc3REaXJlY3RseVJlZHVjZWRDaGlsZE5vZGUgPSBmaXJzdENoaWxkTm9kZSwgLy8vXG4gICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRDaGlsZE5vZGVzTGVuZ3RoID0gZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXMubGVuZ3RoO1xuXG4gIG5vblRlcm1pbmFsTm9kZSA9IHJld3JpdGVUcmFpbGluZ0RpcmVjdFJlcGV0aXRpb24obm9uVGVybWluYWxOb2RlKTsgLy8vXG5cbiAgbm9uVGVybWluYWxOb2RlID0gcmV3cml0ZUxlYWRpbmdJbmRpcmVjdFJlcGV0aXRpb24obm9uVGVybWluYWxOb2RlKTsgIC8vL1xuXG4gIGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGlmIChkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlc0xlbmd0aCA+IDEpIHtcbiAgICBjb25zdCBkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlc0Zyb250ID0gZnJvbnQoZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXMpO1xuXG4gICAgdW5zaGlmdChjaGlsZE5vZGVzLCBkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlc0Zyb250KTtcbiAgfVxuXG4gIGNoaWxkTm9kZXMudW5zaGlmdChmaXJzdERpcmVjdGx5UmVkdWNlZENoaWxkTm9kZSk7XG5cbiAgcmV3cml0ZShub25UZXJtaW5hbE5vZGUpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlRGlyZWN0UmVkdWN0aW9uKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBydWxlTmFtZSA9IG5vblRlcm1pbmFsTm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgZmlyc3RDaGlsZE5vZGUgPSBmaXJzdChjaGlsZE5vZGVzKSxcbiAgICAgICAgZmlyc3REaXJlY3RseVJlZHVjZWRDaGlsZE5vZGUgPSBmaXJzdENoaWxkTm9kZSwgLy8vXG4gICAgICAgIHJlZHVjZWROb2RlID0gZmlyc3REaXJlY3RseVJlZHVjZWRDaGlsZE5vZGUsICAvLy9cbiAgICAgICAgcmV3cml0dGVuTm9kZSA9IFJld3JpdHRlbk5vZGUuZnJvbVJlZHVjZWROb2RlKHJlZHVjZWROb2RlKSxcbiAgICAgICAgY2hpbGROb2Rlc0xlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoLFxuICAgICAgICByZXdyaXR0ZW5Ob2RlUnVsZU5hbWUgPSByZXdyaXR0ZW5Ob2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHN0YXJ0ID0gMCxcbiAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gIGlmICgoY2hpbGROb2Rlc0xlbmd0aCA9PT0gMSkgJiYgKHJ1bGVOYW1lID09PSByZXdyaXR0ZW5Ob2RlUnVsZU5hbWUpKSB7XG4gICAgY29uc3QgcmV3cml0dGVuTm9kZUNoaWxkTm9kZXMgPSByZXdyaXR0ZW5Ob2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4ucmV3cml0dGVuTm9kZUNoaWxkTm9kZXMpO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgcmV3cml0dGVuTm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0UmVkdWN0aW9uKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgZmlyc3RDaGlsZE5vZGUgPSBmaXJzdChjaGlsZE5vZGVzKSxcbiAgICAgICAgZmlyc3RDaGlsZE5vZGVJbmRpcmVjdGx5UmVkdWNlZE5vZGUgPSAoZmlyc3RDaGlsZE5vZGUgaW5zdGFuY2VvZiBJbmRpcmVjdGx5UmVkdWNlZE5vZGUpO1xuXG4gIGlmIChmaXJzdENoaWxkTm9kZUluZGlyZWN0bHlSZWR1Y2VkTm9kZSkge1xuICAgIGNvbnN0IGZpcnN0SW5kaXJlY3RseVJlZHVjZWRDaGlsZE5vZGUgPSBmaXJzdENoaWxkTm9kZSwgLy8vXG4gICAgICAgICAgcmVkdWNlZE5vZGUgPSBmaXJzdEluZGlyZWN0bHlSZWR1Y2VkQ2hpbGROb2RlLCAgLy8vXG4gICAgICAgICAgcmV3cml0dGVuTm9kZSA9IFJld3JpdHRlbk5vZGUuZnJvbVJlZHVjZWROb2RlKHJlZHVjZWROb2RlKSxcbiAgICAgICAgICBzdGFydCA9IDAsXG4gICAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCByZXdyaXR0ZW5Ob2RlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXdyaXRlVHJhaWxpbmdEaXJlY3RSZXBldGl0aW9uKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBydWxlTmFtZSA9IG5vblRlcm1pbmFsTm9kZS5nZXRSdWxlTmFtZSgpLFxuICAgICAgICBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLmZpbHRlcigoY2hpbGROb2RlKSA9PiAoY2hpbGROb2RlIGluc3RhbmNlb2YgRGlyZWN0bHlSZXBlYXRlZE5vZGUpKSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXNMZW5ndGggPSBkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlcy5sZW5ndGgsXG4gICAgICAgIGxhc3REaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlID0gbGFzdChkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlcyksXG4gICAgICAgIHRyYWlsaW5nRGlyZWN0bHlSZXBlYXRlZE5vZGUgPSBsYXN0RGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZSwgLy8vXG4gICAgICAgIHJlcGVhdGVkTm9kZSA9IHRyYWlsaW5nRGlyZWN0bHlSZXBlYXRlZE5vZGUsICAvLy9cbiAgICAgICAgcmV3cml0dGVuTm9kZSA9IFJld3JpdHRlbk5vZGUuZnJvbVJlcGVhdGVkTm9kZShyZXBlYXRlZE5vZGUpLFxuICAgICAgICBjaGlsZE5vZGVzTGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGgsXG4gICAgICAgIHJld3JpdHRlbk5vZGVSdWxlTmFtZSA9IHJld3JpdHRlbk5vZGUuZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgc3RhcnQgPSAwLFxuICAgICAgICBkZWxldGVDb3VudCA9IDEgKyBkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlc0xlbmd0aDtcblxuICBpZiAoKGNoaWxkTm9kZXNMZW5ndGggPT09IDEpICYmIChydWxlTmFtZSA9PT0gcmV3cml0dGVuTm9kZVJ1bGVOYW1lKSkge1xuICAgIGNvbnN0IHJld3JpdHRlbk5vZGVDaGlsZE5vZGVzID0gcmV3cml0dGVuTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBjaGlsZE5vZGVzLnNwbGljZShzdGFydCwgZGVsZXRlQ291bnQsIC4uLnJld3JpdHRlbk5vZGVDaGlsZE5vZGVzKTtcbiAgfSBlbHNlIHtcbiAgICBjaGlsZE5vZGVzLnNwbGljZShzdGFydCwgZGVsZXRlQ291bnQsIHJld3JpdHRlbk5vZGUpO1xuXG4gICAgbm9uVGVybWluYWxOb2RlID0gcmV3cml0dGVuTm9kZTtcbiAgfVxuXG4gIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgcmV3cml0dGVuTm9kZSk7XG5cbiAgcmV0dXJuIG5vblRlcm1pbmFsTm9kZTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlYWRpbmdJbmRpcmVjdFJlcGV0aXRpb24obm9uVGVybWluYWxOb2RlKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICBmaXJzdENoaWxkTm9kZSA9IGZpcnN0KGNoaWxkTm9kZXMpLFxuICAgICAgICBmaXJzdENoaWxkTm9kZUluZGlyZWN0bHlSZXBlYXRlZE5vZGUgPSAoZmlyc3RDaGlsZE5vZGUgaW5zdGFuY2VvZiBJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKTtcblxuICBpZiAoZmlyc3RDaGlsZE5vZGVJbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSB7XG4gICAgY29uc3QgbGVhZGluZ0luZGlyZWN0bHlSZXBlYXRlZE5vZGUgPSBmaXJzdENoaWxkTm9kZSwgLy8vXG4gICAgICAgICAgcmVwZWF0ZWROb2RlID0gbGVhZGluZ0luZGlyZWN0bHlSZXBlYXRlZE5vZGUsIC8vL1xuICAgICAgICAgIHJld3JpdHRlbk5vZGUgPSBSZXdyaXR0ZW5Ob2RlLmZyb21SZXBlYXRlZE5vZGUocmVwZWF0ZWROb2RlKSxcbiAgICAgICAgICBzdGFydCA9IDAsXG4gICAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCByZXdyaXR0ZW5Ob2RlKTtcblxuICAgIG5vblRlcm1pbmFsTm9kZSA9IHJld3JpdHRlbk5vZGU7ICAvLy9cblxuICAgIG5vblRlcm1pbmFsTm9kZSA9IHJld3JpdGVMZWFkaW5nSW5kaXJlY3RSZXBldGl0aW9uKG5vblRlcm1pbmFsTm9kZSk7XG4gIH1cblxuICByZXR1cm4gbm9uVGVybWluYWxOb2RlO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlVHJhaWxpbmdJbmRpcmVjdFJlcGV0aXRpb24obm9uVGVybWluYWxOb2RlKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICBsYXN0Q2hpbGROb2RlID0gbGFzdChjaGlsZE5vZGVzKSxcbiAgICAgICAgbGFzdENoaWxkTm9kZUluZGlyZWN0bHlSZXBlYXRlZE5vZGUgPSAobGFzdENoaWxkTm9kZSBpbnN0YW5jZW9mIEluZGlyZWN0bHlSZXBlYXRlZE5vZGUpO1xuXG4gIGlmIChsYXN0Q2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSkge1xuICAgIGNvbnN0IHRyYWlsaW5nSW5kaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlID0gbGFzdENoaWxkTm9kZSwgIC8vL1xuICAgICAgICAgIGNoaWxkTm9kZXNMZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aCxcbiAgICAgICAgICBzdGFydCA9IGNoaWxkTm9kZXNMZW5ndGggLSAxLFxuICAgICAgICAgIGRlbGV0ZUNvdW50ID0gMSxcbiAgICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2RlcyA9IHRyYWlsaW5nSW5kaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4uaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVEaXJlY3RSZWN1cnNpb25BbmRUcmFpbGluZ0luZGlyZWN0UmVwZXRpdGlvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGZpcnN0Q2hpbGROb2RlID0gZmlyc3QoY2hpbGROb2RlcyksXG4gICAgICAgIGZpcnN0Q2hpbGROb2RlRGlyZWN0bHlSZWR1Y2VkQ2hpbGROb2RlID0gKGZpcnN0Q2hpbGROb2RlIGluc3RhbmNlb2YgRGlyZWN0bHlSZWR1Y2VkTm9kZSk7XG5cbiAgaWYgKGZpcnN0Q2hpbGROb2RlRGlyZWN0bHlSZWR1Y2VkQ2hpbGROb2RlKSB7XG4gICAgcmV3cml0ZVRyYWlsaW5nSW5kaXJlY3RSZXBldGl0aW9uKG5vblRlcm1pbmFsTm9kZSk7XG5cbiAgICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgICBkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlcyA9IGNoaWxkTm9kZXMuZmlsdGVyKChjaGlsZE5vZGUpID0+IChjaGlsZE5vZGUgaW5zdGFuY2VvZiBEaXJlY3RseVJlcGVhdGVkTm9kZSkpLFxuICAgICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRDaGlsZE5vZGVzTGVuZ3RoID0gZGlyZWN0bHlSZXBlYXRlZENoaWxkTm9kZXMubGVuZ3RoO1xuXG4gICAgKGRpcmVjdGx5UmVwZWF0ZWRDaGlsZE5vZGVzTGVuZ3RoID09PSAwKSA/XG4gICAgICByZXdyaXRlRGlyZWN0UmVkdWN0aW9uKG5vblRlcm1pbmFsTm9kZSkgOlxuICAgICAgICByZXdyaXRlRGlyZWN0UmVjdXJzaW9uKG5vblRlcm1pbmFsTm9kZSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJyZXdyaXRlTm9kZXMiLCJsYXN0IiwiYXJyYXlVdGlsaXRpZXMiLCJmaXJzdCIsImZyb250IiwiZmlsdGVyIiwidW5zaGlmdCIsIm5vZGUiLCJub25UZXJtaW5hbE5vZGUiLCJyZXdyaXRlIiwicmVtb3ZlRXBzaWxvbnMiLCJjaGlsZE5vZGVzIiwiZ2V0Q2hpbGROb2RlcyIsImZvckVhY2giLCJjaGlsZE5vZGUiLCJjaGlsZE5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsInJld3JpdGVJbmRpcmVjdFJlZHVjdGlvbiIsInJld3JpdGVEaXJlY3RSZWN1cnNpb25BbmRUcmFpbGluZ0luZGlyZWN0UmVwZXRpdGlvbiIsImNoaWxkTm9kZUVwc2lsb25Ob2RlIiwiRXBzaWxvbk5vZGUiLCJyZXdyaXRlRGlyZWN0UmVjdXJzaW9uIiwiZmlyc3RDaGlsZE5vZGUiLCJkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlcyIsIkRpcmVjdGx5UmVwZWF0ZWROb2RlIiwiZmlyc3REaXJlY3RseVJlZHVjZWRDaGlsZE5vZGUiLCJkaXJlY3RseVJlcGVhdGVkQ2hpbGROb2Rlc0xlbmd0aCIsImxlbmd0aCIsInJld3JpdGVUcmFpbGluZ0RpcmVjdFJlcGV0aXRpb24iLCJyZXdyaXRlTGVhZGluZ0luZGlyZWN0UmVwZXRpdGlvbiIsImRpcmVjdGx5UmVwZWF0ZWRDaGlsZE5vZGVzRnJvbnQiLCJyZXdyaXRlRGlyZWN0UmVkdWN0aW9uIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsInJlZHVjZWROb2RlIiwicmV3cml0dGVuTm9kZSIsIlJld3JpdHRlbk5vZGUiLCJmcm9tUmVkdWNlZE5vZGUiLCJjaGlsZE5vZGVzTGVuZ3RoIiwicmV3cml0dGVuTm9kZVJ1bGVOYW1lIiwic3RhcnQiLCJkZWxldGVDb3VudCIsInJld3JpdHRlbk5vZGVDaGlsZE5vZGVzIiwic3BsaWNlIiwiZmlyc3RDaGlsZE5vZGVJbmRpcmVjdGx5UmVkdWNlZE5vZGUiLCJJbmRpcmVjdGx5UmVkdWNlZE5vZGUiLCJmaXJzdEluZGlyZWN0bHlSZWR1Y2VkQ2hpbGROb2RlIiwibGFzdERpcmVjdGx5UmVwZWF0ZWRDaGlsZE5vZGUiLCJ0cmFpbGluZ0RpcmVjdGx5UmVwZWF0ZWROb2RlIiwicmVwZWF0ZWROb2RlIiwiZnJvbVJlcGVhdGVkTm9kZSIsImZpcnN0Q2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSIsIkluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJsZWFkaW5nSW5kaXJlY3RseVJlcGVhdGVkTm9kZSIsInJld3JpdGVUcmFpbGluZ0luZGlyZWN0UmVwZXRpdGlvbiIsImxhc3RDaGlsZE5vZGUiLCJsYXN0Q2hpbGROb2RlSW5kaXJlY3RseVJlcGVhdGVkTm9kZSIsInRyYWlsaW5nSW5kaXJlY3RseVJlcGVhdGVkQ2hpbGROb2RlIiwiaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMiLCJmaXJzdENoaWxkTm9kZURpcmVjdGx5UmVkdWNlZENoaWxkTm9kZSIsIkRpcmVjdGx5UmVkdWNlZE5vZGUiXSwibWFw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