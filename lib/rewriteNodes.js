"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return rewriteNodes;
    }
});
var _occamParsers = require("occam-parsers");
var _necessary = require("necessary");
var _rewritten = /*#__PURE__*/ _interopRequireDefault(require("./node/rewritten"));
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./node/reduced/directly"));
var _directly1 = /*#__PURE__*/ _interopRequireDefault(require("./node/repeated/directly"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./node/reduced/indirectly"));
var _indirectly1 = /*#__PURE__*/ _interopRequireDefault(require("./node/repeated/indirectly"));
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var last = _necessary.arrayUtilities.last, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter, unshift = _necessary.arrayUtilities.unshift;
function rewriteNodes(node) {
    var nonTerminalNode = node; ///
    rewrite(nonTerminalNode);
    removeEpsilons(nonTerminalNode);
    removeIntermediaries(nonTerminalNode);
}
function rewrite(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    rewriteIndirectRepetition(nonTerminalNode);
    rewriteDirectRepetition(nonTerminalNode);
    rewriteDirectReduction(nonTerminalNode);
    rewriteIndirectReduction(nonTerminalNode);
    childNodes.forEach(function(childNode) {
        var childNodeNonTerminalNode = childNode.isNonTerminalNode();
        if (childNodeNonTerminalNode) {
            var _$nonTerminalNode = childNode; ///
            rewrite(_$nonTerminalNode);
        }
    });
}
function removeEpsilons(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    filter(childNodes, function(childNode) {
        var childNodeEpsilonNode = _instanceof(childNode, _occamParsers.EpsilonNode);
        if (!childNodeEpsilonNode) {
            return true;
        }
    });
    childNodes.forEach(function(childNode) {
        var childNodeNonTerminalNode = childNode.isNonTerminalNode();
        if (childNodeNonTerminalNode) {
            var _$nonTerminalNode = childNode; ///
            removeEpsilons(_$nonTerminalNode);
        }
    });
}
function removeIntermediaries(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), ruleName = nonTerminalNode.getRuleName();
    var nonTerminalNodeChildNodes = childNodes, nonTerminalNodeChildNodesLength = nonTerminalNodeChildNodes.length;
    while(nonTerminalNodeChildNodesLength === 1){
        var firstNonTerminalNodeChildNode = first(nonTerminalNodeChildNodes), firstNonTerminalNodeChildNodeNonTerminalNode = firstNonTerminalNodeChildNode.isNonTerminalNode();
        if (!firstNonTerminalNodeChildNodeNonTerminalNode) {
            break;
        }
        var _$nonTerminalNode = firstNonTerminalNodeChildNode, nonTerminalNodeRuleName = _$nonTerminalNode.getRuleName();
        nonTerminalNodeChildNodes = _$nonTerminalNode.getChildNodes();
        if (nonTerminalNodeRuleName === ruleName) {
            var _childNodes;
            var start = 0, deleteCount = 1;
            (_childNodes = childNodes).splice.apply(_childNodes, [
                start,
                deleteCount
            ].concat(_toConsumableArray(nonTerminalNodeChildNodes)));
            break;
        }
        nonTerminalNodeChildNodesLength = nonTerminalNodeChildNodes.length;
    }
    childNodes.forEach(function(childNode) {
        var childNodeNonTerminalNode = childNode.isNonTerminalNode();
        if (childNodeNonTerminalNode) {
            var _$nonTerminalNode = childNode; ///
            removeIntermediaries(_$nonTerminalNode);
        }
    });
}
function rewriteDirectReduction(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), directlyReducedNode = childNodes.find(function(childNode) {
        return _instanceof(childNode, _directly.default);
    }) || null;
    if (directlyReducedNode !== null) {
        var index = childNodes.indexOf(directlyReducedNode), reducedNode = directlyReducedNode, rewrittenNode = _rewritten.default.fromReducedNode(reducedNode), start = index, deleteCount = 1;
        childNodes.splice(start, deleteCount, rewrittenNode);
    }
}
function rewriteDirectRepetition(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes();
    var directlyRepeatedNodes = childNodes.filter(function(childNode) {
        return _instanceof(childNode, _directly1.default);
    }), directlyRepeatedNodesLength = directlyRepeatedNodes.length;
    if (directlyRepeatedNodesLength > 0) {
        var lastDirectlyRepeatedNode = last(directlyRepeatedNodes), index = childNodes.indexOf(lastDirectlyRepeatedNode), start = 0, deleteCount = index + 1, repeatedNode = lastDirectlyRepeatedNode, rewrittenNode = _rewritten.default.fromRepeatedNode(repeatedNode), deletedChildNodes = childNodes.splice(start, deleteCount, rewrittenNode);
        nonTerminalNode = rewrittenNode; ///
        childNodes = nonTerminalNode.getChildNodes(); ///
        deletedChildNodes.pop();
        unshift(childNodes, deletedChildNodes);
    }
}
function rewriteIndirectReduction(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), indirectlyReducedNode = childNodes.find(function(childNode) {
        return _instanceof(childNode, _indirectly.default);
    }) || null;
    if (indirectlyReducedNode !== null) {
        var index = childNodes.indexOf(indirectlyReducedNode), reducedNode = indirectlyReducedNode, rewrittenNode = _rewritten.default.fromReducedNode(reducedNode), start = index, deleteCount = 1;
        childNodes.splice(start, deleteCount, rewrittenNode);
    }
}
function rewriteIndirectRepetition(nonTerminalNode) {
    var childNodes = nonTerminalNode.getChildNodes(), indirectlyRepeatedNode = childNodes.find(function(childNode) {
        return _instanceof(childNode, _indirectly1.default);
    }) || null;
    if (indirectlyRepeatedNode !== null) {
        var indirectlyRepeatedNodeChildNodes = indirectlyRepeatedNode.getChildNodes(), directlyRepeatedNode = indirectlyRepeatedNodeChildNodes.find(function(indirectlyRepeatedNodeChildNode) {
            return _instanceof(indirectlyRepeatedNodeChildNode, _directly1.default);
        }) || null;
        if (directlyRepeatedNode !== null) {
            var _childNodes;
            var index = indirectlyRepeatedNodeChildNodes.indexOf(directlyRepeatedNode), start = index, deleteCount = Infinity;
            var directlyRepeatedNodes = indirectlyRepeatedNodeChildNodes.splice(start, deleteCount);
            index = childNodes.indexOf(indirectlyRepeatedNode);
            start = index + 1;
            deleteCount = 0;
            (_childNodes = childNodes).splice.apply(_childNodes, [
                start,
                deleteCount
            ].concat(_toConsumableArray(directlyRepeatedNodes)));
        }
        var repeatedNode = indirectlyRepeatedNode, rewrittenNode = _rewritten.default.fromRepeatedNode(repeatedNode);
        var index1 = childNodes.indexOf(indirectlyRepeatedNode), start1 = index1, deleteCount1 = 1;
        childNodes.splice(start1, deleteCount1, rewrittenNode);
        start1 = 0;
        deleteCount1 = index1; ///
        var deleteChildNodes = childNodes.splice(start1, deleteCount1), rewrittenNodeChildNodes = rewrittenNode.getChildNodes();
        unshift(rewrittenNodeChildNodes, deleteChildNodes);
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXdyaXRlTm9kZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IEVwc2lsb25Ob2RlIH0gZnJvbSBcIm9jY2FtLXBhcnNlcnNcIjtcbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmV3cml0dGVuTm9kZSBmcm9tIFwiLi9ub2RlL3Jld3JpdHRlblwiO1xuaW1wb3J0IERpcmVjdGx5UmVkdWNlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZWR1Y2VkL2RpcmVjdGx5XCI7XG5pbXBvcnQgRGlyZWN0bHlSZXBlYXRlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZXBlYXRlZC9kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZWR1Y2VkTm9kZSBmcm9tIFwiLi9ub2RlL3JlZHVjZWQvaW5kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZXBlYXRlZE5vZGUgZnJvbSBcIi4vbm9kZS9yZXBlYXRlZC9pbmRpcmVjdGx5XCI7XG5cbmNvbnN0IHsgbGFzdCwgZmlyc3QsIGZpbHRlciwgdW5zaGlmdCB9ID0gYXJyYXlVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJld3JpdGVOb2Rlcyhub2RlKSB7ICAvLy9cbiAgY29uc3Qgbm9uVGVybWluYWxOb2RlID0gbm9kZTsgLy8vXG5cbiAgcmV3cml0ZShub25UZXJtaW5hbE5vZGUpO1xuXG4gIHJlbW92ZUVwc2lsb25zKG5vblRlcm1pbmFsTm9kZSk7XG5cbiAgcmVtb3ZlSW50ZXJtZWRpYXJpZXMobm9uVGVybWluYWxOb2RlKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZShub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgcmV3cml0ZUluZGlyZWN0UmVwZXRpdGlvbihub25UZXJtaW5hbE5vZGUpO1xuXG4gIHJld3JpdGVEaXJlY3RSZXBldGl0aW9uKG5vblRlcm1pbmFsTm9kZSk7XG5cbiAgcmV3cml0ZURpcmVjdFJlZHVjdGlvbihub25UZXJtaW5hbE5vZGUpO1xuXG4gIHJld3JpdGVJbmRpcmVjdFJlZHVjdGlvbihub25UZXJtaW5hbE5vZGUpO1xuXG4gIGNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGROb2RlTm9uVGVybWluYWxOb2RlID0gY2hpbGROb2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgICBpZiAoY2hpbGROb2RlTm9uVGVybWluYWxOb2RlKSB7XG4gICAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBjaGlsZE5vZGU7ICAvLy9cblxuICAgICAgcmV3cml0ZShub25UZXJtaW5hbE5vZGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUVwc2lsb25zKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBmaWx0ZXIoY2hpbGROb2RlcywgKGNoaWxkTm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkTm9kZUVwc2lsb25Ob2RlID0gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIEVwc2lsb25Ob2RlKTtcblxuICAgIGlmICghY2hpbGROb2RlRXBzaWxvbk5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZE5vZGUpID0+IHtcbiAgICBjb25zdCBjaGlsZE5vZGVOb25UZXJtaW5hbE5vZGUgPSBjaGlsZE5vZGUuaXNOb25UZXJtaW5hbE5vZGUoKTtcblxuICAgIGlmIChjaGlsZE5vZGVOb25UZXJtaW5hbE5vZGUpIHtcbiAgICAgIGNvbnN0IG5vblRlcm1pbmFsTm9kZSA9IGNoaWxkTm9kZTsgIC8vL1xuXG4gICAgICByZW1vdmVFcHNpbG9ucyhub25UZXJtaW5hbE5vZGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUludGVybWVkaWFyaWVzKG5vblRlcm1pbmFsTm9kZSkge1xuICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgcnVsZU5hbWUgPSBub25UZXJtaW5hbE5vZGUuZ2V0UnVsZU5hbWUoKTtcblxuICBsZXQgbm9uVGVybWluYWxOb2RlQ2hpbGROb2RlcyA9IGNoaWxkTm9kZXMsIC8vL1xuICAgICAgbm9uVGVybWluYWxOb2RlQ2hpbGROb2Rlc0xlbmd0aCA9IG5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZXMubGVuZ3RoO1xuXG4gIHdoaWxlIChub25UZXJtaW5hbE5vZGVDaGlsZE5vZGVzTGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3QgZmlyc3ROb25UZXJtaW5hbE5vZGVDaGlsZE5vZGUgPSBmaXJzdChub25UZXJtaW5hbE5vZGVDaGlsZE5vZGVzKSxcbiAgICAgICAgICBmaXJzdE5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZU5vblRlcm1pbmFsTm9kZSA9IGZpcnN0Tm9uVGVybWluYWxOb2RlQ2hpbGROb2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgICBpZiAoIWZpcnN0Tm9uVGVybWluYWxOb2RlQ2hpbGROb2RlTm9uVGVybWluYWxOb2RlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBmaXJzdE5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZSwgLy8vXG4gICAgICAgICAgbm9uVGVybWluYWxOb2RlUnVsZU5hbWUgPSBub25UZXJtaW5hbE5vZGUuZ2V0UnVsZU5hbWUoKTtcblxuICAgIG5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gICAgaWYgKG5vblRlcm1pbmFsTm9kZVJ1bGVOYW1lID09PSBydWxlTmFtZSkge1xuICAgICAgY29uc3Qgc3RhcnQgPSAwLFxuICAgICAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgICBjaGlsZE5vZGVzLnNwbGljZShzdGFydCwgZGVsZXRlQ291bnQsIC4uLm5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZXMpO1xuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBub25UZXJtaW5hbE5vZGVDaGlsZE5vZGVzTGVuZ3RoID0gbm9uVGVybWluYWxOb2RlQ2hpbGROb2Rlcy5sZW5ndGg7XG4gIH1cblxuICBjaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkTm9kZU5vblRlcm1pbmFsTm9kZSA9IGNoaWxkTm9kZS5pc05vblRlcm1pbmFsTm9kZSgpO1xuXG4gICAgaWYgKGNoaWxkTm9kZU5vblRlcm1pbmFsTm9kZSkge1xuICAgICAgY29uc3Qgbm9uVGVybWluYWxOb2RlID0gY2hpbGROb2RlOyAgLy8vXG5cbiAgICAgIHJlbW92ZUludGVybWVkaWFyaWVzKG5vblRlcm1pbmFsTm9kZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdFJlZHVjdGlvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGRpcmVjdGx5UmVkdWNlZE5vZGUgPSBjaGlsZE5vZGVzLmZpbmQoKGNoaWxkTm9kZSkgPT4gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIERpcmVjdGx5UmVkdWNlZE5vZGUpKSB8fCBudWxsO1xuXG4gIGlmIChkaXJlY3RseVJlZHVjZWROb2RlICE9PSBudWxsKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGlsZE5vZGVzLmluZGV4T2YoZGlyZWN0bHlSZWR1Y2VkTm9kZSksXG4gICAgICAgICAgcmVkdWNlZE5vZGUgPSBkaXJlY3RseVJlZHVjZWROb2RlLCAgLy8vXG4gICAgICAgICAgcmV3cml0dGVuTm9kZSA9IFJld3JpdHRlbk5vZGUuZnJvbVJlZHVjZWROb2RlKHJlZHVjZWROb2RlKSxcbiAgICAgICAgICBzdGFydCA9IGluZGV4LCAgLy8vXG4gICAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCByZXdyaXR0ZW5Ob2RlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXdyaXRlRGlyZWN0UmVwZXRpdGlvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgbGV0IGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gIGNvbnN0IGRpcmVjdGx5UmVwZWF0ZWROb2RlcyA9IGNoaWxkTm9kZXMuZmlsdGVyKChjaGlsZE5vZGUpID0+IChjaGlsZE5vZGUgaW5zdGFuY2VvZiBEaXJlY3RseVJlcGVhdGVkTm9kZSkpLFxuICAgICAgICBkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGggPSBkaXJlY3RseVJlcGVhdGVkTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChkaXJlY3RseVJlcGVhdGVkTm9kZXNMZW5ndGggPiAwKSB7XG4gICAgY29uc3QgbGFzdERpcmVjdGx5UmVwZWF0ZWROb2RlID0gbGFzdChkaXJlY3RseVJlcGVhdGVkTm9kZXMpLFxuICAgICAgICAgIGluZGV4ID0gY2hpbGROb2Rlcy5pbmRleE9mKGxhc3REaXJlY3RseVJlcGVhdGVkTm9kZSksXG4gICAgICAgICAgc3RhcnQgPSAwLFxuICAgICAgICAgIGRlbGV0ZUNvdW50ID0gaW5kZXggKyAxLFxuICAgICAgICAgIHJlcGVhdGVkTm9kZSA9IGxhc3REaXJlY3RseVJlcGVhdGVkTm9kZSwgIC8vL1xuICAgICAgICAgIHJld3JpdHRlbk5vZGUgPSBSZXdyaXR0ZW5Ob2RlLmZyb21SZXBlYXRlZE5vZGUocmVwZWF0ZWROb2RlKSxcbiAgICAgICAgICBkZWxldGVkQ2hpbGROb2RlcyA9IGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgcmV3cml0dGVuTm9kZSk7XG5cbiAgICBub25UZXJtaW5hbE5vZGUgPSByZXdyaXR0ZW5Ob2RlOyAgLy8vXG5cbiAgICBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTsgLy8vXG5cbiAgICBkZWxldGVkQ2hpbGROb2Rlcy5wb3AoKTtcblxuICAgIHVuc2hpZnQoY2hpbGROb2RlcywgZGVsZXRlZENoaWxkTm9kZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdFJlZHVjdGlvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGluZGlyZWN0bHlSZWR1Y2VkTm9kZSA9IGNoaWxkTm9kZXMuZmluZCgoY2hpbGROb2RlKSA9PiAoY2hpbGROb2RlIGluc3RhbmNlb2YgSW5kaXJlY3RseVJlZHVjZWROb2RlKSkgfHwgbnVsbDtcblxuICBpZiAoaW5kaXJlY3RseVJlZHVjZWROb2RlICE9PSBudWxsKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGlsZE5vZGVzLmluZGV4T2YoaW5kaXJlY3RseVJlZHVjZWROb2RlKSxcbiAgICAgICAgICByZWR1Y2VkTm9kZSA9IGluZGlyZWN0bHlSZWR1Y2VkTm9kZSwgIC8vL1xuICAgICAgICAgIHJld3JpdHRlbk5vZGUgPSBSZXdyaXR0ZW5Ob2RlLmZyb21SZWR1Y2VkTm9kZShyZWR1Y2VkTm9kZSksXG4gICAgICAgICAgc3RhcnQgPSBpbmRleCwgIC8vL1xuICAgICAgICAgIGRlbGV0ZUNvdW50ID0gMTtcblxuICAgIGNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgcmV3cml0dGVuTm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0UmVwZXRpdGlvbihub25UZXJtaW5hbE5vZGUpIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCksXG4gICAgICAgIGluZGlyZWN0bHlSZXBlYXRlZE5vZGUgPSBjaGlsZE5vZGVzLmZpbmQoKGNoaWxkTm9kZSkgPT4gKGNoaWxkTm9kZSBpbnN0YW5jZW9mIEluZGlyZWN0bHlSZXBlYXRlZE5vZGUpKSB8fCBudWxsO1xuXG4gIGlmIChpbmRpcmVjdGx5UmVwZWF0ZWROb2RlICE9PSBudWxsKSB7XG4gICAgY29uc3QgaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMgPSBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlLmdldENoaWxkTm9kZXMoKSxcbiAgICAgICAgICBkaXJlY3RseVJlcGVhdGVkTm9kZSA9IGluZGlyZWN0bHlSZXBlYXRlZE5vZGVDaGlsZE5vZGVzLmZpbmQoKGluZGlyZWN0bHlSZXBlYXRlZE5vZGVDaGlsZE5vZGUpID0+IChpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2RlIGluc3RhbmNlb2YgRGlyZWN0bHlSZXBlYXRlZE5vZGUpKSB8fCBudWxsO1xuXG4gICAgaWYgKGRpcmVjdGx5UmVwZWF0ZWROb2RlICE9PSBudWxsKSB7XG4gICAgICBsZXQgaW5kZXggPSBpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2Rlcy5pbmRleE9mKGRpcmVjdGx5UmVwZWF0ZWROb2RlKSxcbiAgICAgICAgICBzdGFydCA9IGluZGV4LCAgLy8vXG4gICAgICAgICAgZGVsZXRlQ291bnQgPSBJbmZpbml0eTtcblxuICAgICAgY29uc3QgZGlyZWN0bHlSZXBlYXRlZE5vZGVzID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZXMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCk7XG5cbiAgICAgIGluZGV4ID0gY2hpbGROb2Rlcy5pbmRleE9mKGluZGlyZWN0bHlSZXBlYXRlZE5vZGUpO1xuXG4gICAgICBzdGFydCA9IGluZGV4ICsgMTtcblxuICAgICAgZGVsZXRlQ291bnQgPSAwO1xuXG4gICAgICBjaGlsZE5vZGVzLnNwbGljZShzdGFydCwgZGVsZXRlQ291bnQsIC4uLmRpcmVjdGx5UmVwZWF0ZWROb2Rlcyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVwZWF0ZWROb2RlID0gaW5kaXJlY3RseVJlcGVhdGVkTm9kZSwgIC8vL1xuICAgICAgICAgIHJld3JpdHRlbk5vZGUgPSBSZXdyaXR0ZW5Ob2RlLmZyb21SZXBlYXRlZE5vZGUocmVwZWF0ZWROb2RlKTtcblxuICAgIGxldCBpbmRleCA9IGNoaWxkTm9kZXMuaW5kZXhPZihpbmRpcmVjdGx5UmVwZWF0ZWROb2RlKSxcbiAgICAgICAgc3RhcnQgPSBpbmRleCxcbiAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gICAgY2hpbGROb2Rlcy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCByZXdyaXR0ZW5Ob2RlKTtcblxuICAgIHN0YXJ0ID0gMDtcblxuICAgIGRlbGV0ZUNvdW50ID0gaW5kZXg7ICAvLy9cblxuICAgIGNvbnN0IGRlbGV0ZUNoaWxkTm9kZXMgPSBjaGlsZE5vZGVzLnNwbGljZShzdGFydCwgZGVsZXRlQ291bnQpLFxuICAgICAgICAgIHJld3JpdHRlbk5vZGVDaGlsZE5vZGVzID0gcmV3cml0dGVuTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICB1bnNoaWZ0KHJld3JpdHRlbk5vZGVDaGlsZE5vZGVzLCBkZWxldGVDaGlsZE5vZGVzKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJld3JpdGVOb2RlcyIsImxhc3QiLCJhcnJheVV0aWxpdGllcyIsImZpcnN0IiwiZmlsdGVyIiwidW5zaGlmdCIsIm5vZGUiLCJub25UZXJtaW5hbE5vZGUiLCJyZXdyaXRlIiwicmVtb3ZlRXBzaWxvbnMiLCJyZW1vdmVJbnRlcm1lZGlhcmllcyIsImNoaWxkTm9kZXMiLCJnZXRDaGlsZE5vZGVzIiwicmV3cml0ZUluZGlyZWN0UmVwZXRpdGlvbiIsInJld3JpdGVEaXJlY3RSZXBldGl0aW9uIiwicmV3cml0ZURpcmVjdFJlZHVjdGlvbiIsInJld3JpdGVJbmRpcmVjdFJlZHVjdGlvbiIsImZvckVhY2giLCJjaGlsZE5vZGUiLCJjaGlsZE5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsImNoaWxkTm9kZUVwc2lsb25Ob2RlIiwiRXBzaWxvbk5vZGUiLCJydWxlTmFtZSIsImdldFJ1bGVOYW1lIiwibm9uVGVybWluYWxOb2RlQ2hpbGROb2RlcyIsIm5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJmaXJzdE5vblRlcm1pbmFsTm9kZUNoaWxkTm9kZSIsImZpcnN0Tm9uVGVybWluYWxOb2RlQ2hpbGROb2RlTm9uVGVybWluYWxOb2RlIiwibm9uVGVybWluYWxOb2RlUnVsZU5hbWUiLCJzdGFydCIsImRlbGV0ZUNvdW50Iiwic3BsaWNlIiwiZGlyZWN0bHlSZWR1Y2VkTm9kZSIsImZpbmQiLCJEaXJlY3RseVJlZHVjZWROb2RlIiwiaW5kZXgiLCJpbmRleE9mIiwicmVkdWNlZE5vZGUiLCJyZXdyaXR0ZW5Ob2RlIiwiUmV3cml0dGVuTm9kZSIsImZyb21SZWR1Y2VkTm9kZSIsImRpcmVjdGx5UmVwZWF0ZWROb2RlcyIsIkRpcmVjdGx5UmVwZWF0ZWROb2RlIiwiZGlyZWN0bHlSZXBlYXRlZE5vZGVzTGVuZ3RoIiwibGFzdERpcmVjdGx5UmVwZWF0ZWROb2RlIiwicmVwZWF0ZWROb2RlIiwiZnJvbVJlcGVhdGVkTm9kZSIsImRlbGV0ZWRDaGlsZE5vZGVzIiwicG9wIiwiaW5kaXJlY3RseVJlZHVjZWROb2RlIiwiSW5kaXJlY3RseVJlZHVjZWROb2RlIiwiaW5kaXJlY3RseVJlcGVhdGVkTm9kZSIsIkluZGlyZWN0bHlSZXBlYXRlZE5vZGUiLCJpbmRpcmVjdGx5UmVwZWF0ZWROb2RlQ2hpbGROb2RlcyIsImRpcmVjdGx5UmVwZWF0ZWROb2RlIiwiaW5kaXJlY3RseVJlcGVhdGVkTm9kZUNoaWxkTm9kZSIsIkluZmluaXR5IiwiZGVsZXRlQ2hpbGROb2RlcyIsInJld3JpdHRlbk5vZGVDaGlsZE5vZGVzIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7K0JBYWIsU0FRQzs7O2VBUnVCQSxZQUFZOzs7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