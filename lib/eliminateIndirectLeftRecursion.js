"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    get: function() {
        return eliminateIndirectLeftRecursion;
    },
    enumerable: true
});
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _definitions = require("./utilities/definitions");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var last = _necessary.arrayUtilities.last, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    while(maximalIndirectlyLeftRecursiveDefinition !== null){
        var _rule;
        var indirectlyLeftRecursiveDefinition = maximalIndirectlyLeftRecursiveDefinition, ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName];
        var definitions = rule.getDefinitions(), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), indirectlyLeftRecursiveRule = rule, reducedLeftRecursiveDefinition = reduceIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap), indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions, leftRecursiveRuleName);
        indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions); ///
        var last = indirectlyLeftRecursiveDefinition.isLast(), lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(), leftRecursiveDefinition = lastLeftRecursiveDefinition; ///
        ruleName = leftRecursiveDefinition.getRuleName();
        rule = ruleMap[ruleName];
        var repeatedRuleName = repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap), replacedDefinition = leftRecursiveDefinition, replacementDefinitions = last ? rewriteDirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) : rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName), firstReplacementDefinition = first(replacementDefinitions), addedLeftRecursiveDefinition = firstReplacementDefinition, removedLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions; ///
        (_rule = rule).replaceDefinition.apply(_rule, [
            replacedDefinition
        ].concat(_toConsumableArray(replacementDefinitions)));
        amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition);
        maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    }
}
function amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition) {
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    leftRecursiveDefinitions.push(addedLeftRecursiveDefinition);
}
function reduceIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap) {
    var reducedLeftRecursiveDefinition = null;
    var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule);
    if (reducedRule !== null) {
        var definitions = indirectlyLeftRecursiveRule.getDefinitions(), lastDefinition = last(definitions), reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
        reducedLeftRecursiveDefinition = lastDefinition; ///
    }
    return reducedLeftRecursiveDefinition;
}
function rewriteDirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) {
    var replacementDefinitions = [];
    var directlyLeftRecursiveDefinition;
    directlyLeftRecursiveDefinition = _directly.default.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName); ///
    replacementDefinitions.push(directlyLeftRecursiveDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        leftRecursiveDefinition = _left.default.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(leftRecursiveDefinition);
    }
    return replacementDefinitions;
}
function repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRuleName = null;
    var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition);
    if (repeatedRule !== null) {
        repeatedRuleName = repeatedRule.getName();
        ruleMap[repeatedRuleName] = repeatedRule;
    }
    return repeatedRuleName;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var indirectlyLeftRecursiveDefinition;
        var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions);
        indirectlyLeftRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition; ///
        var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions();
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromPartsRuleNameAndLeftRecursiveDefinitions(parts, ruleName, leftRecursiveDefinitions);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinition;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) {
    var replacementDefinitions = [];
    indirectlyLeftRecursiveDefinition = _indirectly.default.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName); ///
    replacementDefinitions.push(indirectlyLeftRecursiveDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        leftRecursiveDefinition = _left.default.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(leftRecursiveDefinition);
    }
    return replacementDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(definitions) {
    var leftRecursiveRuleName = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
    var indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        if (_instanceof(definition, _indirectly.default)) {
            if (leftRecursiveRuleName === null) {
                return true;
            }
            var indirectlyLeftRecursiveDefinition = definition, leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), ruleName = firstLeftRecursiveRuleName; ///
            if (ruleName === leftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions) {
    var maximalIndirectlyLeftRecursiveDefinition = null;
    var definitions = leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (maximalIndirectlyLeftRecursiveDefinition === null) {
            maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(maximalIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition) {
                maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return maximalIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3V0aWxpdGllcy9kZWZpbml0aW9uc1wiO1xuXG5jb25zdCB7IGxhc3QsIGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgd2hpbGUgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgIGNvbnN0IGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUoKSxcbiAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlLCAvLy9cbiAgICAgICAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWR1Y2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKSxcbiAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpOyAgLy8vXG5cbiAgICBjb25zdCBsYXN0ID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmlzTGFzdCgpLFxuICAgICAgICAgIGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgcnVsZU5hbWUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgIGNvbnN0IHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSxcbiAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IGxhc3QgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpLFxuICAgICAgICAgIGZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uID0gZmlyc3QocmVwbGFjZW1lbnREZWZpbml0aW9ucyksXG4gICAgICAgICAgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7IC8vL1xuXG4gICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xuXG4gICAgYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgZmlsdGVyKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmluY2x1ZGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2goYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIHJlZHVjZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApIHtcbiAgbGV0IHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG51bGw7XG5cbiAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSk7XG5cbiAgaWYgKHJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgICBsYXN0RGVmaW5pdGlvbiA9IGxhc3QoZGVmaW5pdGlvbnMpLFxuICAgICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKTtcblxuICAgIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xuXG4gICAgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdERlZmluaXRpb247IC8vL1xuICB9XG5cbiAgcmV0dXJuIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lKSB7XG4gIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSBbXTtcblxuICBsZXQgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gIGlmIChyZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihyZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTsgIC8vL1xuXG4gICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJldHVybiByZXBsYWNlbWVudERlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXBlYXRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSB7XG4gIGxldCByZXBlYXRlZFJ1bGVOYW1lID0gbnVsbDtcblxuICBjb25zdCByZXBlYXRlZFJ1bGUgPSBSZXBlYXRlZFJ1bGUuZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pXG5cbiAgaWYgKHJlcGVhdGVkUnVsZSAhPT0gbnVsbCkge1xuICAgIHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgcnVsZU1hcFtyZXBlYXRlZFJ1bGVOYW1lXSA9IHJlcGVhdGVkUnVsZTtcbiAgfVxuXG4gIHJldHVybiByZXBlYXRlZFJ1bGVOYW1lO1xufVxuXG5mdW5jdGlvbiBtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAocGFydHMsIHJ1bGVOYW1lKSA9PiB7XG4gICAgbGV0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICAgIGNvbnN0IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG5cbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKCk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVBhcnRzUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocGFydHMsIHJ1bGVOYW1lLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpIHtcbiAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IFtdO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50RGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbnVsbCkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiB7XG4gICAgaWYgKGRlZmluaXRpb24gaW5zdGFuY2VvZiBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sICAvLy9cbiAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcygpLFxuICAgICAgICAgICAgZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBmaXJzdChsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKSxcbiAgICAgICAgICAgIHJ1bGVOYW1lID0gZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWU7IC8vL1xuXG4gICAgICBpZiAocnVsZU5hbWUgPT09IGxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCBkZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgLy8vXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgaWYgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPT09IG51bGwpIHtcbiAgICAgIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbk1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uaXNHcmVhdGVyVGhhbihtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuIl0sIm5hbWVzIjpbImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImxhc3QiLCJhcnJheVV0aWxpdGllcyIsImZpcnN0IiwiZmlsdGVyIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicnVsZU1hcCIsIm1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZWR1Y2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwibWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaXNMYXN0IiwibGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXBlYXRlZFJ1bGVOYW1lIiwicmVwZWF0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZWREZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uIiwiYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXBsYWNlRGVmaW5pdGlvbiIsImFtZW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmNsdWRlcyIsInB1c2giLCJyZWR1Y2VkUnVsZSIsIlJlZHVjZWRSdWxlIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImxhc3REZWZpbml0aW9uIiwicmVkdWNlZFJ1bGVOYW1lIiwiZ2V0TmFtZSIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kUmVwZWF0ZWRSdWxlTmFtZSIsIkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIm1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicGFydHMiLCJmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21QYXJ0c1J1bGVOYW1lQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwiZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJmb3JFYWNoIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5NYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaXNHcmVhdGVyVGhhbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7ZUFjV0EsOEJBQThCOzs7O3lCQVp2QixXQUFXOzhDQUVsQixnQkFBZ0I7K0NBQ2YsaUJBQWlCOzJDQUNOLDZCQUE2QjsrQ0FDckIsc0NBQXNDO2lEQUNwQyx3Q0FBd0M7MkJBRXhDLHlCQUF5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFdkUsSUFBUUMsSUFBSSxHQUFvQkMsVUFBYyxlQUFBLENBQXRDRCxJQUFJLEVBQUVFLEtBQUssR0FBYUQsVUFBYyxlQUFBLENBQWhDQyxLQUFLLEVBQUVDLE1BQU0sR0FBS0YsVUFBYyxlQUFBLENBQXpCRSxNQUFNLEFBQW9CO0FBRWhDLFNBQVNKLDhCQUE4QixDQUFDSyx3QkFBd0IsRUFBRUMsT0FBTyxFQUFFO0lBQ3hGLElBQUlDLHdDQUF3QyxHQUFHQyxnREFBZ0QsQ0FBQ0gsd0JBQXdCLENBQUMsQUFBQztJQUUxSCxNQUFPRSx3Q0FBd0MsS0FBSyxJQUFJLENBQUU7WUE2QnhERSxLQUFJO1FBNUJKLElBQUlDLGlDQUFpQyxHQUFHSCx3Q0FBd0MsRUFDNUVJLFFBQVEsR0FBR0QsaUNBQWlDLENBQUNFLFdBQVcsRUFBRSxFQUMxREgsSUFBSSxHQUFHSCxPQUFPLENBQUNLLFFBQVEsQ0FBQyxBQUFDO1FBRTdCLElBQU1FLFdBQVcsR0FBR0osSUFBSSxDQUFDSyxjQUFjLEVBQUUsRUFDbkNDLHFCQUFxQixHQUFHTCxpQ0FBaUMsQ0FBQ00sd0JBQXdCLEVBQUUsRUFDcEZDLDJCQUEyQixHQUFHUixJQUFJLEVBQ2xDUyw4QkFBOEIsR0FBR0MsaUNBQWlDLENB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