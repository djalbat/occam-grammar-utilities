"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateIndirectLeftRecursion;
    }
});
var _necessary = require("necessary");
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./rule/reduced/directly"));
var _directly1 = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated/directly"));
var _replacement = /*#__PURE__*/ _interopRequireDefault(require("./definition/replacement"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./rule/reduced/indirectly"));
var _indirectly1 = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated/indirectly"));
var _left = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left"));
var _directly2 = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/directly"));
var _indirectly2 = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/indirectly"));
var _ruleName = require("./utilities/ruleName");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var find = _necessary.arrayUtilities.find, push = _necessary.arrayUtilities.push, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
var count = 0;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var greatestIndirectlyLeftRecursiveDefinition = retrieveGreatestIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    while(greatestIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = greatestIndirectlyLeftRecursiveDefinition, rule = indirectlyLeftRecursiveDefinition.getRule(), directlyLeftRecursiveDefinition = findDirectlyLeftRecursiveDefinition(rule, leftRecursiveDefinitions);
        directlyLeftRecursiveDefinition !== null ? rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) : rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap);
        greatestIndirectlyLeftRecursiveDefinition = null; ///++count > Infinity ? null : retrieveGreatestIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    }
}
function rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var _rule;
    var ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName];
    var disallowIsolated = false, directlyReducedRule = _directly.default.fromRule(rule, disallowIsolated);
    var directlyReducedRuleName = null;
    if (directlyReducedRule !== null) {
        directlyReducedRuleName = directlyReducedRule.getName();
        ruleMap[directlyReducedRuleName] = directlyReducedRule;
    }
    var directlyRepeatedRule = _directly1.default.fromRule(rule), directlyRepeatedRuleName = directlyRepeatedRule.getName();
    ruleMap[directlyRepeatedRuleName] = directlyRepeatedRule;
    var definitions = rule.getDefinitions(), directlyLeftRecursiveDefinitions = findDirectlyLeftRecursiveDefinitions(definitions);
    var indirectlyLeftRecursiveDefinitions = findIndirectlyLeftRecursiveDefinitions(definitions);
    var removedLeftRecursiveDefinitions = _toConsumableArray(directlyLeftRecursiveDefinitions).concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
    indirectlyLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        indirectlyLeftRecursiveDefinition = _indirectly2.default.fromIndirectlyLeftRecursiveDefinitionAndDirectlyRepeatedRuleName(indirectlyLeftRecursiveDefinition, directlyRepeatedRuleName); ///
        return indirectlyLeftRecursiveDefinition;
    });
    var replacementDefinitions = _toConsumableArray(indirectlyLeftRecursiveDefinitions);
    if (directlyReducedRuleName !== null) {
        var leftRecursiveDefinition = _left.default.fromDirectlyReducedRuleNameAndDirectlyRepeatedRuleName(directlyReducedRuleName, directlyRepeatedRuleName);
        replacementDefinitions = _toConsumableArray(replacementDefinitions).concat([
            leftRecursiveDefinition
        ]);
    }
    (_rule = rule).replaceAllDefinitions.apply(_rule, _toConsumableArray(replacementDefinitions));
    var addedLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions; ///
    amendLeftRecursiveDefinitions.apply(void 0, [
        leftRecursiveDefinitions,
        removedLeftRecursiveDefinitions
    ].concat(_toConsumableArray(addedLeftRecursiveDefinitions)));
}
function rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition();
    indirectlyReduceRule(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap);
    var indirectlyRepeatedRule = indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap), directlyLeftRecursiveDefinition = rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, indirectlyRepeatedRule), indirectlyLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions), addedLeftRecursiveDefinition = directlyLeftRecursiveDefinition, removedLeftRecursiveDefinitions = [
        leftRecursiveDefinition
    ].concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
    amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition);
// const directLeftRecursiveReplacementDefinition = least ?  ///
//                                                    DirectlyLeftRecursiveReplacementDefinition.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndIndirectlyRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, indirectlyRepeatedRuleName) :  ///
//                                                      null;  ///IndirectlyLeftRecursiveDefinition.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndIndirectlyRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, indirectlyRepeatedRuleName),  ///
//
// const leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
//
// leftRecursiveDefinitionRule.addDefinition(directLeftRecursiveReplacementDefinition);
//
// definition = leftRecursiveDefinition.getDefinition();
//
// leftRecursiveDefinitionRule.removeDefinition(definition);
//
// if (secondReplacementDefinition !== null) {
//   leftRecursiveDefinitionRule.addDefinition(secondReplacementDefinition);
// }
}
function indirectlyReduceRule(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var rule = indirectlyLeftRecursiveDefinition.getRule(), ruleName = rule.getName(), indirectlyReducedRuleName = (0, _ruleName.indirectlyReducedRuleNameFromRuleName)(ruleName), indirectlyReducedRule = ruleMap[indirectlyReducedRuleName] || _indirectly.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions); ///
    if (indirectlyReducedRule !== null) {
        var leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), rule1 = leftRecursiveDefinition.getRule(), replacementDefinition = _replacement.default.fromLeftRecursiveDefinitionAndIndirectlyReducedRule(leftRecursiveDefinition, indirectlyReducedRule);
        ruleMap[indirectlyReducedRuleName] = indirectlyReducedRule;
        rule1.addDefinition(replacementDefinition);
    }
}
function indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var rule = indirectlyLeftRecursiveDefinition.getRule(), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), indirectlyRepeatedRule = _indirectly1.default.fromRuleLeftRecursiveRuleNameAndLeftRecursiveDefinitions(rule, leftRecursiveRuleName, leftRecursiveDefinitions), indirectlyRepeatedRuleName = indirectlyRepeatedRule.getName();
    ruleMap[indirectlyRepeatedRuleName] = indirectlyRepeatedRule;
    return indirectlyRepeatedRule;
}
function amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions) {
    for(var _len = arguments.length, addedLeftRecursiveDefinitions = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++){
        addedLeftRecursiveDefinitions[_key - 2] = arguments[_key];
    }
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    push(leftRecursiveDefinitions, addedLeftRecursiveDefinitions);
}
function rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, indirectlyRepeatedRule) {
    var indirectlyRepeatedRuleName = indirectlyRepeatedRule.getName(), rule = leftRecursiveDefinition.getRule(), definition = leftRecursiveDefinition.getDefinition(), replacedDefinition = definition, replacementDefinition = _replacement.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyRepeatedRuleName(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRuleName), directlyLeftRecursiveDefinition = _directly2.default.fromRuleAndReplacementDefinition(rule, replacementDefinition);
    rule.replaceDefinition(replacedDefinition, replacementDefinition);
    return directlyLeftRecursiveDefinition;
}
function findDirectlyLeftRecursiveDefinition(rule, leftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinitions = leftRecursiveDefinitions.find(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _directly2.default);
            if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }
    }) || null;
    return directlyLeftRecursiveDefinitions;
}
function findDirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _directly2.default);
            if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function findIndirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions) {
    var leftRecursiveRuleName = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null;
    var indirectlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _indirectly2.default);
            if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                if (leftRecursiveRuleName === null) {
                    return true;
                }
                var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
                if (indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName === leftRecursiveRuleName) {
                    return true;
                }
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions) {
    var rule = indirectlyLeftRecursiveDefinition.getRule(), definition = indirectlyLeftRecursiveDefinition.getDefinition(), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), leftRecursiveReplacementDefinition = _replacement.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveRuleName), indirectlyLeftRecursiveDefinitions = findIndirectlyLeftRecursiveDefinitions(rule, leftRecursiveDefinitions, leftRecursiveRuleName), definitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        return definition;
    }), replacedDefinition = definition, replacementDefinition = leftRecursiveReplacementDefinition; ///
    rule.replaceDefinition(replacedDefinition, replacementDefinition);
    rule.removeDefinitions(definitions);
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveGreatestIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions) {
    var greatestIndirectlyLeftRecursiveDefinition = null;
    var indirectlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _indirectly2.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (greatestIndirectlyLeftRecursiveDefinition === null) {
            greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(greatestIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition) {
                greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return greatestIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgRGlyZWN0bHlSZWR1Y2VkUnVsZSBmcm9tIFwiLi9ydWxlL3JlZHVjZWQvZGlyZWN0bHlcIjtcbmltcG9ydCBEaXJlY3RseVJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5pbXBvcnQgUmVwbGFjZW1lbnREZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVwbGFjZW1lbnRcIjtcbmltcG9ydCBJbmRpcmVjdGx5UmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkL2luZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWQvaW5kaXJlY3RseVwiO1xuaW1wb3J0IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL3JlY3Vyc2l2ZURlZmluaXRpb24vbGVmdFwiO1xuaW1wb3J0IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vcmVjdXJzaXZlRGVmaW5pdGlvbi9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL3JlY3Vyc2l2ZURlZmluaXRpb24vbGVmdC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IGluZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWVGcm9tUnVsZU5hbWUgfSBmcm9tIFwiLi91dGlsaXRpZXMvcnVsZU5hbWVcIjtcblxuY29uc3QgeyBmaW5kLCBwdXNoLCBmaXJzdCwgZmlsdGVyIH0gPSBhcnJheVV0aWxpdGllcztcblxubGV0IGNvdW50ID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBsZXQgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgd2hpbGUgKGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgIHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpID9cbiAgICAgIHJld3JpdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSA6XG4gICAgICAgIHJld3JpdGVJbmRpcmVjdExlZnRSZWN1cnNpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuXG4gICAgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBudWxsOyAvLy8rK2NvdW50ID4gSW5maW5pdHkgPyBudWxsIDogcmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICBjb25zdCBkaXNhbGxvd0lzb2xhdGVkID0gZmFsc2UsXG4gICAgICAgIGRpcmVjdGx5UmVkdWNlZFJ1bGUgPSBEaXJlY3RseVJlZHVjZWRSdWxlLmZyb21SdWxlKHJ1bGUsIGRpc2FsbG93SXNvbGF0ZWQpO1xuXG4gIGxldCBkaXJlY3RseVJlZHVjZWRSdWxlTmFtZSA9IG51bGw7XG5cbiAgaWYgKGRpcmVjdGx5UmVkdWNlZFJ1bGUgIT09IG51bGwpIHtcbiAgICBkaXJlY3RseVJlZHVjZWRSdWxlTmFtZSA9IGRpcmVjdGx5UmVkdWNlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgcnVsZU1hcFtkaXJlY3RseVJlZHVjZWRSdWxlTmFtZV0gPSBkaXJlY3RseVJlZHVjZWRSdWxlO1xuICB9XG5cbiAgY29uc3QgZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBEaXJlY3RseVJlcGVhdGVkUnVsZS5mcm9tUnVsZShydWxlKSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lID0gZGlyZWN0bHlSZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHJ1bGVNYXBbZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lXSA9IGRpcmVjdGx5UmVwZWF0ZWRSdWxlO1xuXG4gIGNvbnN0IGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG5cbiAgbGV0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG5cbiAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtcbiAgICAuLi5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyxcbiAgICAuLi5pbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zXG4gIF07XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSk7ICAvLy9cblxuICAgIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0pO1xuXG4gIGxldCByZXBsYWNlbWVudERlZmluaXRpb25zID0gW1xuICAgIC4uLmluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNcbiAgXTtcblxuICBpZiAoZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWUgIT09IG51bGwpIHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21EaXJlY3RseVJlZHVjZWRSdWxlTmFtZUFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZShkaXJlY3RseVJlZHVjZWRSdWxlTmFtZSwgZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lKTtcblxuICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSBbXG4gICAgICAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zLFxuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25cbiAgICBdO1xuICB9XG5cbiAgcnVsZS5yZXBsYWNlQWxsRGVmaW5pdGlvbnMoLi4ucmVwbGFjZW1lbnREZWZpbml0aW9ucyk7XG5cbiAgY29uc3QgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zOyAvLy9cblxuICBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIC4uLmFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpO1xuXG4gIGluZGlyZWN0bHlSZWR1Y2VSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBjb25zdCBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gaW5kaXJlY3RseVJlcGVhdFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUpLFxuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpLFxuICAgICAgICBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbXG4gICAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sXG4gICAgICAgICAgLi4uaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc1xuICAgICAgICBdO1xuXG4gIGFtZW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgLy8gY29uc3QgZGlyZWN0TGVmdFJlY3Vyc2l2ZVJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGxlYXN0ID8gIC8vL1xuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUpIDogIC8vL1xuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7ICAvLy9JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUpLCAgLy8vXG4gIC8vXG4gIC8vIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKTtcbiAgLy9cbiAgLy8gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlLmFkZERlZmluaXRpb24oZGlyZWN0TGVmdFJlY3Vyc2l2ZVJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gIC8vXG4gIC8vIGRlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXREZWZpbml0aW9uKCk7XG4gIC8vXG4gIC8vIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZS5yZW1vdmVEZWZpbml0aW9uKGRlZmluaXRpb24pO1xuICAvL1xuICAvLyBpZiAoc2Vjb25kUmVwbGFjZW1lbnREZWZpbml0aW9uICE9PSBudWxsKSB7XG4gIC8vICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlLmFkZERlZmluaXRpb24oc2Vjb25kUmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgLy8gfVxufVxuXG5mdW5jdGlvbiBpbmRpcmVjdGx5UmVkdWNlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBydWxlID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgcnVsZU5hbWUgPSBydWxlLmdldE5hbWUoKSxcbiAgICAgICAgaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZSA9IGluZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWVGcm9tUnVsZU5hbWUocnVsZU5hbWUpLFxuICAgICAgICBpbmRpcmVjdGx5UmVkdWNlZFJ1bGUgPSBydWxlTWFwW2luZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWVdIHx8IEluZGlyZWN0bHlSZWR1Y2VkUnVsZS5mcm9tUnVsZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpOyAgLy8vXG5cbiAgaWYgKGluZGlyZWN0bHlSZWR1Y2VkUnVsZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgcnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlZHVjZWRSdWxlKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVkdWNlZFJ1bGUpO1xuXG4gICAgcnVsZU1hcFtpbmRpcmVjdGx5UmVkdWNlZFJ1bGVOYW1lXSA9IGluZGlyZWN0bHlSZWR1Y2VkUnVsZTtcblxuICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihyZXBsYWNlbWVudERlZmluaXRpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGlyZWN0bHlSZXBlYXRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCksXG4gICAgICAgIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlLmZyb21SdWxlTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW2luZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lXSA9IGluZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG59XG5cbmZ1bmN0aW9uIGFtZW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgLi4uYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgZmlsdGVyKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmluY2x1ZGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcHVzaChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUpIHtcbiAgY29uc3QgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlLmdldE5hbWUoKSxcbiAgICAgICAgcnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlQW5kUmVwbGFjZW1lbnREZWZpbml0aW9uKHJ1bGUsIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5maW5kKChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGUgPT09IHJ1bGUpIHtcbiAgICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBpbnN0YW5jZW9mIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSkgfHwgbnVsbDtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpO1xuXG4gICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZSA9PT0gcnVsZSkge1xuICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGluc3RhbmNlb2YgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbnVsbCkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGUgPT09IHJ1bGUpIHtcbiAgICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGluc3RhbmNlb2YgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUoKTtcblxuICAgICAgICBpZiAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID09PSBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKSxcbiAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZSgpLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlUmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpLFxuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgICB9KSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVSZXBsYWNlbWVudERlZmluaXRpb247ICAvLy9cblxuICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgbGV0IGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGluc3RhbmNlb2YgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGlmIChncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9PT0gbnVsbCkge1xuICAgICAgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbkdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmlzR3JlYXRlclRoYW4oZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5HcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiZmluZCIsImFycmF5VXRpbGl0aWVzIiwicHVzaCIsImZpcnN0IiwiZmlsdGVyIiwiY291bnQiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJydWxlTWFwIiwiZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZSIsImdldFJ1bGUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlRGlyZWN0TGVmdFJlY3Vyc2lvbiIsInJld3JpdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJydWxlTmFtZSIsImdldFJ1bGVOYW1lIiwiZGlzYWxsb3dJc29sYXRlZCIsImRpcmVjdGx5UmVkdWNlZFJ1bGUiLCJEaXJlY3RseVJlZHVjZWRSdWxlIiwiZnJvbVJ1bGUiLCJkaXJlY3RseVJlZHVjZWRSdWxlTmFtZSIsImdldE5hbWUiLCJkaXJlY3RseVJlcGVhdGVkUnVsZSIsIkRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwiZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwiZGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsIm1hcCIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUiLCJyZXBsYWNlbWVudERlZmluaXRpb25zIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21EaXJlY3RseVJlZHVjZWRSdWxlTmFtZUFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsInJlcGxhY2VBbGxEZWZpbml0aW9ucyIsImFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlSZWR1Y2VSdWxlIiwiaW5kaXJlY3RseVJlcGVhdGVkUnVsZSIsImluZGlyZWN0bHlSZXBlYXRSdWxlIiwicmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZSIsImluZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWVGcm9tUnVsZU5hbWUiLCJpbmRpcmVjdGx5UmVkdWNlZFJ1bGUiLCJJbmRpcmVjdGx5UmVkdWNlZFJ1bGUiLCJmcm9tUnVsZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlcGxhY2VtZW50RGVmaW5pdGlvbiIsIlJlcGxhY2VtZW50RGVmaW5pdGlvbiIsImZyb21MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZEluZGlyZWN0bHlSZWR1Y2VkUnVsZSIsImFkZERlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwiZnJvbVJ1bGVMZWZ0UmVjdXJzaXZlUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5jbHVkZXMiLCJkZWZpbml0aW9uIiwiZ2V0RGVmaW5pdGlvbiIsInJlcGxhY2VkRGVmaW5pdGlvbiIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUnVsZUFuZFJlcGxhY2VtZW50RGVmaW5pdGlvbiIsInJlcGxhY2VEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlUmVwbGFjZW1lbnREZWZpbml0aW9uIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZURlZmluaXRpb25zIiwiZm9yRWFjaCIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0dyZWF0ZXJUaGFuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7K0JBbUJiLFNBY0M7OztlQWR1QkEsOEJBQThCOzs7eUJBakJ2QixXQUFXOzZEQUVWLHlCQUF5Qjs4REFDeEIsMEJBQTBCO2dFQUN6QiwwQkFBMEI7K0RBQzFCLDJCQUEyQjtnRUFDMUIsNEJBQTRCO3lEQUMzQiw0QkFBNEI7OERBQ3BCLHFDQUFxQztnRUFDbkMsdUNBQXVDO3dCQUUvQixzQkFBc0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRTVFLElBQVFDLElBQUksR0FBMEJDLFVBQWMsZUFBQSxDQUE1Q0QsSUFBSSxFQUFFRSxJQUFJLEdBQW9CRCxVQUFjLGVBQUEsQ0FBdENDLElBQUksRUFBRUMsS0FBSyxHQUFhRixVQUFjLGVBQUEsQ0FBaENFLEtBQUssRUFBRUMsTUFBTSxHQUFLSCxVQUFjLGVBQUEsQ0FBekJHLE1BQU0sQUFBb0I7QUFFckQsSUFBSUMsS0FBSyxHQUFHLENBQUMsQUFBQztBQUVDLFNBQVNOLDhCQUE4QixDQUFDTyx3QkFBd0IsRUFBRUMsT0FBTyxFQUFFO0lBQ3hGLElBQUlDLHlDQUF5QyxHQUFHQyxpREFBaUQsQ0FBQ0gsd0JBQXdCLENBQUMsQUFBQztJQUU1SCxNQUFPRSx5Q0FBeUMsS0FBSyxJQUFJLENBQUU7UUFDekQsSUFBTUUsaUNBQWlDLEdBQUdGLHlDQUF5QyxFQUM3RUcsSUFBSSxHQUFHRCxpQ0FBaUMsQ0FBQ0UsT0FBTyxF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