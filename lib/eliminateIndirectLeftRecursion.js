"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    get: function() {
        return eliminateIndirectLeftRecursion;
    },
    enumerable: true
});
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _definitions = require("./utilities/definitions");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    while(maximalIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = maximalIndirectlyLeftRecursiveDefinition, ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions();
        var directlyLeftRecursiveDefinitions = retrieveDirectlyLeftRecursiveDefinitions(definitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
        if (directlyLeftRecursiveDefinitionsLength > 0) {
            var _rule;
            var definitions1 = void 0;
            var directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions), reducedLeftRecursiveDefinition = reduceRule(rule, ruleMap), repeatedRuleName = repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap);
            definitions1 = directlyLeftRecursiveDefinitions; ///
            rule.removeDefinitions(definitions1);
            definitions1 = rule.getDefinitions();
            definitions1 = rewriteLeftRecursiveDefinitions(definitions1, directlyLeftRecursiveDefinition, ruleName); ///
            rule.removeAllDefinitions();
            definitions1.forEach(function(definition) {
                rule.addDefinition(definition);
            });
            var lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(), leftRecursiveDefinition = lastLeftRecursiveDefinition; ///
            ruleName = leftRecursiveDefinition.getRuleName();
            rule = ruleMap[ruleName];
            var replacedDefinition = leftRecursiveDefinition, replacementDefinitions = rewriteLeftRecursiveDefinitionsEx(definitions1, leftRecursiveDefinition, repeatedRuleName, ruleName);
            (_rule = rule).replaceDefinition.apply(_rule, [
                replacedDefinition
            ].concat(_toConsumableArray(replacementDefinitions)));
            var firstReplacementDefinition = first(replacementDefinitions), addedLeftRecursiveDefinition = firstReplacementDefinition, removedLeftRecursiveDefinitions = [
                indirectlyLeftRecursiveDefinition
            ].concat(_toConsumableArray(directlyLeftRecursiveDefinitions));
            amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition); ///
        }
        // const leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(),
        //       indirectlyLeftRecursiveRule = rule, ///
        //       reducedLeftRecursiveDefinition = reduceRule(indirectlyLeftRecursiveRule, ruleMap),
        //       indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions, leftRecursiveRuleName);
        //
        // indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions);  ///
        //
        // const last = indirectlyLeftRecursiveDefinition.isLast(),
        //       lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(),
        //       leftRecursiveDefinition = lastLeftRecursiveDefinition;  ///
        //
        // ruleName = leftRecursiveDefinition.getRuleName();
        // rule = ruleMap[ruleName];
        //
        // const repeatedRuleName = repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap),
        //       replacedDefinition = leftRecursiveDefinition, ///
        //       replacementDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, last),
        //       firstReplacementDefinition = first(replacementDefinitions),
        //       addedLeftRecursiveDefinition = firstReplacementDefinition,  ///
        //       removedLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions; ///
        //
        // rule.replaceDefinition(replacedDefinition, ...replacementDefinitions);
        //
        // amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition);
        //
        // maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
        maximalIndirectlyLeftRecursiveDefinition = null;
    }
}
function reduceRule(rule, ruleMap) {
    var reducedLeftRecursiveDefinition = null;
    var reducedRule = _reduced.default.fromRule(rule);
    if (reducedRule !== null) {
        var leftRecursiveDefinition = _left.default.fromReducedRule(reducedRule), reducedRuleName = reducedRule.getName(), definitions = reducedRule.getDefinitions(), definition = leftRecursiveDefinition; ///
        rule.removeDefinitions(definitions);
        rule.addDefinition(definition);
        ruleMap[reducedRuleName] = reducedRule;
        reducedLeftRecursiveDefinition = definition; ///
    }
    return reducedLeftRecursiveDefinition;
}
function amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition) {
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    leftRecursiveDefinitions.push(addedLeftRecursiveDefinition);
}
function rewriteLeftRecursiveDefinitions(leftRecursiveDefinitions, directlyLeftRecursiveDefinition, ruleName) {
    leftRecursiveDefinitions = leftRecursiveDefinitions.map(function(leftRecursiveDefinition) {
        leftRecursiveDefinition = _left.default.fromRuleNameLeftRecursiveDefinitionAndDirectlyLeftRecursiveDefinition(ruleName, leftRecursiveDefinition, directlyLeftRecursiveDefinition); ///
        return leftRecursiveDefinition;
    });
    return leftRecursiveDefinitions;
}
function rewriteLeftRecursiveDefinitionsEx(leftRecursiveDefinitions, leftRecursiveDefinition, repeatedRuleName, ruleName) {
    var replacementDefinitions = [];
    var replacementDefinition, leftRecursiveDefinitionA;
    var leftRecursiveDefinitionB = leftRecursiveDefinition; ///
    var firstLeftRecursiveDefinition = first(leftRecursiveDefinitions);
    leftRecursiveDefinitionA = firstLeftRecursiveDefinition; ///
    replacementDefinition = _directly.default.fromLeftRecursiveDefinitionsRepeatedRuleNameAndRuleName(leftRecursiveDefinitionA, leftRecursiveDefinitionB, repeatedRuleName, ruleName); ///
    replacementDefinitions.push(replacementDefinition);
    replacementDefinition = _left.default.fromLeftRecursiveDefinitionRepeatedRuleNameAndRuleName(leftRecursiveDefinitionB, repeatedRuleName, ruleName); ///
    replacementDefinitions.push(replacementDefinition);
    return replacementDefinitions;
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var directlyLeftRecursiveDefinition = _directly.default.fromPartsAndRuleName(parts, ruleName);
        return directlyLeftRecursiveDefinition;
    });
    return directlyLeftRecursiveDefinition;
}
function repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRule = _repeated.default.fromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition), repeatedRuleName = repeatedRule.getName();
    ruleMap[repeatedRuleName] = repeatedRule;
    return repeatedRuleName;
}
function repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRuleName = null;
    var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition);
    if (repeatedRule !== null) {
        repeatedRuleName = repeatedRule.getName();
        ruleMap[repeatedRuleName] = repeatedRule;
    }
    return repeatedRuleName;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var indirectlyLeftRecursiveDefinition;
        var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions);
        indirectlyLeftRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition; ///
        var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions();
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromPartsRuleNameAndLeftRecursiveDefinitions(parts, ruleName, leftRecursiveDefinitions);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinition;
}
function retrieveDirectlyLeftRecursiveDefinitions(definitions) {
    var directlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionDirectlyLeftRecursiveDefinition = _instanceof(definition, _directly.default);
        if (definitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, last) {
    var replacementDefinitions = [], LeftRecursiveDefinition = last ? _directly.default : _indirectly.default, replacementDefinition = LeftRecursiveDefinition.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName); ///
    replacementDefinitions.push(replacementDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        var replacementDefinition1 = LeftRecursiveDefinition.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(replacementDefinition1);
    }
    return replacementDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(definitions) {
    var leftRecursiveRuleName = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
    var indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = _instanceof(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            if (leftRecursiveRuleName === null) {
                return true;
            }
            var indirectlyLeftRecursiveDefinition = definition, leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), ruleName = firstLeftRecursiveRuleName; ///
            if (ruleName === leftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions) {
    var maximalIndirectlyLeftRecursiveDefinition = null;
    var definitions = leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (maximalIndirectlyLeftRecursiveDefinition === null) {
            maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(maximalIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition) {
                maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return maximalIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3V0aWxpdGllcy9kZWZpbml0aW9uc1wiO1xuXG5jb25zdCB7IGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgd2hpbGUgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG5cbiAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubGVuZ3RoO1xuXG4gICAgaWYgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGRlZmluaXRpb25zO1xuXG4gICAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgICAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWR1Y2VSdWxlKHJ1bGUsIHJ1bGVNYXApLFxuICAgICAgICAgICAgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCk7XG5cbiAgICAgIGRlZmluaXRpb25zID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7IC8vL1xuXG4gICAgICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG5cbiAgICAgIGRlZmluaXRpb25zID0gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucywgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU5hbWUpOyAvLy9cblxuICAgICAgcnVsZS5yZW1vdmVBbGxEZWZpbml0aW9ucygpO1xuXG4gICAgICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG5cbiAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgICAgY29uc3QgcmVwbGFjZWREZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNFeChkZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIHJ1bGVOYW1lKTtcblxuICAgICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xuXG4gICAgICBjb25zdCBmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGZpcnN0KHJlcGxhY2VtZW50RGVmaW5pdGlvbnMpLFxuICAgICAgICAgICAgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gW1xuICAgICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sXG4gICAgICAgICAgICAgIC4uLmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zXG4gICAgICAgICAgICBdO1xuXG4gICAgICBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAvLy9cbiAgICB9XG5cbiAgICAvLyBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCksXG4gICAgLy8gICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZSwgLy8vXG4gICAgLy8gICAgICAgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmVkdWNlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIHJ1bGVNYXApLFxuICAgIC8vICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSk7XG4gICAgLy9cbiAgICAvLyBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7ICAvLy9cbiAgICAvL1xuICAgIC8vIGNvbnN0IGxhc3QgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uaXNMYXN0KCksXG4gICAgLy8gICAgICAgbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgIC8vICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG4gICAgLy9cbiAgICAvLyBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG4gICAgLy8gcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdO1xuICAgIC8vXG4gICAgLy8gY29uc3QgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJ1bGVNYXApLFxuICAgIC8vICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAvLyAgICAgICByZXBsYWNlbWVudERlZmluaXRpb25zID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIGxhc3QpLFxuICAgIC8vICAgICAgIGZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uID0gZmlyc3QocmVwbGFjZW1lbnREZWZpbml0aW9ucyksXG4gICAgLy8gICAgICAgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uLCAgLy8vXG4gICAgLy8gICAgICAgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7IC8vL1xuICAgIC8vXG4gICAgLy8gcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xuICAgIC8vXG4gICAgLy8gYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcbiAgICAvL1xuICAgIC8vIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlZHVjZVJ1bGUocnVsZSwgcnVsZU1hcCkge1xuICBsZXQgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21SdWxlKHJ1bGUpO1xuXG4gIGlmIChyZWR1Y2VkUnVsZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJlZHVjZWRSdWxlKHJlZHVjZWRSdWxlKSxcbiAgICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCksXG4gICAgICAgICAgZGVmaW5pdGlvbnMgPSByZWR1Y2VkUnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgIGRlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG5cbiAgICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcblxuICAgIHJ1bGVNYXBbcmVkdWNlZFJ1bGVOYW1lXSA9IHJlZHVjZWRSdWxlO1xuXG4gICAgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gIGZpbHRlcihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5pbmNsdWRlcyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoIXJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5wdXNoKGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU5hbWUpIHtcbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgICByZXR1cm4gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0pO1xuXG4gIHJldHVybiBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNFeChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lLCBydWxlTmFtZSkge1xuICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb25zID0gW107XG5cbiAgbGV0IHJlcGxhY2VtZW50RGVmaW5pdGlvbixcbiAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQTtcblxuICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkIgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG5cbiAgY29uc3QgZmlyc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0KGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BID0gZmlyc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgIC8vL1xuXG4gIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc1JlcGVhdGVkUnVsZU5hbWVBbmRSdWxlTmFtZShsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkEsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQiwgcmVwZWF0ZWRSdWxlTmFtZSwgcnVsZU5hbWUpOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUmVwZWF0ZWRSdWxlTmFtZUFuZFJ1bGVOYW1lKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQiwgcmVwZWF0ZWRSdWxlTmFtZSwgcnVsZU5hbWUpOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50RGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAocGFydHMsIHJ1bGVOYW1lKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVBhcnRzQW5kUnVsZU5hbWUocGFydHMsIHJ1bGVOYW1lKTtcblxuICAgIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuICB9KTtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmVwZWF0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJlcGVhdGVkUnVsZSA9IFJlcGVhdGVkUnVsZS5mcm9tRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgcnVsZU1hcFtyZXBlYXRlZFJ1bGVOYW1lXSA9IHJlcGVhdGVkUnVsZTtcblxuICByZXR1cm4gcmVwZWF0ZWRSdWxlTmFtZTtcbn1cblxuZnVuY3Rpb24gcmVwZWF0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCkge1xuICBsZXQgcmVwZWF0ZWRSdWxlTmFtZSA9IG51bGw7XG5cbiAgY29uc3QgcmVwZWF0ZWRSdWxlID0gUmVwZWF0ZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICBpZiAocmVwZWF0ZWRSdWxlICE9PSBudWxsKSB7XG4gICAgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlcGVhdGVkUnVsZU5hbWVdID0gcmVwZWF0ZWRSdWxlO1xuICB9XG5cbiAgcmV0dXJuIHJlcGVhdGVkUnVsZU5hbWU7XG59XG5cbmZ1bmN0aW9uIG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChwYXJ0cywgcnVsZU5hbWUpID0+IHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgY29uc3QgZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoKTtcblxuICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUGFydHNSdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhwYXJ0cywgcnVsZU5hbWUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zKSB7XG4gIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIGxhc3QpIHtcbiAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IFtdLFxuICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxhc3QgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbixcbiAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kUmVwZWF0ZWRSdWxlTmFtZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lKTsgIC8vL1xuXG4gIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMucHVzaChyZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gIGlmIChyZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb24gPSBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7ICAvLy9cblxuICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMucHVzaChyZXBsYWNlbWVudERlZmluaXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50RGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gbnVsbCkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChkZWZpbml0aW9uIGluc3RhbmNlb2YgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICBpZiAobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBkZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMoKSxcbiAgICAgICAgICAgIGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gZmlyc3QobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyksXG4gICAgICAgICAgICBydWxlTmFtZSA9IGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAvLy9cblxuICAgICAgaWYgKHJ1bGVOYW1lID09PSBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBsZXQgbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG51bGw7XG5cbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIC8vL1xuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGlmIChtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID09PSBudWxsKSB7XG4gICAgICBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5NYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmlzR3JlYXRlclRoYW4obWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgIGlmIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbk1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJmaXJzdCIsImFycmF5VXRpbGl0aWVzIiwiZmlsdGVyIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicnVsZU1hcCIsIm1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImdldFJ1bGVOYW1lIiwicnVsZSIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0xlbmd0aCIsImxlbmd0aCIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVkdWNlUnVsZSIsInJlcGVhdGVkUnVsZU5hbWUiLCJyZXBlYXREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVtb3ZlRGVmaW5pdGlvbnMiLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVtb3ZlQWxsRGVmaW5pdGlvbnMiLCJmb3JFYWNoIiwiZGVmaW5pdGlvbiIsImFkZERlZmluaXRpb24iLCJsYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlcGxhY2VkRGVmaW5pdGlvbiIsInJlcGxhY2VtZW50RGVmaW5pdGlvbnMiLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zRXgiLCJyZXBsYWNlRGVmaW5pdGlvbiIsImZpcnN0UmVwbGFjZW1lbnREZWZpbml0aW9uIiwiYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tUnVsZSIsIkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVJlZHVjZWRSdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwiZ2V0TmFtZSIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5jbHVkZXMiLCJwdXNoIiwibWFwIiwiZnJvbVJ1bGVOYW1lTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25CIiwiZmlyc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zUmVwZWF0ZWRSdWxlTmFtZUFuZFJ1bGVOYW1lIiwiZnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUmVwZWF0ZWRSdWxlTmFtZUFuZFJ1bGVOYW1lIiwibWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJwYXJ0cyIsImZyb21QYXJ0c0FuZFJ1bGVOYW1lIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwiZnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXBlYXRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVBhcnRzUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJsYXN0IiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kUmVwZWF0ZWRSdWxlTmFtZSIsImZyb21SZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwiZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsImZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5NYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaXNHcmVhdGVyVGhhbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7ZUFjV0EsOEJBQThCOzs7O3lCQVp2QixXQUFXOzhDQUVsQixnQkFBZ0I7K0NBQ2YsaUJBQWlCOzJDQUNOLDZCQUE2QjsrQ0FDckIsc0NBQXNDO2lEQUNwQyx3Q0FBd0M7MkJBRXhDLHlCQUF5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFdkUsSUFBUUMsS0FBSyxHQUFhQyxVQUFjLGVBQUEsQ0FBaENELEtBQUssRUFBRUUsTUFBTSxHQUFLRCxVQUFjLGVBQUEsQ0FBekJDLE1BQU0sQUFBb0I7QUFFMUIsU0FBU0gsOEJBQThCLENBQUNJLHdCQUF3QixFQUFFQyxPQUFPLEVBQUU7SUFDeEYsSUFBSUMsd0NBQXdDLEdBQUdDLGdEQUFnRCxDQUFDSCx3QkFBd0IsQ0FBQyxBQUFDO0lBRTFILE1BQU9FLHdDQUF3QyxLQUFLLElBQUksQ0FBRTtRQUN4RCxJQUFJRSxpQ0FBaUMsR0FBR0Ysd0NBQXdDLEVBQzVFRyxRQUFRLEdBQUdELGlDQUFpQyxDQUFDRSxXQUFXLEVBQUUsRUFDMURDLElBQUksR0FBR04sT0FBTyxDQUFDSSxRQUFRLENBQUMsRUFDeEJHLFdBQVcsR0FBR0QsSUFBSSxDQUFDRSxjQUFjLEVBQUUsQUFBQztRQUV4QyxJQUFNQyxnQ0FBZ0MsR0FBR0Msd0NBQXdD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