"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateIndirectLeftRecursion;
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _parts = require("./utilities/parts");
var _class = require("./utilities/class");
var _part = require("./utilities/part");
var _definitions = require("./utilities/definitions");
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    indirectlyLeftRecursiveRules.forEach(function(indirectlyLeftRecursiveRule) {
        var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
        var implicitlyLeftRecursiveRuleNames = retrieveImplicitlyLeftRecursiveRuleNames(indirectlyLeftRecursiveRule);
        implicitlyLeftRecursiveRuleNames.forEach(function(implicitlyLeftRecursiveRuleName, index) {
            var leftRecursiveDefinition, directlyLeftRecursiveDefinition;
            var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, implicitlyLeftRecursiveRuleName), indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions), repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinitionAndIndex(indirectlyLeftRecursiveDefinition, index), repeatedRuleName = repeatedRule.getName();
            ruleMap[repeatedRuleName] = repeatedRule;
            var indirectlyLeftRecursiveRuleDefinitions = indirectlyLeftRecursiveRule.getDefinitions(), lastIndirectlyLeftRecursiveRuleDefinition = last(indirectlyLeftRecursiveRuleDefinitions);
            leftRecursiveDefinition = lastIndirectlyLeftRecursiveRuleDefinition; ///
            directlyLeftRecursiveDefinition = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, repeatedRuleName);
            var implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), definitions = [
                directlyLeftRecursiveDefinition,
                leftRecursiveDefinition
            ];
            directlyLeftRecursiveDefinition = rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, definitions, ruleMap);
            leftRecursiveDefinition = directlyLeftRecursiveDefinition; ///
            leftRecursiveDefinitions.push(leftRecursiveDefinition);
        });
    });
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var first = _necessary.arrayUtilities.first, last = _necessary.arrayUtilities.last, tail = _necessary.arrayUtilities.tail;
function retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = [];
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], indirectlyLeftRecursiveRulesIncludesRule = indirectlyLeftRecursiveRules.includes(rule);
            if (!indirectlyLeftRecursiveRulesIncludesRule) {
                var indirectlyLeftRecursiveRule = rule; ///
                indirectlyLeftRecursiveRules.push(indirectlyLeftRecursiveRule);
            }
        }
    });
    return indirectlyLeftRecursiveRules;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions).mergeLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, _indirectly.default);
    return indirectlyLeftRecursiveDefinition;
}
function retrieveImplicitlyLeftRecursiveRuleNames(indirectlyLeftRecursiveRule) {
    var implicitlyLeftRecursiveRuleNames = [], definitions = indirectlyLeftRecursiveRule.getDefinitions();
    definitions.forEach(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = definition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), implicitlyLeftRecursiveRuleNamesIncludesRuleName = implicitlyLeftRecursiveRuleNames.includes(ruleName);
            if (!implicitlyLeftRecursiveRuleNamesIncludesRuleName) {
                var implicitlyLeftRecursiveRuleName = ruleName; ///
                implicitlyLeftRecursiveRuleNames.push(implicitlyLeftRecursiveRuleName);
            }
        }
    });
    return implicitlyLeftRecursiveRuleNames;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, repeatedRuleName) {
    var parts = indirectlyLeftRecursiveDefinition.getParts();
    var firstPart = first(parts), repeatedRuleNamePart = (0, _part).ruleNamePartFromRuleName(repeatedRuleName);
    parts = [
        firstPart,
        repeatedRuleNamePart
    ];
    var ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), directlyLeftRecursiveDefinition = _directly.default.fromRuleNameAndParts(ruleName, parts);
    return directlyLeftRecursiveDefinition;
}
function rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, definitions, ruleMap) {
    var _rule;
    var rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), implicitlyLeftRecursiveDefinitionParts = implicitlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        implicitlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(implicitlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(implicitlyLeftRecursiveDefinitionParts));
        var ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = implicitlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions, firstRewrittenDefinition = first(rewrittenDefinitions), directlyLeftRecursiveDefinition = firstRewrittenDefinition; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
    return directlyLeftRecursiveDefinition;
}
function retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, implicitlyLeftRecursiveRuleName) {
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = definition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName = implicitlyLeftRecursiveDefinition.getRuleName();
            if (ruleName === implicitlyLeftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBjbG9uZVBhcnRzIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRzXCI7XG5pbXBvcnQgeyBpc0luc3RhbmNlT2YgfSBmcm9tIFwiLi91dGlsaXRpZXMvY2xhc3NcIjtcbmltcG9ydCB7IHJ1bGVOYW1lUGFydEZyb21SdWxlTmFtZSB9IGZyb20gXCIuL3V0aWxpdGllcy9wYXJ0XCI7XG5pbXBvcnQgeyBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3V0aWxpdGllcy9kZWZpbml0aW9uc1wiO1xuXG5jb25zdCB7IGZpcnN0LCBsYXN0LCB0YWlsIH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzID0gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5mb3JFYWNoKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpID0+IHtcbiAgICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICAgIGNvbnN0IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gcmV0cmlldmVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuXG4gICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgaW5kZXgpID0+IHtcbiAgICAgIGxldCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbixcbiAgICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSxcbiAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgICAgIHJlcGVhdGVkUnVsZSA9IFJlcGVhdGVkUnVsZS5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kZXgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRleCksXG4gICAgICAgICAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICAgICAgcnVsZU1hcFtyZXBlYXRlZFJ1bGVOYW1lXSA9IHJlcGVhdGVkUnVsZTtcblxuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgICAgIGxhc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9uID0gbGFzdChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9ucyk7XG5cbiAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZURlZmluaXRpb247ICAvLy9cblxuICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lKTtcblxuICAgICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnMgPSBbXG4gICAgICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sXG4gICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uXG4gICAgICAgICAgICBdO1xuXG4gICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5wdXNoKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyA9IFtdO1xuXG4gIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICAgICAgcnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc1J1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLmluY2x1ZGVzKHJ1bGUpO1xuXG4gICAgICBpZiAoIWluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXNJbmNsdWRlc1J1bGUpIHtcbiAgICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlID0gcnVsZTsgLy8vXG5cbiAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5wdXNoKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcztcbn1cblxuZnVuY3Rpb24gbWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSkge1xuICBjb25zdCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IFtdLFxuICAgICAgICBkZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZS5nZXREZWZpbml0aW9ucygpO1xuXG4gIGRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1J1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMuaW5jbHVkZXMocnVsZU5hbWUpO1xuXG4gICAgICBpZiAoIWltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSdWxlTmFtZSkge1xuICAgICAgICBjb25zdCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gcnVsZU5hbWU7ICAvLy9cblxuICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcy5wdXNoKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSkge1xuICBsZXQgIHBhcnRzID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7XG5cbiAgY29uc3QgZmlyc3RQYXJ0ID0gZmlyc3QocGFydHMpLFxuICAgICAgICByZXBlYXRlZFJ1bGVOYW1lUGFydCA9IHJ1bGVOYW1lUGFydEZyb21SdWxlTmFtZShyZXBlYXRlZFJ1bGVOYW1lKVxuXG4gIHBhcnRzID0gW1xuICAgIGZpcnN0UGFydCxcbiAgICByZXBlYXRlZFJ1bGVOYW1lUGFydFxuICBdO1xuXG4gIGNvbnN0IHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlTmFtZUFuZFBhcnRzKHJ1bGVOYW1lLCBwYXJ0cyk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLm1hcCgoZGVmaW5pdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBEZWZpbml0aW9uID0gKGluZGV4ID09PSAwKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICAgICAgICAgIGxldCBkZWZpbml0aW9uUGFydHMgPSBkZWZpbml0aW9uLmdldFBhcnRzKCksXG4gICAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFBhcnRzKCk7XG5cbiAgICAgICAgICBkZWZpbml0aW9uUGFydHMgPSBjbG9uZVBhcnRzKGRlZmluaXRpb25QYXJ0cyk7ICAvLy9cblxuICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzID0gdGFpbChjbG9uZVBhcnRzKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzKSk7ICAvLy9cblxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gW1xuICAgICAgICAgICAgLi4uZGVmaW5pdGlvblBhcnRzLFxuICAgICAgICAgICAgLi4uaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHNcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVSdWxlTmFtZXMgPSBudWxsLCAgLy8vXG4gICAgICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IG51bGw7ICAvLy9cblxuICAgICAgICAgIGRlZmluaXRpb24gPSBuZXcgRGVmaW5pdGlvbihwYXJ0cywgcnVsZU5hbWUsIHJlY3Vyc2l2ZVJ1bGVOYW1lcywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyk7IC8vL1xuXG4gICAgICAgICAgY29uc3QgcmV3cml0dGVuRGVmaW5pdGlvbiA9IGRlZmluaXRpb247IC8vL1xuXG4gICAgICAgICAgcmV0dXJuIHJld3JpdHRlbkRlZmluaXRpb247XG4gICAgICAgIH0pLFxuICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpLFxuICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0sXG4gICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb25zID0gcmV3cml0dGVuRGVmaW5pdGlvbnMsICAvLy9cbiAgICAgICAgZmlyc3RSZXdyaXR0ZW5EZWZpbml0aW9uID0gZmlyc3QocmV3cml0dGVuRGVmaW5pdGlvbnMpLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3RSZXdyaXR0ZW5EZWZpbml0aW9uOyAvLy9cblxuICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgLi4ucmVwbGFjZW1lbnREZWZpbml0aW9ucyk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUpIHtcbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLmZpbHRlcigoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpc0luc3RhbmNlT2YoZGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgIGlmIChkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBkZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgIHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG5cbiAgICAgICAgICAgIGlmIChydWxlTmFtZSA9PT0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuIl0sIm5hbWVzIjpbImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJ1bGVNYXAiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwicmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzIiwiZm9yRWFjaCIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZFJ1bGVOYW1lIiwiZ2V0TmFtZSIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmV0cmlldmVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRleCIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXBlYXRlZFJ1bGUiLCJSZXBlYXRlZFJ1bGUiLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kZXgiLCJyZXBlYXRlZFJ1bGVOYW1lIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsImxhc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9uIiwibGFzdCIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkZWZpbml0aW9ucyIsInJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJwdXNoIiwiZmlyc3QiLCJhcnJheVV0aWxpdGllcyIsInRhaWwiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImlzSW5zdGFuY2VPZiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJ1bGVOYW1lIiwiZ2V0UnVsZU5hbWUiLCJydWxlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSIsImluY2x1ZGVzIiwibWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uIiwiZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSdWxlTmFtZSIsInBhcnRzIiwiZ2V0UGFydHMiLCJmaXJzdFBhcnQiLCJyZXBlYXRlZFJ1bGVOYW1lUGFydCIsInJ1bGVOYW1lUGFydEZyb21SdWxlTmFtZSIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUnVsZU5hbWVBbmRQYXJ0cyIsInJld3JpdHRlbkRlZmluaXRpb25zIiwibWFwIiwiRGVmaW5pdGlvbiIsIkxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGVmaW5pdGlvblBhcnRzIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUGFydHMiLCJjbG9uZVBhcnRzIiwicmVjdXJzaXZlUnVsZU5hbWVzIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJld3JpdHRlbkRlZmluaXRpb24iLCJyZXBsYWNlZERlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb25zIiwiZmlyc3RSZXdyaXR0ZW5EZWZpbml0aW9uIiwicmVwbGFjZURlZmluaXRpb24iLCJmaWx0ZXIiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztrQkFpQldBLDhCQUE4QjtBQWZ2QixJQUFBLFVBQVcsV0FBWCxXQUFXLENBQUE7QUFFbEIsSUFBQSxRQUFnQixrQ0FBaEIsZ0JBQWdCLEVBQUE7QUFDZixJQUFBLFNBQWlCLGtDQUFqQixpQkFBaUIsRUFBQTtBQUNOLElBQUEsS0FBNkIsa0NBQTdCLDZCQUE2QixFQUFBO0FBQ3JCLElBQUEsU0FBc0Msa0NBQXRDLHNDQUFzQyxFQUFBO0FBQ3BDLElBQUEsV0FBd0Msa0NBQXhDLHdDQUF3QyxFQUFBO0FBRTNELElBQUEsTUFBbUIsV0FBbkIsbUJBQW1CLENBQUE7QUFDakIsSUFBQSxNQUFtQixXQUFuQixtQkFBbUIsQ0FBQTtBQUNQLElBQUEsS0FBa0Is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