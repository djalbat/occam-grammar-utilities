"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = eliminateIndirectLeftRecursion;
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _parts = require("./utilities/parts");
var _class = require("./utilities/class");
var _definitions = require("./utilities/definitions");
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    indirectlyLeftRecursiveRules.forEach(function(indirectlyLeftRecursiveRule) {
        var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
        var implicitlyLeftRecursiveRuleNames = retrieveImplicitlyLeftRecursiveRuleNames(indirectlyLeftRecursiveRule);
        implicitlyLeftRecursiveRuleNames.forEach(function(implicitlyLeftRecursiveRuleName, index) {
            var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, implicitlyLeftRecursiveRuleName), indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions);
            var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinitionAndIndex(indirectlyLeftRecursiveDefinition, index), repeatedRuleName = repeatedRule.getName();
            ruleMap[repeatedRuleName] = repeatedRule;
            var rewrittenDefinition = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, repeatedRuleName);
        });
    });
// indirectlyLeftRecursiveDefinitions.forEach((indirectlyLeftRecursiveDefinition) => {
//   const indirectlyLeftRecursiveDefinitionRuleName = indirectlyLeftRecursiveDefinition.getRuleName(),
//         indirectlyLeftRecursiveRuleName = indirectlyLeftRecursiveDefinitionRuleName,  ///
//         indirectlyLeftRecursiveRule = ruleMap[indirectlyLeftRecursiveRuleName];
//
//   rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, ruleMap);
//
//   const implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(),
//         implicitlyLeftRecursiveDefinitionRuleName = implicitlyLeftRecursiveDefinition.getRuleName(),
//         implicitlyLeftRecursiveRuleName = implicitlyLeftRecursiveDefinitionRuleName,  ///
//         implicitlyLeftRecursiveRule = ruleMap[implicitlyLeftRecursiveRuleName];
//
//   rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap);
//
//   rewriteImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRule, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap);
// });
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var tail = _necessary.arrayUtilities.tail, filter = _necessary.arrayUtilities.filter;
function rewriteImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule, indirectlyLeftRecursiveRule, indirectlyLeftRecursiveDefinition, leftRecursiveDefinitions, ruleMap) {
    var reducedRule = _reduced.default.fromImplicitlyLeftRecursiveRule(implicitlyLeftRecursiveRule), reducedRuleName = reducedRule.getName();
    ruleMap[reducedRuleName] = reducedRule;
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = leftRecursiveDefinition === indirectlyLeftRecursiveDefinition;
        if (!leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveRule.removeDefinition(indirectlyLeftRecursiveDefinition);
}
function retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = [];
    leftRecursiveDefinitions.forEach(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(leftRecursiveDefinition, _indirectly.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], indirectlyLeftRecursiveRulesIncludesRule = indirectlyLeftRecursiveRules.includes(rule);
            if (!indirectlyLeftRecursiveRulesIncludesRule) {
                var indirectlyLeftRecursiveRule = rule; ///
                indirectlyLeftRecursiveRules.push(indirectlyLeftRecursiveRule);
            }
        }
    });
    return indirectlyLeftRecursiveRules;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions).mergeLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, _indirectly.default);
    return indirectlyLeftRecursiveDefinition;
}
function retrieveImplicitlyLeftRecursiveRuleNames(indirectlyLeftRecursiveRule) {
    var implicitlyLeftRecursiveRuleNames = [], definitions = indirectlyLeftRecursiveRule.getDefinitions();
    definitions.forEach(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = definition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), implicitlyLeftRecursiveRuleNamesIncludesRuleName = implicitlyLeftRecursiveRuleNames.includes(ruleName);
            if (!implicitlyLeftRecursiveRuleNamesIncludesRuleName) {
                var implicitlyLeftRecursiveRuleName = ruleName; ///
                implicitlyLeftRecursiveRuleNames.push(implicitlyLeftRecursiveRuleName);
            }
        }
    });
    return implicitlyLeftRecursiveRuleNames;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, repeatedRuleName) {
    var parts = indirectlyLeftRecursiveDefinition.getParts();
    return null;
}
function rewriteImplicitlyLeftRecursiveDefinition(implicitlyLeftRecursiveDefinition, indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap) {
    var _rule;
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), rewrittenDefinitions = definitions.map(function(definition, index) {
        var Definition = index === 0 ? _directly.default : _left.default;
        var definitionParts = definition.getParts(), implicitlyLeftRecursiveDefinitionParts = implicitlyLeftRecursiveDefinition.getParts();
        definitionParts = (0, _parts).cloneParts(definitionParts); ///
        implicitlyLeftRecursiveDefinitionParts = tail((0, _parts).cloneParts(implicitlyLeftRecursiveDefinitionParts)); ///
        var parts = _toConsumableArray(definitionParts).concat(_toConsumableArray(implicitlyLeftRecursiveDefinitionParts));
        var ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), recursiveRuleNames = null, leftRecursiveRuleNames = null; ///
        definition = new Definition(parts, ruleName, recursiveRuleNames, leftRecursiveRuleNames); ///
        var rewrittenDefinition = definition; ///
        return rewrittenDefinition;
    }), ruleName = implicitlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = implicitlyLeftRecursiveDefinition, replacementDefinitions = rewrittenDefinitions; ///
    (_rule = rule).replaceDefinition.apply(_rule, [
        replacedDefinition
    ].concat(_toConsumableArray(replacementDefinitions)));
}
function retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, implicitlyLeftRecursiveRuleName) {
    var definitions = indirectlyLeftRecursiveRule.getDefinitions(), indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = (0, _class).isInstanceOf(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinition = definition, implicitlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getImplicitlyLeftRecursiveDefinition(), ruleName = implicitlyLeftRecursiveDefinition.getRuleName();
            if (ruleName === implicitlyLeftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBjbG9uZVBhcnRzIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3BhcnRzXCI7XG5pbXBvcnQgeyBpc0luc3RhbmNlT2YgfSBmcm9tIFwiLi91dGlsaXRpZXMvY2xhc3NcIjtcbmltcG9ydCB7IG1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2RlZmluaXRpb25zXCI7XG5cbmNvbnN0IHsgdGFpbCwgZmlsdGVyIH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzID0gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5mb3JFYWNoKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpID0+IHtcbiAgICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKSxcbiAgICAgICAgICByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICAgIGNvbnN0IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gcmV0cmlldmVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuXG4gICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgoaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSxcbiAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgICAgY29uc3QgcmVwZWF0ZWRSdWxlID0gUmVwZWF0ZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRleChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGV4KSxcbiAgICAgICAgICAgIHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgICBydWxlTWFwW3JlcGVhdGVkUnVsZU5hbWVdID0gcmVwZWF0ZWRSdWxlO1xuXG4gICAgICBjb25zdCByZXdyaXR0ZW5EZWZpbml0aW9uID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpO1xuXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gIC8vICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgLy8gICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUsICAvLy9cbiAgLy8gICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlTWFwW2luZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdO1xuICAvL1xuICAvLyAgIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBydWxlTWFwKTtcbiAgLy9cbiAgLy8gICBjb25zdCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gIC8vICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgLy8gICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZU5hbWUsICAvLy9cbiAgLy8gICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlTWFwW2ltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVdO1xuICAvL1xuICAvLyAgIHJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCk7XG4gIC8vXG4gIC8vICAgcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICAvLyB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgY29uc3QgcmVkdWNlZFJ1bGUgPSBSZWR1Y2VkUnVsZS5mcm9tSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSksXG4gICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcblxuICBmaWx0ZXIobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9PT0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSlcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUucmVtb3ZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSBbXTtcblxuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sICAvLy9cbiAgICAgICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV0sXG4gICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcy5pbmNsdWRlcyhydWxlKTtcblxuICAgICAgaWYgKCFpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzSW5jbHVkZXNSdWxlKSB7XG4gICAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGU7IC8vL1xuXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMucHVzaChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXM7XG59XG5cbmZ1bmN0aW9uIG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUpIHtcbiAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSBbXSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0RGVmaW5pdGlvbnMoKTtcblxuICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGlzSW5zdGFuY2VPZihkZWZpbml0aW9uLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sIC8vL1xuICAgICAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldEltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgcnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgICAgIGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzSW5jbHVkZXNSdWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzLmluY2x1ZGVzKHJ1bGVOYW1lKTtcblxuICAgICAgaWYgKCFpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lc0luY2x1ZGVzUnVsZU5hbWUpIHtcbiAgICAgICAgY29uc3QgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IHJ1bGVOYW1lOyAgLy8vXG5cbiAgICAgICAgaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMucHVzaChpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpIHtcbiAgY29uc3QgcGFydHMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UGFydHMoKTtcblxuICByZXR1cm4gbnVsbDtcblxufVxuXG5mdW5jdGlvbiByZXdyaXRlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApIHtcbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgcmV3cml0dGVuRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucy5tYXAoKGRlZmluaXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgRGVmaW5pdGlvbiA9IChpbmRleCA9PT0gMCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgICAgICAgICBsZXQgZGVmaW5pdGlvblBhcnRzID0gZGVmaW5pdGlvbi5nZXRQYXJ0cygpLFxuICAgICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cyA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRQYXJ0cygpO1xuXG4gICAgICAgICAgZGVmaW5pdGlvblBhcnRzID0gY2xvbmVQYXJ0cyhkZWZpbml0aW9uUGFydHMpOyAgLy8vXG5cbiAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cyA9IHRhaWwoY2xvbmVQYXJ0cyhpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cykpOyAgLy8vXG5cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IFtcbiAgICAgICAgICAgIC4uLmRlZmluaXRpb25QYXJ0cyxcbiAgICAgICAgICAgIC4uLmltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblBhcnRzXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlUnVsZU5hbWVzID0gbnVsbCwgIC8vL1xuICAgICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSBudWxsOyAgLy8vXG5cbiAgICAgICAgICBkZWZpbml0aW9uID0gbmV3IERlZmluaXRpb24ocGFydHMsIHJ1bGVOYW1lLCByZWN1cnNpdmVSdWxlTmFtZXMsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpOyAvLy9cblxuICAgICAgICAgIGNvbnN0IHJld3JpdHRlbkRlZmluaXRpb24gPSBkZWZpbml0aW9uOyAvLy9cblxuICAgICAgICAgIHJldHVybiByZXdyaXR0ZW5EZWZpbml0aW9uO1xuICAgICAgICB9KSxcbiAgICAgICAgcnVsZU5hbWUgPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKSxcbiAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sICAvLy9cbiAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IHJld3JpdHRlbkRlZmluaXRpb25zOyAgLy8vXG5cbiAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gIGNvbnN0IGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucy5maWx0ZXIoKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaXNJbnN0YW5jZU9mKGRlZmluaXRpb24sIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgICAgICAgICBpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgICAgICAgICBydWxlTmFtZSA9IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuXG4gICAgICAgICAgICBpZiAocnVsZU5hbWUgPT09IGltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZU5hbWUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJydWxlTWFwIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImZvckVhY2giLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZWR1Y2VkUnVsZSIsIlJlZHVjZWRSdWxlIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsInJlZHVjZWRSdWxlTmFtZSIsImdldE5hbWUiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyIsInJldHJpZXZlSW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiaW5kZXgiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZEluZGV4IiwicmVwZWF0ZWRSdWxlTmFtZSIsInJld3JpdHRlbkRlZmluaXRpb24iLCJyZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwidGFpbCIsImFycmF5VXRpbGl0aWVzIiwiZmlsdGVyIiwicmV3cml0ZUltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUnVsZSIsImZyb21JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVtb3ZlRGVmaW5pdGlvbiIsImlzSW5zdGFuY2VPZiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJ1bGVOYW1lIiwiZ2V0UnVsZU5hbWUiLCJydWxlIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlc0luY2x1ZGVzUnVsZSIsImluY2x1ZGVzIiwicHVzaCIsIm1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGVmaW5pdGlvbnMiLCJnZXREZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0SW1wbGljaXRseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW1wbGljaXRseUxlZnRSZWN1cnNpdmVSdWxlTmFtZXNJbmNsdWRlc1J1bGVOYW1lIiwicGFydHMiLCJnZXRQYXJ0cyIsInJld3JpdGVJbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXR0ZW5EZWZpbml0aW9ucyIsIm1hcCIsIkRlZmluaXRpb24iLCJEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkZWZpbml0aW9uUGFydHMiLCJpbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25QYXJ0cyIsImNsb25lUGFydHMiLCJyZWN1cnNpdmVSdWxlTmFtZXMiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwicmVwbGFjZWREZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsInJlcGxhY2VEZWZpbml0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7a0JBZ0JXQSw4QkFBOEI7QUFkdkIsSUFBQSxVQUFXLFdBQVgsV0FBVyxDQUFBO0FBRWxCLElBQUEsUUFBZ0Isa0NBQWhCLGdCQUFnQixFQUFBO0FBQ2YsSUFBQSxTQUFpQixrQ0FBakIsaUJBQWlCLEVBQUE7QUFDTixJQUFBLEtBQTZCLGtDQUE3Qiw2QkFBNkIsRUFBQTtBQUNyQixJQUFBLFNBQXNDLGtDQUF0QyxzQ0FBc0MsRUFBQTtBQUNwQyxJQUFBLFdBQXdDLGtDQUF4Qyx3Q0FBd0MsRUFBQTtBQUUzRCxJQUFBLE1BQW1CLFdBQW5CLG1CQUFtQixDQUFBO0FBQ2pCLElBQUEsTUFBbUIsV0FBbkIsbUJBQW1CLENBQUE7QUFDRixJQUFBLFlBQXlCLFdBQXpCLHlCQUF5QixDQUFBO0FBSXhELFNBQVNBLDhCQUE4QixDQUFDQyx3QkFBd0IsRUFBRUMsT0FBTyxFQUFFO0lBQ3hGLElBQU1DLDRCQUE0QixHQUFHQyxvQ0FBb0MsQ0FBQ0gsd0JBQXdCLEVBQUVDLE9BQU8sQ0FBQyxBQUFDO0lBRTdHQyw0QkFBNEIsQ0FBQ0UsT0FBTyxDQUFDLFNBQUNDLDJCQUEyQixFQUFLO1FBQ3BFLElBQU1DLFdBQVcsR0FBR0MsUUFBVyxRQUFBLENBQUNDLCtCQUErQixDQUFDSCwyQkFBMkIsQ0FBQyxFQUN0RkksZUFBZSxHQUFHSCxXQUFXLENBQUNJLE9BQU8sRUFBRSxBQUFDO1FBRTlDVCxPQUFPLENBQUNRLGVBQWUsQ0FBQyxHQUFHSCxXQUFXLENBQUM7UUFFdkMsSUFBTUssZ0NBQWdDLEdBQUdDLHdDQUF3QyxDQUFDUCwyQkFBMkIsQ0FBQyxBQUFDO1FBRS9HTSxnQ0FBZ0MsQ0FBQ1AsT0FBTyxDQUFDLFNBQUNTLCtCQUErQixFQUFFQyxLQUFLLEVBQUs7WUFDbkYsSUFBTUMsa0NBQWtD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