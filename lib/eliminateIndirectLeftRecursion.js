"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateIndirectLeftRecursion;
    }
});
var _necessary = require("necessary");
var _reduced = /*#__PURE__*/ _interopRequireDefault(require("./rule/reduced"));
var _repeated = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated"));
var _left = /*#__PURE__*/ _interopRequireDefault(require("./definition/recursive/left"));
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _definitions = require("./utilities/definitions");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    while(maximalIndirectlyLeftRecursiveDefinition !== null){
        var _rule;
        var indirectlyLeftRecursiveDefinition = maximalIndirectlyLeftRecursiveDefinition; ///
        var replacedDefinition = void 0, replacementDefinitions = void 0;
        var ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions();
        var indirectlyLeftRecursiveDefinitions = void 0;
        var directlyLeftRecursiveDefinitions = retrieveDirectlyLeftRecursiveDefinitions(definitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
        if (directlyLeftRecursiveDefinitionsLength > 0) {
        // let definitions;
        //
        // const directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions);
        //
        // reduceRule(rule, ruleMap);
        //
        // definitions = directlyLeftRecursiveDefinitions; ///
        //
        // rule.removeDefinitions(definitions);
        //
        // definitions = rule.getDefinitions();
        //
        // definitions = rewriteLeftRecursiveDefinitions(definitions, directlyLeftRecursiveDefinition, ruleName); ///
        //
        // rule.removeAllDefinitions();
        //
        // definitions.forEach((definition) => {
        //   rule.addDefinition(definition);
        // });
        //
        // const lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(),
        //       leftRecursiveDefinition = lastLeftRecursiveDefinition;  ///
        //
        // ruleName = leftRecursiveDefinition.getRuleName();
        //
        // rule = ruleMap[ruleName];
        //
        // const repeatedRuleName = repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap);
        //
        // replacedDefinition = leftRecursiveDefinition; ///
        //
        // replacementDefinitions = rewriteLeftRecursiveDefinitionsEx(definitions, leftRecursiveDefinition, repeatedRuleName, ruleName);
        } else {
            var leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
            indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions, leftRecursiveRuleName);
            indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions); ///
            var last = indirectlyLeftRecursiveDefinition.isLast(), lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(), leftRecursiveDefinition = lastLeftRecursiveDefinition; ///
            var reducedRuleName = reduceRule(rule, ruleMap), repeatedRuleName = repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap);
            ruleName = leftRecursiveDefinition.getRuleName();
            rule = ruleMap[ruleName];
            replacedDefinition = leftRecursiveDefinition; ///
            replacementDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, reducedRuleName, last);
        }
        var firstReplacementDefinition = first(replacementDefinitions), addedLeftRecursiveDefinition = firstReplacementDefinition, removedLeftRecursiveDefinitions = _toConsumableArray(indirectlyLeftRecursiveDefinitions).concat(_toConsumableArray(directlyLeftRecursiveDefinitions));
        (_rule = rule).replaceDefinition.apply(_rule, [
            replacedDefinition
        ].concat(_toConsumableArray(replacementDefinitions)));
        amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition); ///
        maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    }
}
function reduceRule(rule, ruleMap) {
    var reducedRuleName = null;
    var reducedRule = _reduced.default.fromRule(rule);
    if (reducedRule !== null) {
        reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
    }
    return reducedRuleName;
}
function amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition) {
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    leftRecursiveDefinitions.push(addedLeftRecursiveDefinition);
}
function rewriteLeftRecursiveDefinitions(leftRecursiveDefinitions, directlyLeftRecursiveDefinition, ruleName) {
    leftRecursiveDefinitions = leftRecursiveDefinitions.map(function(leftRecursiveDefinition) {
        leftRecursiveDefinition = _left.default.fromRuleNameLeftRecursiveDefinitionAndDirectlyLeftRecursiveDefinition(ruleName, leftRecursiveDefinition, directlyLeftRecursiveDefinition); ///
        return leftRecursiveDefinition;
    });
    return leftRecursiveDefinitions;
}
function rewriteLeftRecursiveDefinitionsEx(leftRecursiveDefinitions, leftRecursiveDefinition, repeatedRuleName, ruleName) {
    var replacementDefinitions = [];
    var replacementDefinition, leftRecursiveDefinitionA;
    var leftRecursiveDefinitionB = leftRecursiveDefinition; ///
    var firstLeftRecursiveDefinition = first(leftRecursiveDefinitions);
    leftRecursiveDefinitionA = firstLeftRecursiveDefinition; ///
    replacementDefinition = _directly.default.fromLeftRecursiveDefinitionsRepeatedRuleNameAndRuleName(leftRecursiveDefinitionA, leftRecursiveDefinitionB, repeatedRuleName, ruleName); ///
    replacementDefinitions.push(replacementDefinition);
    replacementDefinition = _left.default.fromLeftRecursiveDefinitionRepeatedRuleNameAndRuleName(leftRecursiveDefinitionB, repeatedRuleName, ruleName); ///
    replacementDefinitions.push(replacementDefinition);
    return replacementDefinitions;
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var directlyLeftRecursiveDefinition = _directly.default.fromPartsAndRuleName(parts, ruleName);
        return directlyLeftRecursiveDefinition;
    });
    return directlyLeftRecursiveDefinition;
}
function repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRule = _repeated.default.fromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition), repeatedRuleName = repeatedRule.getName();
    ruleMap[repeatedRuleName] = repeatedRule;
    return repeatedRuleName;
}
function repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRuleName = null;
    var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition);
    if (repeatedRule !== null) {
        repeatedRuleName = repeatedRule.getName();
        ruleMap[repeatedRuleName] = repeatedRule;
    }
    return repeatedRuleName;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var indirectlyLeftRecursiveDefinition;
        var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions);
        indirectlyLeftRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition; ///
        var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions();
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromPartsRuleNameAndLeftRecursiveDefinitions(parts, ruleName, leftRecursiveDefinitions);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinition;
}
function retrieveDirectlyLeftRecursiveDefinitions(definitions) {
    var directlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionDirectlyLeftRecursiveDefinition = _instanceof(definition, _directly.default);
        if (definitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, reducedRuleName, last) {
    var replacementDefinitions = [], LeftRecursiveDefinition = last ? _directly.default : _indirectly.default, replacementDefinition = LeftRecursiveDefinition.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName); ///
    replacementDefinitions.push(replacementDefinition);
    if (reducedRuleName !== null) {
        var replacementDefinition1 = LeftRecursiveDefinition.fromLeftRecursiveDefinitionAndReducedRuleName(leftRecursiveDefinition, reducedRuleName); ///
        replacementDefinitions.push(replacementDefinition1);
    }
    return replacementDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(definitions) {
    var leftRecursiveRuleName = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
    var indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = _instanceof(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            if (leftRecursiveRuleName === null) {
                return true;
            }
            var indirectlyLeftRecursiveDefinition = definition, leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), ruleName = firstLeftRecursiveRuleName; ///
            if (ruleName === leftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions) {
    var maximalIndirectlyLeftRecursiveDefinition = null;
    var definitions = leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (maximalIndirectlyLeftRecursiveDefinition === null) {
            maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(maximalIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition) {
                maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return maximalIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3V0aWxpdGllcy9kZWZpbml0aW9uc1wiO1xuXG5jb25zdCB7IGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgd2hpbGUgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG5cbiAgICBsZXQgcmVwbGFjZWREZWZpbml0aW9uLFxuICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb25zO1xuXG4gICAgbGV0IHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG5cbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcblxuICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyksXG4gICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGggPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5sZW5ndGg7XG5cbiAgICBpZiAoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGggPiAwKSB7XG4gICAgICAvLyBsZXQgZGVmaW5pdGlvbnM7XG4gICAgICAvL1xuICAgICAgLy8gY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuICAgICAgLy9cbiAgICAgIC8vIHJlZHVjZVJ1bGUocnVsZSwgcnVsZU1hcCk7XG4gICAgICAvL1xuICAgICAgLy8gZGVmaW5pdGlvbnMgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uczsgLy8vXG4gICAgICAvL1xuICAgICAgLy8gcnVsZS5yZW1vdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG4gICAgICAvL1xuICAgICAgLy8gZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG4gICAgICAvL1xuICAgICAgLy8gZGVmaW5pdGlvbnMgPSByZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zLCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTmFtZSk7IC8vL1xuICAgICAgLy9cbiAgICAgIC8vIHJ1bGUucmVtb3ZlQWxsRGVmaW5pdGlvbnMoKTtcbiAgICAgIC8vXG4gICAgICAvLyBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAvLyAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgICAgIC8vIH0pO1xuICAgICAgLy9cbiAgICAgIC8vIGNvbnN0IGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgIC8vICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG4gICAgICAvL1xuICAgICAgLy8gcnVsZU5hbWUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuICAgICAgLy9cbiAgICAgIC8vIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcbiAgICAgIC8vXG4gICAgICAvLyBjb25zdCByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKTtcbiAgICAgIC8vXG4gICAgICAvLyByZXBsYWNlZERlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gICAgICAvL1xuICAgICAgLy8gcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNFeChkZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIHJ1bGVOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZSgpO1xuXG4gICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpO1xuXG4gICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7ICAvLy9cblxuICAgICAgY29uc3QgbGFzdCA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0xhc3QoKSxcbiAgICAgICAgICAgIGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgICAgIGNvbnN0IHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZVJ1bGUocnVsZSwgcnVsZU1hcCksXG4gICAgICAgICAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcClcblxuICAgICAgcnVsZU5hbWUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlTmFtZSgpO1xuXG4gICAgICBydWxlID0gcnVsZU1hcFtydWxlTmFtZV07XG5cbiAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucyA9IHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSwgcmVkdWNlZFJ1bGVOYW1lLCBsYXN0KTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGZpcnN0KHJlcGxhY2VtZW50RGVmaW5pdGlvbnMpLFxuICAgICAgICAgIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICAgIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbXG4gICAgICAgICAgICAuLi5pbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLFxuICAgICAgICAgICAgLi4uZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNcbiAgICAgICAgICBdO1xuXG4gICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xuXG4gICAgYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTsgLy8vXG5cbiAgICBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlUnVsZShydWxlLCBydWxlTWFwKSB7XG4gIGxldCByZWR1Y2VkUnVsZU5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbVJ1bGUocnVsZSk7XG5cbiAgaWYgKHJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgcmVkdWNlZFJ1bGVOYW1lID0gcmVkdWNlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgcnVsZU1hcFtyZWR1Y2VkUnVsZU5hbWVdID0gcmVkdWNlZFJ1bGU7XG4gIH1cblxuICByZXR1cm4gcmVkdWNlZFJ1bGVOYW1lO1xufVxuXG5mdW5jdGlvbiBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgZmlsdGVyKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmluY2x1ZGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2goYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTmFtZSkge1xuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGVOYW1lLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7ICAvLy9cblxuICAgIHJldHVybiBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0V4KGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIHJ1bGVOYW1lKSB7XG4gIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSBbXTtcblxuICBsZXQgcmVwbGFjZW1lbnREZWZpbml0aW9uLFxuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BO1xuXG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICBjb25zdCBmaXJzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkEgPSBmaXJzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zUmVwZWF0ZWRSdWxlTmFtZUFuZFJ1bGVOYW1lKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25CLCByZXBlYXRlZFJ1bGVOYW1lLCBydWxlTmFtZSk7ICAvLy9cblxuICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICByZXBsYWNlbWVudERlZmluaXRpb24gPSBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SZXBlYXRlZFJ1bGVOYW1lQW5kUnVsZU5hbWUobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25CLCByZXBlYXRlZFJ1bGVOYW1lLCBydWxlTmFtZSk7ICAvLy9cblxuICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICByZXR1cm4gcmVwbGFjZW1lbnREZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChwYXJ0cywgcnVsZU5hbWUpID0+IHtcbiAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUGFydHNBbmRSdWxlTmFtZShwYXJ0cywgcnVsZU5hbWUpO1xuXG4gICAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXBlYXREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJ1bGVNYXApIHtcbiAgY29uc3QgcmVwZWF0ZWRSdWxlID0gUmVwZWF0ZWRSdWxlLmZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pLFxuICAgICAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICBydWxlTWFwW3JlcGVhdGVkUnVsZU5hbWVdID0gcmVwZWF0ZWRSdWxlO1xuXG4gIHJldHVybiByZXBlYXRlZFJ1bGVOYW1lO1xufVxuXG5mdW5jdGlvbiByZXBlYXRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTWFwKSB7XG4gIGxldCByZXBlYXRlZFJ1bGVOYW1lID0gbnVsbDtcblxuICBjb25zdCByZXBlYXRlZFJ1bGUgPSBSZXBlYXRlZFJ1bGUuZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gIGlmIChyZXBlYXRlZFJ1bGUgIT09IG51bGwpIHtcbiAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICAgIHJ1bGVNYXBbcmVwZWF0ZWRSdWxlTmFtZV0gPSByZXBlYXRlZFJ1bGU7XG4gIH1cblxuICByZXR1cm4gcmVwZWF0ZWRSdWxlTmFtZTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKHBhcnRzLCBydWxlTmFtZSkgPT4ge1xuICAgIGxldCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgICBjb25zdCBmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0KGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuXG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucygpO1xuXG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21QYXJ0c1J1bGVOYW1lQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHBhcnRzLCBydWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpIHtcbiAgY29uc3QgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucy5maWx0ZXIoKGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IChkZWZpbml0aW9uIGluc3RhbmNlb2YgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIHJlZHVjZWRSdWxlTmFtZSwgbGFzdCkge1xuICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb25zID0gW10sXG4gICAgICAgIExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLFxuICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUpOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG5cbiAgaWYgKHJlZHVjZWRSdWxlTmFtZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZFJlZHVjZWRSdWxlTmFtZShsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZFJ1bGVOYW1lKTsgIC8vL1xuXG4gICAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gIH1cblxuICByZXR1cm4gcmVwbGFjZW1lbnREZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBudWxsKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucy5maWx0ZXIoKGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBkZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGRlZmluaXRpb24gaW5zdGFuY2VvZiBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgaWYgKGRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sICAvLy9cbiAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcygpLFxuICAgICAgICAgICAgZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBmaXJzdChsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKSxcbiAgICAgICAgICAgIHJ1bGVOYW1lID0gZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWU7IC8vL1xuXG4gICAgICBpZiAocnVsZU5hbWUgPT09IGxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZU1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCBkZWZpbml0aW9ucyA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgLy8vXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgaWYgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPT09IG51bGwpIHtcbiAgICAgIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbk1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uaXNHcmVhdGVyVGhhbihtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuIl0sIm5hbWVzIjpbImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImZpcnN0IiwiYXJyYXlVdGlsaXRpZXMiLCJmaWx0ZXIiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJydWxlTWFwIiwibWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJldHJpZXZlTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJ1bGUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXBsYWNlZERlZmluaXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb25zIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsImRlZmluaXRpb25zIiwiZ2V0RGVmaW5pdGlvbnMiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGgiLCJsZW5ndGgiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJyZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJsYXN0IiwiaXNMYXN0IiwibGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZWR1Y2VkUnVsZU5hbWUiLCJyZWR1Y2VSdWxlIiwicmVwZWF0ZWRSdWxlTmFtZSIsInJlcGVhdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbiIsImFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVwbGFjZURlZmluaXRpb24iLCJhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlZHVjZWRSdWxlIiwiUmVkdWNlZFJ1bGUiLCJmcm9tUnVsZSIsImdldE5hbWUiLCJyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zSW5jbHVkZXNMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluY2x1ZGVzIiwicHVzaCIsInJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWFwIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUnVsZU5hbWVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zRXgiLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkEiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkIiLCJmaXJzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNSZXBlYXRlZFJ1bGVOYW1lQW5kUnVsZU5hbWUiLCJmcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SZXBlYXRlZFJ1bGVOYW1lQW5kUnVsZU5hbWUiLCJtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwibWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJwYXJ0cyIsImZyb21QYXJ0c0FuZFJ1bGVOYW1lIiwicmVwZWF0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlcGVhdGVkUnVsZSIsIlJlcGVhdGVkUnVsZSIsImZyb21EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVBhcnRzUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uIiwiZGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lIiwiZnJvbUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kUmVkdWNlZFJ1bGVOYW1lIiwiZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwiZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJmb3JFYWNoIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5NYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaXNHcmVhdGVyVGhhbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7O2VBY1dBLDhCQUE4Qjs7O3lCQVp2QixXQUFXOzREQUVsQixnQkFBZ0I7NkRBQ2YsaUJBQWlCO3lEQUNOLDZCQUE2Qjs2REFDckIsc0NBQXNDOytEQUNwQyx3Q0FBd0M7MkJBRXhDLHlCQUF5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFdkUsSUFBUUMsS0FBSyxHQUFhQyxVQUFjLGVBQUEsQ0FBaENELEtBQUssRUFBRUUsTUFBTSxHQUFLRCxVQUFjLGVBQUEsQ0FBekJDLE1BQU0sQUFBb0I7QUFFMUIsU0FBU0gsOEJBQThCLENBQUNJLHdCQUF3QixFQUFFQyxPQUFPLEVBQUU7SUFDeEYsSUFBSUMsd0NBQXdDLEdBQUdDLGdEQUFnRCxDQUFDSCx3QkFBd0IsQ0FBQyxBQUFDO0lBRTFILE1BQU9FLHdDQUF3QyxLQUFLLElBQUksQ0FBRTtZQThFeERFLEtBQUk7UUE3RUosSUFBSUMsaUNBQWlDLEdBQUdILHdDQUF3QyxBQUFDLEVBQUMsR0FBRztRQUVyRixJQUFJSSxrQkFBa0IsR0FBbEJBLEtBQUFBLENBQWtCLEVBQ2xCQyxzQkFBc0IsR0FBdEJBLEtBQUFBLENBQXNCLEFBQUM7UUFFM0IsSUFBSUMsUUFBUSxHQUFHSCxpQ0FBaUMsQ0FBQ0ksV0FBVyxFQUFFLEVBQzFETCxJQUFJLEdBQUdILE9BQU8sQ0FBQ08sUUFBUSxDQUFDLEVBQ3hCRSxXQUFXLEdBQUdOLElBQUksQ0FBQ08sY0FBYyxFQUFF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