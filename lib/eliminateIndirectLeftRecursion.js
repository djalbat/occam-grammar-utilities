"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateIndirectLeftRecursion;
    }
});
var _necessary = require("necessary");
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./rule/reduced/directly"));
var _directly1 = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated/directly"));
var _replacementDefinition = /*#__PURE__*/ _interopRequireDefault(require("./replacementDefinition"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./rule/reduced/indirectly"));
var _indirectly1 = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated/indirectly"));
var _directly2 = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/directly"));
var _indirectly2 = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/indirectly"));
var _ruleName = require("./utilities/ruleName");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var find = _necessary.arrayUtilities.find, push = _necessary.arrayUtilities.push, first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
var count = 0;
function eliminateIndirectLeftRecursion(context) {
    var greatestIndirectlyLeftRecursiveDefinition = retrieveGreatestIndirectlyLeftRecursiveDefinition(context);
    while(greatestIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = greatestIndirectlyLeftRecursiveDefinition, rule = indirectlyLeftRecursiveDefinition.getRule(), directlyLeftRecursiveDefinition = findDirectlyLeftRecursiveDefinition(rule, context);
        directlyLeftRecursiveDefinition !== null ? rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) : rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context);
        greatestIndirectlyLeftRecursiveDefinition = ++count > Infinity ? null : retrieveGreatestIndirectlyLeftRecursiveDefinition(context);
    }
}
function directlyReduceRule(directlyLeftRecursiveDefinition, context) {
    var ruleMap = context.ruleMap, leftRecursiveDefinitions = context.leftRecursiveDefinitions, rule = directlyLeftRecursiveDefinition.getRule(), disallowIsolated = false, directlyReducedRule = _directly.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions, disallowIsolated);
    if (directlyReducedRule !== null) {
        var directlyReducedRuleName = directlyReducedRule.getName();
        ruleMap[directlyReducedRuleName] = directlyReducedRule;
    }
    return directlyReducedRule;
}
function directlyRepeatRule(directlyLeftRecursiveDefinition, context) {
    var ruleMap = context.ruleMap, leftRecursiveDefinitions = context.leftRecursiveDefinitions, rule = directlyLeftRecursiveDefinition.getRule(), directlyRepeatedRule = _directly1.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions), directlyRepeatedRuleName = directlyRepeatedRule.getName();
    ruleMap[directlyRepeatedRuleName] = directlyRepeatedRule;
    return directlyRepeatedRule;
}
function indirectlyReduceRule(indirectlyLeftRecursiveDefinition, context) {
    var ruleMap = context.ruleMap, leftRecursiveDefinitions = context.leftRecursiveDefinitions, rule = indirectlyLeftRecursiveDefinition.getRule(), ruleName = rule.getName(), indirectlyReducedRuleName = (0, _ruleName.indirectlyReducedRuleNameFromRuleName)(ruleName);
    var indirectlyReducedRule = ruleMap[indirectlyReducedRuleName] || null;
    if (indirectlyReducedRule === null) {
        indirectlyReducedRule = _indirectly.default.fromRuleAndLeftRecursiveDefinitions(rule, leftRecursiveDefinitions);
        ruleMap[indirectlyReducedRuleName] = indirectlyReducedRule;
    }
    var vacuous = indirectlyReducedRule.isVacuous();
    if (!vacuous) {
        var replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyReducedRule(indirectlyLeftRecursiveDefinition, indirectlyReducedRule), leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), rule1 = leftRecursiveDefinition.getRule(), definition = replacementDefinition; ///
        rule1.addDefinition(definition);
    }
}
function indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, context) {
    var ruleMap = context.ruleMap, leftRecursiveDefinitions = context.leftRecursiveDefinitions, rule = indirectlyLeftRecursiveDefinition.getRule(), ruleName = rule.getName(), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), indirectlyRepeatedRuleName = (0, _ruleName.indirectlyRepeatedRuleNameFromRuleNameAndLeftRecursiveRuleName)(ruleName, leftRecursiveRuleName);
    var indirectlyRepeatedRule = ruleMap[indirectlyRepeatedRuleName] || null;
    if (indirectlyRepeatedRule === null) {
        indirectlyRepeatedRule = _indirectly1.default.fromRuleLeftRecursiveRuleNameAndLeftRecursiveDefinitions(rule, leftRecursiveRuleName, leftRecursiveDefinitions);
        ruleMap[indirectlyRepeatedRuleName] = indirectlyRepeatedRule;
        var replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveRuleName), definition = replacementDefinition; ///
        rule.addDefinition(definition);
    }
    return indirectlyRepeatedRule;
}
function rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) {
    var directlyReducedRule = directlyReduceRule(directlyLeftRecursiveDefinition, context), directlyRepeatedRule = directlyRepeatRule(directlyLeftRecursiveDefinition, context);
    var rule = directlyLeftRecursiveDefinition.getRule(), definition = null, leftRecursiveRuleName = null, directlyLeftRecursiveDefinitions = findDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinition, context);
    var indirectlyLeftRecursiveDefinitions = findIndirectlyLeftRecursiveDefinitions(rule, definition, leftRecursiveRuleName, context);
    rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, directlyRepeatedRule, directlyReducedRule, context);
    var removedLeftRecursiveDefinitions = _toConsumableArray(directlyLeftRecursiveDefinitions).concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
    var addedLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule);
    amendLeftRecursiveDefinitions.apply(void 0, [
        context,
        removedLeftRecursiveDefinitions
    ].concat(_toConsumableArray(addedLeftRecursiveDefinitions)));
}
function rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context) {
    indirectlyReduceRule(indirectlyLeftRecursiveDefinition, context);
    var indirectlyRepeatedRule = indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, context), removedLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context), addedLeftRecursiveDefinition = rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule);
    amendLeftRecursiveDefinitions(context, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition);
}
function amendLeftRecursiveDefinitions(context, removedLeftRecursiveDefinitions) {
    for(var _len = arguments.length, addedLeftRecursiveDefinitions = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++){
        addedLeftRecursiveDefinitions[_key - 2] = arguments[_key];
    }
    var leftRecursiveDefinitions = context.leftRecursiveDefinitions;
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    push(leftRecursiveDefinitions, addedLeftRecursiveDefinitions);
}
function rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule) {
    var least = indirectlyLeftRecursiveDefinition.isLeast(), leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition();
    var definition = leftRecursiveDefinition.getDefinition();
    var rule = leftRecursiveDefinition.getRule(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition), replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule), replacedDefinition = definition; ///
    definition = replacementDefinition; ///
    var addedLeftRecursiveDefinition = least ? _directly2.default.fromRuleAndDefinition(rule, definition) : _indirectly2.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition);
    definitionsIncludesDefinition ? rule.replaceDefinition(replacedDefinition, replacementDefinition) : rule.addDefinition(definition);
    return addedLeftRecursiveDefinition;
}
function findDirectlyLeftRecursiveDefinition(rule, context) {
    var leftRecursiveDefinitions = context.leftRecursiveDefinitions, directlyLeftRecursiveDefinitions = leftRecursiveDefinitions.find(function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _directly2.default);
            if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }
    }) || null;
    return directlyLeftRecursiveDefinitions;
}
function findDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinition, context) {
    var leftRecursiveDefinitions = context.leftRecursiveDefinitions, rule = directlyLeftRecursiveDefinition.getRule(), directlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionDirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _directly2.default);
            if (leftRecursiveDefinitionDirectlyLeftRecursiveDefinition) {
                return true;
            }
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function findIndirectlyLeftRecursiveDefinitions(rule, definition, leftRecursiveRuleName, context) {
    var leftRecursiveDefinitions = context.leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionRule = leftRecursiveDefinition.getRule();
        if (leftRecursiveDefinitionRule === rule) {
            var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _indirectly2.default);
            if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
                if (leftRecursiveRuleName === null) {
                    return true;
                }
                var indirectlyLeftRecursiveDefinition = leftRecursiveDefinition, indirectlyLeftRecursiveDefinitionDefinition = indirectlyLeftRecursiveDefinition.getDefinition(), indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
                if (indirectlyLeftRecursiveDefinitionDefinition !== definition && indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName === leftRecursiveRuleName) {
                    return true;
                }
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinitions, directlyRepeatedRule, directlyReducedRule, context) {
    var rule = directlyLeftRecursiveDefinitions.getRule(), definition = null, leftRecursiveRuleName = null, indirectlyLeftRecursiveDefinitions = findIndirectlyLeftRecursiveDefinitions(rule, definition, leftRecursiveRuleName, context), definitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        return definition;
    });
    if (directlyReducedRule == null) {
        rule.removeAllDefinitions();
    } else {
        var replacementDefinition = _replacementDefinition.default.fromDirectlyReducedRuleAndDirectlyRepeatedRule(directlyReducedRule, directlyRepeatedRule);
        rule.replaceAllDefinitions(replacementDefinition);
    }
    rule.addDefinitions(definitions);
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context) {
    var removedLeftRecursiveDefinitions;
    var rule = indirectlyLeftRecursiveDefinition.getRule(), definition = indirectlyLeftRecursiveDefinition.getDefinition(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition);
    if (definitionsIncludesDefinition) {
        var leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), indirectlyLeftRecursiveDefinitions = findIndirectlyLeftRecursiveDefinitions(rule, definition, leftRecursiveRuleName, context);
        removedLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ].concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
        var definitions1 = removedLeftRecursiveDefinitions.map(function(removedLeftRecursiveDefinition) {
            var definition = removedLeftRecursiveDefinition.getDefinition();
            return definition;
        });
        rule.removeDefinitions(definitions1);
    } else {
        removedLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ];
    }
    return removedLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule) {
    var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions), indirectlyRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition, rule = indirectlyRecursiveDefinition.getRule(), addedLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        var directly = true, replacedDefinition = definition, replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndDirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, directlyRepeatedRule);
        definition = replacementDefinition; ///
        var addedLeftRecursiveDefinition = _indirectly2.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition, directly); ///
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
        return addedLeftRecursiveDefinition;
    });
    return addedLeftRecursiveDefinitions;
}
function retrieveGreatestIndirectlyLeftRecursiveDefinition(context) {
    var greatestIndirectlyLeftRecursiveDefinition = null;
    var leftRecursiveDefinitions = context.leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = find(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition = _instanceof(leftRecursiveDefinition, _indirectly2.default);
        if (leftRecursiveDefinitionIndirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (greatestIndirectlyLeftRecursiveDefinition === null) {
            greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(greatestIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition) {
                greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return greatestIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgRGlyZWN0bHlSZWR1Y2VkUnVsZSBmcm9tIFwiLi9ydWxlL3JlZHVjZWQvZGlyZWN0bHlcIjtcbmltcG9ydCBEaXJlY3RseVJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkL2RpcmVjdGx5XCI7XG5pbXBvcnQgUmVwbGFjZW1lbnREZWZpbml0aW9uIGZyb20gXCIuL3JlcGxhY2VtZW50RGVmaW5pdGlvblwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZWR1Y2VkUnVsZSBmcm9tIFwiLi9ydWxlL3JlZHVjZWQvaW5kaXJlY3RseVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZXBlYXRlZC9pbmRpcmVjdGx5XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9yZWN1cnNpdmVEZWZpbml0aW9uL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vcmVjdXJzaXZlRGVmaW5pdGlvbi9sZWZ0L2luZGlyZWN0bHlcIjtcblxuaW1wb3J0IHsgaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZUZyb21SdWxlTmFtZSwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVGcm9tUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUgfSBmcm9tIFwiLi91dGlsaXRpZXMvcnVsZU5hbWVcIjtcblxuY29uc3QgeyBmaW5kLCBwdXNoLCBmaXJzdCwgZmlsdGVyIH0gPSBhcnJheVV0aWxpdGllcztcblxubGV0IGNvdW50ID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGNvbnRleHQpIHtcbiAgbGV0IGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihjb250ZXh0KTtcblxuICB3aGlsZSAoZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgICAgcnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGUsIGNvbnRleHQpO1xuXG4gICAgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpID9cbiAgICAgIHJld3JpdGVEaXJlY3RMZWZ0UmVjdXJzaW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkgOlxuICAgICAgICByZXdyaXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCk7XG5cbiAgICBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9ICsrY291bnQgPiBJbmZpbml0eSA/IG51bGwgOiByZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGNvbnRleHQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpcmVjdGx5UmVkdWNlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgcnVsZU1hcCwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIH0gPSBjb250ZXh0LFxuICAgICAgICBydWxlID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgIGRpc2FsbG93SXNvbGF0ZWQgPSBmYWxzZSxcbiAgICAgICAgZGlyZWN0bHlSZWR1Y2VkUnVsZSA9IERpcmVjdGx5UmVkdWNlZFJ1bGUuZnJvbVJ1bGVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXNhbGxvd0lzb2xhdGVkKTtcblxuICBpZiAoZGlyZWN0bHlSZWR1Y2VkUnVsZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRpcmVjdGx5UmVkdWNlZFJ1bGVOYW1lID0gZGlyZWN0bHlSZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW2RpcmVjdGx5UmVkdWNlZFJ1bGVOYW1lXSA9IGRpcmVjdGx5UmVkdWNlZFJ1bGU7XG4gIH1cblxuICByZXR1cm4gZGlyZWN0bHlSZWR1Y2VkUnVsZTtcbn1cblxuZnVuY3Rpb24gZGlyZWN0bHlSZXBlYXRSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgY29uc3QgeyBydWxlTWFwLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgfSA9IGNvbnRleHQsXG4gICAgICAgIHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBEaXJlY3RseVJlcGVhdGVkUnVsZS5mcm9tUnVsZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpLFxuICAgICAgICBkaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBkaXJlY3RseVJlcGVhdGVkUnVsZS5nZXROYW1lKCk7XG5cbiAgcnVsZU1hcFtkaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVdID0gZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG5cbiAgcmV0dXJuIGRpcmVjdGx5UmVwZWF0ZWRSdWxlO1xufVxuXG5mdW5jdGlvbiBpbmRpcmVjdGx5UmVkdWNlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgY29uc3QgeyBydWxlTWFwLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgfSA9IGNvbnRleHQsXG4gICAgICAgIHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpLFxuICAgICAgICBpbmRpcmVjdGx5UmVkdWNlZFJ1bGVOYW1lID0gaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZUZyb21SdWxlTmFtZShydWxlTmFtZSk7XG5cbiAgbGV0IGluZGlyZWN0bHlSZWR1Y2VkUnVsZSA9IHJ1bGVNYXBbaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZV0gfHwgbnVsbDtcblxuICBpZiAoaW5kaXJlY3RseVJlZHVjZWRSdWxlID09PSBudWxsKSB7XG4gICAgaW5kaXJlY3RseVJlZHVjZWRSdWxlID0gSW5kaXJlY3RseVJlZHVjZWRSdWxlLmZyb21SdWxlQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBydWxlTWFwW2luZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWVdID0gaW5kaXJlY3RseVJlZHVjZWRSdWxlO1xuICB9XG5cbiAgY29uc3QgdmFjdW91cyA9IGluZGlyZWN0bHlSZWR1Y2VkUnVsZS5pc1ZhY3VvdXMoKTtcblxuICBpZiAoIXZhY3VvdXMpIHtcbiAgICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb24gPSBSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZEluZGlyZWN0bHlSZWR1Y2VkUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZWR1Y2VkUnVsZSksXG4gICAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICBydWxlID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICAgIGRlZmluaXRpb24gPSByZXBsYWNlbWVudERlZmluaXRpb247IC8vL1xuXG4gICAgcnVsZS5hZGREZWZpbml0aW9uKGRlZmluaXRpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGlyZWN0bHlSZXBlYXRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBjb25zdCB7IHJ1bGVNYXAsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9ID0gY29udGV4dCxcbiAgICAgICAgcnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgIHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCksXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUoKSxcbiAgICAgICAgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZUZyb21SdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVSdWxlTmFtZShydWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICBsZXQgaW5kaXJlY3RseVJlcGVhdGVkUnVsZSA9IHJ1bGVNYXBbaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVdIHx8IG51bGw7XG5cbiAgaWYgKGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPT09IG51bGwpIHtcbiAgICBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gSW5kaXJlY3RseVJlcGVhdGVkUnVsZS5mcm9tUnVsZUxlZnRSZWN1cnNpdmVSdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBydWxlTWFwW2luZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lXSA9IGluZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG5cbiAgICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb24gPSBSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSksXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IHJlcGxhY2VtZW50RGVmaW5pdGlvbjsgLy8vXG5cbiAgICBydWxlLmFkZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG4gIH1cblxuICByZXR1cm4gaW5kaXJlY3RseVJlcGVhdGVkUnVsZTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGNvbnN0IGRpcmVjdGx5UmVkdWNlZFJ1bGUgPSBkaXJlY3RseVJlZHVjZVJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCksXG4gICAgICAgIGRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gZGlyZWN0bHlSZXBlYXRSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IG51bGwsXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG51bGwsXG4gICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gIGxldCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgZGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lLCBjb250ZXh0KTtcblxuICByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkaXJlY3RseVJlcGVhdGVkUnVsZSwgZGlyZWN0bHlSZWR1Y2VkUnVsZSwgY29udGV4dCk7XG5cbiAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtcbiAgICAuLi5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyxcbiAgICAuLi5pbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zXG4gIF07XG5cbiAgY29uc3QgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseVJlcGVhdGVkUnVsZSk7XG5cbiAgYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoY29udGV4dCwgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgLi4uYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBpbmRpcmVjdGx5UmVkdWNlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBpbmRpcmVjdGx5UmVwZWF0UnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpLFxuICAgICAgICByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpLFxuICAgICAgICBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZSk7XG5cbiAgYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoY29udGV4dCwgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIGFtZW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGNvbnRleHQsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIC4uLmFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IHsgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIH0gPSBjb250ZXh0O1xuXG4gIGZpbHRlcihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5pbmNsdWRlcyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoIXJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUpIHtcbiAgY29uc3QgbGVhc3QgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uaXNMZWFzdCgpLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpO1xuXG4gIGxldCBkZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpO1xuXG4gIGNvbnN0IHJ1bGUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgIGRlZmluaXRpb25zID0gcnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICBkZWZpbml0aW9uc0luY2x1ZGVzRGVmaW5pdGlvbiA9IGRlZmluaXRpb25zLmluY2x1ZGVzKGRlZmluaXRpb24pLFxuICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZEluZGlyZWN0bHlSZXBlYXRlZFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlKSxcbiAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbjsgIC8vL1xuXG4gIGRlZmluaXRpb24gPSByZXBsYWNlbWVudERlZmluaXRpb247IC8vL1xuXG4gIGNvbnN0IGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsZWFzdCA/IC8vL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlQW5kRGVmaW5pdGlvbihydWxlLCBkZWZpbml0aW9uKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgZGVmaW5pdGlvbik7XG5cbiAgZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24gP1xuICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pIDpcbiAgICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcblxuICByZXR1cm4gYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgY29udGV4dCkge1xuICBjb25zdCB7IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9ID0gY29udGV4dCxcbiAgICAgICAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZmluZCgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCk7XG5cbiAgICAgICAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlID09PSBydWxlKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gaW5zdGFuY2VvZiBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pIHx8IG51bGw7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBjb25zdCB7IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9ID0gY29udGV4dCxcbiAgICAgICAgcnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmQobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCk7XG5cbiAgICAgICAgICBpZiAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlID09PSBydWxlKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gaW5zdGFuY2VvZiBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgZGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lLCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIH0gPSBjb250ZXh0LFxuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uUnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKTtcblxuICAgICAgICAgIGlmIChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblJ1bGUgPT09IHJ1bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGluc3RhbmNlb2YgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgICAgICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCk7XG5cbiAgICAgICAgICAgICAgaWYgKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EZWZpbml0aW9uICE9PSBkZWZpbml0aW9uKSAmJiAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID09PSBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgZGlyZWN0bHlSZXBlYXRlZFJ1bGUsIGRpcmVjdGx5UmVkdWNlZFJ1bGUsIGNvbnRleHQpIHtcbiAgY29uc3QgcnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IG51bGwsXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG51bGwsXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBkZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUsIGNvbnRleHQpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgICB9KTtcblxuICBpZiAoZGlyZWN0bHlSZWR1Y2VkUnVsZSA9PSBudWxsKSB7XG4gICAgcnVsZS5yZW1vdmVBbGxEZWZpbml0aW9ucygpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tRGlyZWN0bHlSZWR1Y2VkUnVsZUFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlKGRpcmVjdGx5UmVkdWNlZFJ1bGUsIGRpcmVjdGx5UmVwZWF0ZWRSdWxlKTtcblxuICAgIHJ1bGUucmVwbGFjZUFsbERlZmluaXRpb25zKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gIH1cblxuICBydWxlLmFkZERlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGxldCByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xuXG4gIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uID0gZGVmaW5pdGlvbnMuaW5jbHVkZXMoZGVmaW5pdGlvbik7XG5cbiAgaWYgKGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZSgpLFxuICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBkZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUsIGNvbnRleHQpO1xuXG4gICAgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFsgIC8vL1xuICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLFxuICAgICAgLi4uaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc1xuICAgIF07XG5cbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgIGNvbnN0IGRlZmluaXRpb24gPSByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpO1xuXG4gICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICB9KTtcblxuICAgIHJ1bGUucmVtb3ZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbXG4gICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25cbiAgICBdO1xuICB9XG5cbiAgcmV0dXJuIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGRpcmVjdGx5UmVwZWF0ZWRSdWxlKSB7XG4gIGNvbnN0IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgIGluZGlyZWN0bHlSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICBydWxlID0gaW5kaXJlY3RseVJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBsZXQgZGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXREZWZpbml0aW9uKCk7XG5cbiAgICAgICAgICBjb25zdCBkaXJlY3RseSA9IHRydWUsXG4gICAgICAgICAgICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kRGlyZWN0bHlSZXBlYXRlZFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkaXJlY3RseVJlcGVhdGVkUnVsZSk7XG5cbiAgICAgICAgICBkZWZpbml0aW9uID0gcmVwbGFjZW1lbnREZWZpbml0aW9uOyAvLy9cblxuICAgICAgICAgIGNvbnN0IGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkZWZpbml0aW9uLCBkaXJlY3RseSk7ICAvLy9cblxuICAgICAgICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gICAgICAgICAgcmV0dXJuIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gICAgICAgIH0pO1xuXG4gIHJldHVybiBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihjb250ZXh0KSB7XG4gIGxldCBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG51bGw7XG5cbiAgY29uc3QgeyBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgfSA9IGNvbnRleHQsXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSAobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gaW5zdGFuY2VvZiBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICAgICAgaWYgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMuZm9yRWFjaCgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgaWYgKGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID09PSBudWxsKSB7XG4gICAgICBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uaXNHcmVhdGVyVGhhbihncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICAgIGlmIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbkdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cbiJdLCJuYW1lcyI6WyJlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJmaW5kIiwiYXJyYXlVdGlsaXRpZXMiLCJwdXNoIiwiZmlyc3QiLCJmaWx0ZXIiLCJjb3VudCIsImNvbnRleHQiLCJncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJldHJpZXZlR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlIiwiZ2V0UnVsZSIsImRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVEaXJlY3RMZWZ0UmVjdXJzaW9uIiwicmV3cml0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsIkluZmluaXR5IiwiZGlyZWN0bHlSZWR1Y2VSdWxlIiwicnVsZU1hcCIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImRpc2FsbG93SXNvbGF0ZWQiLCJkaXJlY3RseVJlZHVjZWRSdWxlIiwiRGlyZWN0bHlSZWR1Y2VkUnVsZSIsImZyb21SdWxlQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGlyZWN0bHlSZWR1Y2VkUnVsZU5hbWUiLCJnZXROYW1lIiwiZGlyZWN0bHlSZXBlYXRSdWxlIiwiZGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJEaXJlY3RseVJlcGVhdGVkUnVsZSIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsImluZGlyZWN0bHlSZWR1Y2VSdWxlIiwicnVsZU5hbWUiLCJpbmRpcmVjdGx5UmVkdWNlZFJ1bGVOYW1lIiwiaW5kaXJlY3RseVJlZHVjZWRSdWxlTmFtZUZyb21SdWxlTmFtZSIsImluZGlyZWN0bHlSZWR1Y2VkUnVsZSIsIkluZGlyZWN0bHlSZWR1Y2VkUnVsZSIsInZhY3VvdXMiLCJpc1ZhY3VvdXMiLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJSZXBsYWNlbWVudERlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlZHVjZWRSdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRlZmluaXRpb24iLCJhZGREZWZpbml0aW9uIiwiaW5kaXJlY3RseVJlcGVhdFJ1bGUiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZSIsImluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lRnJvbVJ1bGVOYW1lQW5kTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiaW5kaXJlY3RseVJlcGVhdGVkUnVsZSIsIkluZGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJmcm9tUnVsZUxlZnRSZWN1cnNpdmVSdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmNsdWRlcyIsImxlYXN0IiwiaXNMZWFzdCIsImdldERlZmluaXRpb24iLCJkZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwiZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlcGVhdGVkUnVsZSIsInJlcGxhY2VkRGVmaW5pdGlvbiIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUnVsZUFuZERlZmluaXRpb24iLCJJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kRGVmaW5pdGlvbiIsInJlcGxhY2VEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25SdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25EZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwibWFwIiwicmVtb3ZlQWxsRGVmaW5pdGlvbnMiLCJmcm9tRGlyZWN0bHlSZWR1Y2VkUnVsZUFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlIiwicmVwbGFjZUFsbERlZmluaXRpb25zIiwiYWRkRGVmaW5pdGlvbnMiLCJyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZW1vdmVEZWZpbml0aW9ucyIsImZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseVJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseSIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseVJlcGVhdGVkUnVsZSIsImZvckVhY2giLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbkdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaXNHcmVhdGVyVGhhbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7OytCQWtCYixTQWNDOzs7ZUFkdUJBLDhCQUE4Qjs7O3lCQWhCdkIsV0FBVzs2REFFVix5QkFBeUI7OERBQ3hCLDBCQUEwQjswRUFDekIseUJBQXlCOytEQUN6QiwyQkFBMkI7Z0VBQzFCLDRCQUE0Qjs4REFDbkIscUNBQXFDO2dFQUNuQyx1Q0FBdUM7d0JBRWlDLHNCQUFzQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFNUksSUFBUUMsSUFBSSxHQUEwQkMsVUFBYyxlQUFBLENBQTVDRCxJQUFJLEVBQUVFLElBQUksR0FBb0JELFVBQWMsZUFBQSxDQUF0Q0MsSUFBSSxFQUFFQyxLQUFLLEdBQWFGLFVBQWMsZUFBQSxDQUFoQ0UsS0FBSyxFQUFFQyxNQUFNLEdBQUtILFVBQWMsZUFBQSxDQUF6QkcsTUFBTSxBQUFv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