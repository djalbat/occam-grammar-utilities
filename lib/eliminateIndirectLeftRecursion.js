"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateIndirectLeftRecursion;
    }
});
var _replacementDefinition = /*#__PURE__*/ _interopRequireDefault(require("./replacementDefinition"));
var _directlyRepeatRule = /*#__PURE__*/ _interopRequireDefault(require("./operation/directlyRepeatRule"));
var _directlyReduceRule = /*#__PURE__*/ _interopRequireDefault(require("./operation/directlyReduceRule"));
var _indirectlyRepeatRule = /*#__PURE__*/ _interopRequireDefault(require("./operation/indirectlyRepeatRule"));
var _indirectlyReduceRule = /*#__PURE__*/ _interopRequireDefault(require("./operation/indirectlyReduceRule"));
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/directly"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/indirectly"));
var _array = require("./utilities/array");
var _context = require("./utilities/context");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var count = 0;
function eliminateIndirectLeftRecursion(context) {
    var greatestIndirectlyLeftRecursiveDefinition = (0, _context.retrieveGreatestIndirectlyLeftRecursiveDefinition)(context);
    while(greatestIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = greatestIndirectlyLeftRecursiveDefinition, rule = indirectlyLeftRecursiveDefinition.getRule(), directlyLeftRecursiveDefinition = (0, _context.findDirectlyLeftRecursiveDefinition)(rule, context);
        directlyLeftRecursiveDefinition !== null ? rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) : rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context);
        greatestIndirectlyLeftRecursiveDefinition = ++count > Infinity ? null : (0, _context.retrieveGreatestIndirectlyLeftRecursiveDefinition)(context);
    }
}
function rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) {
    var disallowIsolated = false, directlyReducedRule = _directlyReduceRule.default.execute(directlyLeftRecursiveDefinition, disallowIsolated, context), directlyRepeatedRule = _directlyRepeatRule.default.execute(directlyLeftRecursiveDefinition, context);
    var directlyLeftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions;
    var rule = directlyLeftRecursiveDefinition.getRule();
    directlyLeftRecursiveDefinitions = (0, _context.findDirectlyLeftRecursiveDefinitions)(rule, context);
    indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, function(indirectlyLeftRecursiveDefinition) {
        ///
        return true;
    }, context);
    (0, _context.removeDirectlyLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, context);
    directlyLeftRecursiveDefinitions = rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, directlyRepeatedRule, directlyReducedRule, context);
    (0, _context.removeIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
    indirectlyLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule);
    (0, _context.addDirectlyLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, context);
    (0, _context.addIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
}
function rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context) {
    var indirectlyReducedRule = _indirectlyReduceRule.default.execute(indirectlyLeftRecursiveDefinition, context);
    if (indirectlyReducedRule !== null) {
        var replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyReducedRule(indirectlyLeftRecursiveDefinition, indirectlyReducedRule), leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), rule = leftRecursiveDefinition.getRule(), definition = replacementDefinition; ///
        rule.addDefinition(definition);
    }
    var rule1 = indirectlyLeftRecursiveDefinition.getRule(), indirectlyRepeatedRule = _indirectlyRepeatRule.default.execute(indirectlyLeftRecursiveDefinition, context), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
    var replacementDefinition1 = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveRuleName), definition1 = replacementDefinition1; ///
    rule1.addDefinition(definition1);
    var indirectlyLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context), leftRecursiveDefinition1 = rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule);
    (0, _context.removeIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
    (0, _context.addLeftRecursiveDefinition)(leftRecursiveDefinition1, context);
}
function rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule) {
    var leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition();
    var least = indirectlyLeftRecursiveDefinition.isLeast();
    var definition = leftRecursiveDefinition.getDefinition();
    var rule = leftRecursiveDefinition.getRule(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition), replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule), replacedDefinition = definition; ///
    definition = replacementDefinition; ///
    leftRecursiveDefinition = least ? _directly.default.fromRuleAndDefinition(rule, definition) : _indirectly.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition);
    definitionsIncludesDefinition ? rule.replaceDefinition(replacedDefinition, replacementDefinition) : rule.addDefinition(definition);
    return leftRecursiveDefinition;
}
function rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinitions, directlyRepeatedRule, directlyReducedRule, context) {
    var rule = directlyLeftRecursiveDefinitions.getRule(), indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, function(indirectlyLeftRecursiveDefinition) {
        ///
        return true;
    }, context), definitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        return definition;
    });
    if (directlyReducedRule == null) {
        rule.removeAllDefinitions();
    } else {
        var replacementDefinition = _replacementDefinition.default.fromDirectlyReducedRuleAndDirectlyRepeatedRule(directlyReducedRule, directlyRepeatedRule);
        rule.replaceAllDefinitions(replacementDefinition);
    }
    rule.addDefinitions(definitions);
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context) {
    var indirectlyLeftRecursiveDefinitions;
    var rule = indirectlyLeftRecursiveDefinition.getRule(), definition = indirectlyLeftRecursiveDefinition.getDefinition(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition);
    if (definitionsIncludesDefinition) {
        var leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
        indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, function(indirectlyLeftRecursiveDefinition) {
            var indirectlyLeftRecursiveDefinitionDefinition = indirectlyLeftRecursiveDefinition.getDefinition(), indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
            if (indirectlyLeftRecursiveDefinitionDefinition !== definition && indirectlyLeftRecursiveDefinitionLeftRecursiveRuleName === leftRecursiveRuleName) {
                return true;
            }
        }, context);
        indirectlyLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ].concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
        var definitions1 = indirectlyLeftRecursiveDefinitions.map(function(removedLeftRecursiveDefinition) {
            var definition = removedLeftRecursiveDefinition.getDefinition();
            return definition;
        });
        rule.removeDefinitions(definitions1);
    } else {
        indirectlyLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ];
    }
    return indirectlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule) {
    var firstIndirectlyLeftRecursiveDefinition = (0, _array.first)(indirectlyLeftRecursiveDefinitions), indirectlyRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition, rule = indirectlyRecursiveDefinition.getRule();
    indirectlyLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        var directly = true, replacedDefinition = definition, replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndDirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, directlyRepeatedRule);
        definition = replacementDefinition; ///
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition, directly); ///
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBSZXBsYWNlbWVudERlZmluaXRpb24gZnJvbSBcIi4vcmVwbGFjZW1lbnREZWZpbml0aW9uXCI7XG5pbXBvcnQgRGlyZWN0bHlSZXBlYXRSdWxlT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvbi9kaXJlY3RseVJlcGVhdFJ1bGVcIjtcbmltcG9ydCBEaXJlY3RseVJlZHVjZVJ1bGVPcGVyYXRpb24gZnJvbSBcIi4vb3BlcmF0aW9uL2RpcmVjdGx5UmVkdWNlUnVsZVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZXBlYXRSdWxlT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvbi9pbmRpcmVjdGx5UmVwZWF0UnVsZVwiO1xuaW1wb3J0IEluZGlyZWN0bHlSZWR1Y2VSdWxlT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvbi9pbmRpcmVjdGx5UmVkdWNlUnVsZVwiO1xuaW1wb3J0IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vcmVjdXJzaXZlRGVmaW5pdGlvbi9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL3JlY3Vyc2l2ZURlZmluaXRpb24vbGVmdC9pbmRpcmVjdGx5XCI7XG5cbmltcG9ydCB7IGZpcnN0IH0gZnJvbSBcIi4vdXRpbGl0aWVzL2FycmF5XCI7XG5pbXBvcnQgeyBhZGRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbixcbiAgICAgICAgIGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLFxuICAgICAgICAgYWRkRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICBhZGRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLFxuICAgICAgICAgZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICByZW1vdmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyxcbiAgICAgICAgIHJlbW92ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICByZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2NvbnRleHRcIlxuXG5sZXQgY291bnQgPSAwO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24oY29udGV4dCkge1xuICBsZXQgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGNvbnRleHQpO1xuXG4gIHdoaWxlIChncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICBydWxlID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24ocnVsZSwgY29udGV4dCk7XG5cbiAgICAoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkgP1xuICAgICAgcmV3cml0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSA6XG4gICAgICAgIHJld3JpdGVJbmRpcmVjdExlZnRSZWN1cnNpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KTtcblxuICAgIGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKytjb3VudCA+IEluZmluaXR5ID8gbnVsbCA6IHJldHJpZXZlR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oY29udGV4dCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdExlZnRSZWN1cnNpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGNvbnN0IGRpc2FsbG93SXNvbGF0ZWQgPSBmYWxzZSxcbiAgICAgICAgZGlyZWN0bHlSZWR1Y2VkUnVsZSA9IERpcmVjdGx5UmVkdWNlUnVsZU9wZXJhdGlvbi5leGVjdXRlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRpc2FsbG93SXNvbGF0ZWQsIGNvbnRleHQpLFxuICAgICAgICBkaXJlY3RseVJlcGVhdGVkUnVsZSA9IERpcmVjdGx5UmVwZWF0UnVsZU9wZXJhdGlvbi5leGVjdXRlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gIGxldCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyxcbiAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcblxuICBjb25zdCBydWxlID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCk7XG5cbiAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgY29udGV4dCk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAvLy9cblxuICAgIHJldHVybiB0cnVlO1xuICB9LCBjb250ZXh0KTtcblxuICByZW1vdmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgY29udGV4dClcblxuICBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRpcmVjdGx5UmVwZWF0ZWRSdWxlLCBkaXJlY3RseVJlZHVjZWRSdWxlLCBjb250ZXh0KTtcblxuICByZW1vdmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGNvbnRleHQpO1xuXG4gIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseVJlcGVhdGVkUnVsZSk7XG5cbiAgYWRkRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGNvbnRleHQpO1xuXG4gIGFkZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgY29udGV4dCk7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdExlZnRSZWN1cnNpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGNvbnN0IGluZGlyZWN0bHlSZWR1Y2VkUnVsZSA9IEluZGlyZWN0bHlSZWR1Y2VSdWxlT3BlcmF0aW9uLmV4ZWN1dGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KTtcblxuICBpZiAoaW5kaXJlY3RseVJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRpcmVjdGx5UmVkdWNlZFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVkdWNlZFJ1bGUpLFxuICAgICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgICAgICAgcnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgICBkZWZpbml0aW9uID0gcmVwbGFjZW1lbnREZWZpbml0aW9uOyAvLy9cblxuICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgfVxuXG4gIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gSW5kaXJlY3RseVJlcGVhdFJ1bGVPcGVyYXRpb24uZXhlY3V0ZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCk7XG5cbiAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpLFxuICAgICAgICBkZWZpbml0aW9uID0gcmVwbGFjZW1lbnREZWZpbml0aW9uOyAvLy9cblxuICBydWxlLmFkZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG5cbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSxcbiAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlKTtcblxuICByZW1vdmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGNvbnRleHQpO1xuXG4gIGFkZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZSkge1xuICBsZXQgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKTtcblxuICBjb25zdCBsZWFzdCA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0xlYXN0KCk7XG5cbiAgbGV0IGRlZmluaXRpb24gPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXREZWZpbml0aW9uKCk7XG5cbiAgY29uc3QgcnVsZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uID0gZGVmaW5pdGlvbnMuaW5jbHVkZXMoZGVmaW5pdGlvbiksXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlcGVhdGVkUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUpLFxuICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBkZWZpbml0aW9uOyAgLy8vXG5cbiAgZGVmaW5pdGlvbiA9IHJlcGxhY2VtZW50RGVmaW5pdGlvbjsgLy8vXG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsZWFzdCA/IC8vL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZUFuZERlZmluaXRpb24ocnVsZSwgZGVmaW5pdGlvbikgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkZWZpbml0aW9uKTtcblxuICBkZWZpbml0aW9uc0luY2x1ZGVzRGVmaW5pdGlvbiA/XG4gICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIHJlcGxhY2VtZW50RGVmaW5pdGlvbikgOlxuICAgICAgcnVsZS5hZGREZWZpbml0aW9uKGRlZmluaXRpb24pO1xuXG4gIHJldHVybiBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGRpcmVjdGx5UmVwZWF0ZWRSdWxlLCBkaXJlY3RseVJlZHVjZWRSdWxlLCBjb250ZXh0KSB7XG4gIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5nZXRSdWxlKCksXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgLy8vXG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSwgY29udGV4dCksXG4gICAgICAgIGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpO1xuXG4gICAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICAgIH0pO1xuXG4gIGlmIChkaXJlY3RseVJlZHVjZWRSdWxlID09IG51bGwpIHtcbiAgICBydWxlLnJlbW92ZUFsbERlZmluaXRpb25zKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21EaXJlY3RseVJlZHVjZWRSdWxlQW5kRGlyZWN0bHlSZXBlYXRlZFJ1bGUoZGlyZWN0bHlSZWR1Y2VkUnVsZSwgZGlyZWN0bHlSZXBlYXRlZFJ1bGUpO1xuXG4gICAgcnVsZS5yZXBsYWNlQWxsRGVmaW5pdGlvbnMocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJ1bGUuYWRkRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuXG4gIHJldHVybiBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgbGV0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG5cbiAgY29uc3QgcnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgIGRlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24gPSBkZWZpbml0aW9ucy5pbmNsdWRlcyhkZWZpbml0aW9uKTtcblxuICBpZiAoZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24pIHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXREZWZpbml0aW9uKCksXG4gICAgICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKCk7XG5cbiAgICAgIGlmICgoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uRGVmaW5pdGlvbiAhPT0gZGVmaW5pdGlvbikgJiYgKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9PT0gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LCBjb250ZXh0KTtcblxuICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBbICAvLy9cbiAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbixcbiAgICAgIC4uLmluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNcbiAgICBdO1xuXG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLm1hcCgocmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgICBjb25zdCBkZWZpbml0aW9uID0gcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfSk7XG5cbiAgICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gW1xuICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uXG4gICAgXTtcbiAgfVxuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseVJlcGVhdGVkUnVsZSkge1xuICBjb25zdCBmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0KGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpLFxuICAgICAgICBpbmRpcmVjdGx5UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgcnVsZSA9IGluZGlyZWN0bHlSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4geyAgLy8vXG4gICAgbGV0IGRlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0RGVmaW5pdGlvbigpO1xuXG4gICAgY29uc3QgZGlyZWN0bHkgPSB0cnVlLFxuICAgICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRlZmluaXRpb24sICAvLy9cbiAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb24gPSBSZXBsYWNlbWVudERlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgZGlyZWN0bHlSZXBlYXRlZFJ1bGUpO1xuXG4gICAgZGVmaW5pdGlvbiA9IHJlcGxhY2VtZW50RGVmaW5pdGlvbjsgLy8vXG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkZWZpbml0aW9uLCBkaXJlY3RseSk7ICAvLy9cblxuICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCByZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gICAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiY291bnQiLCJjb250ZXh0IiwiZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZSIsImdldFJ1bGUiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlRGlyZWN0TGVmdFJlY3Vyc2lvbiIsInJld3JpdGVJbmRpcmVjdExlZnRSZWN1cnNpb24iLCJJbmZpbml0eSIsImRpc2FsbG93SXNvbGF0ZWQiLCJkaXJlY3RseVJlZHVjZWRSdWxlIiwiRGlyZWN0bHlSZWR1Y2VSdWxlT3BlcmF0aW9uIiwiZXhlY3V0ZSIsImRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwiRGlyZWN0bHlSZXBlYXRSdWxlT3BlcmF0aW9uIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZmluZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZW1vdmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVtb3ZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiYWRkRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJhZGRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW5kaXJlY3RseVJlZHVjZWRSdWxlIiwiSW5kaXJlY3RseVJlZHVjZVJ1bGVPcGVyYXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJSZXBsYWNlbWVudERlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlZHVjZWRSdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRlZmluaXRpb24iLCJhZGREZWZpbml0aW9uIiwiaW5kaXJlY3RseVJlcGVhdGVkUnVsZSIsIkluZGlyZWN0bHlSZXBlYXRSdWxlT3BlcmF0aW9uIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiZ2V0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJhZGRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlYXN0IiwiaXNMZWFzdCIsImdldERlZmluaXRpb24iLCJkZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwiZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24iLCJpbmNsdWRlcyIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwicmVwbGFjZWREZWZpbml0aW9uIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlQW5kRGVmaW5pdGlvbiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREZWZpbml0aW9uIiwicmVwbGFjZURlZmluaXRpb24iLCJtYXAiLCJyZW1vdmVBbGxEZWZpbml0aW9ucyIsImZyb21EaXJlY3RseVJlZHVjZWRSdWxlQW5kRGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJyZXBsYWNlQWxsRGVmaW5pdGlvbnMiLCJhZGREZWZpbml0aW9ucyIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkRlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25MZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZW1vdmVEZWZpbml0aW9ucyIsImZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZmlyc3QiLCJpbmRpcmVjdGx5UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRpcmVjdGx5IiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7K0JBdUJiLFNBY0M7Oztl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