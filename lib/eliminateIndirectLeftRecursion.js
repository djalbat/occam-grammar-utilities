"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    get: function() {
        return eliminateIndirectLeftRecursion;
    },
    enumerable: true
});
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _definitions = require("./utilities/definitions");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
    while(maximalIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = maximalIndirectlyLeftRecursiveDefinition, ruleName = indirectlyLeftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], definitions = rule.getDefinitions();
        var directlyLeftRecursiveDefinitions = retrieveDirectlyLeftRecursiveDefinitions(definitions), directlyLeftRecursiveDefinitionsLength = directlyLeftRecursiveDefinitions.length;
        if (directlyLeftRecursiveDefinitionsLength > 0) {
            var _rule;
            var definitions1 = void 0;
            var directlyLeftRecursiveDefinition = mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions), reducedLeftRecursiveDefinition = reduceRule(rule, ruleMap), repeatedRuleName = repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap);
            definitions1 = directlyLeftRecursiveDefinitions; ///
            rule.removeDefinitions(definitions1);
            definitions1 = rule.getDefinitions();
            var _$leftRecursiveDefinitions = definitions1; ///
            _$leftRecursiveDefinitions = rewriteLeftRecursiveDefinitions(_$leftRecursiveDefinitions, directlyLeftRecursiveDefinition, ruleName); ///
            rule.removeAllDefinitions();
            definitions1 = _$leftRecursiveDefinitions; ///
            definitions1.forEach(function(definition) {
                rule.addDefinition(definition);
            });
            var last = indirectlyLeftRecursiveDefinition.isLast(), lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(), leftRecursiveDefinition = lastLeftRecursiveDefinition; ///
            var replacedDefinition = leftRecursiveDefinition, replacementDefinitions = rewriteLeftRecursiveDefinitionsEx(_$leftRecursiveDefinitions, leftRecursiveDefinition, repeatedRuleName, ruleName, last);
            ruleName = leftRecursiveDefinition.getRuleName();
            rule = ruleMap[ruleName];
            (_rule = rule).replaceDefinition.apply(_rule, [
                replacedDefinition
            ].concat(_toConsumableArray(replacementDefinitions)));
        }
        // const leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(),
        //       indirectlyLeftRecursiveRule = rule, ///
        //       reducedLeftRecursiveDefinition = reduceRule(indirectlyLeftRecursiveRule, ruleMap),
        //       indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions, leftRecursiveRuleName);
        //
        // indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions);  ///
        //
        // const last = indirectlyLeftRecursiveDefinition.isLast(),
        //       lastLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLastLeftRecursiveDefinition(),
        //       leftRecursiveDefinition = lastLeftRecursiveDefinition;  ///
        //
        // ruleName = leftRecursiveDefinition.getRuleName();
        // rule = ruleMap[ruleName];
        //
        // const repeatedRuleName = repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap),
        //       replacedDefinition = leftRecursiveDefinition, ///
        //       replacementDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, last),
        //       firstReplacementDefinition = first(replacementDefinitions),
        //       addedLeftRecursiveDefinition = firstReplacementDefinition,  ///
        //       removedLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions; ///
        //
        // rule.replaceDefinition(replacedDefinition, ...replacementDefinitions);
        //
        // amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition);
        //
        // maximalIndirectlyLeftRecursiveDefinition = retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions);
        maximalIndirectlyLeftRecursiveDefinition = null;
    }
}
function reduceRule(rule, ruleMap) {
    var reducedLeftRecursiveDefinition = null;
    var reducedRule = _reduced.default.fromRule(rule);
    if (reducedRule !== null) {
        var leftRecursiveDefinition = _left.default.fromReducedRule(reducedRule), reducedRuleName = reducedRule.getName(), definitions = reducedRule.getDefinitions(), definition = leftRecursiveDefinition; ///
        rule.removeDefinitions(definitions);
        rule.addDefinition(definition);
        ruleMap[reducedRuleName] = reducedRule;
        reducedLeftRecursiveDefinition = definition; ///
    }
    return reducedLeftRecursiveDefinition;
}
function amendLeftRecursiveDefinitions(leftRecursiveDefinitions, removedLeftRecursiveDefinitions, addedLeftRecursiveDefinition) {
    filter(leftRecursiveDefinitions, function(leftRecursiveDefinition) {
        var removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition = removedLeftRecursiveDefinitions.includes(leftRecursiveDefinition);
        if (!removedLeftRecursiveDefinitionsIncludesLeftRecursiveDefinition) {
            return true;
        }
    });
    leftRecursiveDefinitions.push(addedLeftRecursiveDefinition);
}
function rewriteLeftRecursiveDefinitions(leftRecursiveDefinitions, directlyLeftRecursiveDefinition, ruleName) {
    leftRecursiveDefinitions = leftRecursiveDefinitions.map(function(leftRecursiveDefinition) {
        leftRecursiveDefinition = _left.default.fromRuleNameLeftRecursiveDefinitionAndDirectlyLeftRecursiveDefinition(ruleName, leftRecursiveDefinition, directlyLeftRecursiveDefinition); ///
        return leftRecursiveDefinition;
    });
    return leftRecursiveDefinitions;
}
function rewriteLeftRecursiveDefinitionsEx(leftRecursiveDefinitions, leftRecursiveDefinition, repeatedRuleName, ruleName, last) {
    var replacementDefinitions = [];
    var replacementDefinition, leftRecursiveDefinitionA;
    var leftRecursiveDefinitionB = leftRecursiveDefinition; ///
    var firstLeftRecursiveDefinition = first(leftRecursiveDefinitions);
    leftRecursiveDefinitionA = firstLeftRecursiveDefinition; ///
    replacementDefinition = _directly.default.fromLeftRecursiveDefinitionsAndRepeatedRuleName(leftRecursiveDefinitionA, leftRecursiveDefinitionB, repeatedRuleName); ///
    replacementDefinitions.push(replacementDefinition);
    replacementDefinition = _left.default.fromRuleNameAndLeftRecursiveDefinition(ruleName, leftRecursiveDefinitionB); ///
    replacementDefinitions.push(replacementDefinition);
    return replacementDefinitions;
}
function mergeDirectlyLeftRecursiveDefinitions(directlyLeftRecursiveDefinitions) {
    var directlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var directlyLeftRecursiveDefinition = _directly.default.fromPartsAndRuleName(parts, ruleName);
        return directlyLeftRecursiveDefinition;
    });
    return directlyLeftRecursiveDefinition;
}
function repeatDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRule = _repeated.default.fromDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition), repeatedRuleName = repeatedRule.getName();
    ruleMap[repeatedRuleName] = repeatedRule;
    return repeatedRuleName;
}
function repeatIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, ruleMap) {
    var repeatedRuleName = null;
    var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition);
    if (repeatedRule !== null) {
        repeatedRuleName = repeatedRule.getName();
        ruleMap[repeatedRuleName] = repeatedRule;
    }
    return repeatedRuleName;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var indirectlyLeftRecursiveDefinition;
        var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions);
        indirectlyLeftRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition; ///
        var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions();
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromPartsRuleNameAndLeftRecursiveDefinitions(parts, ruleName, leftRecursiveDefinitions);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinition;
}
function retrieveDirectlyLeftRecursiveDefinitions(definitions) {
    var directlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionDirectlyLeftRecursiveDefinition = _instanceof(definition, _directly.default);
        if (definitionDirectlyLeftRecursiveDefinition) {
            return true;
        }
    });
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName, last) {
    var replacementDefinitions = [], LeftRecursiveDefinition = last ? _directly.default : _indirectly.default, replacementDefinition = LeftRecursiveDefinition.fromIndirectlyLeftRecursiveDefinitionLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName); ///
    replacementDefinitions.push(replacementDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        var replacementDefinition1 = LeftRecursiveDefinition.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(replacementDefinition1);
    }
    return replacementDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(definitions) {
    var leftRecursiveRuleName = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
    var indirectlyLeftRecursiveDefinitions = definitions.filter(function(definition) {
        var definitionIndirectlyLeftRecursiveDefinition = _instanceof(definition, _indirectly.default);
        if (definitionIndirectlyLeftRecursiveDefinition) {
            if (leftRecursiveRuleName === null) {
                return true;
            }
            var indirectlyLeftRecursiveDefinition = definition, leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), ruleName = firstLeftRecursiveRuleName; ///
            if (ruleName === leftRecursiveRuleName) {
                return true;
            }
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveMaximalIndirectlyLeftRecursiveDefinition(leftRecursiveDefinitions) {
    var maximalIndirectlyLeftRecursiveDefinition = null;
    var definitions = leftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(definitions);
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (maximalIndirectlyLeftRecursiveDefinition === null) {
            maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(maximalIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanMaximalIndirectlyLeftRecursiveDefinition) {
                maximalIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return maximalIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3V0aWxpdGllcy9kZWZpbml0aW9uc1wiO1xuXG5jb25zdCB7IGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGxldCBtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gcmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgd2hpbGUgKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG5cbiAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubGVuZ3RoO1xuXG4gICAgaWYgKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zTGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGRlZmluaXRpb25zO1xuXG4gICAgICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgICAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWR1Y2VSdWxlKHJ1bGUsIHJ1bGVNYXApLFxuICAgICAgICAgICAgcmVwZWF0ZWRSdWxlTmFtZSA9IHJlcGVhdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCk7XG5cbiAgICAgIGRlZmluaXRpb25zID0gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7IC8vL1xuXG4gICAgICBydWxlLnJlbW92ZURlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCk7XG5cbiAgICAgIGxldCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBkZWZpbml0aW9uczsgLy8vXG5cbiAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTmFtZSk7IC8vL1xuXG4gICAgICBydWxlLnJlbW92ZUFsbERlZmluaXRpb25zKCk7XG5cbiAgICAgIGRlZmluaXRpb25zID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zOyAvLy9cblxuICAgICAgZGVmaW5pdGlvbnMuZm9yRWFjaCgoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICBydWxlLmFkZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGFzdCA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0xhc3QoKSxcbiAgICAgICAgICAgIGxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oKSxcbiAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgICAgIGNvbnN0IHJlcGxhY2VkRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zRXgobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSwgcnVsZU5hbWUsIGxhc3QpO1xuXG4gICAgICBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCk7XG5cbiAgICAgIHJ1bGUgPSBydWxlTWFwW3J1bGVOYW1lXTtcblxuICAgICAgcnVsZS5yZXBsYWNlRGVmaW5pdGlvbihyZXBsYWNlZERlZmluaXRpb24sIC4uLnJlcGxhY2VtZW50RGVmaW5pdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUoKSxcbiAgICAvLyAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUgPSBydWxlLCAvLy9cbiAgICAvLyAgICAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWR1Y2VSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCksXG4gICAgLy8gICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcbiAgICAvL1xuICAgIC8vIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTsgIC8vL1xuICAgIC8vXG4gICAgLy8gY29uc3QgbGFzdCA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0xhc3QoKSxcbiAgICAvLyAgICAgICBsYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKCksXG4gICAgLy8gICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247ICAvLy9cbiAgICAvL1xuICAgIC8vIHJ1bGVOYW1lID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZU5hbWUoKTtcbiAgICAvLyBydWxlID0gcnVsZU1hcFtydWxlTmFtZV07XG4gICAgLy9cbiAgICAvLyBjb25zdCByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCksXG4gICAgLy8gICAgICAgcmVwbGFjZWREZWZpbml0aW9uID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgIC8vICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSwgbGFzdCksXG4gICAgLy8gICAgICAgZmlyc3RSZXBsYWNlbWVudERlZmluaXRpb24gPSBmaXJzdChyZXBsYWNlbWVudERlZmluaXRpb25zKSxcbiAgICAvLyAgICAgICBhZGRlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3RSZXBsYWNlbWVudERlZmluaXRpb24sICAvLy9cbiAgICAvLyAgICAgICByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uczsgLy8vXG4gICAgLy9cbiAgICAvLyBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgLi4ucmVwbGFjZW1lbnREZWZpbml0aW9ucyk7XG4gICAgLy9cbiAgICAvLyBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuICAgIC8vXG4gICAgLy8gbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlUnVsZShydWxlLCBydWxlTWFwKSB7XG4gIGxldCByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBudWxsO1xuXG4gIGNvbnN0IHJlZHVjZWRSdWxlID0gUmVkdWNlZFJ1bGUuZnJvbVJ1bGUocnVsZSk7XG5cbiAgaWYgKHJlZHVjZWRSdWxlICE9PSBudWxsKSB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUmVkdWNlZFJ1bGUocmVkdWNlZFJ1bGUpLFxuICAgICAgICAgIHJlZHVjZWRSdWxlTmFtZSA9IHJlZHVjZWRSdWxlLmdldE5hbWUoKSxcbiAgICAgICAgICBkZWZpbml0aW9ucyA9IHJlZHVjZWRSdWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICAgIHJ1bGUucmVtb3ZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMpO1xuXG4gICAgcnVsZS5hZGREZWZpbml0aW9uKGRlZmluaXRpb24pO1xuXG4gICAgcnVsZU1hcFtyZWR1Y2VkUnVsZU5hbWVdID0gcmVkdWNlZFJ1bGU7XG5cbiAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBkZWZpbml0aW9uOyAgLy8vXG4gIH1cblxuICByZXR1cm4gcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiBhbWVuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGFkZGVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgZmlsdGVyKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmluY2x1ZGVzKGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmICghcmVtb3ZlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0luY2x1ZGVzTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLnB1c2goYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBydWxlTmFtZSkge1xuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJ1bGVOYW1lTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJ1bGVOYW1lLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7ICAvLy9cblxuICAgIHJldHVybiBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uc0V4KGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJlcGVhdGVkUnVsZU5hbWUsIHJ1bGVOYW1lLCBsYXN0KSB7XG4gIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSBbXTtcblxuICBsZXQgcmVwbGFjZW1lbnREZWZpbml0aW9uLFxuICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BO1xuXG4gIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICBjb25zdCBmaXJzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkEgPSBmaXJzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zQW5kUmVwZWF0ZWRSdWxlTmFtZShsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkEsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQiwgcmVwZWF0ZWRSdWxlTmFtZSk7ICAvLy9cblxuICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICByZXBsYWNlbWVudERlZmluaXRpb24gPSBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25CKTsgIC8vL1xuXG4gIHJlcGxhY2VtZW50RGVmaW5pdGlvbnMucHVzaChyZXBsYWNlbWVudERlZmluaXRpb24pO1xuXG4gIHJldHVybiByZXBsYWNlbWVudERlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiBtZXJnZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgKHBhcnRzLCBydWxlTmFtZSkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21QYXJ0c0FuZFJ1bGVOYW1lKHBhcnRzLCBydWxlTmFtZSk7XG5cbiAgICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJlcGVhdERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCkge1xuICBjb25zdCByZXBlYXRlZFJ1bGUgPSBSZXBlYXRlZFJ1bGUuZnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiksXG4gICAgICAgIHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gIHJ1bGVNYXBbcmVwZWF0ZWRSdWxlTmFtZV0gPSByZXBlYXRlZFJ1bGU7XG5cbiAgcmV0dXJuIHJlcGVhdGVkUnVsZU5hbWU7XG59XG5cbmZ1bmN0aW9uIHJlcGVhdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIHJ1bGVNYXApIHtcbiAgbGV0IHJlcGVhdGVkUnVsZU5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IHJlcGVhdGVkUnVsZSA9IFJlcGVhdGVkUnVsZS5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKHJlcGVhdGVkUnVsZSAhPT0gbnVsbCkge1xuICAgIHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRlZFJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgcnVsZU1hcFtyZXBlYXRlZFJ1bGVOYW1lXSA9IHJlcGVhdGVkUnVsZTtcbiAgfVxuXG4gIHJldHVybiByZXBlYXRlZFJ1bGVOYW1lO1xufVxuXG5mdW5jdGlvbiBtZXJnZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucykge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAocGFydHMsIHJ1bGVOYW1lKSA9PiB7XG4gICAgbGV0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcblxuICAgIGNvbnN0IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZmlyc3QoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG5cbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKCk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVBhcnRzUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocGFydHMsIHJ1bGVOYW1lLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpO1xuXG4gICAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucykge1xuICBjb25zdCBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLmZpbHRlcigoZGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGRlZmluaXRpb25EaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gKGRlZmluaXRpb24gaW5zdGFuY2VvZiBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgIGlmIChkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lLCBsYXN0KSB7XG4gIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbnMgPSBbXSxcbiAgICAgICAgTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsYXN0ID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sXG4gICAgICAgIHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25MZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZFJlcGVhdGVkUnVsZU5hbWUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSk7ICAvLy9cblxuICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICBpZiAocmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgY29uc3QgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gocmVwbGFjZW1lbnREZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJldHVybiByZXBsYWNlbWVudERlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGVmaW5pdGlvbnMsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG51bGwpIHtcbiAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGRlZmluaXRpb25zLmZpbHRlcigoZGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGRlZmluaXRpb25JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgICBpZiAoZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikge1xuICAgICAgaWYgKGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZGVmaW5pdGlvbiwgIC8vL1xuICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lcyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzKCksXG4gICAgICAgICAgICBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0KGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpLFxuICAgICAgICAgICAgcnVsZU5hbWUgPSBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZTsgLy8vXG5cbiAgICAgIGlmIChydWxlTmFtZSA9PT0gbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMpIHtcbiAgbGV0IG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBudWxsO1xuXG4gIGNvbnN0IGRlZmluaXRpb25zID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCAvLy9cbiAgICAgICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBpZiAobWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9PT0gbnVsbCkge1xuICAgICAgbWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbjsgLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuTWF4aW1hbEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0dyZWF0ZXJUaGFuKG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuXG4gICAgICBpZiAoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5NYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSB7XG4gICAgICAgIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiZmlyc3QiLCJhcnJheVV0aWxpdGllcyIsImZpbHRlciIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJ1bGVNYXAiLCJtYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV0cmlldmVNYXhpbWFsSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsInJ1bGUiLCJkZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXRyaWV2ZURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNMZW5ndGgiLCJsZW5ndGgiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlZHVjZVJ1bGUiLCJyZXBlYXRlZFJ1bGVOYW1lIiwicmVwZWF0RGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZURlZmluaXRpb25zIiwicmV3cml0ZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJlbW92ZUFsbERlZmluaXRpb25zIiwiZm9yRWFjaCIsImRlZmluaXRpb24iLCJhZGREZWZpbml0aW9uIiwibGFzdCIsImlzTGFzdCIsImxhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImdldExhc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZWREZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsInJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNFeCIsInJlcGxhY2VEZWZpbml0aW9uIiwicmVkdWNlZFJ1bGUiLCJSZWR1Y2VkUnVsZSIsImZyb21SdWxlIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUmVkdWNlZFJ1bGUiLCJyZWR1Y2VkUnVsZU5hbWUiLCJnZXROYW1lIiwiYW1lbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZW1vdmVkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiYWRkZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnNJbmNsdWRlc0xlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiaW5jbHVkZXMiLCJwdXNoIiwibWFwIiwiZnJvbVJ1bGVOYW1lTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9uIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb25CIiwiZmlyc3RMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsIkRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zQW5kUmVwZWF0ZWRSdWxlTmFtZSIsImZyb21SdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJwYXJ0cyIsImZyb21QYXJ0c0FuZFJ1bGVOYW1lIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwiZnJvbURpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXBlYXRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwibWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiZnJvbVBhcnRzUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9uRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lIiwiZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwibGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIiwiZGVmaW5pdGlvbkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwiZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25HcmVhdGVyVGhhbk1heGltYWxJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpc0dyZWF0ZXJUaGFuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztlQWNXQSw4QkFBOEI7Ozs7eUJBWnZCLFdBQVc7OENBRWxCLGdCQUFnQjsrQ0FDZixpQkFBaUI7MkNBQ04sNkJBQTZCOytDQUNyQixzQ0FBc0M7aURBQ3BDLHdDQUF3QzsyQkFFeEMseUJBQXlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUV2RSxJQUFRQyxLQUFLLEdBQWFDLFVBQWMsZUFBQSxDQUFoQ0QsS0FBSyxFQUFFRSxNQUFNLEdBQUtELFVBQWMsZUFBQSxDQUF6QkMsTUFBTSxBQUFvQjtBQUUxQixTQUFTSCw4QkFBOEIsQ0FBQ0ksd0JBQXdCLEVBQUVDLE9BQU8sRUFBRTtJQUN4RixJQUFJQyx3Q0FBd0MsR0FBR0MsZ0RBQWdELENBQUNILHdCQUF3QixDQUFDLEFBQUM7SUFFMUgsTUFBT0Usd0NBQXdDLEtBQUssSUFBSSxDQUFFO1FBQ3hELElBQUlFLGlDQUFpQyxHQUFHRix3Q0FBd0MsRUFDNUVHLFFBQVEsR0FBR0QsaUNBQWlDLENBQUNFLFdBQVcsRUFBRSxFQUMxREMsSUFBSSxHQUFHTixPQUFPLENBQUNJLFFBQVEsQ0FBQyxFQUN4QkcsV0FBVyxHQUFHRCxJQUFJLENBQUNFLGNBQWMsRUFBRSxBQUFDO1FBRXhDLElBQU1DLGdDQUFnQyxHQUFHQyx3Q0FBd0MsQ0FBQ0gsV0FBVyxDQUFDLEVBQ3hGSSxzQ0FBc0MsR0FBR0YsZ0NBQWdDLENBQUNHLE1BQU0sQUFBQztRQUV2RixJQUFJRCxzQ0FBc0MsR0FBRyxDQUFDLEVBQUU7Z0JBb0M5Q0wsS0FBSTtZQW5DSixJQUFJQyxZQUFXLEdBQVhBLEtBQUFBLENBQVcsQUFBQztZQUVoQixJQUFNTSwrQkFBK0IsR0FBR0MscUNBQXFDLENBQUNMLGdDQUFnQyxDQUFDLEVBQ3pHTSw4QkFBOEIsR0FBR0MsVUFBVSxDQUFDVixJQUFJLEVBQUVOLE9BQU8sQ0FBQyxFQUMxRGlCLGdCQUFnQixHQUFHQyxxQ0FBcUMsQ0FBQ0wsK0JBQStCLEVBQUViLE9BQU8sQ0FBQyxBQUFDO1lBRXpHTyxZQUFXLEdBQUdFLGdDQUFnQyxDQUFDLENBQUMsR0FBRztZQUVuREgsSUFBSSxDQUFDYSxpQkFBaUIsQ0FBQ1osWUFBVyxDQUFDLENBQUM7WUFFcENBLFlBQVcsR0FBR0QsSUFBSSxDQUFDRSxjQUFjLEVBQUUsQ0FBQztZQUVwQyxJQUFJVCwwQkFBd0IsR0FBR1EsWUFBVyxBQUFDLEVBQUMsR0FBRztZQUUvQ1IsMEJBQXdCLEdBQUdxQiwrQkFBK0IsQ0FBQ3JCLDBCQUF3QixFQUFFYywrQkFBK0IsRUFBRVQsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHO1lBRXBJRSxJQUFJLENBQUNlLG9CQUFvQixFQUFFLENBQUM7WUFFNUJkLFlBQVcsR0FBR1IsMEJBQXdCLENBQUMsQ0FBQyxHQUFHO1lBRTNDUSxZQUFXLENBQUNlLE9BQU8sQ0FBQyxTQUFDQyxVQUFVLEVBQUs7Z0JBQ2xDakIsSUFBSSxDQUFDa0IsYUFBYSxDQUFDRCxVQUFVLENBQUMsQ0FBQzthQUNoQyxDQUFDLENBQUM7WUFFSCxJQUFNRSxJQUFJLEdBQUd0QixpQ0FBaUMsQ0FBQ3VCLE1BQU0sRUFBRSxFQUNqREMsMkJBQTJCLEdBQUd4QixpQ0FBaUMsQ0FBQ3lCLDhCQUE4QixFQUFFLEVBQ2hHQyx1QkFBdUIsR0FBR0YsMkJBQTJCLEFBQUMsRUFBRSxHQUFHO1lBRWpFLElBQU1HLGtCQUFrQixHQUFHRCx1QkFBdUIsRUFDNUNFLHNCQUFzQixHQUFHQyxpQ0FBaUMsQ0FBQ2pDLDBCQUF3QixFQUFFOEIsdUJBQXVCLEVBQUVaLGdCQUFnQixFQUFFYixRQUFRLEVBQUVxQixJQUFJLENBQUMsQUFBQztZQUV0SnJCLFFBQVEsR0FBR3lCLHVCQUF1QixDQUFDeEIsV0FBVyxFQUFFLENBQUM7WUFFakRDLElBQUksR0FBR04sT0FBTyxDQUFDSSxRQUFRLENBQUMsQ0FBQztZQUV6QkUsQ0FBQUEsS0FBSSxHQUFKQSxJQUFJLEVBQUMyQixpQkFBaUIsQ0FBdEIzQixLQUFxRSxDQUFyRUEsS0FBSSxFQUFKQTtnQkFBdUJ3QixrQkFBa0I7YUFBNEIsQ0FBckV4QixNQUFxRSxDQUExQixtQkFBR3lCLHNCQUFzQixDQUF0QkEsQ0FBdUIsQ0FBQSxDQUFDO1NBQ3ZFO1FBRUQsOEZBQThGO1FBQzlGLGdEQUFnRDtRQUNoRCwyRkFBMkY7UUFDM0YsNkhBQTZIO1FBQzdILEVBQUU7UUFDRix3SEFBd0g7UUFDeEgsRUFBRTtRQUNGLDJEQUEyRDtRQUMzRCwwR0FBMEc7UUFDMUcsb0VBQW9FO1FBQ3BFLEVBQUU7UUFDRixvREFBb0Q7UUFDcEQsNEJBQTRCO1FBQzVCLEVBQUU7UUFDRixnSEFBZ0g7UUFDaEgsMERBQTBEO1FBQzFELCtMQUErTDtRQUMvTCxvRUFBb0U7UUFDcEUsd0VBQXdFO1FBQ3hFLGtGQUFrRjtRQUNsRixFQUFFO1FBQ0YseUVBQXlFO1FBQ3pFLEVBQUU7UUFDRiwwSEFBMEg7UUFDMUgsRUFBRTtRQUNGLHlIQUF5SDtRQUV6SDlCLHdDQUF3QyxHQUFHLElBQUksQ0FBQztLQUNqRDtDQUNGO0FBRUQsU0FBU2UsVUFBVSxDQUFDVixJQUFJLEVBQUVOLE9BQU8sRUFBRTtJQUNqQyxJQUFJZSw4QkFBOEIsR0FBRyxJQUFJLEFBQUM7SUFFMUMsSUFBTW1CLFdBQVcsR0FBR0MsUUFBVyxRQUFBLENBQUNDLFFBQVEsQ0FBQzlCLElBQUksQ0FBQyxBQUFDO0lBRS9DLElBQUk0QixXQUFXLEtBQUssSUFBSSxFQUFFO1FBQ3hCLElBQU1MLHVCQUF1QixHQUFHUSxLQUF1QixRQUFBLENBQUNDLGVBQWUsQ0FBQ0osV0FBVyxDQUFDLEVBQzlFSyxlQUFlLEdBQUdMLFdBQVcsQ0FBQ00sT0FBTyxFQUFFLEVBQ3ZDakMsV0FBVyxHQUFHMkIsV0FBVyxDQUFDMUIsY0FBYyxFQUFFLEVBQzFDZSxVQUFVLEdBQUdNLHVCQUF1QixBQUFDLEVBQUMsR0FBRztRQUUvQ3ZCLElBQUksQ0FBQ2EsaUJBQWlCLENBQUNaLFdBQVcsQ0FBQyxDQUFDO1FBRXBDRCxJQUFJLENBQUNrQixhQUFhLENBQUNELFVBQVUsQ0FBQyxDQUFDO1FBRS9CdkIsT0FBTyxDQUFDdUMsZUFBZSxDQUFDLEdBQUdMLFdBQVcsQ0FBQztRQUV2Q25CLDhCQUE4QixHQUFHUSxVQUFVLENBQUMsQ0FBRSxHQUFHO0tBQ2xEO0lBRUQsT0FBT1IsOEJBQThCLENBQUM7Q0FDdkM7QUFFRCxTQUFTMEIsNkJBQTZCLENBQUMxQyx3QkFBd0IsRUFBRTJDLCtCQUErQixFQUFFQyw0QkFBNEIsRUFBRTtJQUM5SDdDLE1BQU0sQ0FBQ0Msd0JBQXdCLEVBQUUsU0FBQzhCLHVCQUF1QixFQUFLO1FBQzVELElBQU1lLDhEQUE4RCxHQUFHRiwrQkFBK0IsQ0FBQ0csUUFBUSxDQUFDaEIsdUJBQXVCLENBQUMsQUFBQztRQUV6SSxJQUFJLENBQUNlLDhEQUE4RCxFQUFFO1lBQ25FLE9BQU8sSUFBSSxDQUFDO1NBQ2I7S0FDRixDQUFDLENBQUM7SUFFSDdDLHdCQUF3QixDQUFDK0MsSUFBSSxDQUFDSCw0QkFBNEIsQ0FBQyxDQUFDO0NBQzdEO0FBRUQsU0FBU3ZCLCtCQUErQixDQUFDckIsd0JBQXdCLEVBQUVjLCtCQUErQixFQUFFVCxRQUFRLEVBQUU7SUFDNUdMLHdCQUF3QixHQUFHQSx3QkFBd0IsQ0FBQ2dELEdBQUcsQ0FBQyxTQUFDbEIsdUJBQXVCLEVBQUs7UUFDbkZBLHVCQUF1QixHQUFHUSxLQUF1QixRQUFBLENBQUNXLHFFQUFxRSxDQUFDNUMsUUFBUSxFQUFFeUIsdUJBQXVCLEVBQUVoQiwrQkFBK0IsQ0FBQyxDQUFDLENBQUUsR0FBRztRQUVqTSxPQUFPZ0IsdUJBQXVCLENBQUM7S0FDaEMsQ0FBQyxDQUFDO0lBRUgsT0FBTzlCLHdCQUF3QixDQUFDO0NBQ2pDO0FBRUQsU0FBU2lDLGlDQUFpQyxDQUFDakMsd0JBQXdCLEVBQUU4Qix1QkFBdUIsRUFBRVosZ0JBQWdCLEVBQUViLFFBQVEsRUFBRXFCLElBQUksRUFBRTtJQUM5SCxJQUFNTSxzQkFBc0IsR0FBRyxFQUFFLEFBQUM7SUFFbEMsSUFBSWtCLHFCQUFxQixFQUNyQkMsd0JBQXdCLEFBQUM7SUFFN0IsSUFBTUMsd0JBQXdCLEdBQUd0Qix1QkFBdUIsQUFBQyxFQUFDLEdBQUc7SUFFN0QsSUFBTXVCLDRCQUE0QixHQUFHeEQsS0FBSyxDQUFDRyx3QkFBd0IsQ0FBQyxBQUFDO0lBRXJFbUQsd0JBQXdCLEdBQUdFLDRCQUE0QixDQUFDLENBQUUsR0FBRztJQUU3REgscUJBQXFCLEdBQUdJLFNBQStCLFFBQUEsQ0FBQ0MsK0NBQStDLENBQUNKLHdCQUF3QixFQUFFQyx3QkFBd0IsRUFBRWxDLGdCQUFnQixDQUFDLENBQUMsQ0FBRSxHQUFHO0lBRW5MYyxzQkFBc0IsQ0FBQ2UsSUFBSSxDQUFDRyxxQkFBcUIsQ0FBQyxDQUFDO0lBRW5EQSxxQkFBcUIsR0FBR1osS0FBdUIsUUFBQSxDQUFDa0Isc0NBQXNDLENBQUNuRCxRQUFRLEVBQUUrQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUUsR0FBRztJQUVoSXBCLHNCQUFzQixDQUFDZSxJQUFJLENBQUNHLHFCQUFxQixDQUFDLENBQUM7SUFFbkQsT0FBT2xCLHNCQUFzQixDQUFDO0NBQy9CO0FBRUQsU0FBU2pCLHFDQUFxQyxDQUFDTCxnQ0FBZ0MsRUFBRTtJQUMvRSxJQUFNSSwrQkFBK0IsR0FBRzJDLElBQUFBLFlBQTZCLDhCQUFBLEVBQUMvQyxnQ0FBZ0MsRUFBRSxTQUFDZ0QsS0FBSyxFQUFFckQsUUFBUSxFQUFLO1FBQzNILElBQU1TLCtCQUErQixHQUFHd0MsU0FBK0IsUUFBQSxDQUFDSyxvQkFBb0IsQ0FBQ0QsS0FBSyxFQUFFckQsUUFBUSxDQUFDLEFBQUM7UUFFOUcsT0FBT1MsK0JBQStCLENBQUM7S0FDeEMsQ0FBQyxBQUFDO0lBRUgsT0FBT0EsK0JBQStCLENBQUM7Q0FDeEM7QUFFRCxTQUFTSyxxQ0FBcUMsQ0FBQ0wsK0JBQStCLEVBQUViLE9BQU8sRUFBRTtJQUN2RixJQUFNMkQsWUFBWSxHQUFHQyxTQUFZLFFBQUEsQ0FBQ0MsbUNBQW1DLENBQUNoRCwrQkFBK0IsQ0FBQyxFQUNoR0ksZ0JBQWdCLEdBQUcwQyxZQUFZLENBQUNuQixPQUFPLEVBQUUsQUFBQztJQUVoRHhDLE9BQU8sQ0FBQ2lCLGdCQUFnQixDQUFDLEdBQUcwQyxZQUFZLENBQUM7SUFFekMsT0FBTzFDLGdCQUFnQixDQUFDO0NBQ3pCO0FBRUQsU0FBUzZDLHVDQUF1QyxDQUFDM0QsaUNBQWlDLEVBQUVILE9BQU8sRUFBRTtJQUMzRixJQUFJaUIsZ0JBQWdCLEdBQUcsSUFBSSxBQUFDO0lBRTVCLElBQU0wQyxZQUFZLEdBQUdDLFNBQVksUUFBQSxDQUFDRyxxQ0FBcUMsQ0FBQzVELGlDQUFpQyxDQUFDLEFBQUM7SUFFM0csSUFBSXdELFlBQVksS0FBSyxJQUFJLEVBQUU7UUFDekIxQyxnQkFBZ0IsR0FBRzBDLFlBQVksQ0FBQ25CLE9BQU8sRUFBRSxDQUFDO1FBRTFDeEMsT0FBTyxDQUFDaUIsZ0JBQWdCLENBQUMsR0FBRzBDLFlBQVksQ0FBQztLQUMxQztJQUVELE9BQU8xQyxnQkFBZ0IsQ0FBQztDQUN6QjtBQUVELFNBQVMrQyx1Q0FBdUMsQ0FBQ0Msa0NBQWtDLEVBQUU7SUFDbkYsSUFBTTlELGlDQUFpQyxHQUFHcUQsSUFBQUEsWUFBNkIsOEJBQUEsRUFBQ1Msa0NBQWtDLEVBQUUsU0FBQ1IsS0FBSyxFQUFFckQsUUFBUSxFQUFLO1FBQy9ILElBQUlELGlDQUFpQyxBQUFDO1FBRXRDLElBQU0rRCxzQ0FBc0MsR0FBR3RFLEtBQUssQ0FBQ3FFLGtDQUFrQyxDQUFDLEFBQUM7UUFFekY5RCxpQ0FBaUMsR0FBRytELHNDQUFzQyxDQUFDLENBQUMsR0FBRztRQUUvRSxJQUFNbkUsd0JBQXdCLEdBQUdJLGlDQUFpQyxDQUFDZ0UsMkJBQTJCLEVBQUUsQUFBQztRQUVqR2hFLGlDQUFpQyxHQUFHaUUsV0FBaUMsUUFBQSxDQUFDQyw0Q0FBNEMsQ0FBQ1osS0FBSyxFQUFFckQsUUFBUSxFQUFFTCx3QkFBd0IsQ0FBQyxDQUFDO1FBRTlKLE9BQU9JLGlDQUFpQyxDQUFDO0tBQzFDLENBQUMsQUFBQztJQUVILE9BQU9BLGlDQUFpQyxDQUFDO0NBQzFDO0FBRUQsU0FBU08sd0NBQXdDLENBQUNILFdBQVcsRUFBRTtJQUM3RCxJQUFNRSxnQ0FBZ0MsR0FBR0YsV0FBVyxDQUFDVCxNQUFNLENBQUMsU0FBQ3lCLFVBQVUsRUFBSztRQUMxRSxJQUFNK0MseUNBQXlDLEdBQUkvQyxBQUFVLFdBQVk4QixDQUF0QjlCLFVBQVUsRUFBWThCLFNBQStCLFFBQUEsQ0FBQSxBQUFDLEFBQUM7UUFFMUcsSUFBSWlCLHlDQUF5QyxFQUFFO1lBQzdDLE9BQU8sSUFBSSxDQUFDO1NBQ2I7S0FDRixDQUFDLEFBQUM7SUFFSCxPQUFPN0QsZ0NBQWdDLENBQUM7Q0FDekM7QUFFRCxTQUFTOEQsd0NBQXdDLENBQUNwRSxpQ0FBaUMsRUFBRVksOEJBQThCLEVBQUVjLHVCQUF1QixFQUFFWixnQkFBZ0IsRUFBRVEsSUFBSSxFQUFFO0lBQ3BLLElBQU1NLHNCQUFzQixHQUFHLEVBQUUsRUFDM0JNLHVCQUF1QixHQUFHWixJQUFJLEdBQ0Y0QixTQUErQixRQUFBLEdBQzdCZSxXQUFpQyxRQUFBLEVBQy9EbkIscUJBQXFCLEdBQUdaLHVCQUF1QixDQUFDbUMsK0VBQStFLENBQUNyRSxpQ0FBaUMsRUFBRTBCLHVCQUF1QixFQUFFWixnQkFBZ0IsQ0FBQyxBQUFDLEVBQUUsR0FBRztJQUV6TmMsc0JBQXNCLENBQUNlLElBQUksQ0FBQ0cscUJBQXFCLENBQUMsQ0FBQztJQUVuRCxJQUFJbEMsOEJBQThCLEtBQUssSUFBSSxFQUFFO1FBQzNDLElBQU1rQyxzQkFBcUIsR0FBR1osdUJBQXVCLENBQUNvQyw0REFBNEQsQ0FBQzFELDhCQUE4QixFQUFFYyx1QkFBdUIsQ0FBQyxBQUFDLEVBQUUsR0FBRztRQUVqTEUsc0JBQXNCLENBQUNlLElBQUksQ0FBQ0csc0JBQXFCLENBQUMsQ0FBQztLQUNwRDtJQUVELE9BQU9sQixzQkFBc0IsQ0FBQztDQUMvQjtBQUVELFNBQVMyQywwQ0FBMEMsQ0FBQ25FLFdBQVcsRUFBZ0M7UUFBOUJvRSxxQkFBcUIsR0FBckJBLCtDQUE0QixrQkFBSixJQUFJO0lBQzNGLElBQU1WLGtDQUFrQyxHQUFHMUQsV0FBVyxDQUFDVCxNQUFNLENBQUMsU0FBQ3lCLFVBQVUsRUFBSztRQUM1RSxJQUFNcUQsMkNBQTJDLEdBQUlyRCxBQUFVLFdBQVk2QyxDQUF0QjdDLFVBQVUsRUFBWTZDLFdBQWlDLFFBQUEsQ0FBQSxBQUFDLEFBQUM7UUFFOUcsSUFBSVEsMkNBQTJDLEVBQUU7WUFDL0MsSUFBSUQscUJBQXFCLEtBQUssSUFBSSxFQUFFO2dCQUNsQyxPQUFPLElBQUksQ0FBQzthQUNiO1lBRUQsSUFBTXhFLGlDQUFpQyxHQUFHb0IsVUFBVSxFQUM5Q3NELHNCQUFzQixHQUFHMUUsaUNBQWlDLENBQUMyRSx5QkFBeUIsRUFBRSxFQUN0RkMsMEJBQTBCLEdBQUduRixLQUFLLENBQUNpRixzQkFBc0IsQ0FBQyxFQUMxRHpFLFFBQVEsR0FBRzJFLDBCQUEwQixBQUFDLEVBQUMsR0FBRztZQUVoRCxJQUFJM0UsUUFBUSxLQUFLdUUscUJBQXFCLEVBQUU7Z0JBQ3RDLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjtLQUNGLENBQUMsQUFBQztJQUVILE9BQU9WLGtDQUFrQyxDQUFDO0NBQzNDO0FBRUQsU0FBUy9ELGdEQUFnRCxDQUFDSCx3QkFBd0IsRUFBRTtJQUNsRixJQUFJRSx3Q0FBd0MsR0FBRyxJQUFJLEFBQUM7SUFFcEQsSUFBTU0sV0FBVyxHQUFHUix3QkFBd0IsRUFDdENrRSxrQ0FBa0MsR0FBR1MsMENBQTBDLENBQUNuRSxXQUFXLENBQUMsQUFBQztJQUVuRzBELGtDQUFrQyxDQUFDM0MsT0FBTyxDQUFDLFNBQUNuQixpQ0FBaUMsRUFBSztRQUNoRixJQUFJRix3Q0FBd0MsS0FBSyxJQUFJLEVBQUU7WUFDckRBLHdDQUF3QyxHQUFHRSxpQ0FBaUMsQ0FBQyxDQUFDLEdBQUc7U0FDbEYsTUFBTTtZQUNMLElBQU02RSxvRkFBb0YsR0FBRzdFLGlDQUFpQyxDQUFDOEUsYUFBYSxDQUFDaEYsd0NBQXdDLENBQUMsQUFBQztZQUV2TCxJQUFJK0Usb0ZBQW9GLEVBQUU7Z0JBQ3hGL0Usd0NBQXdDLEdBQUdFLGlDQUFpQyxDQUFDLENBQUMsR0FBRzthQUNsRjtTQUNGO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsT0FBT0Ysd0NBQXdDLENBQUM7Q0FDakQifQ==