"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return eliminateIndirectLeftRecursion;
    }
});
var _replacementDefinition = /*#__PURE__*/ _interopRequireDefault(require("./replacementDefinition"));
var _indirectly = /*#__PURE__*/ _interopRequireDefault(require("./rule/repeated/indirectly"));
var _directlyRepeat = /*#__PURE__*/ _interopRequireDefault(require("./ruleOperation/directlyRepeat"));
var _directlyReduce = /*#__PURE__*/ _interopRequireDefault(require("./ruleOperation/directlyReduce"));
var _indirectlyReduce = /*#__PURE__*/ _interopRequireDefault(require("./ruleOperation/indirectlyReduce"));
var _directly = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/directly"));
var _indirectly1 = /*#__PURE__*/ _interopRequireDefault(require("./recursiveDefinition/left/indirectly"));
var _array = require("./utilities/array");
var _ruleName = require("./utilities/ruleName");
var _context = require("./utilities/context");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var count = 0;
function eliminateIndirectLeftRecursion(context) {
    var greatestIndirectlyLeftRecursiveDefinition = retrieveGreatestIndirectlyLeftRecursiveDefinition(context);
    while(greatestIndirectlyLeftRecursiveDefinition !== null){
        var indirectlyLeftRecursiveDefinition = greatestIndirectlyLeftRecursiveDefinition, rule = indirectlyLeftRecursiveDefinition.getRule(), directlyLeftRecursiveDefinition = (0, _context.findDirectlyLeftRecursiveDefinition)(rule, context);
        directlyLeftRecursiveDefinition !== null ? rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) : rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context);
        greatestIndirectlyLeftRecursiveDefinition = ++count > Infinity ? null : retrieveGreatestIndirectlyLeftRecursiveDefinition(context);
    }
}
function directlyReduceRule(directlyLeftRecursiveDefinition, context) {
    var disallowIsolated = false, directlyReducedRule = _directlyReduce.default.execute(directlyLeftRecursiveDefinition, disallowIsolated, context);
    return directlyReducedRule;
}
function directlyRepeatRule(directlyLeftRecursiveDefinition, context) {
    var directlyRepeatedRule = _directlyRepeat.default.execute(directlyLeftRecursiveDefinition, context);
    return directlyRepeatedRule;
}
function indirectlyReduceRule(indirectlyLeftRecursiveDefinition, context) {
    var indirectlyReducedRule = _indirectlyReduce.default.execute(indirectlyLeftRecursiveDefinition, context);
    if (indirectlyReducedRule !== null) {
        var replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyReducedRule(indirectlyLeftRecursiveDefinition, indirectlyReducedRule), leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition(), rule = leftRecursiveDefinition.getRule(), definition = replacementDefinition; ///
        rule.addDefinition(definition);
    }
}
function indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, context) {
    var ruleMap = context.ruleMap, indirectlyLeftRecursiveDefinitions = context.indirectlyLeftRecursiveDefinitions, rule = indirectlyLeftRecursiveDefinition.getRule(), ruleName = rule.getName(), leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName(), indirectlyRepeatedRuleName = (0, _ruleName.indirectlyRepeatedRuleNameFromRuleNameAndLeftRecursiveRuleName)(ruleName, leftRecursiveRuleName);
    var indirectlyRepeatedRule = ruleMap[indirectlyRepeatedRuleName] || null;
    if (indirectlyRepeatedRule === null) {
        indirectlyRepeatedRule = _indirectly.default.fromRuleLeftRecursiveRuleNameAndIndirectlyLeftRecursiveDefinitions(rule, leftRecursiveRuleName, indirectlyLeftRecursiveDefinitions);
        ruleMap[indirectlyRepeatedRuleName] = indirectlyRepeatedRule;
        var replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveRuleName), definition = replacementDefinition; ///
        rule.addDefinition(definition);
    }
    return indirectlyRepeatedRule;
}
function rewriteDirectLeftRecursion(directlyLeftRecursiveDefinition, indirectlyLeftRecursiveDefinition, context) {
    var directlyReducedRule = directlyReduceRule(directlyLeftRecursiveDefinition, context), directlyRepeatedRule = directlyRepeatRule(directlyLeftRecursiveDefinition, context);
    var directlyLeftRecursiveDefinitions, indirectlyLeftRecursiveDefinitions;
    var rule = directlyLeftRecursiveDefinition.getRule(), definition = null, leftRecursiveRuleName = null;
    directlyLeftRecursiveDefinitions = (0, _context.findDirectlyLeftRecursiveDefinitions)(rule, context);
    indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, definition, leftRecursiveRuleName, context);
    (0, _context.removeDirectlyLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, context);
    directlyLeftRecursiveDefinitions = rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinition, directlyRepeatedRule, directlyReducedRule, context);
    (0, _context.removeIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
    indirectlyLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule);
    (0, _context.addDirectlyLeftRecursiveDefinitions)(directlyLeftRecursiveDefinitions, context);
    (0, _context.addIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
}
function rewriteIndirectLeftRecursion(indirectlyLeftRecursiveDefinition, context) {
    indirectlyReduceRule(indirectlyLeftRecursiveDefinition, context);
    var indirectlyRepeatedRule = indirectlyRepeatRule(indirectlyLeftRecursiveDefinition, context), indirectlyLeftRecursiveDefinitions = rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context), leftRecursiveDefinition = rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule);
    (0, _context.removeIndirectlyLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, context);
    (0, _context.addLeftRecursiveDefinition)(leftRecursiveDefinition, context);
}
function rewriteLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule) {
    var leftRecursiveDefinition = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinition();
    var least = indirectlyLeftRecursiveDefinition.isLeast();
    var definition = leftRecursiveDefinition.getDefinition();
    var rule = leftRecursiveDefinition.getRule(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition), replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndIndirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, indirectlyRepeatedRule), replacedDefinition = definition; ///
    definition = replacementDefinition; ///
    leftRecursiveDefinition = least ? _directly.default.fromRuleAndDefinition(rule, definition) : _indirectly1.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition);
    definitionsIncludesDefinition ? rule.replaceDefinition(replacedDefinition, replacementDefinition) : rule.addDefinition(definition);
    return leftRecursiveDefinition;
}
function rewriteDirectlyLeftRecursiveDefinition(directlyLeftRecursiveDefinitions, directlyRepeatedRule, directlyReducedRule, context) {
    var rule = directlyLeftRecursiveDefinitions.getRule(), definition = null, leftRecursiveRuleName = null, indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, definition, leftRecursiveRuleName, context), definitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        return definition;
    });
    if (directlyReducedRule == null) {
        rule.removeAllDefinitions();
    } else {
        var replacementDefinition = _replacementDefinition.default.fromDirectlyReducedRuleAndDirectlyRepeatedRule(directlyReducedRule, directlyRepeatedRule);
        rule.replaceAllDefinitions(replacementDefinition);
    }
    rule.addDefinitions(definitions);
    return directlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, context) {
    var indirectlyLeftRecursiveDefinitions;
    var rule = indirectlyLeftRecursiveDefinition.getRule(), definition = indirectlyLeftRecursiveDefinition.getDefinition(), definitions = rule.getDefinitions(), definitionsIncludesDefinition = definitions.includes(definition);
    if (definitionsIncludesDefinition) {
        var leftRecursiveRuleName = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleName();
        indirectlyLeftRecursiveDefinitions = (0, _context.findIndirectlyLeftRecursiveDefinitions)(rule, definition, leftRecursiveRuleName, context);
        indirectlyLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ].concat(_toConsumableArray(indirectlyLeftRecursiveDefinitions));
        var definitions1 = indirectlyLeftRecursiveDefinitions.map(function(removedLeftRecursiveDefinition) {
            var definition = removedLeftRecursiveDefinition.getDefinition();
            return definition;
        });
        rule.removeDefinitions(definitions1);
    } else {
        indirectlyLeftRecursiveDefinitions = [
            indirectlyLeftRecursiveDefinition
        ];
    }
    return indirectlyLeftRecursiveDefinitions;
}
function rewriteIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions, directlyRepeatedRule) {
    var firstIndirectlyLeftRecursiveDefinition = (0, _array.first)(indirectlyLeftRecursiveDefinitions), indirectlyRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition, rule = indirectlyRecursiveDefinition.getRule();
    indirectlyLeftRecursiveDefinitions = indirectlyLeftRecursiveDefinitions.map(function(indirectlyLeftRecursiveDefinition) {
        var definition = indirectlyLeftRecursiveDefinition.getDefinition();
        var directly = true, replacedDefinition = definition, replacementDefinition = _replacementDefinition.default.fromIndirectlyLeftRecursiveDefinitionAndDirectlyRepeatedRule(indirectlyLeftRecursiveDefinition, directlyRepeatedRule);
        definition = replacementDefinition; ///
        indirectlyLeftRecursiveDefinition = _indirectly1.default.fromIndirectlyLeftRecursiveDefinitionAndDefinition(indirectlyLeftRecursiveDefinition, definition, directly); ///
        rule.replaceDefinition(replacedDefinition, replacementDefinition);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinitions;
}
function retrieveGreatestIndirectlyLeftRecursiveDefinition(context) {
    var greatestIndirectlyLeftRecursiveDefinition = null;
    var indirectlyLeftRecursiveDefinitions = context.indirectlyLeftRecursiveDefinitions;
    indirectlyLeftRecursiveDefinitions.forEach(function(indirectlyLeftRecursiveDefinition) {
        if (greatestIndirectlyLeftRecursiveDefinition === null) {
            greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
        } else {
            var indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition.isGreaterThan(greatestIndirectlyLeftRecursiveDefinition);
            if (indirectlyLeftRecursiveDefinitionGreaterThanGreatestIndirectlyLeftRecursiveDefinition) {
                greatestIndirectlyLeftRecursiveDefinition = indirectlyLeftRecursiveDefinition; ///
            }
        }
    });
    return greatestIndirectlyLeftRecursiveDefinition;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBSZXBsYWNlbWVudERlZmluaXRpb24gZnJvbSBcIi4vcmVwbGFjZW1lbnREZWZpbml0aW9uXCI7XG5pbXBvcnQgSW5kaXJlY3RseVJlcGVhdGVkUnVsZSBmcm9tIFwiLi9ydWxlL3JlcGVhdGVkL2luZGlyZWN0bHlcIjtcbmltcG9ydCBEaXJlY3RseVJlcGVhdFJ1bGVPcGVyYXRpb24gZnJvbSBcIi4vcnVsZU9wZXJhdGlvbi9kaXJlY3RseVJlcGVhdFwiO1xuaW1wb3J0IERpcmVjdGx5UmVkdWNlUnVsZU9wZXJhdGlvbiBmcm9tIFwiLi9ydWxlT3BlcmF0aW9uL2RpcmVjdGx5UmVkdWNlXCI7XG5pbXBvcnQgSW5kaXJlY3RseVJlZHVjZVJ1bGVPcGVyYXRpb24gZnJvbSBcIi4vcnVsZU9wZXJhdGlvbi9pbmRpcmVjdGx5UmVkdWNlXCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9yZWN1cnNpdmVEZWZpbml0aW9uL2xlZnQvZGlyZWN0bHlcIjtcbmltcG9ydCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gZnJvbSBcIi4vcmVjdXJzaXZlRGVmaW5pdGlvbi9sZWZ0L2luZGlyZWN0bHlcIjtcblxuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiLi91dGlsaXRpZXMvYXJyYXlcIjtcbmltcG9ydCB7IGluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lRnJvbVJ1bGVOYW1lQW5kTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3J1bGVOYW1lXCI7XG5pbXBvcnQgeyBhZGRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbixcbiAgICAgICAgIGZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLFxuICAgICAgICAgYWRkRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICBhZGRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLFxuICAgICAgICAgZmluZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsXG4gICAgICAgICByZW1vdmVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyxcbiAgICAgICAgIHJlbW92ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgfSBmcm9tIFwiLi91dGlsaXRpZXMvY29udGV4dFwiXG5cbmxldCBjb3VudCA9IDA7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbihjb250ZXh0KSB7XG4gIGxldCBncmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oY29udGV4dCk7XG5cbiAgd2hpbGUgKGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIC8vL1xuICAgICAgICAgIHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICAgIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihydWxlLCBjb250ZXh0KTtcblxuICAgIChkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uICE9PSBudWxsKSA/XG4gICAgICByZXdyaXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIDpcbiAgICAgICAgcmV3cml0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gICAgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSArK2NvdW50ID4gSW5maW5pdHkgPyBudWxsIDogcmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihjb250ZXh0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaXJlY3RseVJlZHVjZVJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBjb25zdCBkaXNhbGxvd0lzb2xhdGVkID0gZmFsc2UsXG4gICAgICAgIGRpcmVjdGx5UmVkdWNlZFJ1bGUgPSBEaXJlY3RseVJlZHVjZVJ1bGVPcGVyYXRpb24uZXhlY3V0ZShkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkaXNhbGxvd0lzb2xhdGVkLCBjb250ZXh0KTtcblxuICByZXR1cm4gZGlyZWN0bHlSZWR1Y2VkUnVsZTtcbn1cblxuZnVuY3Rpb24gZGlyZWN0bHlSZXBlYXRSdWxlKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgY29uc3QgZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBEaXJlY3RseVJlcGVhdFJ1bGVPcGVyYXRpb24uZXhlY3V0ZShkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KTtcblxuICByZXR1cm4gZGlyZWN0bHlSZXBlYXRlZFJ1bGU7XG59XG5cbmZ1bmN0aW9uIGluZGlyZWN0bHlSZWR1Y2VSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBjb25zdCBpbmRpcmVjdGx5UmVkdWNlZFJ1bGUgPSBJbmRpcmVjdGx5UmVkdWNlUnVsZU9wZXJhdGlvbi5leGVjdXRlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCk7XG5cbiAgaWYgKGluZGlyZWN0bHlSZWR1Y2VkUnVsZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlZHVjZWRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlZHVjZWRSdWxlKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpLFxuICAgICAgICAgIHJ1bGUgPSBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgICAgZGVmaW5pdGlvbiA9IHJlcGxhY2VtZW50RGVmaW5pdGlvbjsgLy8vXG5cbiAgICBydWxlLmFkZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kaXJlY3RseVJlcGVhdFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgcnVsZU1hcCwgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyB9ID0gY29udGV4dCxcbiAgICAgICAgcnVsZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCksXG4gICAgICAgIHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCksXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUoKSxcbiAgICAgICAgaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWUgPSBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlTmFtZUZyb21SdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVSdWxlTmFtZShydWxlTmFtZSwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKTtcblxuICBsZXQgaW5kaXJlY3RseVJlcGVhdGVkUnVsZSA9IHJ1bGVNYXBbaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVdIHx8IG51bGw7XG5cbiAgaWYgKGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPT09IG51bGwpIHtcbiAgICBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlID0gSW5kaXJlY3RseVJlcGVhdGVkUnVsZS5mcm9tUnVsZUxlZnRSZWN1cnNpdmVSdWxlTmFtZUFuZEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIHJ1bGVNYXBbaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVdID0gaW5kaXJlY3RseVJlcGVhdGVkUnVsZTtcblxuICAgIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lKSxcbiAgICAgICAgICBkZWZpbml0aW9uID0gcmVwbGFjZW1lbnREZWZpbml0aW9uOyAvLy9cblxuICAgIHJ1bGUuYWRkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlRGlyZWN0TGVmdFJlY3Vyc2lvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgY29uc3QgZGlyZWN0bHlSZWR1Y2VkUnVsZSA9IGRpcmVjdGx5UmVkdWNlUnVsZShkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSxcbiAgICAgICAgZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBkaXJlY3RseVJlcGVhdFJ1bGUoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCk7XG5cbiAgbGV0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLFxuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xuXG4gIGNvbnN0IHJ1bGUgPSBkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IG51bGwsXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG51bGw7XG5cbiAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMocnVsZSwgY29udGV4dCk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGRlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgY29udGV4dCk7XG5cbiAgcmVtb3ZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGNvbnRleHQpXG5cbiAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBkaXJlY3RseVJlcGVhdGVkUnVsZSwgZGlyZWN0bHlSZWR1Y2VkUnVsZSwgY29udGV4dCk7XG5cbiAgcmVtb3ZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBjb250ZXh0KTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgZGlyZWN0bHlSZXBlYXRlZFJ1bGUpO1xuXG4gIGFkZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBjb250ZXh0KTtcblxuICBhZGRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIGNvbnRleHQpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgY29udGV4dCkge1xuICBpbmRpcmVjdGx5UmVkdWNlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xuXG4gIGNvbnN0IGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUgPSBpbmRpcmVjdGx5UmVwZWF0UnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpLFxuICAgICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpLFxuICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJld3JpdGVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGlyZWN0bHlSZXBlYXRlZFJ1bGUpO1xuXG4gIHJlbW92ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgY29udGV4dCk7XG5cbiAgYWRkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGNvbnRleHQpO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlKSB7XG4gIGxldCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbigpO1xuXG4gIGNvbnN0IGxlYXN0ID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmlzTGVhc3QoKTtcblxuICBsZXQgZGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICBjb25zdCBydWxlID0gbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IHJ1bGUuZ2V0RGVmaW5pdGlvbnMoKSxcbiAgICAgICAgZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24gPSBkZWZpbml0aW9ucy5pbmNsdWRlcyhkZWZpbml0aW9uKSxcbiAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kaXJlY3RseVJlcGVhdGVkUnVsZSksXG4gICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGRlZmluaXRpb247ICAvLy9cblxuICBkZWZpbml0aW9uID0gcmVwbGFjZW1lbnREZWZpbml0aW9uOyAvLy9cblxuICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGxlYXN0ID8gLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21SdWxlQW5kRGVmaW5pdGlvbihydWxlLCBkZWZpbml0aW9uKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRlZmluaXRpb24pO1xuXG4gIGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uID9cbiAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKSA6XG4gICAgICBydWxlLmFkZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG5cbiAgcmV0dXJuIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgZGlyZWN0bHlSZXBlYXRlZFJ1bGUsIGRpcmVjdGx5UmVkdWNlZFJ1bGUsIGNvbnRleHQpIHtcbiAgY29uc3QgcnVsZSA9IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLmdldFJ1bGUoKSxcbiAgICAgICAgZGVmaW5pdGlvbiA9IG51bGwsXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IG51bGwsXG4gICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSBmaW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhydWxlLCBkZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUsIGNvbnRleHQpLFxuICAgICAgICBkZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgICB9KTtcblxuICBpZiAoZGlyZWN0bHlSZWR1Y2VkUnVsZSA9PSBudWxsKSB7XG4gICAgcnVsZS5yZW1vdmVBbGxEZWZpbml0aW9ucygpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IFJlcGxhY2VtZW50RGVmaW5pdGlvbi5mcm9tRGlyZWN0bHlSZWR1Y2VkUnVsZUFuZERpcmVjdGx5UmVwZWF0ZWRSdWxlKGRpcmVjdGx5UmVkdWNlZFJ1bGUsIGRpcmVjdGx5UmVwZWF0ZWRSdWxlKTtcblxuICAgIHJ1bGUucmVwbGFjZUFsbERlZmluaXRpb25zKHJlcGxhY2VtZW50RGVmaW5pdGlvbik7XG4gIH1cblxuICBydWxlLmFkZERlZmluaXRpb25zKGRlZmluaXRpb25zKTtcblxuICByZXR1cm4gZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBjb250ZXh0KSB7XG4gIGxldCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xuXG4gIGNvbnN0IHJ1bGUgPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZ2V0UnVsZSgpLFxuICAgICAgICBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKSxcbiAgICAgICAgZGVmaW5pdGlvbnMgPSBydWxlLmdldERlZmluaXRpb25zKCksXG4gICAgICAgIGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uID0gZGVmaW5pdGlvbnMuaW5jbHVkZXMoZGVmaW5pdGlvbik7XG5cbiAgaWYgKGRlZmluaXRpb25zSW5jbHVkZXNEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgbGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZSgpO1xuXG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKHJ1bGUsIGRlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSwgY29udGV4dCk7XG5cbiAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gWyAgLy8vXG4gICAgICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sXG4gICAgICAuLi5pbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zXG4gICAgXTtcblxuICAgIGNvbnN0IGRlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5tYXAoKHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbikgPT4ge1xuICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXREZWZpbml0aW9uKCk7XG5cbiAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH0pO1xuXG4gICAgcnVsZS5yZW1vdmVEZWZpbml0aW9ucyhkZWZpbml0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IFtcbiAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvblxuICAgIF07XG4gIH1cblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucztcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgZGlyZWN0bHlSZXBlYXRlZFJ1bGUpIHtcbiAgY29uc3QgZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSxcbiAgICAgICAgaW5kaXJlY3RseVJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgLy8vXG4gICAgICAgIHJ1bGUgPSBpbmRpcmVjdGx5UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRSdWxlKCk7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMubWFwKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHsgIC8vL1xuICAgIGxldCBkZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldERlZmluaXRpb24oKTtcblxuICAgIGNvbnN0IGRpcmVjdGx5ID0gdHJ1ZSxcbiAgICAgICAgICByZXBsYWNlZERlZmluaXRpb24gPSBkZWZpbml0aW9uLCAgLy8vXG4gICAgICAgICAgcmVwbGFjZW1lbnREZWZpbml0aW9uID0gUmVwbGFjZW1lbnREZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREaXJlY3RseVJlcGVhdGVkUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGRpcmVjdGx5UmVwZWF0ZWRSdWxlKTtcblxuICAgIGRlZmluaXRpb24gPSByZXBsYWNlbWVudERlZmluaXRpb247IC8vL1xuXG4gICAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgZGVmaW5pdGlvbiwgZGlyZWN0bHkpOyAgLy8vXG5cbiAgICBydWxlLnJlcGxhY2VEZWZpbml0aW9uKHJlcGxhY2VkRGVmaW5pdGlvbiwgcmVwbGFjZW1lbnREZWZpbml0aW9uKTtcblxuICAgIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG4gIH0pO1xuXG4gIHJldHVybiBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGNvbnRleHQpIHtcbiAgbGV0IGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCB7IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgfSA9IGNvbnRleHQ7XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucy5mb3JFYWNoKChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBpZiAoZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPT09IG51bGwpIHtcbiAgICAgIGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5HcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0dyZWF0ZXJUaGFuKGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKTtcblxuICAgICAgaWYgKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkdyZWF0ZXJUaGFuR3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgICAgICAgZ3JlYXRlc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247IC8vL1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuIl0sIm5hbWVzIjpbImVsaW1pbmF0ZUluZGlyZWN0TGVmdFJlY3Vyc2lvbiIsImNvdW50IiwiY29udGV4dCIsImdyZWF0ZXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV0cmlldmVHcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJ1bGUiLCJnZXRSdWxlIiwiZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZURpcmVjdExlZnRSZWN1cnNpb24iLCJyZXdyaXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiSW5maW5pdHkiLCJkaXJlY3RseVJlZHVjZVJ1bGUiLCJkaXNhbGxvd0lzb2xhdGVkIiwiZGlyZWN0bHlSZWR1Y2VkUnVsZSIsIkRpcmVjdGx5UmVkdWNlUnVsZU9wZXJhdGlvbiIsImV4ZWN1dGUiLCJkaXJlY3RseVJlcGVhdFJ1bGUiLCJkaXJlY3RseVJlcGVhdGVkUnVsZSIsIkRpcmVjdGx5UmVwZWF0UnVsZU9wZXJhdGlvbiIsImluZGlyZWN0bHlSZWR1Y2VSdWxlIiwiaW5kaXJlY3RseVJlZHVjZWRSdWxlIiwiSW5kaXJlY3RseVJlZHVjZVJ1bGVPcGVyYXRpb24iLCJyZXBsYWNlbWVudERlZmluaXRpb24iLCJSZXBsYWNlbWVudERlZmluaXRpb24iLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kSW5kaXJlY3RseVJlZHVjZWRSdWxlIiwibGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImRlZmluaXRpb24iLCJhZGREZWZpbml0aW9uIiwiaW5kaXJlY3RseVJlcGVhdFJ1bGUiLCJydWxlTWFwIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJ1bGVOYW1lIiwiZ2V0TmFtZSIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImdldExlZnRSZWN1cnNpdmVSdWxlTmFtZSIsImluZGlyZWN0bHlSZXBlYXRlZFJ1bGVOYW1lIiwiaW5kaXJlY3RseVJlcGVhdGVkUnVsZU5hbWVGcm9tUnVsZU5hbWVBbmRMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwiSW5kaXJlY3RseVJlcGVhdGVkUnVsZSIsImZyb21SdWxlTGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lQW5kSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbmREaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImZpbmRJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVtb3ZlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXdyaXRlRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJyZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsImFkZERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwiYWRkSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJyZXdyaXRlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJhZGRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImxlYXN0IiwiaXNMZWFzdCIsImdldERlZmluaXRpb24iLCJkZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwiZGVmaW5pdGlvbnNJbmNsdWRlc0RlZmluaXRpb24iLCJpbmNsdWRlcyIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRpcmVjdGx5UmVwZWF0ZWRSdWxlIiwicmVwbGFjZWREZWZpbml0aW9uIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21SdWxlQW5kRGVmaW5pdGlvbiIsIkluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmREZWZpbml0aW9uIiwicmVwbGFjZURlZmluaXRpb24iLCJtYXAiLCJyZW1vdmVBbGxEZWZpbml0aW9ucyIsImZyb21EaXJlY3RseVJlZHVjZWRSdWxlQW5kRGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJyZXBsYWNlQWxsRGVmaW5pdGlvbnMiLCJhZGREZWZpbml0aW9ucyIsInJlbW92ZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlbW92ZURlZmluaXRpb25zIiwiZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmaXJzdCIsImluZGlyZWN0bHlSZWN1cnNpdmVEZWZpbml0aW9uIiwiZGlyZWN0bHkiLCJmcm9tSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kRGlyZWN0bHlSZXBlYXRlZFJ1bGUiLCJmb3JFYWNoIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uR3JlYXRlclRoYW5HcmVhdGVzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImlzR3JlYXRlclRoYW4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OzsrQkF1QmIsU0FjQzs7O2VBZHVCQSw4QkFBOEI7OzswRUFyQnBCLHlCQUF5QjsrREFDeEIsNEJBQTRCO21FQUN2QixnQ0FBZ0M7bUVBQ2hDLGdDQUFnQztxRUFDOUIsa0NBQWtDOzZEQUNoQyxxQ0FBcUM7Z0VBQ25DLHVDQUF1QztxQkFFL0QsbUJBQW1CO3dCQUNzQyxzQkFBc0I7dUJBUTVDLHFCQUFxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU5RSxJQUFJQyxLQUFLLEdBQUcsQ0FBQyxBQUFDO0FBRUMsU0FBU0QsOEJBQThCLENBQUNFLE9BQU8sRUFBRTtJQUM5RCxJQUFJQyx5Q0FBeUMsR0FBR0MsaURBQWlELENBQUNGLE9BQU8sQ0FBQyxBQUFDO0lBRTNHLE1BQU9DLHlDQUF5QyxLQUFLLElBQUksQ0FBRTtRQUN6RCxJQUFNRSxpQ0FBaUMsR0FBR0YseUNBQXlDLEVBQzdFRyxJQUFJLEdBQUdELGlDQUFpQyxDQUFDRSxPQUFPLEVBQUUsRUFDbERDLCtCQUErQixHQUFHQyxJQUFBQSxRQUFtQyxvQ0FBQSxFQUFDSCxJQUFJLEVBQUVKLE9BQU8sQ0FBQyxBQUFDO1FBRTFGTSwrQkFBK0IsS0FBSyxJQUFJLEdBQ3ZDRSwwQkFBMEIsQ0FBQ0YsK0JBQStCLEVBQUVILGlDQUFpQyxFQUFFSCxPQUFPLENBQUMsR0FDckdTLDRCQUE0QixDQUFDTixpQ0FBaUMsRUFBRUgs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