"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    get: function() {
        return eliminateIndirectLeftRecursion;
    },
    enumerable: true
});
var _necessary = require("necessary");
var _reduced = _interopRequireDefault(require("./rule/reduced"));
var _repeated = _interopRequireDefault(require("./rule/repeated"));
var _left = _interopRequireDefault(require("./definition/recursive/left"));
var _directly = _interopRequireDefault(require("./definition/recursive/left/directly"));
var _indirectly = _interopRequireDefault(require("./definition/recursive/left/indirectly"));
var _rules = require("./utilities/rules");
var _ruleNames = require("./utilities/ruleNames");
var _definitions = require("./utilities/definitions");
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
var first = _necessary.arrayUtilities.first, last = _necessary.arrayUtilities.last;
function eliminateIndirectLeftRecursion(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap);
    indirectlyLeftRecursiveRules.forEach(function(indirectlyLeftRecursiveRule) {
        rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap);
    });
}
function rewriteIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap) {
    var reducedLeftRecursiveDefinition = reduceRule(indirectlyLeftRecursiveRule, ruleMap), leftRecursiveRuleNames = (0, _ruleNames.retrieveLeftRecursiveRuleNames)(indirectlyLeftRecursiveRule, _indirectly.default, function(indirectlyLeftRecursiveDefinition) {
        var leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), leftRecursiveRuleName = firstLeftRecursiveRuleName; ///
        return leftRecursiveRuleName;
    });
    leftRecursiveRuleNames.forEach(function(leftRecursiveRuleName, index) {
        var _rule;
        var indirectlyLeftRecursiveDefinitions = retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, leftRecursiveRuleName), indirectlyLeftRecursiveDefinition = mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions);
        var repeatedRuleName = repeatRule(indirectlyLeftRecursiveDefinition, index, ruleMap);
        var last = indirectlyLeftRecursiveDefinition.isLast(), leftRecursiveDefinition = retrieveLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition), ruleName = leftRecursiveDefinition.getRuleName(), rule = ruleMap[ruleName], replacedDefinition = leftRecursiveDefinition, replacementDefinitions = last ? rewriteDirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) : rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName);
        (_rule = rule).replaceDefinition.apply(_rule, [
            replacedDefinition
        ].concat(_toConsumableArray(replacementDefinitions)));
        if (last) {
            var firstReplacementDefinition = first(replacementDefinitions), leftRecursiveDefinition1 = firstReplacementDefinition; ///
            leftRecursiveDefinitions.push(leftRecursiveDefinition1);
        } else {
            var _$indirectlyLeftRecursiveRule = rule; ///
            rewriteIndirectlyLeftRecursiveRule(_$indirectlyLeftRecursiveRule, leftRecursiveDefinitions, ruleMap);
        }
    });
}
function reduceRule(indirectlyLeftRecursiveRule, ruleMap) {
    var reducedLeftRecursiveDefinition = null;
    var reducedRule = _reduced.default.fromIndirectlyLeftRecursiveRule(indirectlyLeftRecursiveRule);
    if (reducedRule !== null) {
        var indirectlyLeftRecursiveRuleDefinitions = indirectlyLeftRecursiveRule.getDefinitions(), lastIndirectlyLeftRecursiveRuleDefinition = last(indirectlyLeftRecursiveRuleDefinitions);
        reducedLeftRecursiveDefinition = lastIndirectlyLeftRecursiveRuleDefinition; ///
        var reducedRuleName = reducedRule.getName();
        ruleMap[reducedRuleName] = reducedRule;
    }
    return reducedLeftRecursiveDefinition;
}
function repeatRule(indirectlyLeftRecursiveDefinition, index, ruleMap) {
    var repeatedRuleName = null;
    var repeatedRule = _repeated.default.fromIndirectlyLeftRecursiveDefinitionAndIndex(indirectlyLeftRecursiveDefinition, index);
    if (repeatedRule !== null) {
        repeatedRuleName = repeatedRule.getName();
        ruleMap[repeatedRuleName] = repeatedRule;
    }
    return repeatedRuleName;
}
function retrieveLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition) {
    var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions(), lastLeftRecursiveDefinition = last(leftRecursiveDefinitions), leftRecursiveDefinition = lastLeftRecursiveDefinition; ///
    return leftRecursiveDefinition;
}
function retrieveIndirectlyLeftRecursiveRules(leftRecursiveDefinitions, ruleMap) {
    var indirectlyLeftRecursiveRules = (0, _rules.retrieveLeftRecursiveRules)(leftRecursiveDefinitions, _indirectly.default, ruleMap);
    return indirectlyLeftRecursiveRules;
}
function rewriteDirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) {
    var replacementDefinitions = [];
    var directlyLeftRecursiveDefinition;
    directlyLeftRecursiveDefinition = _directly.default.fromIndirectlyLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, repeatedRuleName); ///
    directlyLeftRecursiveDefinition = _directly.default.fromIndirectlyLeftRecursiveDefinitionAndLeftRecursiveDefinition(directlyLeftRecursiveDefinition, leftRecursiveDefinition); ///
    replacementDefinitions.push(directlyLeftRecursiveDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        leftRecursiveDefinition = _left.default.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(leftRecursiveDefinition);
    }
    return replacementDefinitions;
}
function mergeIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveDefinitions) {
    var indirectlyLeftRecursiveDefinition = (0, _definitions.mergeLeftRecursiveDefinitions)(indirectlyLeftRecursiveDefinitions, function(parts, ruleName) {
        var indirectlyLeftRecursiveDefinition;
        var firstIndirectlyLeftRecursiveDefinition = first(indirectlyLeftRecursiveDefinitions);
        indirectlyLeftRecursiveDefinition = firstIndirectlyLeftRecursiveDefinition; ///
        var leftRecursiveDefinitions = indirectlyLeftRecursiveDefinition.getLeftRecursiveDefinitions();
        indirectlyLeftRecursiveDefinition = _indirectly.default.fromPartsRuleNameAndLeftRecursiveDefinitions(parts, ruleName, leftRecursiveDefinitions);
        return indirectlyLeftRecursiveDefinition;
    });
    return indirectlyLeftRecursiveDefinition;
}
function rewriteIndirectlyLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, reducedLeftRecursiveDefinition, leftRecursiveDefinition, repeatedRuleName) {
    var replacementDefinitions = [];
    indirectlyLeftRecursiveDefinition = _indirectly.default.fromIndirectlyLeftRecursiveDefinitionAndRepeatedRuleName(indirectlyLeftRecursiveDefinition, repeatedRuleName); ///
    indirectlyLeftRecursiveDefinition = _indirectly.default.fromIndirectlyLeftRecursiveDefinitionAndLeftRecursiveDefinition(indirectlyLeftRecursiveDefinition, leftRecursiveDefinition); ///
    replacementDefinitions.push(indirectlyLeftRecursiveDefinition);
    if (reducedLeftRecursiveDefinition !== null) {
        leftRecursiveDefinition = _left.default.fromReducedLeftRecursiveDefinitionAndLeftRecursiveDefinition(reducedLeftRecursiveDefinition, leftRecursiveDefinition); ///
        replacementDefinitions.push(leftRecursiveDefinition);
    }
    return replacementDefinitions;
}
function retrieveIndirectlyLeftRecursiveDefinitions(indirectlyLeftRecursiveRule, leftRecursiveRuleName) {
    var indirectlyLeftRecursiveDefinitions = (0, _definitions.retrieveLeftRecursiveDefinitions)(indirectlyLeftRecursiveRule, _indirectly.default, function(indirectlyLeftRecursiveDefinition) {
        var leftRecursiveRuleNames = indirectlyLeftRecursiveDefinition.getLeftRecursiveRuleNames(), firstLeftRecursiveRuleName = first(leftRecursiveRuleNames), ruleName = firstLeftRecursiveRuleName; ///
        if (ruleName === leftRecursiveRuleName) {
            return true;
        }
    });
    return indirectlyLeftRecursiveDefinitions;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgUmVkdWNlZFJ1bGUgZnJvbSBcIi4vcnVsZS9yZWR1Y2VkXCI7XG5pbXBvcnQgUmVwZWF0ZWRSdWxlIGZyb20gXCIuL3J1bGUvcmVwZWF0ZWRcIjtcbmltcG9ydCBMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0XCI7XG5pbXBvcnQgRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiBmcm9tIFwiLi9kZWZpbml0aW9uL3JlY3Vyc2l2ZS9sZWZ0L2RpcmVjdGx5XCI7XG5pbXBvcnQgSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIGZyb20gXCIuL2RlZmluaXRpb24vcmVjdXJzaXZlL2xlZnQvaW5kaXJlY3RseVwiO1xuXG5pbXBvcnQgeyByZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlcyB9IGZyb20gXCIuL3V0aWxpdGllcy9ydWxlc1wiO1xuaW1wb3J0IHsgcmV0cmlldmVMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIH0gZnJvbSBcIi4vdXRpbGl0aWVzL3J1bGVOYW1lc1wiO1xuaW1wb3J0IHsgbWVyZ2VMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2RlZmluaXRpb25zXCI7XG5cbmNvbnN0IHsgZmlyc3QsIGxhc3QgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbGltaW5hdGVJbmRpcmVjdExlZnRSZWN1cnNpb24obGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVzLmZvckVhY2goKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSkgPT4ge1xuICAgIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIHJ1bGVNYXApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZShpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucywgcnVsZU1hcCkge1xuICBjb25zdCByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSByZWR1Y2VSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCksXG4gICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMgPSByZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMoKSxcbiAgICAgICAgICAgICAgICBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0KGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpLFxuICAgICAgICAgICAgICAgIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0TGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lOyAvLy9cblxuICAgICAgICAgIHJldHVybiBsZWZ0UmVjdXJzaXZlUnVsZU5hbWU7XG4gICAgICAgIH0pO1xuXG4gIGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMuZm9yRWFjaCgobGVmdFJlY3Vyc2l2ZVJ1bGVOYW1lLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMgPSByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpLFxuICAgICAgICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIGNvbnN0IHJlcGVhdGVkUnVsZU5hbWUgPSByZXBlYXRSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgaW5kZXgsIHJ1bGVNYXApO1xuXG4gICAgY29uc3QgbGFzdCA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5pc0xhc3QoKSxcbiAgICAgICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IHJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKSxcbiAgICAgICAgICBydWxlTmFtZSA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgcnVsZSA9IHJ1bGVNYXBbcnVsZU5hbWVdLFxuICAgICAgICAgIHJlcGxhY2VkRGVmaW5pdGlvbiA9IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCAvLy9cbiAgICAgICAgICByZXBsYWNlbWVudERlZmluaXRpb25zID0gbGFzdCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24oaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lKTtcblxuICAgIHJ1bGUucmVwbGFjZURlZmluaXRpb24ocmVwbGFjZWREZWZpbml0aW9uLCAuLi5yZXBsYWNlbWVudERlZmluaXRpb25zKTtcblxuICAgIGlmIChsYXN0KSB7XG4gICAgICBjb25zdCBmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbiA9IGZpcnN0KHJlcGxhY2VtZW50RGVmaW5pdGlvbnMpLFxuICAgICAgICAgICAgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdFJlcGxhY2VtZW50RGVmaW5pdGlvbjsgIC8vL1xuXG4gICAgICBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMucHVzaChsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSA9IHJ1bGU7IC8vL1xuXG4gICAgICByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWR1Y2VSdWxlKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZSwgcnVsZU1hcCkge1xuICBsZXQgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbnVsbDtcblxuICBjb25zdCByZWR1Y2VkUnVsZSA9IFJlZHVjZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlKTtcblxuICBpZiAocmVkdWNlZFJ1bGUgIT09IG51bGwpIHtcbiAgICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZS5nZXREZWZpbml0aW9ucygpLFxuICAgICAgICAgIGxhc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9uID0gbGFzdChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9ucyk7XG5cbiAgICByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsYXN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlRGVmaW5pdGlvbjsgLy8vXG5cbiAgICBjb25zdCByZWR1Y2VkUnVsZU5hbWUgPSByZWR1Y2VkUnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3JlZHVjZWRSdWxlTmFtZV0gPSByZWR1Y2VkUnVsZTtcbiAgfVxuXG4gIHJldHVybiByZWR1Y2VkTGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHJlcGVhdFJ1bGUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBpbmRleCwgcnVsZU1hcCkge1xuICBsZXQgcmVwZWF0ZWRSdWxlTmFtZSA9IG51bGw7XG5cbiAgY29uc3QgcmVwZWF0ZWRSdWxlID0gUmVwZWF0ZWRSdWxlLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRJbmRleChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIGluZGV4KVxuXG4gIGlmIChyZXBlYXRlZFJ1bGUgIT09IG51bGwpIHtcbiAgICByZXBlYXRlZFJ1bGVOYW1lID0gcmVwZWF0ZWRSdWxlLmdldE5hbWUoKTtcblxuICAgIHJ1bGVNYXBbcmVwZWF0ZWRSdWxlTmFtZV0gPSByZXBlYXRlZFJ1bGU7XG4gIH1cblxuICByZXR1cm4gcmVwZWF0ZWRSdWxlTmFtZTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pIHtcbiAgY29uc3QgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucygpLFxuICAgICAgICBsYXN0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBsYXN0KGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyksXG4gICAgICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gbGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAgLy8vXG5cbiAgcmV0dXJuIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMobGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zLCBydWxlTWFwKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXMgPSByZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlcyhsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcnVsZU1hcCk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZXM7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSkge1xuICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb25zID0gW107XG5cbiAgbGV0IGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb247XG5cbiAgZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IERpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZFJlcGVhdGVkUnVsZU5hbWUoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCByZXBlYXRlZFJ1bGVOYW1lKTsgIC8vL1xuXG4gIGRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbihkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7ICAvLy9cblxuICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2goZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50RGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIG1lcmdlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKSB7XG4gIGNvbnN0IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IG1lcmdlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMsIChwYXJ0cywgcnVsZU5hbWUpID0+IHtcbiAgICBsZXQgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuXG4gICAgY29uc3QgZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBmaXJzdChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zKTtcblxuICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IGZpcnN0SW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uOyAvLy9cblxuICAgIGNvbnN0IGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyA9IGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5nZXRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoKTtcblxuICAgIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiA9IEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbi5mcm9tUGFydHNSdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhwYXJ0cywgcnVsZU5hbWUsIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyk7XG5cbiAgICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xuICB9KTtcblxuICByZXR1cm4gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uO1xufVxuXG5mdW5jdGlvbiByZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uLCBsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSkge1xuICBjb25zdCByZXBsYWNlbWVudERlZmluaXRpb25zID0gW107XG5cbiAgaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgcmVwZWF0ZWRSdWxlTmFtZSk7ICAvLy9cblxuICBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24gPSBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgcmVwbGFjZW1lbnREZWZpbml0aW9ucy5wdXNoKGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbik7XG5cbiAgaWYgKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgIGxlZnRSZWN1cnNpdmVEZWZpbml0aW9uID0gTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24uZnJvbVJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uKHJlZHVjZWRMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiwgbGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pOyAgLy8vXG5cbiAgICByZXBsYWNlbWVudERlZmluaXRpb25zLnB1c2gobGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VtZW50RGVmaW5pdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyhpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUsIGxlZnRSZWN1cnNpdmVSdWxlTmFtZSkge1xuICBjb25zdCBpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zID0gcmV0cmlldmVMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMoaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlLCBJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24sIChpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBsZWZ0UmVjdXJzaXZlUnVsZU5hbWVzID0gaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uLmdldExlZnRSZWN1cnNpdmVSdWxlTmFtZXMoKSxcbiAgICAgICAgICBmaXJzdExlZnRSZWN1cnNpdmVSdWxlTmFtZSA9IGZpcnN0KGxlZnRSZWN1cnNpdmVSdWxlTmFtZXMpLFxuICAgICAgICAgIHJ1bGVOYW1lID0gZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWU7IC8vL1xuXG4gICAgaWYgKHJ1bGVOYW1lID09PSBsZWZ0UmVjdXJzaXZlUnVsZU5hbWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiZWxpbWluYXRlSW5kaXJlY3RMZWZ0UmVjdXJzaW9uIiwiZmlyc3QiLCJhcnJheVV0aWxpdGllcyIsImxhc3QiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbnMiLCJydWxlTWFwIiwiaW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsInJldHJpZXZlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlcyIsImZvckVhY2giLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJyZXdyaXRlSW5kaXJlY3RseUxlZnRSZWN1cnNpdmVSdWxlIiwicmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmVkdWNlUnVsZSIsImxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJyZXRyaWV2ZUxlZnRSZWN1cnNpdmVSdWxlTmFtZXMiLCJJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJnZXRMZWZ0UmVjdXJzaXZlUnVsZU5hbWVzIiwiZmlyc3RMZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJsZWZ0UmVjdXJzaXZlUnVsZU5hbWUiLCJpbmRleCIsInJ1bGUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmV0cmlldmVJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwibWVyZ2VJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwicmVwZWF0ZWRSdWxlTmFtZSIsInJlcGVhdFJ1bGUiLCJpc0xhc3QiLCJsZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJydWxlTmFtZSIsImdldFJ1bGVOYW1lIiwicmVwbGFjZWREZWZpbml0aW9uIiwicmVwbGFjZW1lbnREZWZpbml0aW9ucyIsInJld3JpdGVEaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV3cml0ZUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsInJlcGxhY2VEZWZpbml0aW9uIiwiZmlyc3RSZXBsYWNlbWVudERlZmluaXRpb24iLCJwdXNoIiwicmVkdWNlZFJ1bGUiLCJSZWR1Y2VkUnVsZSIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGUiLCJpbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZVJ1bGVEZWZpbml0aW9ucyIsImdldERlZmluaXRpb25zIiwibGFzdEluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlUnVsZURlZmluaXRpb24iLCJyZWR1Y2VkUnVsZU5hbWUiLCJnZXROYW1lIiwicmVwZWF0ZWRSdWxlIiwiUmVwZWF0ZWRSdWxlIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZEluZGV4IiwiZ2V0TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIiwibGFzdExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwicmV0cmlldmVMZWZ0UmVjdXJzaXZlUnVsZXMiLCJkaXJlY3RseUxlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiRGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbiIsImZyb21JbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb25BbmRSZXBlYXRlZFJ1bGVOYW1lIiwiZnJvbUluZGlyZWN0bHlMZWZ0UmVjdXJzaXZlRGVmaW5pdGlvbkFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uIiwiTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUmVkdWNlZExlZnRSZWN1cnNpdmVEZWZpbml0aW9uQW5kTGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJtZXJnZUxlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInBhcnRzIiwiZmlyc3RJbmRpcmVjdGx5TGVmdFJlY3Vyc2l2ZURlZmluaXRpb24iLCJmcm9tUGFydHNSdWxlTmFtZUFuZExlZnRSZWN1cnNpdmVEZWZpbml0aW9ucyIsInJldHJpZXZlTGVmdFJlY3Vyc2l2ZURlZmluaXRpb25zIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztlQWdCV0EsOEJBQThCOzs7O3lCQWR2QixXQUFXOzhDQUVsQixnQkFBZ0I7K0NBQ2YsaUJBQWlCOzJDQUNOLDZCQUE2QjsrQ0FDckIsc0NBQXNDO2lEQUNwQyx3Q0FBd0M7cUJBRTNDLG1CQUFtQjt5QkFDZix1QkFBdUI7MkJBQ1UseUJBQXlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXpHLElBQVFDLEtBQUssR0FBV0MsVUFBYyxl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